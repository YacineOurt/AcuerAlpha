{"ast":null,"code":"var _objectSpread = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectSpread\");\n\nvar MapboxDraw = require('@mapbox/mapbox-gl-draw');\n\nvar Constants = require(\"../../lib/utils/constants\");\n\nvar doubleClickZoom = require(\"../../lib/utils/double_click_zoom\");\n\nvar circle = require('@turf/circle').default;\n\nvar CircleMode = _objectSpread({}, MapboxDraw.modes.draw_polygon);\n\nvar DEFAULT_RADIUS_IN_KM = 2;\n\nCircleMode.onSetup = function (opts) {\n  var polygon = this.newFeature({\n    type: Constants.geojsonTypes.FEATURE,\n    properties: {\n      isCircle: true,\n      center: []\n    },\n    geometry: {\n      type: Constants.geojsonTypes.POLYGON,\n      coordinates: [[]]\n    }\n  });\n  this.addFeature(polygon);\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({\n    mouse: Constants.cursors.ADD\n  });\n  this.activateUIButton(Constants.types.POLYGON);\n  this.setActionableState({\n    trash: true\n  });\n  return {\n    initialRadiusInKm: opts.initialRadiusInKm || DEFAULT_RADIUS_IN_KM,\n    polygon: polygon,\n    currentVertexPosition: 0\n  };\n};\n\nCircleMode.clickAnywhere = function (state, e) {\n  if (state.currentVertexPosition === 0) {\n    state.currentVertexPosition++;\n    var center = [e.lngLat.lng, e.lngLat.lat];\n    var circleFeature = circle(center, state.initialRadiusInKm);\n    state.polygon.incomingCoords(circleFeature.geometry.coordinates);\n    state.polygon.properties.center = center;\n    state.polygon.properties.radiusInKm = state.initialRadiusInKm;\n  }\n\n  return this.changeMode(Constants.modes.SIMPLE_SELECT, {\n    featureIds: [state.polygon.id]\n  });\n};\n\nmodule.exports = CircleMode;","map":null,"metadata":{},"sourceType":"script"}