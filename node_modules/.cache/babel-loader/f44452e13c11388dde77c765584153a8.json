{"ast":null,"code":"var MapboxDraw = require('@mapbox/mapbox-gl-draw');\n\nvar createSupplementaryPoints = require(\"../utils/create_supplementary_points\");\n\nvar moveFeatures = require(\"../utils/move_features\");\n\nvar Constants = require(\"../utils/constants\");\n\nvar createSupplementaryPointsForCircle = require('../utils/create_supplementary_points_circle');\n\nvar SimpleSelectModeOverride = MapboxDraw.modes.simple_select;\n\nSimpleSelectModeOverride.dragMove = function (state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n  var delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  moveFeatures(this.getSelected(), delta);\n  this.getSelected().filter(function (feature) {\n    return feature.properties.isCircle;\n  }).map(function (circle) {\n    return circle.properties.center;\n  }).forEach(function (center) {\n    center[0] += delta.lng;\n    center[1] += delta.lat;\n  });\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelectModeOverride.toDisplayFeatures = function (state, geojson, display) {\n  geojson.properties.active = this.isSelected(geojson.properties.id) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE || geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  var supplementaryPoints = geojson.properties.user_isCircle ? createSupplementaryPointsForCircle(geojson) : createSupplementaryPoints(geojson);\n  supplementaryPoints.forEach(display);\n};\n\nmodule.exports = SimpleSelectModeOverride;","map":null,"metadata":{},"sourceType":"script"}