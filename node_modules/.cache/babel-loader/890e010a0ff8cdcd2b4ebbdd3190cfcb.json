{"ast":null,"code":"var _defineProperty = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _assertThisInitialized = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _construct = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/construct\");\n\nvar _get = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get\");\n\nvar _toArray = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toArray\");\n\nvar _toConsumableArray = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray\");\n\nvar _slicedToArray = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _createClass = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _possibleConstructorReturn = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _wrapNativeSuper = require(\"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapNativeSuper\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e321) { throw _e321; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e322) { didErr = true; err = _e322; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/* MapLibre GL JS is licensed under the 3-Clause BSD License. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v2.1.9/LICENSE.txt */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.maplibregl = factory());\n})(this, function () {\n  'use strict';\n  /* eslint-disable */\n\n  var shared, worker, maplibregl; // define gets called three times: one for each chunk. we rely on the order\n  // they're imported to know which is which\n\n  function define(_, chunk) {\n    if (!shared) {\n      shared = chunk;\n    } else if (!worker) {\n      worker = chunk;\n    } else {\n      var workerBundleString = 'var sharedChunk = {}; (' + shared + ')(sharedChunk); (' + worker + ')(sharedChunk);';\n      var sharedChunk = {};\n      shared(sharedChunk);\n      maplibregl = chunk(sharedChunk);\n\n      if (typeof window !== 'undefined') {\n        maplibregl.workerUrl = window.URL.createObjectURL(new Blob([workerBundleString], {\n          type: 'text/javascript'\n        }));\n      }\n    }\n  }\n\n  define([\"exports\"], function (t) {\n    \"use strict\";\n\n    var e = r;\n\n    function r(t, e, r, n) {\n      this.cx = 3 * t, this.bx = 3 * (r - t) - this.cx, this.ax = 1 - this.cx - this.bx, this.cy = 3 * e, this.by = 3 * (n - e) - this.cy, this.ay = 1 - this.cy - this.by, this.p1x = t, this.p1y = e, this.p2x = r, this.p2y = n;\n    }\n\n    function n(t, r, n, i) {\n      var s = new e(t, r, n, i);\n      return function (t) {\n        return s.solve(t);\n      };\n    }\n\n    r.prototype = {\n      sampleCurveX: function sampleCurveX(t) {\n        return ((this.ax * t + this.bx) * t + this.cx) * t;\n      },\n      sampleCurveY: function sampleCurveY(t) {\n        return ((this.ay * t + this.by) * t + this.cy) * t;\n      },\n      sampleCurveDerivativeX: function sampleCurveDerivativeX(t) {\n        return (3 * this.ax * t + 2 * this.bx) * t + this.cx;\n      },\n      solveCurveX: function solveCurveX(t, e) {\n        if (void 0 === e && (e = 1e-6), t < 0) return 0;\n        if (t > 1) return 1;\n\n        for (var r = t, n = 0; n < 8; n++) {\n          var i = this.sampleCurveX(r) - t;\n          if (Math.abs(i) < e) return r;\n          var s = this.sampleCurveDerivativeX(r);\n          if (Math.abs(s) < 1e-6) break;\n          r -= i / s;\n        }\n\n        var a = 0,\n            o = 1;\n\n        for (r = t, n = 0; n < 20 && (i = this.sampleCurveX(r), !(Math.abs(i - t) < e)); n++) {\n          t > i ? a = r : o = r, r = .5 * (o - a) + a;\n        }\n\n        return r;\n      },\n      solve: function solve(t, e) {\n        return this.sampleCurveY(this.solveCurveX(t, e));\n      }\n    };\n    var i = n(.25, .1, .25, 1);\n\n    function s(t, e, r) {\n      return Math.min(r, Math.max(e, t));\n    }\n\n    function a(t, e, r) {\n      var n = r - e,\n          i = ((t - e) % n + n) % n + e;\n      return i === e ? r : i;\n    }\n\n    function o(t) {\n      for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        e[_key - 1] = arguments[_key];\n      }\n\n      for (var _i2 = 0, _e2 = e; _i2 < _e2.length; _i2++) {\n        var _r2 = _e2[_i2];\n\n        for (var _e3 in _r2) {\n          t[_e3] = _r2[_e3];\n        }\n      }\n\n      return t;\n    }\n\n    var l = 1;\n\n    function u(t, e) {\n      t.forEach(function (t) {\n        e[t] && (e[t] = e[t].bind(e));\n      });\n    }\n\n    function c(t, e, r) {\n      var n = {};\n\n      for (var _i3 in t) {\n        n[_i3] = e.call(r || this, t[_i3], _i3, t);\n      }\n\n      return n;\n    }\n\n    function h(t, e, r) {\n      var n = {};\n\n      for (var _i4 in t) {\n        e.call(r || this, t[_i4], _i4, t) && (n[_i4] = t[_i4]);\n      }\n\n      return n;\n    }\n\n    function p(t) {\n      return Array.isArray(t) ? t.map(p) : \"object\" == typeof t && t ? c(t, p) : t;\n    }\n\n    var f = {};\n\n    function d(t) {\n      f[t] || (\"undefined\" != typeof console && console.warn(t), f[t] = !0);\n    }\n\n    function y(t, e, r) {\n      return (r.y - t.y) * (e.x - t.x) > (e.y - t.y) * (r.x - t.x);\n    }\n\n    function m(t) {\n      var e = 0;\n\n      for (var _r3, _n2, _i5 = 0, _s2 = t.length, _a2 = _s2 - 1; _i5 < _s2; _a2 = _i5++) {\n        _r3 = t[_i5], _n2 = t[_a2], e += (_n2.x - _r3.x) * (_r3.y + _n2.y);\n      }\n\n      return e;\n    }\n\n    function g() {\n      return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope;\n    }\n\n    function x(t) {\n      var e = {};\n\n      if (t.replace(/(?:^|(?:\\s*\\,\\s*))([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)(?:\\=(?:([^\\x00-\\x20\\(\\)<>@\\,;\\:\\\\\"\\/\\[\\]\\?\\=\\{\\}\\x7F]+)|(?:\\\"((?:[^\"\\\\]|\\\\.)*)\\\")))?/g, function (t, r, n, i) {\n        var s = n || i;\n        return e[r] = !s || s.toLowerCase(), \"\";\n      }), e[\"max-age\"]) {\n        var _t2 = parseInt(e[\"max-age\"], 10);\n\n        isNaN(_t2) ? delete e[\"max-age\"] : e[\"max-age\"] = _t2;\n      }\n\n      return e;\n    }\n\n    var v,\n        b,\n        w = null;\n\n    function _(t) {\n      if (null == w) {\n        var _e4 = t.navigator ? t.navigator.userAgent : null;\n\n        w = !!t.safari || !(!_e4 || !(/\\b(iPad|iPhone|iPod)\\b/.test(_e4) || _e4.match(\"Safari\") && !_e4.match(\"Chrome\")));\n      }\n\n      return w;\n    }\n\n    function A(t) {\n      return \"undefined\" != typeof ImageBitmap && t instanceof ImageBitmap;\n    }\n\n    var k = {\n      now: \"undefined\" != typeof performance && performance && performance.now ? performance.now.bind(performance) : Date.now.bind(Date),\n      frame: function frame(t) {\n        var e = requestAnimationFrame(t);\n        return {\n          cancel: function cancel() {\n            return cancelAnimationFrame(e);\n          }\n        };\n      },\n      getImageData: function getImageData(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var r = window.document.createElement(\"canvas\"),\n            n = r.getContext(\"2d\");\n        if (!n) throw new Error(\"failed to create canvas 2d context\");\n        return r.width = t.width, r.height = t.height, n.drawImage(t, 0, 0, t.width, t.height), n.getImageData(-e, -e, t.width + 2 * e, t.height + 2 * e);\n      },\n      resolveURL: function resolveURL(t) {\n        return v || (v = document.createElement(\"a\")), v.href = t, v.href;\n      },\n      hardwareConcurrency: \"undefined\" != typeof navigator && navigator.hardwareConcurrency || 4,\n\n      get prefersReducedMotion() {\n        return !!matchMedia && (null == b && (b = matchMedia(\"(prefers-reduced-motion: reduce)\")), b.matches);\n      }\n\n    };\n    var S = z;\n\n    function z(t, e) {\n      this.x = t, this.y = e;\n    }\n\n    z.prototype = {\n      clone: function clone() {\n        return new z(this.x, this.y);\n      },\n      add: function add(t) {\n        return this.clone()._add(t);\n      },\n      sub: function sub(t) {\n        return this.clone()._sub(t);\n      },\n      multByPoint: function multByPoint(t) {\n        return this.clone()._multByPoint(t);\n      },\n      divByPoint: function divByPoint(t) {\n        return this.clone()._divByPoint(t);\n      },\n      mult: function mult(t) {\n        return this.clone()._mult(t);\n      },\n      div: function div(t) {\n        return this.clone()._div(t);\n      },\n      rotate: function rotate(t) {\n        return this.clone()._rotate(t);\n      },\n      rotateAround: function rotateAround(t, e) {\n        return this.clone()._rotateAround(t, e);\n      },\n      matMult: function matMult(t) {\n        return this.clone()._matMult(t);\n      },\n      unit: function unit() {\n        return this.clone()._unit();\n      },\n      perp: function perp() {\n        return this.clone()._perp();\n      },\n      round: function round() {\n        return this.clone()._round();\n      },\n      mag: function mag() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n      },\n      equals: function equals(t) {\n        return this.x === t.x && this.y === t.y;\n      },\n      dist: function dist(t) {\n        return Math.sqrt(this.distSqr(t));\n      },\n      distSqr: function distSqr(t) {\n        var e = t.x - this.x,\n            r = t.y - this.y;\n        return e * e + r * r;\n      },\n      angle: function angle() {\n        return Math.atan2(this.y, this.x);\n      },\n      angleTo: function angleTo(t) {\n        return Math.atan2(this.y - t.y, this.x - t.x);\n      },\n      angleWith: function angleWith(t) {\n        return this.angleWithSep(t.x, t.y);\n      },\n      angleWithSep: function angleWithSep(t, e) {\n        return Math.atan2(this.x * e - this.y * t, this.x * t + this.y * e);\n      },\n      _matMult: function _matMult(t) {\n        var e = t[2] * this.x + t[3] * this.y;\n        return this.x = t[0] * this.x + t[1] * this.y, this.y = e, this;\n      },\n      _add: function _add(t) {\n        return this.x += t.x, this.y += t.y, this;\n      },\n      _sub: function _sub(t) {\n        return this.x -= t.x, this.y -= t.y, this;\n      },\n      _mult: function _mult(t) {\n        return this.x *= t, this.y *= t, this;\n      },\n      _div: function _div(t) {\n        return this.x /= t, this.y /= t, this;\n      },\n      _multByPoint: function _multByPoint(t) {\n        return this.x *= t.x, this.y *= t.y, this;\n      },\n      _divByPoint: function _divByPoint(t) {\n        return this.x /= t.x, this.y /= t.y, this;\n      },\n      _unit: function _unit() {\n        return this._div(this.mag()), this;\n      },\n      _perp: function _perp() {\n        var t = this.y;\n        return this.y = this.x, this.x = -t, this;\n      },\n      _rotate: function _rotate(t) {\n        var e = Math.cos(t),\n            r = Math.sin(t),\n            n = r * this.x + e * this.y;\n        return this.x = e * this.x - r * this.y, this.y = n, this;\n      },\n      _rotateAround: function _rotateAround(t, e) {\n        var r = Math.cos(t),\n            n = Math.sin(t),\n            i = e.y + n * (this.x - e.x) + r * (this.y - e.y);\n        return this.x = e.x + r * (this.x - e.x) - n * (this.y - e.y), this.y = i, this;\n      },\n      _round: function _round() {\n        return this.x = Math.round(this.x), this.y = Math.round(this.y), this;\n      }\n    }, z.convert = function (t) {\n      return t instanceof z ? t : Array.isArray(t) ? new z(t[0], t[1]) : t;\n    };\n    var I = {\n      MAX_PARALLEL_IMAGE_REQUESTS: 16,\n      REGISTERED_PROTOCOLS: {}\n    },\n        M = \"mapbox-tiles\";\n    var B,\n        C,\n        P = 500,\n        V = 50;\n\n    function E() {\n      \"undefined\" == typeof caches || B || (B = caches.open(M));\n    }\n\n    var F = 1 / 0;\n    var T = {\n      supported: !1,\n      testSupport: function testSupport(t) {\n        !$ && D && (R ? U(t) : L = t);\n      }\n    };\n    var L,\n        D,\n        $ = !1,\n        R = !1;\n\n    function U(t) {\n      var e = t.createTexture();\n      t.bindTexture(t.TEXTURE_2D, e);\n\n      try {\n        if (t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, D), t.isContextLost()) return;\n        T.supported = !0;\n      } catch (t) {}\n\n      t.deleteTexture(e), $ = !0;\n    }\n\n    \"undefined\" != typeof document && (D = document.createElement(\"img\"), D.onload = function () {\n      L && U(L), L = null, R = !0;\n    }, D.onerror = function () {\n      $ = !0, L = null;\n    }, D.src = \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=\");\n    var O = {\n      Unknown: \"Unknown\",\n      Style: \"Style\",\n      Source: \"Source\",\n      Tile: \"Tile\",\n      Glyphs: \"Glyphs\",\n      SpriteImage: \"SpriteImage\",\n      SpriteJSON: \"SpriteJSON\",\n      Image: \"Image\"\n    };\n    \"function\" == typeof Object.freeze && Object.freeze(O);\n\n    var q = /*#__PURE__*/function (_Error) {\n      _inherits(q, _Error);\n\n      function q(t, e, r, n) {\n        var _this;\n\n        _classCallCheck(this, q);\n\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(q).call(this, \"AJAXError: \".concat(e, \" (\").concat(t, \"): \").concat(r))), _this.status = t, _this.statusText = e, _this.url = r, _this.body = n;\n        return _this;\n      }\n\n      return q;\n    }(_wrapNativeSuper(Error));\n\n    var j = g() ? function () {\n      return self.worker && self.worker.referrer;\n    } : function () {\n      return (\"blob:\" === window.location.protocol ? window.parent : window).location.href;\n    };\n\n    function N(t, e) {\n      var r = new AbortController(),\n          n = new Request(t.url, {\n        method: t.method || \"GET\",\n        body: t.body,\n        credentials: t.credentials,\n        headers: t.headers,\n        referrer: j(),\n        signal: r.signal\n      });\n      var i = !1,\n          s = !1;\n      \"json\" === t.type && n.headers.set(\"Accept\", \"application/json\");\n      return function (r, a, o) {\n        if (s) return;\n        var l = Date.now();\n        fetch(n).then(function (r) {\n          return r.ok ? function (r, a, o) {\n            (\"arrayBuffer\" === t.type ? r.arrayBuffer() : \"json\" === t.type ? r.json() : r.text()).then(function (t) {\n              s || (a && o && function (t, e, r) {\n                if (E(), !B) return;\n                var n = {\n                  status: e.status,\n                  statusText: e.statusText,\n                  headers: new Headers()\n                };\n                e.headers.forEach(function (t, e) {\n                  return n.headers.set(e, t);\n                });\n                var i = x(e.headers.get(\"Cache-Control\") || \"\");\n                i[\"no-store\"] || (i[\"max-age\"] && n.headers.set(\"Expires\", new Date(r + 1e3 * i[\"max-age\"]).toUTCString()), new Date(n.headers.get(\"Expires\")).getTime() - r < 42e4 || function (t, e) {\n                  if (void 0 === C) try {\n                    new Response(new ReadableStream()), C = !0;\n                  } catch (t) {\n                    C = !1;\n                  }\n                  C ? e(t.body) : t.blob().then(e);\n                }(e, function (e) {\n                  var r = new Response(e, n);\n                  E(), B && B.then(function (e) {\n                    return e.put(function (t) {\n                      var e = t.indexOf(\"?\");\n                      return e < 0 ? t : t.slice(0, e);\n                    }(t.url), r);\n                  }).catch(function (t) {\n                    return d(t.message);\n                  });\n                }));\n              }(n, a, o), i = !0, e(null, t, r.headers.get(\"Cache-Control\"), r.headers.get(\"Expires\")));\n            }).catch(function (t) {\n              s || e(new Error(t.message));\n            });\n          }(r, null, l) : r.blob().then(function (n) {\n            return e(new q(r.status, r.statusText, t.url, n));\n          });\n        }).catch(function (t) {\n          20 !== t.code && e(new Error(t.message));\n        });\n      }(), {\n        cancel: function cancel() {\n          s = !0, i || r.abort();\n        }\n      };\n    }\n\n    var K = function K(t, e) {\n      if (/:\\/\\//.test(t.url) && !/^https?:|^file:/.test(t.url)) {\n        if (g() && self.worker && self.worker.actor) return self.worker.actor.send(\"getResource\", t, e);\n\n        if (!g()) {\n          var _r4 = t.url.substring(0, t.url.indexOf(\"://\"));\n\n          return (I.REGISTERED_PROTOCOLS[_r4] || N)(t, e);\n        }\n      }\n\n      if (!(/^file:/.test(r = t.url) || /^file:/.test(j()) && !/^\\w+:/.test(r))) {\n        if (fetch && Request && AbortController && Object.prototype.hasOwnProperty.call(Request.prototype, \"signal\")) return N(t, e);\n        if (g() && self.worker && self.worker.actor) return self.worker.actor.send(\"getResource\", t, e, void 0, !0);\n      }\n\n      var r;\n      return function (t, e) {\n        var r = new XMLHttpRequest();\n        r.open(t.method || \"GET\", t.url, !0), \"arrayBuffer\" === t.type && (r.responseType = \"arraybuffer\");\n\n        for (var _e5 in t.headers) {\n          r.setRequestHeader(_e5, t.headers[_e5]);\n        }\n\n        return \"json\" === t.type && (r.responseType = \"text\", r.setRequestHeader(\"Accept\", \"application/json\")), r.withCredentials = \"include\" === t.credentials, r.onerror = function () {\n          e(new Error(r.statusText));\n        }, r.onload = function () {\n          if ((r.status >= 200 && r.status < 300 || 0 === r.status) && null !== r.response) {\n            var _n3 = r.response;\n            if (\"json\" === t.type) try {\n              _n3 = JSON.parse(r.response);\n            } catch (t) {\n              return e(t);\n            }\n            e(null, _n3, r.getResponseHeader(\"Cache-Control\"), r.getResponseHeader(\"Expires\"));\n          } else {\n            var _n4 = new Blob([r.response], {\n              type: r.getResponseHeader(\"Content-Type\")\n            });\n\n            e(new q(r.status, r.statusText, t.url, _n4));\n          }\n        }, r.send(t.body), {\n          cancel: function cancel() {\n            return r.abort();\n          }\n        };\n      }(t, e);\n    },\n        Z = function Z(t, e) {\n      return K(o(t, {\n        type: \"arrayBuffer\"\n      }), e);\n    };\n\n    function G(t) {\n      var e = window.document.createElement(\"a\");\n      return e.href = t, e.protocol === window.document.location.protocol && e.host === window.document.location.host;\n    }\n\n    var J = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=\";\n    var X, Y;\n    X = [], Y = 0;\n\n    var H = function H(t, e) {\n      if (T.supported && (t.headers || (t.headers = {}), t.headers.accept = \"image/webp,*/*\"), Y >= I.MAX_PARALLEL_IMAGE_REQUESTS) {\n        var _r5 = {\n          requestParameters: t,\n          callback: e,\n          cancelled: !1,\n          cancel: function cancel() {\n            this.cancelled = !0;\n          }\n        };\n        return X.push(_r5), _r5;\n      }\n\n      Y++;\n      var r = !1;\n\n      var n = function n() {\n        if (!r) for (r = !0, Y--; X.length && Y < I.MAX_PARALLEL_IMAGE_REQUESTS;) {\n          var _t3 = X.shift(),\n              _e6 = _t3.requestParameters,\n              _r6 = _t3.callback,\n              _n5 = _t3.cancelled;\n\n          _n5 || (_t3.cancel = H(_e6, _r6).cancel);\n        }\n      },\n          i = Z(t, function (t, r, i, s) {\n        n(), t ? e(t) : r && function (t, e) {\n          \"function\" == typeof createImageBitmap ? function (t, e) {\n            var r = new Blob([new Uint8Array(t)], {\n              type: \"image/png\"\n            });\n            createImageBitmap(r).then(function (t) {\n              e(null, t);\n            }).catch(function (t) {\n              e(new Error(\"Could not load image because of \".concat(t.message, \". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\")));\n            });\n          }(t, e) : function (t, e) {\n            var r = new Image();\n            r.onload = function () {\n              e(null, r), URL.revokeObjectURL(r.src), r.onload = null, window.requestAnimationFrame(function () {\n                r.src = J;\n              });\n            }, r.onerror = function () {\n              return e(new Error(\"Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.\"));\n            };\n            var n = new Blob([new Uint8Array(t)], {\n              type: \"image/png\"\n            });\n            r.src = t.byteLength ? URL.createObjectURL(n) : J;\n          }(t, e);\n        }(r, function (t, r) {\n          null != t ? e(t) : null != r && e(null, r, {\n            cacheControl: i,\n            expires: s\n          });\n        });\n      });\n\n      return {\n        cancel: function cancel() {\n          i.cancel(), n();\n        }\n      };\n    };\n\n    function W(t, e, r) {\n      r[t] && -1 !== r[t].indexOf(e) || (r[t] = r[t] || [], r[t].push(e));\n    }\n\n    function Q(t, e, r) {\n      if (r && r[t]) {\n        var _n6 = r[t].indexOf(e);\n\n        -1 !== _n6 && r[t].splice(_n6, 1);\n      }\n    }\n\n    var tt = function tt(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, tt);\n\n      o(this, e), this.type = t;\n    };\n\n    var et = /*#__PURE__*/function (_tt) {\n      _inherits(et, _tt);\n\n      function et(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, et);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(et).call(this, \"error\", o({\n          error: t\n        }, e)));\n      }\n\n      return et;\n    }(tt);\n\n    var rt = /*#__PURE__*/function () {\n      function rt() {\n        _classCallCheck(this, rt);\n      }\n\n      _createClass(rt, [{\n        key: \"on\",\n        value: function on(t, e) {\n          return this._listeners = this._listeners || {}, W(t, e, this._listeners), this;\n        }\n      }, {\n        key: \"off\",\n        value: function off(t, e) {\n          return Q(t, e, this._listeners), Q(t, e, this._oneTimeListeners), this;\n        }\n      }, {\n        key: \"once\",\n        value: function once(t, e) {\n          return this._oneTimeListeners = this._oneTimeListeners || {}, W(t, e, this._oneTimeListeners), this;\n        }\n      }, {\n        key: \"fire\",\n        value: function fire(t, e) {\n          \"string\" == typeof t && (t = new tt(t, e || {}));\n          var r = t.type;\n\n          if (this.listens(r)) {\n            t.target = this;\n\n            var _e7 = this._listeners && this._listeners[r] ? this._listeners[r].slice() : [];\n\n            var _iterator = _createForOfIteratorHelper(_e7),\n                _step;\n\n            try {\n              for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                var _r7 = _step.value;\n\n                _r7.call(this, t);\n              }\n            } catch (err) {\n              _iterator.e(err);\n            } finally {\n              _iterator.f();\n            }\n\n            var _n7 = this._oneTimeListeners && this._oneTimeListeners[r] ? this._oneTimeListeners[r].slice() : [];\n\n            var _iterator2 = _createForOfIteratorHelper(_n7),\n                _step2;\n\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                var _e8 = _step2.value;\n                Q(r, _e8, this._oneTimeListeners), _e8.call(this, t);\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n\n            var _i6 = this._eventedParent;\n            _i6 && (o(t, \"function\" == typeof this._eventedParentData ? this._eventedParentData() : this._eventedParentData), _i6.fire(t));\n          } else t instanceof et && console.error(t.error);\n\n          return this;\n        }\n      }, {\n        key: \"listens\",\n        value: function listens(t) {\n          return this._listeners && this._listeners[t] && this._listeners[t].length > 0 || this._oneTimeListeners && this._oneTimeListeners[t] && this._oneTimeListeners[t].length > 0 || this._eventedParent && this._eventedParent.listens(t);\n        }\n      }, {\n        key: \"setEventedParent\",\n        value: function setEventedParent(t, e) {\n          return this._eventedParent = t, this._eventedParentData = e, this;\n        }\n      }]);\n\n      return rt;\n    }();\n\n    var nt = {\n      $version: 8,\n      $root: {\n        version: {\n          required: !0,\n          type: \"enum\",\n          values: [8]\n        },\n        name: {\n          type: \"string\"\n        },\n        metadata: {\n          type: \"*\"\n        },\n        center: {\n          type: \"array\",\n          value: \"number\"\n        },\n        zoom: {\n          type: \"number\"\n        },\n        bearing: {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\"\n        },\n        pitch: {\n          type: \"number\",\n          default: 0,\n          units: \"degrees\"\n        },\n        light: {\n          type: \"light\"\n        },\n        sources: {\n          required: !0,\n          type: \"sources\"\n        },\n        sprite: {\n          type: \"string\"\n        },\n        glyphs: {\n          type: \"string\"\n        },\n        transition: {\n          type: \"transition\"\n        },\n        layers: {\n          required: !0,\n          type: \"array\",\n          value: \"layer\"\n        }\n      },\n      sources: {\n        \"*\": {\n          type: \"source\"\n        }\n      },\n      source: [\"source_vector\", \"source_raster\", \"source_raster_dem\", \"source_geojson\", \"source_video\", \"source_image\"],\n      source_vector: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            vector: {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        scheme: {\n          type: \"enum\",\n          values: {\n            xyz: {},\n            tms: {}\n          },\n          default: \"xyz\"\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        attribution: {\n          type: \"string\"\n        },\n        promoteId: {\n          type: \"promoteId\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_raster: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            raster: {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        tileSize: {\n          type: \"number\",\n          default: 512,\n          units: \"pixels\"\n        },\n        scheme: {\n          type: \"enum\",\n          values: {\n            xyz: {},\n            tms: {}\n          },\n          default: \"xyz\"\n        },\n        attribution: {\n          type: \"string\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_raster_dem: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            \"raster-dem\": {}\n          }\n        },\n        url: {\n          type: \"string\"\n        },\n        tiles: {\n          type: \"array\",\n          value: \"string\"\n        },\n        bounds: {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [-180, -85.051129, 180, 85.051129]\n        },\n        minzoom: {\n          type: \"number\",\n          default: 0\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 22\n        },\n        tileSize: {\n          type: \"number\",\n          default: 512,\n          units: \"pixels\"\n        },\n        attribution: {\n          type: \"string\"\n        },\n        encoding: {\n          type: \"enum\",\n          values: {\n            terrarium: {},\n            mapbox: {}\n          },\n          default: \"mapbox\"\n        },\n        volatile: {\n          type: \"boolean\",\n          default: !1\n        },\n        \"*\": {\n          type: \"*\"\n        }\n      },\n      source_geojson: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            geojson: {}\n          }\n        },\n        data: {\n          type: \"*\"\n        },\n        maxzoom: {\n          type: \"number\",\n          default: 18\n        },\n        attribution: {\n          type: \"string\"\n        },\n        buffer: {\n          type: \"number\",\n          default: 128,\n          maximum: 512,\n          minimum: 0\n        },\n        filter: {\n          type: \"*\"\n        },\n        tolerance: {\n          type: \"number\",\n          default: .375\n        },\n        cluster: {\n          type: \"boolean\",\n          default: !1\n        },\n        clusterRadius: {\n          type: \"number\",\n          default: 50,\n          minimum: 0\n        },\n        clusterMaxZoom: {\n          type: \"number\"\n        },\n        clusterMinPoints: {\n          type: \"number\"\n        },\n        clusterProperties: {\n          type: \"*\"\n        },\n        lineMetrics: {\n          type: \"boolean\",\n          default: !1\n        },\n        generateId: {\n          type: \"boolean\",\n          default: !1\n        },\n        promoteId: {\n          type: \"promoteId\"\n        }\n      },\n      source_video: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            video: {}\n          }\n        },\n        urls: {\n          required: !0,\n          type: \"array\",\n          value: \"string\"\n        },\n        coordinates: {\n          required: !0,\n          type: \"array\",\n          length: 4,\n          value: {\n            type: \"array\",\n            length: 2,\n            value: \"number\"\n          }\n        }\n      },\n      source_image: {\n        type: {\n          required: !0,\n          type: \"enum\",\n          values: {\n            image: {}\n          }\n        },\n        url: {\n          required: !0,\n          type: \"string\"\n        },\n        coordinates: {\n          required: !0,\n          type: \"array\",\n          length: 4,\n          value: {\n            type: \"array\",\n            length: 2,\n            value: \"number\"\n          }\n        }\n      },\n      layer: {\n        id: {\n          type: \"string\",\n          required: !0\n        },\n        type: {\n          type: \"enum\",\n          values: {\n            fill: {},\n            line: {},\n            symbol: {},\n            circle: {},\n            heatmap: {},\n            \"fill-extrusion\": {},\n            raster: {},\n            hillshade: {},\n            background: {}\n          },\n          required: !0\n        },\n        metadata: {\n          type: \"*\"\n        },\n        source: {\n          type: \"string\"\n        },\n        \"source-layer\": {\n          type: \"string\"\n        },\n        minzoom: {\n          type: \"number\",\n          minimum: 0,\n          maximum: 24\n        },\n        maxzoom: {\n          type: \"number\",\n          minimum: 0,\n          maximum: 24\n        },\n        filter: {\n          type: \"filter\"\n        },\n        layout: {\n          type: \"layout\"\n        },\n        paint: {\n          type: \"paint\"\n        }\n      },\n      layout: [\"layout_fill\", \"layout_line\", \"layout_circle\", \"layout_heatmap\", \"layout_fill-extrusion\", \"layout_symbol\", \"layout_raster\", \"layout_hillshade\", \"layout_background\"],\n      layout_background: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_fill: {\n        \"fill-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_circle: {\n        \"circle-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_heatmap: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      \"layout_fill-extrusion\": {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_line: {\n        \"line-cap\": {\n          type: \"enum\",\n          values: {\n            butt: {},\n            round: {},\n            square: {}\n          },\n          default: \"butt\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-join\": {\n          type: \"enum\",\n          values: {\n            bevel: {},\n            round: {},\n            miter: {}\n          },\n          default: \"miter\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-miter-limit\": {\n          type: \"number\",\n          default: 2,\n          requires: [{\n            \"line-join\": \"miter\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-round-limit\": {\n          type: \"number\",\n          default: 1.05,\n          requires: [{\n            \"line-join\": \"round\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_symbol: {\n        \"symbol-placement\": {\n          type: \"enum\",\n          values: {\n            point: {},\n            line: {},\n            \"line-center\": {}\n          },\n          default: \"point\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-spacing\": {\n          type: \"number\",\n          default: 250,\n          minimum: 1,\n          units: \"pixels\",\n          requires: [{\n            \"symbol-placement\": \"line\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-avoid-edges\": {\n          type: \"boolean\",\n          default: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"symbol-sort-key\": {\n          type: \"number\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"symbol-z-order\": {\n          type: \"enum\",\n          values: {\n            auto: {},\n            \"viewport-y\": {},\n            source: {}\n          },\n          default: \"auto\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-allow-overlap\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", {\n            \"!\": \"icon-overlap\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-overlap\": {\n          type: \"enum\",\n          values: {\n            never: {},\n            always: {},\n            cooperative: {}\n          },\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-ignore-placement\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-optional\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", \"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-rotation-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-size\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          units: \"factor of the original icon size\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-text-fit\": {\n          type: \"enum\",\n          values: {\n            none: {},\n            width: {},\n            height: {},\n            both: {}\n          },\n          default: \"none\",\n          requires: [\"icon-image\", \"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-text-fit-padding\": {\n          type: \"array\",\n          value: \"number\",\n          length: 4,\n          default: [0, 0, 0, 0],\n          units: \"pixels\",\n          requires: [\"icon-image\", \"text-field\", {\n            \"icon-text-fit\": [\"both\", \"width\", \"height\"]\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-image\": {\n          type: \"resolvedImage\",\n          tokens: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-padding\": {\n          type: \"number\",\n          default: 2,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-keep-upright\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"icon-image\", {\n            \"icon-rotation-alignment\": \"map\"\n          }, {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-offset\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-anchor\": {\n          type: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          default: \"center\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-rotation-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {},\n            \"viewport-glyph\": {},\n            auto: {}\n          },\n          default: \"auto\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-field\": {\n          type: \"formatted\",\n          default: \"\",\n          tokens: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-font\": {\n          type: \"array\",\n          value: \"string\",\n          default: [\"Open Sans Regular\", \"Arial Unicode MS Regular\"],\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-size\": {\n          type: \"number\",\n          default: 16,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-max-width\": {\n          type: \"number\",\n          default: 10,\n          minimum: 0,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-line-height\": {\n          type: \"number\",\n          default: 1.2,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-letter-spacing\": {\n          type: \"number\",\n          default: 0,\n          units: \"ems\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-justify\": {\n          type: \"enum\",\n          values: {\n            auto: {},\n            left: {},\n            center: {},\n            right: {}\n          },\n          default: \"center\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-radial-offset\": {\n          type: \"number\",\n          units: \"ems\",\n          default: 0,\n          requires: [\"text-field\"],\n          \"property-type\": \"data-driven\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          }\n        },\n        \"text-variable-anchor\": {\n          type: \"array\",\n          value: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"point\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-anchor\": {\n          type: \"enum\",\n          values: {\n            center: {},\n            left: {},\n            right: {},\n            top: {},\n            bottom: {},\n            \"top-left\": {},\n            \"top-right\": {},\n            \"bottom-left\": {},\n            \"bottom-right\": {}\n          },\n          default: \"center\",\n          requires: [\"text-field\", {\n            \"!\": \"text-variable-anchor\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-max-angle\": {\n          type: \"number\",\n          default: 45,\n          units: \"degrees\",\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-writing-mode\": {\n          type: \"array\",\n          value: \"enum\",\n          values: {\n            horizontal: {},\n            vertical: {}\n          },\n          requires: [\"text-field\", {\n            \"symbol-placement\": [\"point\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          units: \"degrees\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-padding\": {\n          type: \"number\",\n          default: 2,\n          minimum: 0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-keep-upright\": {\n          type: \"boolean\",\n          default: !0,\n          requires: [\"text-field\", {\n            \"text-rotation-alignment\": \"map\"\n          }, {\n            \"symbol-placement\": [\"line\", \"line-center\"]\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-transform\": {\n          type: \"enum\",\n          values: {\n            none: {},\n            uppercase: {},\n            lowercase: {}\n          },\n          default: \"none\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-offset\": {\n          type: \"array\",\n          value: \"number\",\n          units: \"ems\",\n          length: 2,\n          default: [0, 0],\n          requires: [\"text-field\", {\n            \"!\": \"text-radial-offset\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-allow-overlap\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\", {\n            \"!\": \"text-overlap\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-overlap\": {\n          type: \"enum\",\n          values: {\n            never: {},\n            always: {},\n            cooperative: {}\n          },\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-ignore-placement\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-optional\": {\n          type: \"boolean\",\n          default: !1,\n          requires: [\"text-field\", \"icon-image\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_raster: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      layout_hillshade: {\n        visibility: {\n          type: \"enum\",\n          values: {\n            visible: {},\n            none: {}\n          },\n          default: \"visible\",\n          \"property-type\": \"constant\"\n        }\n      },\n      filter: {\n        type: \"array\",\n        value: \"*\"\n      },\n      filter_operator: {\n        type: \"enum\",\n        values: {\n          \"==\": {},\n          \"!=\": {},\n          \">\": {},\n          \">=\": {},\n          \"<\": {},\n          \"<=\": {},\n          in: {},\n          \"!in\": {},\n          all: {},\n          any: {},\n          none: {},\n          has: {},\n          \"!has\": {},\n          within: {}\n        }\n      },\n      geometry_type: {\n        type: \"enum\",\n        values: {\n          Point: {},\n          LineString: {},\n          Polygon: {}\n        }\n      },\n      function: {\n        expression: {\n          type: \"expression\"\n        },\n        stops: {\n          type: \"array\",\n          value: \"function_stop\"\n        },\n        base: {\n          type: \"number\",\n          default: 1,\n          minimum: 0\n        },\n        property: {\n          type: \"string\",\n          default: \"$zoom\"\n        },\n        type: {\n          type: \"enum\",\n          values: {\n            identity: {},\n            exponential: {},\n            interval: {},\n            categorical: {}\n          },\n          default: \"exponential\"\n        },\n        colorSpace: {\n          type: \"enum\",\n          values: {\n            rgb: {},\n            lab: {},\n            hcl: {}\n          },\n          default: \"rgb\"\n        },\n        default: {\n          type: \"*\",\n          required: !1\n        }\n      },\n      function_stop: {\n        type: \"array\",\n        minimum: 0,\n        maximum: 24,\n        value: [\"number\", \"color\"],\n        length: 2\n      },\n      expression: {\n        type: \"array\",\n        value: \"*\",\n        minimum: 1\n      },\n      light: {\n        anchor: {\n          type: \"enum\",\n          default: \"viewport\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          \"property-type\": \"data-constant\",\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          }\n        },\n        position: {\n          type: \"array\",\n          default: [1.15, 210, 30],\n          length: 3,\n          value: \"number\",\n          \"property-type\": \"data-constant\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          }\n        },\n        color: {\n          type: \"color\",\n          \"property-type\": \"data-constant\",\n          default: \"#ffffff\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        },\n        intensity: {\n          type: \"number\",\n          \"property-type\": \"data-constant\",\n          default: .5,\n          minimum: 0,\n          maximum: 1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          transition: !0\n        }\n      },\n      paint: [\"paint_fill\", \"paint_line\", \"paint_circle\", \"paint_heatmap\", \"paint_fill-extrusion\", \"paint_symbol\", \"paint_raster\", \"paint_hillshade\", \"paint_background\"],\n      paint_fill: {\n        \"fill-antialias\": {\n          type: \"boolean\",\n          default: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-outline-color\": {\n          type: \"color\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-pattern\"\n          }, {\n            \"fill-antialias\": !0\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"fill-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        }\n      },\n      \"paint_fill-extrusion\": {\n        \"fill-extrusion-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"fill-extrusion-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"fill-extrusion-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"fill-extrusion-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        },\n        \"fill-extrusion-height\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"meters\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-base\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"meters\",\n          transition: !0,\n          requires: [\"fill-extrusion-height\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"fill-extrusion-vertical-gradient\": {\n          type: \"boolean\",\n          default: !0,\n          transition: !1,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_line: {\n        \"line-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"line-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"line-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"line-width\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-gap-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-offset\": {\n          type: \"number\",\n          default: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"line-dasharray\": {\n          type: \"array\",\n          value: \"number\",\n          minimum: 0,\n          transition: !0,\n          units: \"line widths\",\n          requires: [{\n            \"!\": \"line-pattern\"\n          }],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"cross-faded\"\n        },\n        \"line-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\", \"feature\"]\n          },\n          \"property-type\": \"cross-faded-data-driven\"\n        },\n        \"line-gradient\": {\n          type: \"color\",\n          transition: !1,\n          requires: [{\n            \"!\": \"line-dasharray\"\n          }, {\n            \"!\": \"line-pattern\"\n          }, {\n            source: \"geojson\",\n            has: {\n              lineMetrics: !0\n            }\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"line-progress\"]\n          },\n          \"property-type\": \"color-ramp\"\n        }\n      },\n      paint_circle: {\n        \"circle-radius\": {\n          type: \"number\",\n          default: 5,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-blur\": {\n          type: \"number\",\n          default: 0,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"circle-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-pitch-scale\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-pitch-alignment\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"viewport\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"circle-stroke-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-stroke-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"circle-stroke-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        }\n      },\n      paint_heatmap: {\n        \"heatmap-radius\": {\n          type: \"number\",\n          default: 30,\n          minimum: 1,\n          transition: !0,\n          units: \"pixels\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"heatmap-weight\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"heatmap-intensity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"heatmap-color\": {\n          type: \"color\",\n          default: [\"interpolate\", [\"linear\"], [\"heatmap-density\"], 0, \"rgba(0, 0, 255, 0)\", .1, \"royalblue\", .3, \"cyan\", .5, \"lime\", .7, \"yellow\", 1, \"red\"],\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"heatmap-density\"]\n          },\n          \"property-type\": \"color-ramp\"\n        },\n        \"heatmap-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_symbol: {\n        \"icon-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-color\": {\n          type: \"color\",\n          default: \"rgba(0, 0, 0, 0)\",\n          transition: !0,\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-halo-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"icon-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"icon-image\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"icon-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"icon-image\", \"icon-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          overridable: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-color\": {\n          type: \"color\",\n          default: \"rgba(0, 0, 0, 0)\",\n          transition: !0,\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-width\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-halo-blur\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\", \"feature\", \"feature-state\"]\n          },\n          \"property-type\": \"data-driven\"\n        },\n        \"text-translate\": {\n          type: \"array\",\n          value: \"number\",\n          length: 2,\n          default: [0, 0],\n          transition: !0,\n          units: \"pixels\",\n          requires: [\"text-field\"],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"text-translate-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"map\",\n          requires: [\"text-field\", \"text-translate\"],\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_raster: {\n        \"raster-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-hue-rotate\": {\n          type: \"number\",\n          default: 0,\n          period: 360,\n          transition: !0,\n          units: \"degrees\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-brightness-min\": {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-brightness-max\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-saturation\": {\n          type: \"number\",\n          default: 0,\n          minimum: -1,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-contrast\": {\n          type: \"number\",\n          default: 0,\n          minimum: -1,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-resampling\": {\n          type: \"enum\",\n          values: {\n            linear: {},\n            nearest: {}\n          },\n          default: \"linear\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"raster-fade-duration\": {\n          type: \"number\",\n          default: 300,\n          minimum: 0,\n          transition: !1,\n          units: \"milliseconds\",\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_hillshade: {\n        \"hillshade-illumination-direction\": {\n          type: \"number\",\n          default: 335,\n          minimum: 0,\n          maximum: 359,\n          transition: !1,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-illumination-anchor\": {\n          type: \"enum\",\n          values: {\n            map: {},\n            viewport: {}\n          },\n          default: \"viewport\",\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-exaggeration\": {\n          type: \"number\",\n          default: .5,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-shadow-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-highlight-color\": {\n          type: \"color\",\n          default: \"#FFFFFF\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"hillshade-accent-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      paint_background: {\n        \"background-color\": {\n          type: \"color\",\n          default: \"#000000\",\n          transition: !0,\n          requires: [{\n            \"!\": \"background-pattern\"\n          }],\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        },\n        \"background-pattern\": {\n          type: \"resolvedImage\",\n          transition: !0,\n          expression: {\n            interpolated: !1,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"cross-faded\"\n        },\n        \"background-opacity\": {\n          type: \"number\",\n          default: 1,\n          minimum: 0,\n          maximum: 1,\n          transition: !0,\n          expression: {\n            interpolated: !0,\n            parameters: [\"zoom\"]\n          },\n          \"property-type\": \"data-constant\"\n        }\n      },\n      transition: {\n        duration: {\n          type: \"number\",\n          default: 300,\n          minimum: 0,\n          units: \"milliseconds\"\n        },\n        delay: {\n          type: \"number\",\n          default: 0,\n          minimum: 0,\n          units: \"milliseconds\"\n        }\n      },\n      \"property-type\": {\n        \"data-driven\": {\n          type: \"property-type\"\n        },\n        \"cross-faded\": {\n          type: \"property-type\"\n        },\n        \"cross-faded-data-driven\": {\n          type: \"property-type\"\n        },\n        \"color-ramp\": {\n          type: \"property-type\"\n        },\n        \"data-constant\": {\n          type: \"property-type\"\n        },\n        constant: {\n          type: \"property-type\"\n        }\n      },\n      promoteId: {\n        \"*\": {\n          type: \"string\"\n        }\n      }\n    };\n\n    var it = function it(t, e, r, n) {\n      _classCallCheck(this, it);\n\n      this.message = (t ? \"\".concat(t, \": \") : \"\") + r, n && (this.identifier = n), null != e && e.__line__ && (this.line = e.__line__);\n    };\n\n    function st(t) {\n      var e = t.value;\n      return e ? [new it(t.key, e, \"constants have been deprecated as of v8\")] : [];\n    }\n\n    function at(t) {\n      for (var _len2 = arguments.length, e = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n        e[_key2 - 1] = arguments[_key2];\n      }\n\n      for (var _i7 = 0, _e9 = e; _i7 < _e9.length; _i7++) {\n        var _r8 = _e9[_i7];\n\n        for (var _e10 in _r8) {\n          t[_e10] = _r8[_e10];\n        }\n      }\n\n      return t;\n    }\n\n    function ot(t) {\n      return t instanceof Number || t instanceof String || t instanceof Boolean ? t.valueOf() : t;\n    }\n\n    function lt(t) {\n      if (Array.isArray(t)) return t.map(lt);\n\n      if (t instanceof Object && !(t instanceof Number || t instanceof String || t instanceof Boolean)) {\n        var _e11 = {};\n\n        for (var _r9 in t) {\n          _e11[_r9] = lt(t[_r9]);\n        }\n\n        return _e11;\n      }\n\n      return ot(t);\n    }\n\n    var ut = /*#__PURE__*/function (_Error2) {\n      _inherits(ut, _Error2);\n\n      function ut(t, e) {\n        var _this2;\n\n        _classCallCheck(this, ut);\n\n        _this2 = _possibleConstructorReturn(this, _getPrototypeOf(ut).call(this, e)), _this2.message = e, _this2.key = t;\n        return _this2;\n      }\n\n      return ut;\n    }(_wrapNativeSuper(Error));\n\n    var ct = /*#__PURE__*/function () {\n      function ct(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        _classCallCheck(this, ct);\n\n        this.parent = t, this.bindings = {};\n\n        var _iterator3 = _createForOfIteratorHelper(e),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _step3$value = _slicedToArray(_step3.value, 2),\n                _t4 = _step3$value[0],\n                _r10 = _step3$value[1];\n\n            this.bindings[_t4] = _r10;\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      }\n\n      _createClass(ct, [{\n        key: \"concat\",\n        value: function concat(t) {\n          return new ct(this, t);\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          if (this.bindings[t]) return this.bindings[t];\n          if (this.parent) return this.parent.get(t);\n          throw new Error(\"\".concat(t, \" not found in scope.\"));\n        }\n      }, {\n        key: \"has\",\n        value: function has(t) {\n          return !!this.bindings[t] || !!this.parent && this.parent.has(t);\n        }\n      }]);\n\n      return ct;\n    }();\n\n    var ht = {\n      kind: \"null\"\n    },\n        pt = {\n      kind: \"number\"\n    },\n        ft = {\n      kind: \"string\"\n    },\n        dt = {\n      kind: \"boolean\"\n    },\n        yt = {\n      kind: \"color\"\n    },\n        mt = {\n      kind: \"object\"\n    },\n        gt = {\n      kind: \"value\"\n    },\n        xt = {\n      kind: \"collator\"\n    },\n        vt = {\n      kind: \"formatted\"\n    },\n        bt = {\n      kind: \"resolvedImage\"\n    };\n\n    function wt(t, e) {\n      return {\n        kind: \"array\",\n        itemType: t,\n        N: e\n      };\n    }\n\n    function _t(t) {\n      if (\"array\" === t.kind) {\n        var _e12 = _t(t.itemType);\n\n        return \"number\" == typeof t.N ? \"array<\".concat(_e12, \", \").concat(t.N, \">\") : \"value\" === t.itemType.kind ? \"array\" : \"array<\".concat(_e12, \">\");\n      }\n\n      return t.kind;\n    }\n\n    var At = [ht, pt, ft, dt, yt, vt, mt, wt(gt), bt];\n\n    function kt(t, e) {\n      if (\"error\" === e.kind) return null;\n\n      if (\"array\" === t.kind) {\n        if (\"array\" === e.kind && (0 === e.N && \"value\" === e.itemType.kind || !kt(t.itemType, e.itemType)) && (\"number\" != typeof t.N || t.N === e.N)) return null;\n      } else {\n        if (t.kind === e.kind) return null;\n\n        if (\"value\" === t.kind) {\n          var _iterator4 = _createForOfIteratorHelper(At),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _t5 = _step4.value;\n              if (!kt(_t5, e)) return null;\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n        }\n      }\n\n      return \"Expected \".concat(_t(t), \" but found \").concat(_t(e), \" instead.\");\n    }\n\n    function St(t, e) {\n      return e.some(function (e) {\n        return e.kind === t.kind;\n      });\n    }\n\n    function zt(t, e) {\n      return e.some(function (e) {\n        return \"null\" === e ? null === t : \"array\" === e ? Array.isArray(t) : \"object\" === e ? t && !Array.isArray(t) && \"object\" == typeof t : e === typeof t;\n      });\n    }\n\n    var It,\n        Mt = {\n      transparent: [0, 0, 0, 0],\n      aliceblue: [240, 248, 255, 1],\n      antiquewhite: [250, 235, 215, 1],\n      aqua: [0, 255, 255, 1],\n      aquamarine: [127, 255, 212, 1],\n      azure: [240, 255, 255, 1],\n      beige: [245, 245, 220, 1],\n      bisque: [255, 228, 196, 1],\n      black: [0, 0, 0, 1],\n      blanchedalmond: [255, 235, 205, 1],\n      blue: [0, 0, 255, 1],\n      blueviolet: [138, 43, 226, 1],\n      brown: [165, 42, 42, 1],\n      burlywood: [222, 184, 135, 1],\n      cadetblue: [95, 158, 160, 1],\n      chartreuse: [127, 255, 0, 1],\n      chocolate: [210, 105, 30, 1],\n      coral: [255, 127, 80, 1],\n      cornflowerblue: [100, 149, 237, 1],\n      cornsilk: [255, 248, 220, 1],\n      crimson: [220, 20, 60, 1],\n      cyan: [0, 255, 255, 1],\n      darkblue: [0, 0, 139, 1],\n      darkcyan: [0, 139, 139, 1],\n      darkgoldenrod: [184, 134, 11, 1],\n      darkgray: [169, 169, 169, 1],\n      darkgreen: [0, 100, 0, 1],\n      darkgrey: [169, 169, 169, 1],\n      darkkhaki: [189, 183, 107, 1],\n      darkmagenta: [139, 0, 139, 1],\n      darkolivegreen: [85, 107, 47, 1],\n      darkorange: [255, 140, 0, 1],\n      darkorchid: [153, 50, 204, 1],\n      darkred: [139, 0, 0, 1],\n      darksalmon: [233, 150, 122, 1],\n      darkseagreen: [143, 188, 143, 1],\n      darkslateblue: [72, 61, 139, 1],\n      darkslategray: [47, 79, 79, 1],\n      darkslategrey: [47, 79, 79, 1],\n      darkturquoise: [0, 206, 209, 1],\n      darkviolet: [148, 0, 211, 1],\n      deeppink: [255, 20, 147, 1],\n      deepskyblue: [0, 191, 255, 1],\n      dimgray: [105, 105, 105, 1],\n      dimgrey: [105, 105, 105, 1],\n      dodgerblue: [30, 144, 255, 1],\n      firebrick: [178, 34, 34, 1],\n      floralwhite: [255, 250, 240, 1],\n      forestgreen: [34, 139, 34, 1],\n      fuchsia: [255, 0, 255, 1],\n      gainsboro: [220, 220, 220, 1],\n      ghostwhite: [248, 248, 255, 1],\n      gold: [255, 215, 0, 1],\n      goldenrod: [218, 165, 32, 1],\n      gray: [128, 128, 128, 1],\n      green: [0, 128, 0, 1],\n      greenyellow: [173, 255, 47, 1],\n      grey: [128, 128, 128, 1],\n      honeydew: [240, 255, 240, 1],\n      hotpink: [255, 105, 180, 1],\n      indianred: [205, 92, 92, 1],\n      indigo: [75, 0, 130, 1],\n      ivory: [255, 255, 240, 1],\n      khaki: [240, 230, 140, 1],\n      lavender: [230, 230, 250, 1],\n      lavenderblush: [255, 240, 245, 1],\n      lawngreen: [124, 252, 0, 1],\n      lemonchiffon: [255, 250, 205, 1],\n      lightblue: [173, 216, 230, 1],\n      lightcoral: [240, 128, 128, 1],\n      lightcyan: [224, 255, 255, 1],\n      lightgoldenrodyellow: [250, 250, 210, 1],\n      lightgray: [211, 211, 211, 1],\n      lightgreen: [144, 238, 144, 1],\n      lightgrey: [211, 211, 211, 1],\n      lightpink: [255, 182, 193, 1],\n      lightsalmon: [255, 160, 122, 1],\n      lightseagreen: [32, 178, 170, 1],\n      lightskyblue: [135, 206, 250, 1],\n      lightslategray: [119, 136, 153, 1],\n      lightslategrey: [119, 136, 153, 1],\n      lightsteelblue: [176, 196, 222, 1],\n      lightyellow: [255, 255, 224, 1],\n      lime: [0, 255, 0, 1],\n      limegreen: [50, 205, 50, 1],\n      linen: [250, 240, 230, 1],\n      magenta: [255, 0, 255, 1],\n      maroon: [128, 0, 0, 1],\n      mediumaquamarine: [102, 205, 170, 1],\n      mediumblue: [0, 0, 205, 1],\n      mediumorchid: [186, 85, 211, 1],\n      mediumpurple: [147, 112, 219, 1],\n      mediumseagreen: [60, 179, 113, 1],\n      mediumslateblue: [123, 104, 238, 1],\n      mediumspringgreen: [0, 250, 154, 1],\n      mediumturquoise: [72, 209, 204, 1],\n      mediumvioletred: [199, 21, 133, 1],\n      midnightblue: [25, 25, 112, 1],\n      mintcream: [245, 255, 250, 1],\n      mistyrose: [255, 228, 225, 1],\n      moccasin: [255, 228, 181, 1],\n      navajowhite: [255, 222, 173, 1],\n      navy: [0, 0, 128, 1],\n      oldlace: [253, 245, 230, 1],\n      olive: [128, 128, 0, 1],\n      olivedrab: [107, 142, 35, 1],\n      orange: [255, 165, 0, 1],\n      orangered: [255, 69, 0, 1],\n      orchid: [218, 112, 214, 1],\n      palegoldenrod: [238, 232, 170, 1],\n      palegreen: [152, 251, 152, 1],\n      paleturquoise: [175, 238, 238, 1],\n      palevioletred: [219, 112, 147, 1],\n      papayawhip: [255, 239, 213, 1],\n      peachpuff: [255, 218, 185, 1],\n      peru: [205, 133, 63, 1],\n      pink: [255, 192, 203, 1],\n      plum: [221, 160, 221, 1],\n      powderblue: [176, 224, 230, 1],\n      purple: [128, 0, 128, 1],\n      rebeccapurple: [102, 51, 153, 1],\n      red: [255, 0, 0, 1],\n      rosybrown: [188, 143, 143, 1],\n      royalblue: [65, 105, 225, 1],\n      saddlebrown: [139, 69, 19, 1],\n      salmon: [250, 128, 114, 1],\n      sandybrown: [244, 164, 96, 1],\n      seagreen: [46, 139, 87, 1],\n      seashell: [255, 245, 238, 1],\n      sienna: [160, 82, 45, 1],\n      silver: [192, 192, 192, 1],\n      skyblue: [135, 206, 235, 1],\n      slateblue: [106, 90, 205, 1],\n      slategray: [112, 128, 144, 1],\n      slategrey: [112, 128, 144, 1],\n      snow: [255, 250, 250, 1],\n      springgreen: [0, 255, 127, 1],\n      steelblue: [70, 130, 180, 1],\n      tan: [210, 180, 140, 1],\n      teal: [0, 128, 128, 1],\n      thistle: [216, 191, 216, 1],\n      tomato: [255, 99, 71, 1],\n      turquoise: [64, 224, 208, 1],\n      violet: [238, 130, 238, 1],\n      wheat: [245, 222, 179, 1],\n      white: [255, 255, 255, 1],\n      whitesmoke: [245, 245, 245, 1],\n      yellow: [255, 255, 0, 1],\n      yellowgreen: [154, 205, 50, 1]\n    };\n\n    function Bt(t) {\n      return (t = Math.round(t)) < 0 ? 0 : t > 255 ? 255 : t;\n    }\n\n    function Ct(t) {\n      return Bt(\"%\" === t[t.length - 1] ? parseFloat(t) / 100 * 255 : parseInt(t));\n    }\n\n    function Pt(t) {\n      return (e = \"%\" === t[t.length - 1] ? parseFloat(t) / 100 : parseFloat(t)) < 0 ? 0 : e > 1 ? 1 : e;\n      var e;\n    }\n\n    function Vt(t, e, r) {\n      return r < 0 ? r += 1 : r > 1 && (r -= 1), 6 * r < 1 ? t + (e - t) * r * 6 : 2 * r < 1 ? e : 3 * r < 2 ? t + (e - t) * (2 / 3 - r) * 6 : t;\n    }\n\n    try {\n      It = {}.parseCSSColor = function (t) {\n        var e,\n            r = t.replace(/ /g, \"\").toLowerCase();\n        if (r in Mt) return Mt[r].slice();\n        if (\"#\" === r[0]) return 4 === r.length ? (e = parseInt(r.substr(1), 16)) >= 0 && e <= 4095 ? [(3840 & e) >> 4 | (3840 & e) >> 8, 240 & e | (240 & e) >> 4, 15 & e | (15 & e) << 4, 1] : null : 7 === r.length && (e = parseInt(r.substr(1), 16)) >= 0 && e <= 16777215 ? [(16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 1] : null;\n        var n = r.indexOf(\"(\"),\n            i = r.indexOf(\")\");\n\n        if (-1 !== n && i + 1 === r.length) {\n          var s = r.substr(0, n),\n              a = r.substr(n + 1, i - (n + 1)).split(\",\"),\n              o = 1;\n\n          switch (s) {\n            case \"rgba\":\n              if (4 !== a.length) return null;\n              o = Pt(a.pop());\n\n            case \"rgb\":\n              return 3 !== a.length ? null : [Ct(a[0]), Ct(a[1]), Ct(a[2]), o];\n\n            case \"hsla\":\n              if (4 !== a.length) return null;\n              o = Pt(a.pop());\n\n            case \"hsl\":\n              if (3 !== a.length) return null;\n              var l = (parseFloat(a[0]) % 360 + 360) % 360 / 360,\n                  u = Pt(a[1]),\n                  c = Pt(a[2]),\n                  h = c <= .5 ? c * (u + 1) : c + u - c * u,\n                  p = 2 * c - h;\n              return [Bt(255 * Vt(p, h, l + 1 / 3)), Bt(255 * Vt(p, h, l)), Bt(255 * Vt(p, h, l - 1 / 3)), o];\n\n            default:\n              return null;\n          }\n        }\n\n        return null;\n      };\n    } catch (t) {}\n\n    var Et = /*#__PURE__*/function () {\n      function Et(t, e, r) {\n        var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n\n        _classCallCheck(this, Et);\n\n        this.r = t, this.g = e, this.b = r, this.a = n;\n      }\n\n      _createClass(Et, [{\n        key: \"toString\",\n        value: function toString() {\n          var _this$toArray = this.toArray(),\n              _this$toArray2 = _slicedToArray(_this$toArray, 4),\n              t = _this$toArray2[0],\n              e = _this$toArray2[1],\n              r = _this$toArray2[2],\n              n = _this$toArray2[3];\n\n          return \"rgba(\".concat(Math.round(t), \",\").concat(Math.round(e), \",\").concat(Math.round(r), \",\").concat(n, \")\");\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          var t = this.r,\n              e = this.g,\n              r = this.b,\n              n = this.a;\n          return 0 === n ? [0, 0, 0, 0] : [255 * t / n, 255 * e / n, 255 * r / n, n];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t) {\n          if (!t) return;\n          if (t instanceof Et) return t;\n          if (\"string\" != typeof t) return;\n          var e = It(t);\n          return e ? new Et(e[0] / 255 * e[3], e[1] / 255 * e[3], e[2] / 255 * e[3], e[3]) : void 0;\n        }\n      }]);\n\n      return Et;\n    }();\n\n    Et.black = new Et(0, 0, 0, 1), Et.white = new Et(1, 1, 1, 1), Et.transparent = new Et(0, 0, 0, 0), Et.red = new Et(1, 0, 0, 1);\n\n    var Ft = /*#__PURE__*/function () {\n      function Ft(t, e, r) {\n        _classCallCheck(this, Ft);\n\n        this.sensitivity = t ? e ? \"variant\" : \"case\" : e ? \"accent\" : \"base\", this.locale = r, this.collator = new Intl.Collator(this.locale ? this.locale : [], {\n          sensitivity: this.sensitivity,\n          usage: \"search\"\n        });\n      }\n\n      _createClass(Ft, [{\n        key: \"compare\",\n        value: function compare(t, e) {\n          return this.collator.compare(t, e);\n        }\n      }, {\n        key: \"resolvedLocale\",\n        value: function resolvedLocale() {\n          return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;\n        }\n      }]);\n\n      return Ft;\n    }();\n\n    var Tt = function Tt(t, e, r, n, i) {\n      _classCallCheck(this, Tt);\n\n      this.text = t, this.image = e, this.scale = r, this.fontStack = n, this.textColor = i;\n    };\n\n    var Lt = /*#__PURE__*/function () {\n      function Lt(t) {\n        _classCallCheck(this, Lt);\n\n        this.sections = t;\n      }\n\n      _createClass(Lt, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.sections.length || !this.sections.some(function (t) {\n            return 0 !== t.text.length || t.image && 0 !== t.image.name.length;\n          });\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return 0 === this.sections.length ? \"\" : this.sections.map(function (t) {\n            return t.text;\n          }).join(\"\");\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"format\"];\n\n          var _iterator5 = _createForOfIteratorHelper(this.sections),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _e13 = _step5.value;\n\n              if (_e13.image) {\n                t.push([\"image\", _e13.image.name]);\n                continue;\n              }\n\n              t.push(_e13.text);\n              var _r11 = {};\n              _e13.fontStack && (_r11[\"text-font\"] = [\"literal\", _e13.fontStack.split(\",\")]), _e13.scale && (_r11[\"font-scale\"] = _e13.scale), _e13.textColor && (_r11[\"text-color\"] = [\"rgba\"].concat(_e13.textColor.toArray())), t.push(_r11);\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          return t;\n        }\n      }], [{\n        key: \"fromString\",\n        value: function fromString(t) {\n          return new Lt([new Tt(t, null, null, null, null)]);\n        }\n      }, {\n        key: \"factory\",\n        value: function factory(t) {\n          return t instanceof Lt ? t : Lt.fromString(t);\n        }\n      }]);\n\n      return Lt;\n    }();\n\n    var Dt = /*#__PURE__*/function () {\n      function Dt(t) {\n        _classCallCheck(this, Dt);\n\n        this.name = t.name, this.available = t.available;\n      }\n\n      _createClass(Dt, [{\n        key: \"toString\",\n        value: function toString() {\n          return this.name;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"image\", this.name];\n        }\n      }], [{\n        key: \"fromString\",\n        value: function fromString(t) {\n          return t ? new Dt({\n            name: t,\n            available: !1\n          }) : null;\n        }\n      }]);\n\n      return Dt;\n    }();\n\n    function $t(t, e, r, n) {\n      return \"number\" == typeof t && t >= 0 && t <= 255 && \"number\" == typeof e && e >= 0 && e <= 255 && \"number\" == typeof r && r >= 0 && r <= 255 ? void 0 === n || \"number\" == typeof n && n >= 0 && n <= 1 ? null : \"Invalid rgba value [\".concat([t, e, r, n].join(\", \"), \"]: 'a' must be between 0 and 1.\") : \"Invalid rgba value [\".concat((\"number\" == typeof n ? [t, e, r, n] : [t, e, r]).join(\", \"), \"]: 'r', 'g', and 'b' must be between 0 and 255.\");\n    }\n\n    function Rt(t) {\n      if (null === t) return !0;\n      if (\"string\" == typeof t) return !0;\n      if (\"boolean\" == typeof t) return !0;\n      if (\"number\" == typeof t) return !0;\n      if (t instanceof Et) return !0;\n      if (t instanceof Ft) return !0;\n      if (t instanceof Lt) return !0;\n      if (t instanceof Dt) return !0;\n\n      if (Array.isArray(t)) {\n        var _iterator6 = _createForOfIteratorHelper(t),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var _e14 = _step6.value;\n            if (!Rt(_e14)) return !1;\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n\n        return !0;\n      }\n\n      if (\"object\" == typeof t) {\n        for (var _e15 in t) {\n          if (!Rt(t[_e15])) return !1;\n        }\n\n        return !0;\n      }\n\n      return !1;\n    }\n\n    function Ut(t) {\n      if (null === t) return ht;\n      if (\"string\" == typeof t) return ft;\n      if (\"boolean\" == typeof t) return dt;\n      if (\"number\" == typeof t) return pt;\n      if (t instanceof Et) return yt;\n      if (t instanceof Ft) return xt;\n      if (t instanceof Lt) return vt;\n      if (t instanceof Dt) return bt;\n\n      if (Array.isArray(t)) {\n        var _e16 = t.length;\n\n        var _r12;\n\n        var _iterator7 = _createForOfIteratorHelper(t),\n            _step7;\n\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var _e17 = _step7.value;\n\n            var _t6 = Ut(_e17);\n\n            if (_r12) {\n              if (_r12 === _t6) continue;\n              _r12 = gt;\n              break;\n            }\n\n            _r12 = _t6;\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n\n        return wt(_r12 || gt, _e16);\n      }\n\n      return mt;\n    }\n\n    function Ot(t) {\n      var e = typeof t;\n      return null === t ? \"\" : \"string\" === e || \"number\" === e || \"boolean\" === e ? String(t) : t instanceof Et || t instanceof Lt || t instanceof Dt ? t.toString() : JSON.stringify(t);\n    }\n\n    var qt = /*#__PURE__*/function () {\n      function qt(t, e) {\n        _classCallCheck(this, qt);\n\n        this.type = t, this.value = e;\n      }\n\n      _createClass(qt, [{\n        key: \"evaluate\",\n        value: function evaluate() {\n          return this.value;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return \"array\" === this.type.kind || \"object\" === this.type.kind ? [\"literal\", this.value] : this.value instanceof Et ? [\"rgba\"].concat(this.value.toArray()) : this.value instanceof Lt ? this.value.serialize() : this.value;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"'literal' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n          if (!Rt(t[1])) return e.error(\"invalid value\");\n          var r = t[1];\n          var n = Ut(r);\n          var i = e.expectedType;\n          return \"array\" !== n.kind || 0 !== n.N || !i || \"array\" !== i.kind || \"number\" == typeof i.N && 0 !== i.N || (n = i), new qt(n, r);\n        }\n      }]);\n\n      return qt;\n    }();\n\n    var jt = /*#__PURE__*/function () {\n      function jt(t) {\n        _classCallCheck(this, jt);\n\n        this.name = \"ExpressionEvaluationError\", this.message = t;\n      }\n\n      _createClass(jt, [{\n        key: \"toJSON\",\n        value: function toJSON() {\n          return this.message;\n        }\n      }]);\n\n      return jt;\n    }();\n\n    var Nt = {\n      string: ft,\n      number: pt,\n      boolean: dt,\n      object: mt\n    };\n\n    var Kt = /*#__PURE__*/function () {\n      function Kt(t, e) {\n        _classCallCheck(this, Kt);\n\n        this.type = t, this.args = e;\n      }\n\n      _createClass(Kt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          for (var _e18 = 0; _e18 < this.args.length; _e18++) {\n            var _r13 = this.args[_e18].evaluate(t);\n\n            if (!kt(this.type, Ut(_r13))) return _r13;\n            if (_e18 === this.args.length - 1) throw new jt(\"Expected value to be of type \".concat(_t(this.type), \", but found \").concat(_t(Ut(_r13)), \" instead.\"));\n          }\n\n          return null;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = this.type,\n              e = [t.kind];\n\n          if (\"array\" === t.kind) {\n            var _r14 = t.itemType;\n\n            if (\"string\" === _r14.kind || \"number\" === _r14.kind || \"boolean\" === _r14.kind) {\n              e.push(_r14.kind);\n              var _n8 = t.N;\n              (\"number\" == typeof _n8 || this.args.length > 1) && e.push(_n8);\n            }\n          }\n\n          return e.concat(this.args.map(function (t) {\n            return t.serialize();\n          }));\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r,\n              n = 1;\n          var i = t[0];\n\n          if (\"array\" === i) {\n            var _i8, _s3;\n\n            if (t.length > 2) {\n              var _r15 = t[1];\n              if (\"string\" != typeof _r15 || !(_r15 in Nt) || \"object\" === _r15) return e.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n              _i8 = Nt[_r15], n++;\n            } else _i8 = gt;\n\n            if (t.length > 3) {\n              if (null !== t[2] && (\"number\" != typeof t[2] || t[2] < 0 || t[2] !== Math.floor(t[2]))) return e.error('The length argument to \"array\" must be a positive integer literal', 2);\n              _s3 = t[2], n++;\n            }\n\n            r = wt(_i8, _s3);\n          } else r = Nt[i];\n\n          var s = [];\n\n          for (; n < t.length; n++) {\n            var _r16 = e.parse(t[n], n, gt);\n\n            if (!_r16) return null;\n            s.push(_r16);\n          }\n\n          return new Kt(r, s);\n        }\n      }]);\n\n      return Kt;\n    }();\n\n    var Zt = /*#__PURE__*/function () {\n      function Zt(t) {\n        _classCallCheck(this, Zt);\n\n        this.type = vt, this.sections = t;\n      }\n\n      _createClass(Zt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Lt(this.sections.map(function (e) {\n            var r = e.content.evaluate(t);\n            return Ut(r) === bt ? new Tt(\"\", r, null, null, null) : new Tt(Ot(r), null, e.scale ? e.scale.evaluate(t) : null, e.font ? e.font.evaluate(t).join(\",\") : null, e.textColor ? e.textColor.evaluate(t) : null);\n          }));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator8 = _createForOfIteratorHelper(this.sections),\n              _step8;\n\n          try {\n            for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n              var _e19 = _step8.value;\n              t(_e19.content), _e19.scale && t(_e19.scale), _e19.font && t(_e19.font), _e19.textColor && t(_e19.textColor);\n            }\n          } catch (err) {\n            _iterator8.e(err);\n          } finally {\n            _iterator8.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"format\"];\n\n          var _iterator9 = _createForOfIteratorHelper(this.sections),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _e20 = _step9.value;\n              t.push(_e20.content.serialize());\n              var _r17 = {};\n              _e20.scale && (_r17[\"font-scale\"] = _e20.scale.serialize()), _e20.font && (_r17[\"text-font\"] = _e20.font.serialize()), _e20.textColor && (_r17[\"text-color\"] = _e20.textColor.serialize()), t.push(_r17);\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n\n          return t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r = t[1];\n          if (!Array.isArray(r) && \"object\" == typeof r) return e.error(\"First argument must be an image or text section.\");\n          var n = [];\n          var i = !1;\n\n          for (var _r18 = 1; _r18 <= t.length - 1; ++_r18) {\n            var _s4 = t[_r18];\n\n            if (i && \"object\" == typeof _s4 && !Array.isArray(_s4)) {\n              i = !1;\n              var _t7 = null;\n              if (_s4[\"font-scale\"] && (_t7 = e.parse(_s4[\"font-scale\"], 1, pt), !_t7)) return null;\n              var _r19 = null;\n              if (_s4[\"text-font\"] && (_r19 = e.parse(_s4[\"text-font\"], 1, wt(ft)), !_r19)) return null;\n              var _a3 = null;\n              if (_s4[\"text-color\"] && (_a3 = e.parse(_s4[\"text-color\"], 1, yt), !_a3)) return null;\n              var _o2 = n[n.length - 1];\n              _o2.scale = _t7, _o2.font = _r19, _o2.textColor = _a3;\n            } else {\n              var _s5 = e.parse(t[_r18], 1, gt);\n\n              if (!_s5) return null;\n              var _a4 = _s5.type.kind;\n              if (\"string\" !== _a4 && \"value\" !== _a4 && \"null\" !== _a4 && \"resolvedImage\" !== _a4) return e.error(\"Formatted text type must be 'string', 'value', 'image' or 'null'.\");\n              i = !0, n.push({\n                content: _s5,\n                scale: null,\n                font: null,\n                textColor: null\n              });\n            }\n          }\n\n          return new Zt(n);\n        }\n      }]);\n\n      return Zt;\n    }();\n\n    var Gt = /*#__PURE__*/function () {\n      function Gt(t) {\n        _classCallCheck(this, Gt);\n\n        this.type = bt, this.input = t;\n      }\n\n      _createClass(Gt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t),\n              r = Dt.fromString(e);\n          return r && t.availableImages && (r.available = t.availableImages.indexOf(e) > -1), r;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"image\", this.input.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected two arguments.\");\n          var r = e.parse(t[1], 1, ft);\n          return r ? new Gt(r) : e.error(\"No image name provided.\");\n        }\n      }]);\n\n      return Gt;\n    }();\n\n    var Jt = {\n      \"to-boolean\": dt,\n      \"to-color\": yt,\n      \"to-number\": pt,\n      \"to-string\": ft\n    };\n\n    var Xt = /*#__PURE__*/function () {\n      function Xt(t, e) {\n        _classCallCheck(this, Xt);\n\n        this.type = t, this.args = e;\n      }\n\n      _createClass(Xt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (\"boolean\" === this.type.kind) return Boolean(this.args[0].evaluate(t));\n\n          if (\"color\" === this.type.kind) {\n            var _e21, _r20;\n\n            var _iterator10 = _createForOfIteratorHelper(this.args),\n                _step10;\n\n            try {\n              for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n                var _n9 = _step10.value;\n                if (_e21 = _n9.evaluate(t), _r20 = null, _e21 instanceof Et) return _e21;\n\n                if (\"string\" == typeof _e21) {\n                  var _r21 = t.parseColor(_e21);\n\n                  if (_r21) return _r21;\n                } else if (Array.isArray(_e21) && (_r20 = _e21.length < 3 || _e21.length > 4 ? \"Invalid rbga value \".concat(JSON.stringify(_e21), \": expected an array containing either three or four numeric values.\") : $t(_e21[0], _e21[1], _e21[2], _e21[3]), !_r20)) return new Et(_e21[0] / 255, _e21[1] / 255, _e21[2] / 255, _e21[3]);\n              }\n            } catch (err) {\n              _iterator10.e(err);\n            } finally {\n              _iterator10.f();\n            }\n\n            throw new jt(_r20 || \"Could not parse color from value '\".concat(\"string\" == typeof _e21 ? _e21 : String(JSON.stringify(_e21)), \"'\"));\n          }\n\n          if (\"number\" === this.type.kind) {\n            var _e22 = null;\n\n            var _iterator11 = _createForOfIteratorHelper(this.args),\n                _step11;\n\n            try {\n              for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n                var _r22 = _step11.value;\n                if (_e22 = _r22.evaluate(t), null === _e22) return 0;\n\n                var _n10 = Number(_e22);\n\n                if (!isNaN(_n10)) return _n10;\n              }\n            } catch (err) {\n              _iterator11.e(err);\n            } finally {\n              _iterator11.f();\n            }\n\n            throw new jt(\"Could not convert \".concat(JSON.stringify(_e22), \" to number.\"));\n          }\n\n          return \"formatted\" === this.type.kind ? Lt.fromString(Ot(this.args[0].evaluate(t))) : \"resolvedImage\" === this.type.kind ? Dt.fromString(Ot(this.args[0].evaluate(t))) : Ot(this.args[0].evaluate(t));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          if (\"formatted\" === this.type.kind) return new Zt([{\n            content: this.args[0],\n            scale: null,\n            font: null,\n            textColor: null\n          }]).serialize();\n          if (\"resolvedImage\" === this.type.kind) return new Gt(this.args[0]).serialize();\n          var t = [\"to-\".concat(this.type.kind)];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expected at least one argument.\");\n          var r = t[0];\n          if ((\"to-boolean\" === r || \"to-string\" === r) && 2 !== t.length) return e.error(\"Expected one argument.\");\n          var n = Jt[r],\n              i = [];\n\n          for (var _r23 = 1; _r23 < t.length; _r23++) {\n            var _n11 = e.parse(t[_r23], _r23, gt);\n\n            if (!_n11) return null;\n            i.push(_n11);\n          }\n\n          return new Xt(n, i);\n        }\n      }]);\n\n      return Xt;\n    }();\n\n    var Yt = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"];\n\n    var Ht = /*#__PURE__*/function () {\n      function Ht() {\n        _classCallCheck(this, Ht);\n\n        this.globals = null, this.feature = null, this.featureState = null, this.formattedSection = null, this._parseColorCache = {}, this.availableImages = null, this.canonical = null;\n      }\n\n      _createClass(Ht, [{\n        key: \"id\",\n        value: function id() {\n          return this.feature && \"id\" in this.feature ? this.feature.id : null;\n        }\n      }, {\n        key: \"geometryType\",\n        value: function geometryType() {\n          return this.feature ? \"number\" == typeof this.feature.type ? Yt[this.feature.type] : this.feature.type : null;\n        }\n      }, {\n        key: \"geometry\",\n        value: function geometry() {\n          return this.feature && \"geometry\" in this.feature ? this.feature.geometry : null;\n        }\n      }, {\n        key: \"canonicalID\",\n        value: function canonicalID() {\n          return this.canonical;\n        }\n      }, {\n        key: \"properties\",\n        value: function properties() {\n          return this.feature && this.feature.properties || {};\n        }\n      }, {\n        key: \"parseColor\",\n        value: function parseColor(t) {\n          var e = this._parseColorCache[t];\n          return e || (e = this._parseColorCache[t] = Et.parse(t)), e;\n        }\n      }]);\n\n      return Ht;\n    }();\n\n    var Wt = /*#__PURE__*/function () {\n      function Wt(t, e, r, n) {\n        _classCallCheck(this, Wt);\n\n        this.name = t, this.type = e, this._evaluate = r, this.args = n;\n      }\n\n      _createClass(Wt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this._evaluate(t, this.args);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [this.name].concat(this.args.map(function (t) {\n            return t.serialize();\n          }));\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          var _e$errors;\n\n          var r = t[0],\n              n = Wt.definitions[r];\n          if (!n) return e.error(\"Unknown expression \\\"\".concat(r, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n          var i = Array.isArray(n) ? n[0] : n.type,\n              s = Array.isArray(n) ? [[n[1], n[2]]] : n.overloads,\n              a = s.filter(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 1),\n                e = _ref2[0];\n\n            return !Array.isArray(e) || e.length === t.length - 1;\n          });\n          var o = null;\n\n          var _iterator12 = _createForOfIteratorHelper(a),\n              _step12;\n\n          try {\n            for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n              var _step12$value = _slicedToArray(_step12.value, 2),\n                  _n13 = _step12$value[0],\n                  _s6 = _step12$value[1];\n\n              o = new we(e.registry, e.path, null, e.scope);\n              var _a5 = [];\n\n              var _l2 = !1;\n\n              for (var _e23 = 1; _e23 < t.length; _e23++) {\n                var _r26 = t[_e23],\n                    _i10 = Array.isArray(_n13) ? _n13[_e23 - 1] : _n13.type,\n                    _s7 = o.parse(_r26, 1 + _a5.length, _i10);\n\n                if (!_s7) {\n                  _l2 = !0;\n                  break;\n                }\n\n                _a5.push(_s7);\n              }\n\n              if (!_l2) if (Array.isArray(_n13) && _n13.length !== _a5.length) o.error(\"Expected \".concat(_n13.length, \" arguments, but found \").concat(_a5.length, \" instead.\"));else {\n                for (var _t8 = 0; _t8 < _a5.length; _t8++) {\n                  var _e24 = Array.isArray(_n13) ? _n13[_t8] : _n13.type,\n                      _r27 = _a5[_t8];\n\n                  o.concat(_t8 + 1).checkSubtype(_e24, _r27.type);\n                }\n\n                if (0 === o.errors.length) return new Wt(r, i, _s6, _a5);\n              }\n            }\n          } catch (err) {\n            _iterator12.e(err);\n          } finally {\n            _iterator12.f();\n          }\n\n          if (1 === a.length) (_e$errors = e.errors).push.apply(_e$errors, _toConsumableArray(o.errors));else {\n            var _r24 = (a.length ? a : s).map(function (_ref3) {\n              var _ref4 = _slicedToArray(_ref3, 1),\n                  t = _ref4[0];\n\n              return e = t, Array.isArray(e) ? \"(\".concat(e.map(_t).join(\", \"), \")\") : \"(\".concat(_t(e.type), \"...)\");\n              var e;\n            }).join(\" | \"),\n                _n12 = [];\n\n            for (var _r25 = 1; _r25 < t.length; _r25++) {\n              var _i9 = e.parse(t[_r25], 1 + _n12.length);\n\n              if (!_i9) return null;\n\n              _n12.push(_t(_i9.type));\n            }\n\n            e.error(\"Expected arguments of type \".concat(_r24, \", but found (\").concat(_n12.join(\", \"), \") instead.\"));\n          }\n          return null;\n        }\n      }, {\n        key: \"register\",\n        value: function register(t, e) {\n          Wt.definitions = e;\n\n          for (var _r28 in e) {\n            t[_r28] = Wt;\n          }\n        }\n      }]);\n\n      return Wt;\n    }();\n\n    var Qt = /*#__PURE__*/function () {\n      function Qt(t, e, r) {\n        _classCallCheck(this, Qt);\n\n        this.type = xt, this.locale = r, this.caseSensitive = t, this.diacriticSensitive = e;\n      }\n\n      _createClass(Qt, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Ft(this.caseSensitive.evaluate(t), this.diacriticSensitive.evaluate(t), this.locale ? this.locale.evaluate(t) : null);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.caseSensitive), t(this.diacriticSensitive), this.locale && t(this.locale);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n          return t[\"case-sensitive\"] = this.caseSensitive.serialize(), t[\"diacritic-sensitive\"] = this.diacriticSensitive.serialize(), this.locale && (t.locale = this.locale.serialize()), [\"collator\", t];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected one argument.\");\n          var r = t[1];\n          if (\"object\" != typeof r || Array.isArray(r)) return e.error(\"Collator options argument must be an object.\");\n          var n = e.parse(void 0 !== r[\"case-sensitive\"] && r[\"case-sensitive\"], 1, dt);\n          if (!n) return null;\n          var i = e.parse(void 0 !== r[\"diacritic-sensitive\"] && r[\"diacritic-sensitive\"], 1, dt);\n          if (!i) return null;\n          var s = null;\n          return r.locale && (s = e.parse(r.locale, 1, ft), !s) ? null : new Qt(n, i, s);\n        }\n      }]);\n\n      return Qt;\n    }();\n\n    var te = 8192;\n\n    function ee(t, e) {\n      t[0] = Math.min(t[0], e[0]), t[1] = Math.min(t[1], e[1]), t[2] = Math.max(t[2], e[0]), t[3] = Math.max(t[3], e[1]);\n    }\n\n    function re(t, e) {\n      return !(t[0] <= e[0] || t[2] >= e[2] || t[1] <= e[1] || t[3] >= e[3]);\n    }\n\n    function ne(t, e) {\n      var r = (180 + t[0]) / 360,\n          n = (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t[1] * Math.PI / 360))) / 360,\n          i = Math.pow(2, e.z);\n      return [Math.round(r * i * te), Math.round(n * i * te)];\n    }\n\n    function ie(t, e, r) {\n      var n = t[0] - e[0],\n          i = t[1] - e[1],\n          s = t[0] - r[0],\n          a = t[1] - r[1];\n      return n * a - s * i == 0 && n * s <= 0 && i * a <= 0;\n    }\n\n    function se(t, e) {\n      var r = !1;\n\n      for (var _a6 = 0, _o3 = e.length; _a6 < _o3; _a6++) {\n        var _o4 = e[_a6];\n\n        for (var _e25 = 0, _a7 = _o4.length; _e25 < _a7 - 1; _e25++) {\n          if (ie(t, _o4[_e25], _o4[_e25 + 1])) return !1;\n          (i = _o4[_e25])[1] > (n = t)[1] != (s = _o4[_e25 + 1])[1] > n[1] && n[0] < (s[0] - i[0]) * (n[1] - i[1]) / (s[1] - i[1]) + i[0] && (r = !r);\n        }\n      }\n\n      var n, i, s;\n      return r;\n    }\n\n    function ae(t, e) {\n      for (var _r29 = 0; _r29 < e.length; _r29++) {\n        if (se(t, e[_r29])) return !0;\n      }\n\n      return !1;\n    }\n\n    function oe(t, e, r, n) {\n      var i = n[0] - r[0],\n          s = n[1] - r[1],\n          a = (t[0] - r[0]) * s - i * (t[1] - r[1]),\n          o = (e[0] - r[0]) * s - i * (e[1] - r[1]);\n      return a > 0 && o < 0 || a < 0 && o > 0;\n    }\n\n    function le(t, e, r) {\n      var _iterator13 = _createForOfIteratorHelper(r),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var _u2 = _step13.value;\n\n          for (var _r30 = 0; _r30 < _u2.length - 1; ++_r30) {\n            if (0 != (o = [(a = _u2[_r30 + 1])[0] - (s = _u2[_r30])[0], a[1] - s[1]])[0] * (l = [(i = e)[0] - (n = t)[0], i[1] - n[1]])[1] - o[1] * l[0] && oe(n, i, s, a) && oe(s, a, n, i)) return !0;\n          }\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n\n      var n, i, s, a, o, l;\n      return !1;\n    }\n\n    function ue(t, e) {\n      for (var _r31 = 0; _r31 < t.length; ++_r31) {\n        if (!se(t[_r31], e)) return !1;\n      }\n\n      for (var _r32 = 0; _r32 < t.length - 1; ++_r32) {\n        if (le(t[_r32], t[_r32 + 1], e)) return !1;\n      }\n\n      return !0;\n    }\n\n    function ce(t, e) {\n      for (var _r33 = 0; _r33 < e.length; _r33++) {\n        if (ue(t, e[_r33])) return !0;\n      }\n\n      return !1;\n    }\n\n    function he(t, e, r) {\n      var n = [];\n\n      for (var _i11 = 0; _i11 < t.length; _i11++) {\n        var _s8 = [];\n\n        for (var _n14 = 0; _n14 < t[_i11].length; _n14++) {\n          var _a8 = ne(t[_i11][_n14], r);\n\n          ee(e, _a8), _s8.push(_a8);\n        }\n\n        n.push(_s8);\n      }\n\n      return n;\n    }\n\n    function pe(t, e, r) {\n      var n = [];\n\n      for (var _i12 = 0; _i12 < t.length; _i12++) {\n        var _s9 = he(t[_i12], e, r);\n\n        n.push(_s9);\n      }\n\n      return n;\n    }\n\n    function fe(t, e, r, n) {\n      if (t[0] < r[0] || t[0] > r[2]) {\n        var _e26 = .5 * n;\n\n        var _i13 = t[0] - r[0] > _e26 ? -n : r[0] - t[0] > _e26 ? n : 0;\n\n        0 === _i13 && (_i13 = t[0] - r[2] > _e26 ? -n : r[2] - t[0] > _e26 ? n : 0), t[0] += _i13;\n      }\n\n      ee(e, t);\n    }\n\n    function de(t, e, r, n) {\n      var i = Math.pow(2, n.z) * te,\n          s = [n.x * te, n.y * te],\n          a = [];\n\n      var _iterator14 = _createForOfIteratorHelper(t),\n          _step14;\n\n      try {\n        for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n          var _n15 = _step14.value;\n\n          var _iterator15 = _createForOfIteratorHelper(_n15),\n              _step15;\n\n          try {\n            for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n              var _t9 = _step15.value;\n              var _n16 = [_t9.x + s[0], _t9.y + s[1]];\n              fe(_n16, e, r, i), a.push(_n16);\n            }\n          } catch (err) {\n            _iterator15.e(err);\n          } finally {\n            _iterator15.f();\n          }\n        }\n      } catch (err) {\n        _iterator14.e(err);\n      } finally {\n        _iterator14.f();\n      }\n\n      return a;\n    }\n\n    function ye(t, e, r, n) {\n      var i = Math.pow(2, n.z) * te,\n          s = [n.x * te, n.y * te],\n          a = [];\n\n      var _iterator16 = _createForOfIteratorHelper(t),\n          _step16;\n\n      try {\n        for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n          var _r34 = _step16.value;\n          var _t11 = [];\n\n          var _iterator19 = _createForOfIteratorHelper(_r34),\n              _step19;\n\n          try {\n            for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n              var _n18 = _step19.value;\n              var _r35 = [_n18.x + s[0], _n18.y + s[1]];\n              ee(e, _r35), _t11.push(_r35);\n            }\n          } catch (err) {\n            _iterator19.e(err);\n          } finally {\n            _iterator19.f();\n          }\n\n          a.push(_t11);\n        }\n      } catch (err) {\n        _iterator16.e(err);\n      } finally {\n        _iterator16.f();\n      }\n\n      if (e[2] - e[0] <= i / 2) {\n        (o = e)[0] = o[1] = 1 / 0, o[2] = o[3] = -1 / 0;\n\n        var _iterator17 = _createForOfIteratorHelper(a),\n            _step17;\n\n        try {\n          for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n            var _t10 = _step17.value;\n\n            var _iterator18 = _createForOfIteratorHelper(_t10),\n                _step18;\n\n            try {\n              for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n                var _n17 = _step18.value;\n                fe(_n17, e, r, i);\n              }\n            } catch (err) {\n              _iterator18.e(err);\n            } finally {\n              _iterator18.f();\n            }\n          }\n        } catch (err) {\n          _iterator17.e(err);\n        } finally {\n          _iterator17.f();\n        }\n      }\n\n      var o;\n      return a;\n    }\n\n    var me = /*#__PURE__*/function () {\n      function me(t, e) {\n        _classCallCheck(this, me);\n\n        this.type = dt, this.geojson = t, this.geometries = e;\n      }\n\n      _createClass(me, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (null != t.geometry() && null != t.canonicalID()) {\n            if (\"Point\" === t.geometryType()) return function (t, e) {\n              var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  i = t.canonicalID();\n\n              if (\"Polygon\" === e.type) {\n                var _s10 = he(e.coordinates, n, i),\n                    _a9 = de(t.geometry(), r, n, i);\n\n                if (!re(r, n)) return !1;\n\n                var _iterator20 = _createForOfIteratorHelper(_a9),\n                    _step20;\n\n                try {\n                  for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n                    var _t12 = _step20.value;\n                    if (!se(_t12, _s10)) return !1;\n                  }\n                } catch (err) {\n                  _iterator20.e(err);\n                } finally {\n                  _iterator20.f();\n                }\n              }\n\n              if (\"MultiPolygon\" === e.type) {\n                var _s11 = pe(e.coordinates, n, i),\n                    _a10 = de(t.geometry(), r, n, i);\n\n                if (!re(r, n)) return !1;\n\n                var _iterator21 = _createForOfIteratorHelper(_a10),\n                    _step21;\n\n                try {\n                  for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n                    var _t13 = _step21.value;\n                    if (!ae(_t13, _s11)) return !1;\n                  }\n                } catch (err) {\n                  _iterator21.e(err);\n                } finally {\n                  _iterator21.f();\n                }\n              }\n\n              return !0;\n            }(t, this.geometries);\n            if (\"LineString\" === t.geometryType()) return function (t, e) {\n              var r = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  n = [1 / 0, 1 / 0, -1 / 0, -1 / 0],\n                  i = t.canonicalID();\n\n              if (\"Polygon\" === e.type) {\n                var _s12 = he(e.coordinates, n, i),\n                    _a11 = ye(t.geometry(), r, n, i);\n\n                if (!re(r, n)) return !1;\n\n                var _iterator22 = _createForOfIteratorHelper(_a11),\n                    _step22;\n\n                try {\n                  for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n                    var _t14 = _step22.value;\n                    if (!ue(_t14, _s12)) return !1;\n                  }\n                } catch (err) {\n                  _iterator22.e(err);\n                } finally {\n                  _iterator22.f();\n                }\n              }\n\n              if (\"MultiPolygon\" === e.type) {\n                var _s13 = pe(e.coordinates, n, i),\n                    _a12 = ye(t.geometry(), r, n, i);\n\n                if (!re(r, n)) return !1;\n\n                var _iterator23 = _createForOfIteratorHelper(_a12),\n                    _step23;\n\n                try {\n                  for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n                    var _t15 = _step23.value;\n                    if (!ce(_t15, _s13)) return !1;\n                  }\n                } catch (err) {\n                  _iterator23.e(err);\n                } finally {\n                  _iterator23.f();\n                }\n              }\n\n              return !0;\n            }(t, this.geometries);\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"within\", this.geojson];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"'within' expression requires exactly one argument, but found \".concat(t.length - 1, \" instead.\"));\n\n          if (Rt(t[1])) {\n            var _e27 = t[1];\n            if (\"FeatureCollection\" === _e27.type) for (var _t16 = 0; _t16 < _e27.features.length; ++_t16) {\n              var _r36 = _e27.features[_t16].geometry.type;\n              if (\"Polygon\" === _r36 || \"MultiPolygon\" === _r36) return new me(_e27, _e27.features[_t16].geometry);\n            } else if (\"Feature\" === _e27.type) {\n              var _t17 = _e27.geometry.type;\n              if (\"Polygon\" === _t17 || \"MultiPolygon\" === _t17) return new me(_e27, _e27.geometry);\n            } else if (\"Polygon\" === _e27.type || \"MultiPolygon\" === _e27.type) return new me(_e27, _e27);\n          }\n\n          return e.error(\"'within' expression requires valid geojson object that contains polygon geometry type.\");\n        }\n      }]);\n\n      return me;\n    }();\n\n    function ge(t) {\n      if (t instanceof Wt) {\n        if (\"get\" === t.name && 1 === t.args.length) return !1;\n        if (\"feature-state\" === t.name) return !1;\n        if (\"has\" === t.name && 1 === t.args.length) return !1;\n        if (\"properties\" === t.name || \"geometry-type\" === t.name || \"id\" === t.name) return !1;\n        if (/^filter-/.test(t.name)) return !1;\n      }\n\n      if (t instanceof me) return !1;\n      var e = !0;\n      return t.eachChild(function (t) {\n        e && !ge(t) && (e = !1);\n      }), e;\n    }\n\n    function xe(t) {\n      if (t instanceof Wt && \"feature-state\" === t.name) return !1;\n      var e = !0;\n      return t.eachChild(function (t) {\n        e && !xe(t) && (e = !1);\n      }), e;\n    }\n\n    function ve(t, e) {\n      if (t instanceof Wt && e.indexOf(t.name) >= 0) return !1;\n      var r = !0;\n      return t.eachChild(function (t) {\n        r && !ve(t, e) && (r = !1);\n      }), r;\n    }\n\n    var be = /*#__PURE__*/function () {\n      function be(t, e) {\n        _classCallCheck(this, be);\n\n        this.type = e.type, this.name = t, this.boundExpression = e;\n      }\n\n      _createClass(be, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this.boundExpression.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild() {}\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"var\", this.name];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length || \"string\" != typeof t[1]) return e.error(\"'var' expression requires exactly one string literal argument.\");\n          var r = t[1];\n          return e.scope.has(r) ? new be(r, e.scope.get(r)) : e.error(\"Unknown variable \\\"\".concat(r, \"\\\". Make sure \\\"\").concat(r, \"\\\" has been bound in an enclosing \\\"let\\\" expression before using it.\"), 1);\n        }\n      }]);\n\n      return be;\n    }();\n\n    var we = /*#__PURE__*/function () {\n      function we(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var r = arguments.length > 2 ? arguments[2] : undefined;\n        var n = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : new ct();\n        var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n\n        _classCallCheck(this, we);\n\n        this.registry = t, this.path = e, this.key = e.map(function (t) {\n          return \"[\".concat(t, \"]\");\n        }).join(\"\"), this.scope = n, this.errors = i, this.expectedType = r;\n      }\n\n      _createClass(we, [{\n        key: \"parse\",\n        value: function parse(t, e, r, n) {\n          var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return e ? this.concat(e, r, n)._parse(t, i) : this._parse(t, i);\n        }\n      }, {\n        key: \"_parse\",\n        value: function _parse(t, e) {\n          function r(t, e, r) {\n            return \"assert\" === r ? new Kt(e, [t]) : \"coerce\" === r ? new Xt(e, [t]) : t;\n          }\n\n          if (null !== t && \"string\" != typeof t && \"boolean\" != typeof t && \"number\" != typeof t || (t = [\"literal\", t]), Array.isArray(t)) {\n            if (0 === t.length) return this.error('Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].');\n            var _n19 = t[0];\n            if (\"string\" != typeof _n19) return this.error(\"Expression name must be a string, but found \".concat(typeof _n19, \" instead. If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0), null;\n            var _i14 = this.registry[_n19];\n\n            if (_i14) {\n              var _n20 = _i14.parse(t, this);\n\n              if (!_n20) return null;\n\n              if (this.expectedType) {\n                var _t18 = this.expectedType,\n                    _i15 = _n20.type;\n                if (\"string\" !== _t18.kind && \"number\" !== _t18.kind && \"boolean\" !== _t18.kind && \"object\" !== _t18.kind && \"array\" !== _t18.kind || \"value\" !== _i15.kind) {\n                  if (\"color\" !== _t18.kind && \"formatted\" !== _t18.kind && \"resolvedImage\" !== _t18.kind || \"value\" !== _i15.kind && \"string\" !== _i15.kind) {\n                    if (this.checkSubtype(_t18, _i15)) return null;\n                  } else _n20 = r(_n20, _t18, e.typeAnnotation || \"coerce\");\n                } else _n20 = r(_n20, _t18, e.typeAnnotation || \"assert\");\n              }\n\n              if (!(_n20 instanceof qt) && \"resolvedImage\" !== _n20.type.kind && _e(_n20)) {\n                var _t19 = new Ht();\n\n                try {\n                  _n20 = new qt(_n20.type, _n20.evaluate(_t19));\n                } catch (t) {\n                  return this.error(t.message), null;\n                }\n              }\n\n              return _n20;\n            }\n\n            return this.error(\"Unknown expression \\\"\".concat(_n19, \"\\\". If you wanted a literal array, use [\\\"literal\\\", [...]].\"), 0);\n          }\n\n          return this.error(void 0 === t ? \"'undefined' value invalid. Use null instead.\" : \"object\" == typeof t ? 'Bare objects invalid. Use [\"literal\", {...}] instead.' : \"Expected an array, but found \".concat(typeof t, \" instead.\"));\n        }\n      }, {\n        key: \"concat\",\n        value: function concat(t, e, r) {\n          var n = \"number\" == typeof t ? this.path.concat(t) : this.path,\n              i = r ? this.scope.concat(r) : this.scope;\n          return new we(this.registry, n, e || null, i, this.errors);\n        }\n      }, {\n        key: \"error\",\n        value: function error(t) {\n          for (var _len3 = arguments.length, e = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n            e[_key3 - 1] = arguments[_key3];\n          }\n\n          var r = \"\".concat(this.key).concat(e.map(function (t) {\n            return \"[\".concat(t, \"]\");\n          }).join(\"\"));\n          this.errors.push(new ut(r, t));\n        }\n      }, {\n        key: \"checkSubtype\",\n        value: function checkSubtype(t, e) {\n          var r = kt(t, e);\n          return r && this.error(r), r;\n        }\n      }]);\n\n      return we;\n    }();\n\n    function _e(t) {\n      if (t instanceof be) return _e(t.boundExpression);\n      if (t instanceof Wt && \"error\" === t.name) return !1;\n      if (t instanceof Qt) return !1;\n      if (t instanceof me) return !1;\n      var e = t instanceof Xt || t instanceof Kt;\n      var r = !0;\n      return t.eachChild(function (t) {\n        r = e ? r && _e(t) : r && t instanceof qt;\n      }), !!r && ge(t) && ve(t, [\"zoom\", \"heatmap-density\", \"line-progress\", \"accumulated\", \"is-supported-script\"]);\n    }\n\n    function Ae(t, e) {\n      var r = t.length - 1;\n      var n,\n          i,\n          s = 0,\n          a = r,\n          o = 0;\n\n      for (; s <= a;) {\n        if (o = Math.floor((s + a) / 2), n = t[o], i = t[o + 1], n <= e) {\n          if (o === r || e < i) return o;\n          s = o + 1;\n        } else {\n          if (!(n > e)) throw new jt(\"Input is not a number.\");\n          a = o - 1;\n        }\n      }\n\n      return 0;\n    }\n\n    var ke = /*#__PURE__*/function () {\n      function ke(t, e, r) {\n        _classCallCheck(this, ke);\n\n        this.type = t, this.input = e, this.labels = [], this.outputs = [];\n\n        var _iterator24 = _createForOfIteratorHelper(r),\n            _step24;\n\n        try {\n          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n            var _step24$value = _slicedToArray(_step24.value, 2),\n                _t20 = _step24$value[0],\n                _e28 = _step24$value[1];\n\n            this.labels.push(_t20), this.outputs.push(_e28);\n          }\n        } catch (err) {\n          _iterator24.e(err);\n        } finally {\n          _iterator24.f();\n        }\n      }\n\n      _createClass(ke, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.labels,\n              r = this.outputs;\n          if (1 === e.length) return r[0].evaluate(t);\n          var n = this.input.evaluate(t);\n          if (n <= e[0]) return r[0].evaluate(t);\n          var i = e.length;\n          return n >= e[i - 1] ? r[i - 1].evaluate(t) : r[Ae(e, n)].evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n\n          var _iterator25 = _createForOfIteratorHelper(this.outputs),\n              _step25;\n\n          try {\n            for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n              var _e29 = _step25.value;\n              t(_e29);\n            }\n          } catch (err) {\n            _iterator25.e(err);\n          } finally {\n            _iterator25.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"step\", this.input.serialize()];\n\n          for (var _e30 = 0; _e30 < this.labels.length; _e30++) {\n            _e30 > 0 && t.push(this.labels[_e30]), t.push(this.outputs[_e30].serialize());\n          }\n\n          return t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n          var r = e.parse(t[1], 1, pt);\n          if (!r) return null;\n          var n = [];\n          var i = null;\n          e.expectedType && \"value\" !== e.expectedType.kind && (i = e.expectedType);\n\n          for (var _r37 = 1; _r37 < t.length; _r37 += 2) {\n            var _s14 = 1 === _r37 ? -1 / 0 : t[_r37],\n                _a13 = t[_r37 + 1],\n                _o5 = _r37,\n                _l3 = _r37 + 1;\n\n            if (\"number\" != typeof _s14) return e.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _o5);\n            if (n.length && n[n.length - 1][0] >= _s14) return e.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', _o5);\n\n            var _u3 = e.parse(_a13, _l3, i);\n\n            if (!_u3) return null;\n            i = i || _u3.type, n.push([_s14, _u3]);\n          }\n\n          return new ke(i, r, n);\n        }\n      }]);\n\n      return ke;\n    }();\n\n    function Se(t, e, r) {\n      return t * (1 - r) + e * r;\n    }\n\n    var ze = Object.freeze({\n      __proto__: null,\n      number: Se,\n      color: function color(t, e, r) {\n        return new Et(Se(t.r, e.r, r), Se(t.g, e.g, r), Se(t.b, e.b, r), Se(t.a, e.a, r));\n      },\n      array: function array(t, e, r) {\n        return t.map(function (t, n) {\n          return Se(t, e[n], r);\n        });\n      }\n    });\n    var Ie = .95047,\n        Me = 1.08883,\n        Be = 4 / 29,\n        Ce = 6 / 29,\n        Pe = 3 * Ce * Ce,\n        Ve = Math.PI / 180,\n        Ee = 180 / Math.PI;\n\n    function Fe(t) {\n      return t > .008856451679035631 ? Math.pow(t, 1 / 3) : t / Pe + Be;\n    }\n\n    function Te(t) {\n      return t > Ce ? t * t * t : Pe * (t - Be);\n    }\n\n    function Le(t) {\n      return 255 * (t <= .0031308 ? 12.92 * t : 1.055 * Math.pow(t, 1 / 2.4) - .055);\n    }\n\n    function De(t) {\n      return (t /= 255) <= .04045 ? t / 12.92 : Math.pow((t + .055) / 1.055, 2.4);\n    }\n\n    function $e(t) {\n      var e = De(t.r),\n          r = De(t.g),\n          n = De(t.b),\n          i = Fe((.4124564 * e + .3575761 * r + .1804375 * n) / Ie),\n          s = Fe((.2126729 * e + .7151522 * r + .072175 * n) / 1);\n      return {\n        l: 116 * s - 16,\n        a: 500 * (i - s),\n        b: 200 * (s - Fe((.0193339 * e + .119192 * r + .9503041 * n) / Me)),\n        alpha: t.a\n      };\n    }\n\n    function Re(t) {\n      var e = (t.l + 16) / 116,\n          r = isNaN(t.a) ? e : e + t.a / 500,\n          n = isNaN(t.b) ? e : e - t.b / 200;\n      return e = 1 * Te(e), r = Ie * Te(r), n = Me * Te(n), new Et(Le(3.2404542 * r - 1.5371385 * e - .4985314 * n), Le(-.969266 * r + 1.8760108 * e + .041556 * n), Le(.0556434 * r - .2040259 * e + 1.0572252 * n), t.alpha);\n    }\n\n    function Ue(t, e, r) {\n      var n = e - t;\n      return t + r * (n > 180 || n < -180 ? n - 360 * Math.round(n / 360) : n);\n    }\n\n    var Oe = {\n      forward: $e,\n      reverse: Re,\n      interpolate: function interpolate(t, e, r) {\n        return {\n          l: Se(t.l, e.l, r),\n          a: Se(t.a, e.a, r),\n          b: Se(t.b, e.b, r),\n          alpha: Se(t.alpha, e.alpha, r)\n        };\n      }\n    },\n        qe = {\n      forward: function forward(t) {\n        var _$e = $e(t),\n            e = _$e.l,\n            r = _$e.a,\n            n = _$e.b,\n            i = Math.atan2(n, r) * Ee;\n\n        return {\n          h: i < 0 ? i + 360 : i,\n          c: Math.sqrt(r * r + n * n),\n          l: e,\n          alpha: t.a\n        };\n      },\n      reverse: function reverse(t) {\n        var e = t.h * Ve,\n            r = t.c;\n        return Re({\n          l: t.l,\n          a: Math.cos(e) * r,\n          b: Math.sin(e) * r,\n          alpha: t.alpha\n        });\n      },\n      interpolate: function interpolate(t, e, r) {\n        return {\n          h: Ue(t.h, e.h, r),\n          c: Se(t.c, e.c, r),\n          l: Se(t.l, e.l, r),\n          alpha: Se(t.alpha, e.alpha, r)\n        };\n      }\n    };\n    var je = Object.freeze({\n      __proto__: null,\n      lab: Oe,\n      hcl: qe\n    });\n\n    var Ne = /*#__PURE__*/function () {\n      function Ne(t, e, r, n, i) {\n        _classCallCheck(this, Ne);\n\n        this.type = t, this.operator = e, this.interpolation = r, this.input = n, this.labels = [], this.outputs = [];\n\n        var _iterator26 = _createForOfIteratorHelper(i),\n            _step26;\n\n        try {\n          for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n            var _step26$value = _slicedToArray(_step26.value, 2),\n                _t21 = _step26$value[0],\n                _e31 = _step26$value[1];\n\n            this.labels.push(_t21), this.outputs.push(_e31);\n          }\n        } catch (err) {\n          _iterator26.e(err);\n        } finally {\n          _iterator26.f();\n        }\n      }\n\n      _createClass(Ne, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.labels,\n              r = this.outputs;\n          if (1 === e.length) return r[0].evaluate(t);\n          var n = this.input.evaluate(t);\n          if (n <= e[0]) return r[0].evaluate(t);\n          var i = e.length;\n          if (n >= e[i - 1]) return r[i - 1].evaluate(t);\n          var s = Ae(e, n),\n              a = Ne.interpolationFactor(this.interpolation, n, e[s], e[s + 1]),\n              o = r[s].evaluate(t),\n              l = r[s + 1].evaluate(t);\n          return \"interpolate\" === this.operator ? ze[this.type.kind.toLowerCase()](o, l, a) : \"interpolate-hcl\" === this.operator ? qe.reverse(qe.interpolate(qe.forward(o), qe.forward(l), a)) : Oe.reverse(Oe.interpolate(Oe.forward(o), Oe.forward(l), a));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n\n          var _iterator27 = _createForOfIteratorHelper(this.outputs),\n              _step27;\n\n          try {\n            for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n              var _e32 = _step27.value;\n              t(_e32);\n            }\n          } catch (err) {\n            _iterator27.e(err);\n          } finally {\n            _iterator27.f();\n          }\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t;\n          t = \"linear\" === this.interpolation.name ? [\"linear\"] : \"exponential\" === this.interpolation.name ? 1 === this.interpolation.base ? [\"linear\"] : [\"exponential\", this.interpolation.base] : [\"cubic-bezier\"].concat(this.interpolation.controlPoints);\n          var e = [this.operator, t, this.input.serialize()];\n\n          for (var _t22 = 0; _t22 < this.labels.length; _t22++) {\n            e.push(this.labels[_t22], this.outputs[_t22].serialize());\n          }\n\n          return e;\n        }\n      }], [{\n        key: \"interpolationFactor\",\n        value: function interpolationFactor(t, r, n, i) {\n          var s = 0;\n          if (\"exponential\" === t.name) s = Ke(r, t.base, n, i);else if (\"linear\" === t.name) s = Ke(r, 1, n, i);else if (\"cubic-bezier\" === t.name) {\n            var _a14 = t.controlPoints;\n            s = new e(_a14[0], _a14[1], _a14[2], _a14[3]).solve(Ke(r, 1, n, i));\n          }\n          return s;\n        }\n      }, {\n        key: \"parse\",\n        value: function parse(t, e) {\n          var _t23 = _toArray(t),\n              r = _t23[0],\n              n = _t23[1],\n              i = _t23[2],\n              s = _t23.slice(3);\n\n          if (!Array.isArray(n) || 0 === n.length) return e.error(\"Expected an interpolation type expression.\", 1);\n          if (\"linear\" === n[0]) n = {\n            name: \"linear\"\n          };else if (\"exponential\" === n[0]) {\n            var _t24 = n[1];\n            if (\"number\" != typeof _t24) return e.error(\"Exponential interpolation requires a numeric base.\", 1, 1);\n            n = {\n              name: \"exponential\",\n              base: _t24\n            };\n          } else {\n            if (\"cubic-bezier\" !== n[0]) return e.error(\"Unknown interpolation type \".concat(String(n[0])), 1, 0);\n            {\n              var _t25 = n.slice(1);\n\n              if (4 !== _t25.length || _t25.some(function (t) {\n                return \"number\" != typeof t || t < 0 || t > 1;\n              })) return e.error(\"Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.\", 1);\n              n = {\n                name: \"cubic-bezier\",\n                controlPoints: _t25\n              };\n            }\n          }\n          if (t.length - 1 < 4) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if ((t.length - 1) % 2 != 0) return e.error(\"Expected an even number of arguments.\");\n          if (i = e.parse(i, 2, pt), !i) return null;\n          var a = [];\n          var o = null;\n          \"interpolate-hcl\" === r || \"interpolate-lab\" === r ? o = yt : e.expectedType && \"value\" !== e.expectedType.kind && (o = e.expectedType);\n\n          for (var _t26 = 0; _t26 < s.length; _t26 += 2) {\n            var _r38 = s[_t26],\n                _n21 = s[_t26 + 1],\n                _i16 = _t26 + 3,\n                _l4 = _t26 + 4;\n\n            if (\"number\" != typeof _r38) return e.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', _i16);\n            if (a.length && a[a.length - 1][0] >= _r38) return e.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', _i16);\n\n            var _u4 = e.parse(_n21, _l4, o);\n\n            if (!_u4) return null;\n            o = o || _u4.type, a.push([_r38, _u4]);\n          }\n\n          return \"number\" === o.kind || \"color\" === o.kind || \"array\" === o.kind && \"number\" === o.itemType.kind && \"number\" == typeof o.N ? new Ne(o, r, n, i, a) : e.error(\"Type \".concat(_t(o), \" is not interpolatable.\"));\n        }\n      }]);\n\n      return Ne;\n    }();\n\n    function Ke(t, e, r, n) {\n      var i = n - r,\n          s = t - r;\n      return 0 === i ? 0 : 1 === e ? s / i : (Math.pow(e, s) - 1) / (Math.pow(e, i) - 1);\n    }\n\n    var Ze = /*#__PURE__*/function () {\n      function Ze(t, e) {\n        _classCallCheck(this, Ze);\n\n        this.type = t, this.args = e;\n      }\n\n      _createClass(Ze, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e,\n              r = null,\n              n = 0;\n\n          var _iterator28 = _createForOfIteratorHelper(this.args),\n              _step28;\n\n          try {\n            for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n              var _i17 = _step28.value;\n              if (n++, r = _i17.evaluate(t), r && r instanceof Dt && !r.available && (e || (e = r.name), r = null, n === this.args.length && (r = e)), null !== r) break;\n            }\n          } catch (err) {\n            _iterator28.e(err);\n          } finally {\n            _iterator28.f();\n          }\n\n          return r;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.args.forEach(t);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.args.every(function (t) {\n            return t.outputDefined();\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"coalesce\"];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 2) return e.error(\"Expectected at least one argument.\");\n          var r = null;\n          var n = e.expectedType;\n          n && \"value\" !== n.kind && (r = n);\n          var i = [];\n\n          var _iterator29 = _createForOfIteratorHelper(t.slice(1)),\n              _step29;\n\n          try {\n            for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n              var _n22 = _step29.value;\n\n              var _t27 = e.parse(_n22, 1 + i.length, r, void 0, {\n                typeAnnotation: \"omit\"\n              });\n\n              if (!_t27) return null;\n              r = r || _t27.type, i.push(_t27);\n            }\n          } catch (err) {\n            _iterator29.e(err);\n          } finally {\n            _iterator29.f();\n          }\n\n          var s = n && i.some(function (t) {\n            return kt(n, t.type);\n          });\n          return new Ze(s ? gt : r, i);\n        }\n      }]);\n\n      return Ze;\n    }();\n\n    var Ge = /*#__PURE__*/function () {\n      function Ge(t, e) {\n        _classCallCheck(this, Ge);\n\n        this.type = e.type, this.bindings = [].concat(t), this.result = e;\n      }\n\n      _createClass(Ge, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return this.result.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator30 = _createForOfIteratorHelper(this.bindings),\n              _step30;\n\n          try {\n            for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n              var _e33 = _step30.value;\n              t(_e33[1]);\n            }\n          } catch (err) {\n            _iterator30.e(err);\n          } finally {\n            _iterator30.f();\n          }\n\n          t(this.result);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.result.outputDefined();\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"let\"];\n\n          var _iterator31 = _createForOfIteratorHelper(this.bindings),\n              _step31;\n\n          try {\n            for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n              var _step31$value = _slicedToArray(_step31.value, 2),\n                  _e34 = _step31$value[0],\n                  _r39 = _step31$value[1];\n\n              t.push(_e34, _r39.serialize());\n            }\n          } catch (err) {\n            _iterator31.e(err);\n          } finally {\n            _iterator31.f();\n          }\n\n          return t.push(this.result.serialize()), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = [];\n\n          for (var _n23 = 1; _n23 < t.length - 1; _n23 += 2) {\n            var _i18 = t[_n23];\n            if (\"string\" != typeof _i18) return e.error(\"Expected string, but found \".concat(typeof _i18, \" instead.\"), _n23);\n            if (/[^a-zA-Z0-9_]/.test(_i18)) return e.error(\"Variable names must contain only alphanumeric characters or '_'.\", _n23);\n\n            var _s15 = e.parse(t[_n23 + 1], _n23 + 1);\n\n            if (!_s15) return null;\n            r.push([_i18, _s15]);\n          }\n\n          var n = e.parse(t[t.length - 1], t.length - 1, e.expectedType, r);\n          return n ? new Ge(r, n) : null;\n        }\n      }]);\n\n      return Ge;\n    }();\n\n    var Je = /*#__PURE__*/function () {\n      function Je(t, e, r) {\n        _classCallCheck(this, Je);\n\n        this.type = t, this.index = e, this.input = r;\n      }\n\n      _createClass(Je, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.index.evaluate(t),\n              r = this.input.evaluate(t);\n          if (e < 0) throw new jt(\"Array index out of bounds: \".concat(e, \" < 0.\"));\n          if (e >= r.length) throw new jt(\"Array index out of bounds: \".concat(e, \" > \").concat(r.length - 1, \".\"));\n          if (e !== Math.floor(e)) throw new jt(\"Array index must be an integer, but found \".concat(e, \" instead.\"));\n          return r[e];\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.index), t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"at\", this.index.serialize(), this.input.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, pt),\n              n = e.parse(t[2], 2, wt(e.expectedType || gt));\n          return r && n ? new Je(n.type.itemType, r, n) : null;\n        }\n      }]);\n\n      return Je;\n    }();\n\n    var Xe = /*#__PURE__*/function () {\n      function Xe(t, e) {\n        _classCallCheck(this, Xe);\n\n        this.type = dt, this.needle = t, this.haystack = e;\n      }\n\n      _createClass(Xe, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.needle.evaluate(t),\n              r = this.haystack.evaluate(t);\n          if (!r) return !1;\n          if (!zt(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new jt(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(_t(Ut(e)), \" instead.\"));\n          if (!zt(r, [\"string\", \"array\"])) throw new jt(\"Expected second argument to be of type array or string, but found \".concat(_t(Ut(r)), \" instead.\"));\n          return r.indexOf(e) >= 0;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.needle), t(this.haystack);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return [\"in\", this.needle.serialize(), this.haystack.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected 2 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, gt),\n              n = e.parse(t[2], 2, gt);\n          return r && n ? St(r.type, [dt, ft, pt, ht, gt]) ? new Xe(r, n) : e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(_t(r.type), \" instead\")) : null;\n        }\n      }]);\n\n      return Xe;\n    }();\n\n    var Ye = /*#__PURE__*/function () {\n      function Ye(t, e, r) {\n        _classCallCheck(this, Ye);\n\n        this.type = pt, this.needle = t, this.haystack = e, this.fromIndex = r;\n      }\n\n      _createClass(Ye, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.needle.evaluate(t),\n              r = this.haystack.evaluate(t);\n          if (!zt(e, [\"boolean\", \"string\", \"number\", \"null\"])) throw new jt(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(_t(Ut(e)), \" instead.\"));\n          if (!zt(r, [\"string\", \"array\"])) throw new jt(\"Expected second argument to be of type array or string, but found \".concat(_t(Ut(r)), \" instead.\"));\n\n          if (this.fromIndex) {\n            var _n24 = this.fromIndex.evaluate(t);\n\n            return r.indexOf(e, _n24);\n          }\n\n          return r.indexOf(e);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.needle), t(this.haystack), this.fromIndex && t(this.fromIndex);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          if (null != this.fromIndex && void 0 !== this.fromIndex) {\n            var _t28 = this.fromIndex.serialize();\n\n            return [\"index-of\", this.needle.serialize(), this.haystack.serialize(), _t28];\n          }\n\n          return [\"index-of\", this.needle.serialize(), this.haystack.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, gt),\n              n = e.parse(t[2], 2, gt);\n          if (!r || !n) return null;\n          if (!St(r.type, [dt, ft, pt, ht, gt])) return e.error(\"Expected first argument to be of type boolean, string, number or null, but found \".concat(_t(r.type), \" instead\"));\n\n          if (4 === t.length) {\n            var _i19 = e.parse(t[3], 3, pt);\n\n            return _i19 ? new Ye(r, n, _i19) : null;\n          }\n\n          return new Ye(r, n);\n        }\n      }]);\n\n      return Ye;\n    }();\n\n    var He = /*#__PURE__*/function () {\n      function He(t, e, r, n, i, s) {\n        _classCallCheck(this, He);\n\n        this.inputType = t, this.type = e, this.input = r, this.cases = n, this.outputs = i, this.otherwise = s;\n      }\n\n      _createClass(He, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t);\n          return (Ut(e) === this.inputType && this.outputs[this.cases[e]] || this.otherwise).evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input), this.outputs.forEach(t), t(this.otherwise);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.outputs.every(function (t) {\n            return t.outputDefined();\n          }) && this.otherwise.outputDefined();\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var _this3 = this;\n\n          var t = [\"match\", this.input.serialize()],\n              e = Object.keys(this.cases).sort(),\n              r = [],\n              n = {};\n\n          var _iterator32 = _createForOfIteratorHelper(e),\n              _step32;\n\n          try {\n            for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n              var _t29 = _step32.value;\n              var _e36 = n[this.cases[_t29]];\n              void 0 === _e36 ? (n[this.cases[_t29]] = r.length, r.push([this.cases[_t29], [_t29]])) : r[_e36][1].push(_t29);\n            }\n          } catch (err) {\n            _iterator32.e(err);\n          } finally {\n            _iterator32.f();\n          }\n\n          var i = function i(t) {\n            return \"number\" === _this3.inputType.kind ? Number(t) : t;\n          };\n\n          for (var _i20 = 0, _r40 = r; _i20 < _r40.length; _i20++) {\n            var _r40$_i = _slicedToArray(_r40[_i20], 2),\n                _e35 = _r40$_i[0],\n                _n25 = _r40$_i[1];\n\n            t.push(1 === _n25.length ? i(_n25[0]) : _n25.map(i)), t.push(this.outputs[_e35].serialize());\n          }\n\n          return t.push(this.otherwise.serialize()), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 5) return e.error(\"Expected at least 4 arguments, but found only \".concat(t.length - 1, \".\"));\n          if (t.length % 2 != 1) return e.error(\"Expected an even number of arguments.\");\n          var r, n;\n          e.expectedType && \"value\" !== e.expectedType.kind && (n = e.expectedType);\n          var i = {},\n              s = [];\n\n          for (var _a15 = 2; _a15 < t.length - 1; _a15 += 2) {\n            var _o6 = t[_a15];\n            var _l5 = t[_a15 + 1];\n            Array.isArray(_o6) || (_o6 = [_o6]);\n\n            var _u5 = e.concat(_a15);\n\n            if (0 === _o6.length) return _u5.error(\"Expected at least one branch label.\");\n\n            var _iterator33 = _createForOfIteratorHelper(_o6),\n                _step33;\n\n            try {\n              for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n                var _t30 = _step33.value;\n                if (\"number\" != typeof _t30 && \"string\" != typeof _t30) return _u5.error(\"Branch labels must be numbers or strings.\");\n                if (\"number\" == typeof _t30 && Math.abs(_t30) > Number.MAX_SAFE_INTEGER) return _u5.error(\"Branch labels must be integers no larger than \".concat(Number.MAX_SAFE_INTEGER, \".\"));\n                if (\"number\" == typeof _t30 && Math.floor(_t30) !== _t30) return _u5.error(\"Numeric branch labels must be integer values.\");\n\n                if (r) {\n                  if (_u5.checkSubtype(r, Ut(_t30))) return null;\n                } else r = Ut(_t30);\n\n                if (void 0 !== i[String(_t30)]) return _u5.error(\"Branch labels must be unique.\");\n                i[String(_t30)] = s.length;\n              }\n            } catch (err) {\n              _iterator33.e(err);\n            } finally {\n              _iterator33.f();\n            }\n\n            var _c = e.parse(_l5, _a15, n);\n\n            if (!_c) return null;\n            n = n || _c.type, s.push(_c);\n          }\n\n          var a = e.parse(t[1], 1, gt);\n          if (!a) return null;\n          var o = e.parse(t[t.length - 1], t.length - 1, n);\n          return o ? \"value\" !== a.type.kind && e.concat(1).checkSubtype(r, a.type) ? null : new He(r, n, a, i, s, o) : null;\n        }\n      }]);\n\n      return He;\n    }();\n\n    var We = /*#__PURE__*/function () {\n      function We(t, e, r) {\n        _classCallCheck(this, We);\n\n        this.type = t, this.branches = e, this.otherwise = r;\n      }\n\n      _createClass(We, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var _iterator34 = _createForOfIteratorHelper(this.branches),\n              _step34;\n\n          try {\n            for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n              var _step34$value = _slicedToArray(_step34.value, 2),\n                  _e37 = _step34$value[0],\n                  _r41 = _step34$value[1];\n\n              if (_e37.evaluate(t)) return _r41.evaluate(t);\n            }\n          } catch (err) {\n            _iterator34.e(err);\n          } finally {\n            _iterator34.f();\n          }\n\n          return this.otherwise.evaluate(t);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          var _iterator35 = _createForOfIteratorHelper(this.branches),\n              _step35;\n\n          try {\n            for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n              var _step35$value = _slicedToArray(_step35.value, 2),\n                  _e38 = _step35$value[0],\n                  _r42 = _step35$value[1];\n\n              t(_e38), t(_r42);\n            }\n          } catch (err) {\n            _iterator35.e(err);\n          } finally {\n            _iterator35.f();\n          }\n\n          t(this.otherwise);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return this.branches.every(function (_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 2),\n                t = _ref6[0],\n                e = _ref6[1];\n\n            return e.outputDefined();\n          }) && this.otherwise.outputDefined();\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"case\"];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length < 4) return e.error(\"Expected at least 3 arguments, but found only \".concat(t.length - 1, \".\"));\n          if (t.length % 2 != 0) return e.error(\"Expected an odd number of arguments.\");\n          var r;\n          e.expectedType && \"value\" !== e.expectedType.kind && (r = e.expectedType);\n          var n = [];\n\n          for (var _i21 = 1; _i21 < t.length - 1; _i21 += 2) {\n            var _s16 = e.parse(t[_i21], _i21, dt);\n\n            if (!_s16) return null;\n\n            var _a16 = e.parse(t[_i21 + 1], _i21 + 1, r);\n\n            if (!_a16) return null;\n            n.push([_s16, _a16]), r = r || _a16.type;\n          }\n\n          var i = e.parse(t[t.length - 1], t.length - 1, r);\n          return i ? new We(r, n, i) : null;\n        }\n      }]);\n\n      return We;\n    }();\n\n    var Qe = /*#__PURE__*/function () {\n      function Qe(t, e, r, n) {\n        _classCallCheck(this, Qe);\n\n        this.type = t, this.input = e, this.beginIndex = r, this.endIndex = n;\n      }\n\n      _createClass(Qe, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t),\n              r = this.beginIndex.evaluate(t);\n          if (!zt(e, [\"string\", \"array\"])) throw new jt(\"Expected first argument to be of type array or string, but found \".concat(_t(Ut(e)), \" instead.\"));\n\n          if (this.endIndex) {\n            var _n26 = this.endIndex.evaluate(t);\n\n            return e.slice(r, _n26);\n          }\n\n          return e.slice(r);\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input), t(this.beginIndex), this.endIndex && t(this.endIndex);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          if (null != this.endIndex && void 0 !== this.endIndex) {\n            var _t31 = this.endIndex.serialize();\n\n            return [\"slice\", this.input.serialize(), this.beginIndex.serialize(), _t31];\n          }\n\n          return [\"slice\", this.input.serialize(), this.beginIndex.serialize()];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (t.length <= 2 || t.length >= 5) return e.error(\"Expected 3 or 4 arguments, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1, gt),\n              n = e.parse(t[2], 2, pt);\n          if (!r || !n) return null;\n          if (!St(r.type, [wt(gt), ft, gt])) return e.error(\"Expected first argument to be of type array or string, but found \".concat(_t(r.type), \" instead\"));\n\n          if (4 === t.length) {\n            var _i22 = e.parse(t[3], 3, pt);\n\n            return _i22 ? new Qe(r.type, r, n, _i22) : null;\n          }\n\n          return new Qe(r.type, r, n);\n        }\n      }]);\n\n      return Qe;\n    }();\n\n    function tr(t, e) {\n      return \"==\" === t || \"!=\" === t ? \"boolean\" === e.kind || \"string\" === e.kind || \"number\" === e.kind || \"null\" === e.kind || \"value\" === e.kind : \"string\" === e.kind || \"number\" === e.kind || \"value\" === e.kind;\n    }\n\n    function er(t, e, r, n) {\n      return 0 === n.compare(e, r);\n    }\n\n    function rr(t, e, r) {\n      var n = \"==\" !== t && \"!=\" !== t;\n      return /*#__PURE__*/function () {\n        function i(t, e, r) {\n          _classCallCheck(this, i);\n\n          this.type = dt, this.lhs = t, this.rhs = e, this.collator = r, this.hasUntypedArgument = \"value\" === t.type.kind || \"value\" === e.type.kind;\n        }\n\n        _createClass(i, [{\n          key: \"evaluate\",\n          value: function evaluate(i) {\n            var s = this.lhs.evaluate(i),\n                a = this.rhs.evaluate(i);\n\n            if (n && this.hasUntypedArgument) {\n              var _e39 = Ut(s),\n                  _r43 = Ut(a);\n\n              if (_e39.kind !== _r43.kind || \"string\" !== _e39.kind && \"number\" !== _e39.kind) throw new jt(\"Expected arguments for \\\"\".concat(t, \"\\\" to be (string, string) or (number, number), but found (\").concat(_e39.kind, \", \").concat(_r43.kind, \") instead.\"));\n            }\n\n            if (this.collator && !n && this.hasUntypedArgument) {\n              var _t32 = Ut(s),\n                  _r44 = Ut(a);\n\n              if (\"string\" !== _t32.kind || \"string\" !== _r44.kind) return e(i, s, a);\n            }\n\n            return this.collator ? r(i, s, a, this.collator.evaluate(i)) : e(i, s, a);\n          }\n        }, {\n          key: \"eachChild\",\n          value: function eachChild(t) {\n            t(this.lhs), t(this.rhs), this.collator && t(this.collator);\n          }\n        }, {\n          key: \"outputDefined\",\n          value: function outputDefined() {\n            return !0;\n          }\n        }, {\n          key: \"serialize\",\n          value: function serialize() {\n            var e = [t];\n            return this.eachChild(function (t) {\n              e.push(t.serialize());\n            }), e;\n          }\n        }], [{\n          key: \"parse\",\n          value: function parse(t, e) {\n            if (3 !== t.length && 4 !== t.length) return e.error(\"Expected two or three arguments.\");\n            var r = t[0];\n            var s = e.parse(t[1], 1, gt);\n            if (!s) return null;\n            if (!tr(r, s.type)) return e.concat(1).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(_t(s.type), \"'.\"));\n            var a = e.parse(t[2], 2, gt);\n            if (!a) return null;\n            if (!tr(r, a.type)) return e.concat(2).error(\"\\\"\".concat(r, \"\\\" comparisons are not supported for type '\").concat(_t(a.type), \"'.\"));\n            if (s.type.kind !== a.type.kind && \"value\" !== s.type.kind && \"value\" !== a.type.kind) return e.error(\"Cannot compare types '\".concat(_t(s.type), \"' and '\").concat(_t(a.type), \"'.\"));\n            n && (\"value\" === s.type.kind && \"value\" !== a.type.kind ? s = new Kt(a.type, [s]) : \"value\" !== s.type.kind && \"value\" === a.type.kind && (a = new Kt(s.type, [a])));\n            var o = null;\n\n            if (4 === t.length) {\n              if (\"string\" !== s.type.kind && \"string\" !== a.type.kind && \"value\" !== s.type.kind && \"value\" !== a.type.kind) return e.error(\"Cannot use collator to compare non-string types.\");\n              if (o = e.parse(t[3], 3, xt), !o) return null;\n            }\n\n            return new i(s, a, o);\n          }\n        }]);\n\n        return i;\n      }();\n    }\n\n    var nr = rr(\"==\", function (t, e, r) {\n      return e === r;\n    }, er),\n        ir = rr(\"!=\", function (t, e, r) {\n      return e !== r;\n    }, function (t, e, r, n) {\n      return !er(0, e, r, n);\n    }),\n        sr = rr(\"<\", function (t, e, r) {\n      return e < r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) < 0;\n    }),\n        ar = rr(\">\", function (t, e, r) {\n      return e > r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) > 0;\n    }),\n        or = rr(\"<=\", function (t, e, r) {\n      return e <= r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) <= 0;\n    }),\n        lr = rr(\">=\", function (t, e, r) {\n      return e >= r;\n    }, function (t, e, r, n) {\n      return n.compare(e, r) >= 0;\n    });\n\n    var ur = /*#__PURE__*/function () {\n      function ur(t, e, r, n, i) {\n        _classCallCheck(this, ur);\n\n        this.type = ft, this.number = t, this.locale = e, this.currency = r, this.minFractionDigits = n, this.maxFractionDigits = i;\n      }\n\n      _createClass(ur, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          return new Intl.NumberFormat(this.locale ? this.locale.evaluate(t) : [], {\n            style: this.currency ? \"currency\" : \"decimal\",\n            currency: this.currency ? this.currency.evaluate(t) : void 0,\n            minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(t) : void 0,\n            maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(t) : void 0\n          }).format(this.number.evaluate(t));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.number), this.locale && t(this.locale), this.currency && t(this.currency), this.minFractionDigits && t(this.minFractionDigits), this.maxFractionDigits && t(this.maxFractionDigits);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n          return this.locale && (t.locale = this.locale.serialize()), this.currency && (t.currency = this.currency.serialize()), this.minFractionDigits && (t[\"min-fraction-digits\"] = this.minFractionDigits.serialize()), this.maxFractionDigits && (t[\"max-fraction-digits\"] = this.maxFractionDigits.serialize()), [\"number-format\", this.number.serialize(), t];\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (3 !== t.length) return e.error(\"Expected two arguments.\");\n          var r = e.parse(t[1], 1, pt);\n          if (!r) return null;\n          var n = t[2];\n          if (\"object\" != typeof n || Array.isArray(n)) return e.error(\"NumberFormat options argument must be an object.\");\n          var i = null;\n          if (n.locale && (i = e.parse(n.locale, 1, ft), !i)) return null;\n          var s = null;\n          if (n.currency && (s = e.parse(n.currency, 1, ft), !s)) return null;\n          var a = null;\n          if (n[\"min-fraction-digits\"] && (a = e.parse(n[\"min-fraction-digits\"], 1, pt), !a)) return null;\n          var o = null;\n          return n[\"max-fraction-digits\"] && (o = e.parse(n[\"max-fraction-digits\"], 1, pt), !o) ? null : new ur(r, i, s, a, o);\n        }\n      }]);\n\n      return ur;\n    }();\n\n    var cr = /*#__PURE__*/function () {\n      function cr(t) {\n        _classCallCheck(this, cr);\n\n        this.type = pt, this.input = t;\n      }\n\n      _createClass(cr, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          var e = this.input.evaluate(t);\n          if (\"string\" == typeof e) return e.length;\n          if (Array.isArray(e)) return e.length;\n          throw new jt(\"Expected value to be of type string or array, but found \".concat(_t(Ut(e)), \" instead.\"));\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          t(this.input);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = [\"length\"];\n          return this.eachChild(function (e) {\n            t.push(e.serialize());\n          }), t;\n        }\n      }], [{\n        key: \"parse\",\n        value: function parse(t, e) {\n          if (2 !== t.length) return e.error(\"Expected 1 argument, but found \".concat(t.length - 1, \" instead.\"));\n          var r = e.parse(t[1], 1);\n          return r ? \"array\" !== r.type.kind && \"string\" !== r.type.kind && \"value\" !== r.type.kind ? e.error(\"Expected argument of type string or array, but found \".concat(_t(r.type), \" instead.\")) : new cr(r) : null;\n        }\n      }]);\n\n      return cr;\n    }();\n\n    var hr = {\n      \"==\": nr,\n      \"!=\": ir,\n      \">\": ar,\n      \"<\": sr,\n      \">=\": lr,\n      \"<=\": or,\n      array: Kt,\n      at: Je,\n      boolean: Kt,\n      case: We,\n      coalesce: Ze,\n      collator: Qt,\n      format: Zt,\n      image: Gt,\n      in: Xe,\n      \"index-of\": Ye,\n      interpolate: Ne,\n      \"interpolate-hcl\": Ne,\n      \"interpolate-lab\": Ne,\n      length: cr,\n      let: Ge,\n      literal: qt,\n      match: He,\n      number: Kt,\n      \"number-format\": ur,\n      object: Kt,\n      slice: Qe,\n      step: ke,\n      string: Kt,\n      \"to-boolean\": Xt,\n      \"to-color\": Xt,\n      \"to-number\": Xt,\n      \"to-string\": Xt,\n      var: be,\n      within: me\n    };\n\n    function pr(t, _ref7) {\n      var _ref8 = _slicedToArray(_ref7, 4),\n          e = _ref8[0],\n          r = _ref8[1],\n          n = _ref8[2],\n          i = _ref8[3];\n\n      e = e.evaluate(t), r = r.evaluate(t), n = n.evaluate(t);\n      var s = i ? i.evaluate(t) : 1,\n          a = $t(e, r, n, s);\n      if (a) throw new jt(a);\n      return new Et(e / 255 * s, r / 255 * s, n / 255 * s, s);\n    }\n\n    function fr(t, e) {\n      return t in e;\n    }\n\n    function dr(t, e) {\n      var r = e[t];\n      return void 0 === r ? null : r;\n    }\n\n    function yr(t) {\n      return {\n        type: t\n      };\n    }\n\n    function mr(t) {\n      return {\n        result: \"success\",\n        value: t\n      };\n    }\n\n    function gr(t) {\n      return {\n        result: \"error\",\n        value: t\n      };\n    }\n\n    function xr(t) {\n      return \"data-driven\" === t[\"property-type\"] || \"cross-faded-data-driven\" === t[\"property-type\"];\n    }\n\n    function vr(t) {\n      return !!t.expression && t.expression.parameters.indexOf(\"zoom\") > -1;\n    }\n\n    function br(t) {\n      return !!t.expression && t.expression.interpolated;\n    }\n\n    function wr(t) {\n      return t instanceof Number ? \"number\" : t instanceof String ? \"string\" : t instanceof Boolean ? \"boolean\" : Array.isArray(t) ? \"array\" : null === t ? \"null\" : typeof t;\n    }\n\n    function _r(t) {\n      return \"object\" == typeof t && null !== t && !Array.isArray(t);\n    }\n\n    function Ar(t) {\n      return t;\n    }\n\n    function kr(t, e) {\n      var r = \"color\" === e.type,\n          n = t.stops && \"object\" == typeof t.stops[0][0],\n          i = n || !(n || void 0 !== t.property),\n          s = t.type || (br(e) ? \"exponential\" : \"interval\");\n      if (r && ((t = at({}, t)).stops && (t.stops = t.stops.map(function (t) {\n        return [t[0], Et.parse(t[1])];\n      })), t.default = Et.parse(t.default ? t.default : e.default)), t.colorSpace && \"rgb\" !== t.colorSpace && !je[t.colorSpace]) throw new Error(\"Unknown color space: \".concat(t.colorSpace));\n      var a, o, l;\n      if (\"exponential\" === s) a = Mr;else if (\"interval\" === s) a = Ir;else if (\"categorical\" === s) {\n        a = zr, o = Object.create(null);\n\n        var _iterator36 = _createForOfIteratorHelper(t.stops),\n            _step36;\n\n        try {\n          for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n            var _e40 = _step36.value;\n            o[_e40[0]] = _e40[1];\n          }\n        } catch (err) {\n          _iterator36.e(err);\n        } finally {\n          _iterator36.f();\n        }\n\n        l = typeof t.stops[0][0];\n      } else {\n        if (\"identity\" !== s) throw new Error(\"Unknown function type \\\"\".concat(s, \"\\\"\"));\n        a = Br;\n      }\n\n      if (n) {\n        var _r45 = {},\n            _n27 = [];\n\n        for (var _e41 = 0; _e41 < t.stops.length; _e41++) {\n          var _i24 = t.stops[_e41],\n              _s18 = _i24[0].zoom;\n          void 0 === _r45[_s18] && (_r45[_s18] = {\n            zoom: _s18,\n            type: t.type,\n            property: t.property,\n            default: t.default,\n            stops: []\n          }, _n27.push(_s18)), _r45[_s18].stops.push([_i24[0].value, _i24[1]]);\n        }\n\n        var _i23 = [];\n\n        for (var _i25 = 0, _n28 = _n27; _i25 < _n28.length; _i25++) {\n          var _t33 = _n28[_i25];\n\n          _i23.push([_r45[_t33].zoom, kr(_r45[_t33], e)]);\n        }\n\n        var _s17 = {\n          name: \"linear\"\n        };\n        return {\n          kind: \"composite\",\n          interpolationType: _s17,\n          interpolationFactor: Ne.interpolationFactor.bind(void 0, _s17),\n          zoomStops: _i23.map(function (t) {\n            return t[0];\n          }),\n          evaluate: function evaluate(_ref9, n) {\n            var r = _ref9.zoom;\n            return Mr({\n              stops: _i23,\n              base: t.base\n            }, e, r).evaluate(r, n);\n          }\n        };\n      }\n\n      if (i) {\n        var _r46 = \"exponential\" === s ? {\n          name: \"exponential\",\n          base: void 0 !== t.base ? t.base : 1\n        } : null;\n\n        return {\n          kind: \"camera\",\n          interpolationType: _r46,\n          interpolationFactor: Ne.interpolationFactor.bind(void 0, _r46),\n          zoomStops: t.stops.map(function (t) {\n            return t[0];\n          }),\n          evaluate: function evaluate(_ref10) {\n            var r = _ref10.zoom;\n            return a(t, e, r, o, l);\n          }\n        };\n      }\n\n      return {\n        kind: \"source\",\n        evaluate: function evaluate(r, n) {\n          var i = n && n.properties ? n.properties[t.property] : void 0;\n          return void 0 === i ? Sr(t.default, e.default) : a(t, e, i, o, l);\n        }\n      };\n    }\n\n    function Sr(t, e, r) {\n      return void 0 !== t ? t : void 0 !== e ? e : void 0 !== r ? r : void 0;\n    }\n\n    function zr(t, e, r, n, i) {\n      return Sr(typeof r === i ? n[r] : void 0, t.default, e.default);\n    }\n\n    function Ir(t, e, r) {\n      if (\"number\" !== wr(r)) return Sr(t.default, e.default);\n      var n = t.stops.length;\n      if (1 === n) return t.stops[0][1];\n      if (r <= t.stops[0][0]) return t.stops[0][1];\n      if (r >= t.stops[n - 1][0]) return t.stops[n - 1][1];\n      var i = Ae(t.stops.map(function (t) {\n        return t[0];\n      }), r);\n      return t.stops[i][1];\n    }\n\n    function Mr(t, e, r) {\n      var n = void 0 !== t.base ? t.base : 1;\n      if (\"number\" !== wr(r)) return Sr(t.default, e.default);\n      var i = t.stops.length;\n      if (1 === i) return t.stops[0][1];\n      if (r <= t.stops[0][0]) return t.stops[0][1];\n      if (r >= t.stops[i - 1][0]) return t.stops[i - 1][1];\n\n      var s = Ae(t.stops.map(function (t) {\n        return t[0];\n      }), r),\n          a = function (t, e, r, n) {\n        var i = n - r,\n            s = t - r;\n        return 0 === i ? 0 : 1 === e ? s / i : (Math.pow(e, s) - 1) / (Math.pow(e, i) - 1);\n      }(r, n, t.stops[s][0], t.stops[s + 1][0]),\n          o = t.stops[s][1],\n          l = t.stops[s + 1][1];\n\n      var u = ze[e.type] || Ar;\n\n      if (t.colorSpace && \"rgb\" !== t.colorSpace) {\n        var _e42 = je[t.colorSpace];\n\n        u = function u(t, r) {\n          return _e42.reverse(_e42.interpolate(_e42.forward(t), _e42.forward(r), a));\n        };\n      }\n\n      return \"function\" == typeof o.evaluate ? {\n        evaluate: function evaluate() {\n          for (var _len4 = arguments.length, t = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n            t[_key4] = arguments[_key4];\n          }\n\n          var e = o.evaluate.apply(void 0, t),\n              r = l.evaluate.apply(void 0, t);\n          if (void 0 !== e && void 0 !== r) return u(e, r, a);\n        }\n      } : u(o, l, a);\n    }\n\n    function Br(t, e, r) {\n      return \"color\" === e.type ? r = Et.parse(r) : \"formatted\" === e.type ? r = Lt.fromString(r.toString()) : \"resolvedImage\" === e.type ? r = Dt.fromString(r.toString()) : wr(r) === e.type || \"enum\" === e.type && e.values[r] || (r = void 0), Sr(r, t.default, e.default);\n    }\n\n    Wt.register(hr, {\n      error: [{\n        kind: \"error\"\n      }, [ft], function (t, _ref11) {\n        var _ref12 = _slicedToArray(_ref11, 1),\n            e = _ref12[0];\n\n        throw new jt(e.evaluate(t));\n      }],\n      typeof: [ft, [gt], function (t, _ref13) {\n        var _ref14 = _slicedToArray(_ref13, 1),\n            e = _ref14[0];\n\n        return _t(Ut(e.evaluate(t)));\n      }],\n      \"to-rgba\": [wt(pt, 4), [yt], function (t, _ref15) {\n        var _ref16 = _slicedToArray(_ref15, 1),\n            e = _ref16[0];\n\n        return e.evaluate(t).toArray();\n      }],\n      rgb: [yt, [pt, pt, pt], pr],\n      rgba: [yt, [pt, pt, pt, pt], pr],\n      has: {\n        type: dt,\n        overloads: [[[ft], function (t, _ref17) {\n          var _ref18 = _slicedToArray(_ref17, 1),\n              e = _ref18[0];\n\n          return fr(e.evaluate(t), t.properties());\n        }], [[ft, mt], function (t, _ref19) {\n          var _ref20 = _slicedToArray(_ref19, 2),\n              e = _ref20[0],\n              r = _ref20[1];\n\n          return fr(e.evaluate(t), r.evaluate(t));\n        }]]\n      },\n      get: {\n        type: gt,\n        overloads: [[[ft], function (t, _ref21) {\n          var _ref22 = _slicedToArray(_ref21, 1),\n              e = _ref22[0];\n\n          return dr(e.evaluate(t), t.properties());\n        }], [[ft, mt], function (t, _ref23) {\n          var _ref24 = _slicedToArray(_ref23, 2),\n              e = _ref24[0],\n              r = _ref24[1];\n\n          return dr(e.evaluate(t), r.evaluate(t));\n        }]]\n      },\n      \"feature-state\": [gt, [ft], function (t, _ref25) {\n        var _ref26 = _slicedToArray(_ref25, 1),\n            e = _ref26[0];\n\n        return dr(e.evaluate(t), t.featureState || {});\n      }],\n      properties: [mt, [], function (t) {\n        return t.properties();\n      }],\n      \"geometry-type\": [ft, [], function (t) {\n        return t.geometryType();\n      }],\n      id: [gt, [], function (t) {\n        return t.id();\n      }],\n      zoom: [pt, [], function (t) {\n        return t.globals.zoom;\n      }],\n      \"heatmap-density\": [pt, [], function (t) {\n        return t.globals.heatmapDensity || 0;\n      }],\n      \"line-progress\": [pt, [], function (t) {\n        return t.globals.lineProgress || 0;\n      }],\n      accumulated: [gt, [], function (t) {\n        return void 0 === t.globals.accumulated ? null : t.globals.accumulated;\n      }],\n      \"+\": [pt, yr(pt), function (t, e) {\n        var r = 0;\n\n        var _iterator37 = _createForOfIteratorHelper(e),\n            _step37;\n\n        try {\n          for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n            var _n29 = _step37.value;\n            r += _n29.evaluate(t);\n          }\n        } catch (err) {\n          _iterator37.e(err);\n        } finally {\n          _iterator37.f();\n        }\n\n        return r;\n      }],\n      \"*\": [pt, yr(pt), function (t, e) {\n        var r = 1;\n\n        var _iterator38 = _createForOfIteratorHelper(e),\n            _step38;\n\n        try {\n          for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n            var _n30 = _step38.value;\n            r *= _n30.evaluate(t);\n          }\n        } catch (err) {\n          _iterator38.e(err);\n        } finally {\n          _iterator38.f();\n        }\n\n        return r;\n      }],\n      \"-\": {\n        type: pt,\n        overloads: [[[pt, pt], function (t, _ref27) {\n          var _ref28 = _slicedToArray(_ref27, 2),\n              e = _ref28[0],\n              r = _ref28[1];\n\n          return e.evaluate(t) - r.evaluate(t);\n        }], [[pt], function (t, _ref29) {\n          var _ref30 = _slicedToArray(_ref29, 1),\n              e = _ref30[0];\n\n          return -e.evaluate(t);\n        }]]\n      },\n      \"/\": [pt, [pt, pt], function (t, _ref31) {\n        var _ref32 = _slicedToArray(_ref31, 2),\n            e = _ref32[0],\n            r = _ref32[1];\n\n        return e.evaluate(t) / r.evaluate(t);\n      }],\n      \"%\": [pt, [pt, pt], function (t, _ref33) {\n        var _ref34 = _slicedToArray(_ref33, 2),\n            e = _ref34[0],\n            r = _ref34[1];\n\n        return e.evaluate(t) % r.evaluate(t);\n      }],\n      ln2: [pt, [], function () {\n        return Math.LN2;\n      }],\n      pi: [pt, [], function () {\n        return Math.PI;\n      }],\n      e: [pt, [], function () {\n        return Math.E;\n      }],\n      \"^\": [pt, [pt, pt], function (t, _ref35) {\n        var _ref36 = _slicedToArray(_ref35, 2),\n            e = _ref36[0],\n            r = _ref36[1];\n\n        return Math.pow(e.evaluate(t), r.evaluate(t));\n      }],\n      sqrt: [pt, [pt], function (t, _ref37) {\n        var _ref38 = _slicedToArray(_ref37, 1),\n            e = _ref38[0];\n\n        return Math.sqrt(e.evaluate(t));\n      }],\n      log10: [pt, [pt], function (t, _ref39) {\n        var _ref40 = _slicedToArray(_ref39, 1),\n            e = _ref40[0];\n\n        return Math.log(e.evaluate(t)) / Math.LN10;\n      }],\n      ln: [pt, [pt], function (t, _ref41) {\n        var _ref42 = _slicedToArray(_ref41, 1),\n            e = _ref42[0];\n\n        return Math.log(e.evaluate(t));\n      }],\n      log2: [pt, [pt], function (t, _ref43) {\n        var _ref44 = _slicedToArray(_ref43, 1),\n            e = _ref44[0];\n\n        return Math.log(e.evaluate(t)) / Math.LN2;\n      }],\n      sin: [pt, [pt], function (t, _ref45) {\n        var _ref46 = _slicedToArray(_ref45, 1),\n            e = _ref46[0];\n\n        return Math.sin(e.evaluate(t));\n      }],\n      cos: [pt, [pt], function (t, _ref47) {\n        var _ref48 = _slicedToArray(_ref47, 1),\n            e = _ref48[0];\n\n        return Math.cos(e.evaluate(t));\n      }],\n      tan: [pt, [pt], function (t, _ref49) {\n        var _ref50 = _slicedToArray(_ref49, 1),\n            e = _ref50[0];\n\n        return Math.tan(e.evaluate(t));\n      }],\n      asin: [pt, [pt], function (t, _ref51) {\n        var _ref52 = _slicedToArray(_ref51, 1),\n            e = _ref52[0];\n\n        return Math.asin(e.evaluate(t));\n      }],\n      acos: [pt, [pt], function (t, _ref53) {\n        var _ref54 = _slicedToArray(_ref53, 1),\n            e = _ref54[0];\n\n        return Math.acos(e.evaluate(t));\n      }],\n      atan: [pt, [pt], function (t, _ref55) {\n        var _ref56 = _slicedToArray(_ref55, 1),\n            e = _ref56[0];\n\n        return Math.atan(e.evaluate(t));\n      }],\n      min: [pt, yr(pt), function (t, e) {\n        return Math.min.apply(Math, _toConsumableArray(e.map(function (e) {\n          return e.evaluate(t);\n        })));\n      }],\n      max: [pt, yr(pt), function (t, e) {\n        return Math.max.apply(Math, _toConsumableArray(e.map(function (e) {\n          return e.evaluate(t);\n        })));\n      }],\n      abs: [pt, [pt], function (t, _ref57) {\n        var _ref58 = _slicedToArray(_ref57, 1),\n            e = _ref58[0];\n\n        return Math.abs(e.evaluate(t));\n      }],\n      round: [pt, [pt], function (t, _ref59) {\n        var _ref60 = _slicedToArray(_ref59, 1),\n            e = _ref60[0];\n\n        var r = e.evaluate(t);\n        return r < 0 ? -Math.round(-r) : Math.round(r);\n      }],\n      floor: [pt, [pt], function (t, _ref61) {\n        var _ref62 = _slicedToArray(_ref61, 1),\n            e = _ref62[0];\n\n        return Math.floor(e.evaluate(t));\n      }],\n      ceil: [pt, [pt], function (t, _ref63) {\n        var _ref64 = _slicedToArray(_ref63, 1),\n            e = _ref64[0];\n\n        return Math.ceil(e.evaluate(t));\n      }],\n      \"filter-==\": [dt, [ft, gt], function (t, _ref65) {\n        var _ref66 = _slicedToArray(_ref65, 2),\n            e = _ref66[0],\n            r = _ref66[1];\n\n        return t.properties()[e.value] === r.value;\n      }],\n      \"filter-id-==\": [dt, [gt], function (t, _ref67) {\n        var _ref68 = _slicedToArray(_ref67, 1),\n            e = _ref68[0];\n\n        return t.id() === e.value;\n      }],\n      \"filter-type-==\": [dt, [ft], function (t, _ref69) {\n        var _ref70 = _slicedToArray(_ref69, 1),\n            e = _ref70[0];\n\n        return t.geometryType() === e.value;\n      }],\n      \"filter-<\": [dt, [ft, gt], function (t, _ref71) {\n        var _ref72 = _slicedToArray(_ref71, 2),\n            e = _ref72[0],\n            r = _ref72[1];\n\n        var n = t.properties()[e.value],\n            i = r.value;\n        return typeof n == typeof i && n < i;\n      }],\n      \"filter-id-<\": [dt, [gt], function (t, _ref73) {\n        var _ref74 = _slicedToArray(_ref73, 1),\n            e = _ref74[0];\n\n        var r = t.id(),\n            n = e.value;\n        return typeof r == typeof n && r < n;\n      }],\n      \"filter->\": [dt, [ft, gt], function (t, _ref75) {\n        var _ref76 = _slicedToArray(_ref75, 2),\n            e = _ref76[0],\n            r = _ref76[1];\n\n        var n = t.properties()[e.value],\n            i = r.value;\n        return typeof n == typeof i && n > i;\n      }],\n      \"filter-id->\": [dt, [gt], function (t, _ref77) {\n        var _ref78 = _slicedToArray(_ref77, 1),\n            e = _ref78[0];\n\n        var r = t.id(),\n            n = e.value;\n        return typeof r == typeof n && r > n;\n      }],\n      \"filter-<=\": [dt, [ft, gt], function (t, _ref79) {\n        var _ref80 = _slicedToArray(_ref79, 2),\n            e = _ref80[0],\n            r = _ref80[1];\n\n        var n = t.properties()[e.value],\n            i = r.value;\n        return typeof n == typeof i && n <= i;\n      }],\n      \"filter-id-<=\": [dt, [gt], function (t, _ref81) {\n        var _ref82 = _slicedToArray(_ref81, 1),\n            e = _ref82[0];\n\n        var r = t.id(),\n            n = e.value;\n        return typeof r == typeof n && r <= n;\n      }],\n      \"filter->=\": [dt, [ft, gt], function (t, _ref83) {\n        var _ref84 = _slicedToArray(_ref83, 2),\n            e = _ref84[0],\n            r = _ref84[1];\n\n        var n = t.properties()[e.value],\n            i = r.value;\n        return typeof n == typeof i && n >= i;\n      }],\n      \"filter-id->=\": [dt, [gt], function (t, _ref85) {\n        var _ref86 = _slicedToArray(_ref85, 1),\n            e = _ref86[0];\n\n        var r = t.id(),\n            n = e.value;\n        return typeof r == typeof n && r >= n;\n      }],\n      \"filter-has\": [dt, [gt], function (t, _ref87) {\n        var _ref88 = _slicedToArray(_ref87, 1),\n            e = _ref88[0];\n\n        return e.value in t.properties();\n      }],\n      \"filter-has-id\": [dt, [], function (t) {\n        return null !== t.id() && void 0 !== t.id();\n      }],\n      \"filter-type-in\": [dt, [wt(ft)], function (t, _ref89) {\n        var _ref90 = _slicedToArray(_ref89, 1),\n            e = _ref90[0];\n\n        return e.value.indexOf(t.geometryType()) >= 0;\n      }],\n      \"filter-id-in\": [dt, [wt(gt)], function (t, _ref91) {\n        var _ref92 = _slicedToArray(_ref91, 1),\n            e = _ref92[0];\n\n        return e.value.indexOf(t.id()) >= 0;\n      }],\n      \"filter-in-small\": [dt, [ft, wt(gt)], function (t, _ref93) {\n        var _ref94 = _slicedToArray(_ref93, 2),\n            e = _ref94[0],\n            r = _ref94[1];\n\n        return r.value.indexOf(t.properties()[e.value]) >= 0;\n      }],\n      \"filter-in-large\": [dt, [ft, wt(gt)], function (t, _ref95) {\n        var _ref96 = _slicedToArray(_ref95, 2),\n            e = _ref96[0],\n            r = _ref96[1];\n\n        return function (t, e, r, n) {\n          for (; r <= n;) {\n            var _i26 = r + n >> 1;\n\n            if (e[_i26] === t) return !0;\n            e[_i26] > t ? n = _i26 - 1 : r = _i26 + 1;\n          }\n\n          return !1;\n        }(t.properties()[e.value], r.value, 0, r.value.length - 1);\n      }],\n      all: {\n        type: dt,\n        overloads: [[[dt, dt], function (t, _ref97) {\n          var _ref98 = _slicedToArray(_ref97, 2),\n              e = _ref98[0],\n              r = _ref98[1];\n\n          return e.evaluate(t) && r.evaluate(t);\n        }], [yr(dt), function (t, e) {\n          var _iterator39 = _createForOfIteratorHelper(e),\n              _step39;\n\n          try {\n            for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n              var _r47 = _step39.value;\n              if (!_r47.evaluate(t)) return !1;\n            }\n          } catch (err) {\n            _iterator39.e(err);\n          } finally {\n            _iterator39.f();\n          }\n\n          return !0;\n        }]]\n      },\n      any: {\n        type: dt,\n        overloads: [[[dt, dt], function (t, _ref99) {\n          var _ref100 = _slicedToArray(_ref99, 2),\n              e = _ref100[0],\n              r = _ref100[1];\n\n          return e.evaluate(t) || r.evaluate(t);\n        }], [yr(dt), function (t, e) {\n          var _iterator40 = _createForOfIteratorHelper(e),\n              _step40;\n\n          try {\n            for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n              var _r48 = _step40.value;\n              if (_r48.evaluate(t)) return !0;\n            }\n          } catch (err) {\n            _iterator40.e(err);\n          } finally {\n            _iterator40.f();\n          }\n\n          return !1;\n        }]]\n      },\n      \"!\": [dt, [dt], function (t, _ref101) {\n        var _ref102 = _slicedToArray(_ref101, 1),\n            e = _ref102[0];\n\n        return !e.evaluate(t);\n      }],\n      \"is-supported-script\": [dt, [ft], function (t, _ref103) {\n        var _ref104 = _slicedToArray(_ref103, 1),\n            e = _ref104[0];\n\n        var r = t.globals && t.globals.isSupportedScript;\n        return !r || r(e.evaluate(t));\n      }],\n      upcase: [ft, [ft], function (t, _ref105) {\n        var _ref106 = _slicedToArray(_ref105, 1),\n            e = _ref106[0];\n\n        return e.evaluate(t).toUpperCase();\n      }],\n      downcase: [ft, [ft], function (t, _ref107) {\n        var _ref108 = _slicedToArray(_ref107, 1),\n            e = _ref108[0];\n\n        return e.evaluate(t).toLowerCase();\n      }],\n      concat: [ft, yr(gt), function (t, e) {\n        return e.map(function (e) {\n          return Ot(e.evaluate(t));\n        }).join(\"\");\n      }],\n      \"resolved-locale\": [ft, [xt], function (t, _ref109) {\n        var _ref110 = _slicedToArray(_ref109, 1),\n            e = _ref110[0];\n\n        return e.evaluate(t).resolvedLocale();\n      }]\n    });\n\n    var Cr = /*#__PURE__*/function () {\n      function Cr(t, e) {\n        _classCallCheck(this, Cr);\n\n        this.expression = t, this._warningHistory = {}, this._evaluator = new Ht(), this._defaultValue = e ? function (t) {\n          return \"color\" === t.type && _r(t.default) ? new Et(0, 0, 0, 0) : \"color\" === t.type ? Et.parse(t.default) || null : void 0 === t.default ? null : t.default;\n        }(e) : null, this._enumValues = e && \"enum\" === e.type ? e.values : null;\n      }\n\n      _createClass(Cr, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, n, i, s) {\n          return this._evaluator.globals = t, this._evaluator.feature = e, this._evaluator.featureState = r, this._evaluator.canonical = n, this._evaluator.availableImages = i || null, this._evaluator.formattedSection = s, this.expression.evaluate(this._evaluator);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, s) {\n          this._evaluator.globals = t, this._evaluator.feature = e || null, this._evaluator.featureState = r || null, this._evaluator.canonical = n, this._evaluator.availableImages = i || null, this._evaluator.formattedSection = s || null;\n\n          try {\n            var _t34 = this.expression.evaluate(this._evaluator);\n\n            if (null == _t34 || \"number\" == typeof _t34 && _t34 != _t34) return this._defaultValue;\n            if (this._enumValues && !(_t34 in this._enumValues)) throw new jt(\"Expected value to be one of \".concat(Object.keys(this._enumValues).map(function (t) {\n              return JSON.stringify(t);\n            }).join(\", \"), \", but found \").concat(JSON.stringify(_t34), \" instead.\"));\n            return _t34;\n          } catch (t) {\n            return this._warningHistory[t.message] || (this._warningHistory[t.message] = !0, \"undefined\" != typeof console && console.warn(t.message)), this._defaultValue;\n          }\n        }\n      }]);\n\n      return Cr;\n    }();\n\n    function Pr(t) {\n      return Array.isArray(t) && t.length > 0 && \"string\" == typeof t[0] && t[0] in hr;\n    }\n\n    function Vr(t, e) {\n      var r = new we(hr, [], e ? function (t) {\n        var e = {\n          color: yt,\n          string: ft,\n          number: pt,\n          enum: ft,\n          boolean: dt,\n          formatted: vt,\n          resolvedImage: bt\n        };\n        return \"array\" === t.type ? wt(e[t.value] || gt, t.length) : e[t.type];\n      }(e) : void 0),\n          n = r.parse(t, void 0, void 0, void 0, e && \"string\" === e.type ? {\n        typeAnnotation: \"coerce\"\n      } : void 0);\n      return n ? mr(new Cr(n, e)) : gr(r.errors);\n    }\n\n    var Er = /*#__PURE__*/function () {\n      function Er(t, e) {\n        _classCallCheck(this, Er);\n\n        this.kind = t, this._styleExpression = e, this.isStateDependent = \"constant\" !== t && !xe(e.expression);\n      }\n\n      _createClass(Er, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, n, i, s) {\n          return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n, i, s);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, s) {\n          return this._styleExpression.evaluate(t, e, r, n, i, s);\n        }\n      }]);\n\n      return Er;\n    }();\n\n    var Fr = /*#__PURE__*/function () {\n      function Fr(t, e, r, n) {\n        _classCallCheck(this, Fr);\n\n        this.kind = t, this.zoomStops = r, this._styleExpression = e, this.isStateDependent = \"camera\" !== t && !xe(e.expression), this.interpolationType = n;\n      }\n\n      _createClass(Fr, [{\n        key: \"evaluateWithoutErrorHandling\",\n        value: function evaluateWithoutErrorHandling(t, e, r, n, i, s) {\n          return this._styleExpression.evaluateWithoutErrorHandling(t, e, r, n, i, s);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, s) {\n          return this._styleExpression.evaluate(t, e, r, n, i, s);\n        }\n      }, {\n        key: \"interpolationFactor\",\n        value: function interpolationFactor(t, e, r) {\n          return this.interpolationType ? Ne.interpolationFactor(this.interpolationType, t, e, r) : 0;\n        }\n      }]);\n\n      return Fr;\n    }();\n\n    function Tr(t, e) {\n      var r = Vr(t, e);\n      if (\"error\" === r.result) return r;\n      var n = r.value.expression,\n          i = ge(n);\n      if (!i && !xr(e)) return gr([new ut(\"\", \"data expressions not supported\")]);\n      var s = ve(n, [\"zoom\"]);\n      if (!s && !vr(e)) return gr([new ut(\"\", \"zoom expressions not supported\")]);\n      var a = Dr(n);\n      return a || s ? a instanceof ut ? gr([a]) : a instanceof Ne && !br(e) ? gr([new ut(\"\", '\"interpolate\" expressions cannot be used with this property')]) : mr(a ? new Fr(i ? \"camera\" : \"composite\", r.value, a.labels, a instanceof Ne ? a.interpolation : void 0) : new Er(i ? \"constant\" : \"source\", r.value)) : gr([new ut(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n    }\n\n    var Lr = /*#__PURE__*/function () {\n      function Lr(t, e) {\n        _classCallCheck(this, Lr);\n\n        this._parameters = t, this._specification = e, at(this, kr(this._parameters, this._specification));\n      }\n\n      _createClass(Lr, null, [{\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          return new Lr(t._parameters, t._specification);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize(t) {\n          return {\n            _parameters: t._parameters,\n            _specification: t._specification\n          };\n        }\n      }]);\n\n      return Lr;\n    }();\n\n    function Dr(t) {\n      var e = null;\n      if (t instanceof Ge) e = Dr(t.result);else if (t instanceof Ze) {\n        var _iterator41 = _createForOfIteratorHelper(t.args),\n            _step41;\n\n        try {\n          for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n            var _r49 = _step41.value;\n            if (e = Dr(_r49), e) break;\n          }\n        } catch (err) {\n          _iterator41.e(err);\n        } finally {\n          _iterator41.f();\n        }\n      } else (t instanceof ke || t instanceof Ne) && t.input instanceof Wt && \"zoom\" === t.input.name && (e = t);\n      return e instanceof ut || t.eachChild(function (t) {\n        var r = Dr(t);\n        r instanceof ut ? e = r : !e && r ? e = new ut(\"\", '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.') : e && r && e !== r && (e = new ut(\"\", 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.'));\n      }), e;\n    }\n\n    function $r(t) {\n      var e = t.key,\n          r = t.value,\n          n = t.valueSpec || {},\n          i = t.objectElementValidators || {},\n          s = t.style,\n          a = t.styleSpec;\n      var o = [];\n      var l = wr(r);\n      if (\"object\" !== l) return [new it(e, r, \"object expected, \".concat(l, \" found\"))];\n\n      for (var _t35 in r) {\n        var _l6 = _t35.split(\".\")[0],\n            _u6 = n[_l6] || n[\"*\"];\n\n        var _c2 = void 0;\n\n        if (i[_l6]) _c2 = i[_l6];else if (n[_l6]) _c2 = pn;else if (i[\"*\"]) _c2 = i[\"*\"];else {\n          if (!n[\"*\"]) {\n            o.push(new it(e, r[_t35], \"unknown property \\\"\".concat(_t35, \"\\\"\")));\n            continue;\n          }\n\n          _c2 = pn;\n        }\n        o = o.concat(_c2({\n          key: (e ? \"\".concat(e, \".\") : e) + _t35,\n          value: r[_t35],\n          valueSpec: _u6,\n          style: s,\n          styleSpec: a,\n          object: r,\n          objectKey: _t35\n        }, r));\n      }\n\n      for (var _t36 in n) {\n        i[_t36] || n[_t36].required && void 0 === n[_t36].default && void 0 === r[_t36] && o.push(new it(e, r, \"missing required property \\\"\".concat(_t36, \"\\\"\")));\n      }\n\n      return o;\n    }\n\n    function Rr(t) {\n      var e = t.value,\n          r = t.valueSpec,\n          n = t.style,\n          i = t.styleSpec,\n          s = t.key,\n          a = t.arrayElementValidator || pn;\n      if (\"array\" !== wr(e)) return [new it(s, e, \"array expected, \".concat(wr(e), \" found\"))];\n      if (r.length && e.length !== r.length) return [new it(s, e, \"array length \".concat(r.length, \" expected, length \").concat(e.length, \" found\"))];\n      if (r[\"min-length\"] && e.length < r[\"min-length\"]) return [new it(s, e, \"array length at least \".concat(r[\"min-length\"], \" expected, length \").concat(e.length, \" found\"))];\n      var o = {\n        type: r.value,\n        values: r.values\n      };\n      i.$version < 7 && (o.function = r.function), \"object\" === wr(r.value) && (o = r.value);\n      var l = [];\n\n      for (var _t37 = 0; _t37 < e.length; _t37++) {\n        l = l.concat(a({\n          array: e,\n          arrayIndex: _t37,\n          value: e[_t37],\n          valueSpec: o,\n          style: n,\n          styleSpec: i,\n          key: \"\".concat(s, \"[\").concat(_t37, \"]\")\n        }));\n      }\n\n      return l;\n    }\n\n    function Ur(t) {\n      var e = t.key,\n          r = t.value,\n          n = t.valueSpec;\n      var i = wr(r);\n      return \"number\" === i && r != r && (i = \"NaN\"), \"number\" !== i ? [new it(e, r, \"number expected, \".concat(i, \" found\"))] : \"minimum\" in n && r < n.minimum ? [new it(e, r, \"\".concat(r, \" is less than the minimum value \").concat(n.minimum))] : \"maximum\" in n && r > n.maximum ? [new it(e, r, \"\".concat(r, \" is greater than the maximum value \").concat(n.maximum))] : [];\n    }\n\n    function Or(t) {\n      var e = t.valueSpec,\n          r = ot(t.value.type);\n      var n,\n          i,\n          s,\n          a = {};\n      var o = \"categorical\" !== r && void 0 === t.value.property,\n          l = !o,\n          u = \"array\" === wr(t.value.stops) && \"array\" === wr(t.value.stops[0]) && \"object\" === wr(t.value.stops[0][0]),\n          c = $r({\n        key: t.key,\n        value: t.value,\n        valueSpec: t.styleSpec.function,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          stops: function stops(t) {\n            if (\"identity\" === r) return [new it(t.key, t.value, 'identity function may not have a \"stops\" property')];\n            var e = [];\n            var n = t.value;\n            return e = e.concat(Rr({\n              key: t.key,\n              value: n,\n              valueSpec: t.valueSpec,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              arrayElementValidator: h\n            })), \"array\" === wr(n) && 0 === n.length && e.push(new it(t.key, n, \"array must have at least one stop\")), e;\n          },\n          default: function _default(t) {\n            return pn({\n              key: t.key,\n              value: t.value,\n              valueSpec: e,\n              style: t.style,\n              styleSpec: t.styleSpec\n            });\n          }\n        }\n      });\n      return \"identity\" === r && o && c.push(new it(t.key, t.value, 'missing required property \"property\"')), \"identity\" === r || t.value.stops || c.push(new it(t.key, t.value, 'missing required property \"stops\"')), \"exponential\" === r && t.valueSpec.expression && !br(t.valueSpec) && c.push(new it(t.key, t.value, \"exponential functions not supported\")), t.styleSpec.$version >= 8 && (l && !xr(t.valueSpec) ? c.push(new it(t.key, t.value, \"property functions not supported\")) : o && !vr(t.valueSpec) && c.push(new it(t.key, t.value, \"zoom functions not supported\"))), \"categorical\" !== r && !u || void 0 !== t.value.property || c.push(new it(t.key, t.value, '\"property\" property is required')), c;\n\n      function h(t) {\n        var r = [];\n        var n = t.value,\n            o = t.key;\n        if (\"array\" !== wr(n)) return [new it(o, n, \"array expected, \".concat(wr(n), \" found\"))];\n        if (2 !== n.length) return [new it(o, n, \"array length 2 expected, length \".concat(n.length, \" found\"))];\n\n        if (u) {\n          if (\"object\" !== wr(n[0])) return [new it(o, n, \"object expected, \".concat(wr(n[0]), \" found\"))];\n          if (void 0 === n[0].zoom) return [new it(o, n, \"object stop key must have zoom\")];\n          if (void 0 === n[0].value) return [new it(o, n, \"object stop key must have value\")];\n          if (s && s > ot(n[0].zoom)) return [new it(o, n[0].zoom, \"stop zoom values must appear in ascending order\")];\n          ot(n[0].zoom) !== s && (s = ot(n[0].zoom), i = void 0, a = {}), r = r.concat($r({\n            key: \"\".concat(o, \"[0]\"),\n            value: n[0],\n            valueSpec: {\n              zoom: {}\n            },\n            style: t.style,\n            styleSpec: t.styleSpec,\n            objectElementValidators: {\n              zoom: Ur,\n              value: p\n            }\n          }));\n        } else r = r.concat(p({\n          key: \"\".concat(o, \"[0]\"),\n          value: n[0],\n          valueSpec: {},\n          style: t.style,\n          styleSpec: t.styleSpec\n        }, n));\n\n        return Pr(lt(n[1])) ? r.concat([new it(\"\".concat(o, \"[1]\"), n[1], \"expressions are not allowed in function stops.\")]) : r.concat(pn({\n          key: \"\".concat(o, \"[1]\"),\n          value: n[1],\n          valueSpec: e,\n          style: t.style,\n          styleSpec: t.styleSpec\n        }));\n      }\n\n      function p(t, s) {\n        var o = wr(t.value),\n            l = ot(t.value),\n            u = null !== t.value ? t.value : s;\n\n        if (n) {\n          if (o !== n) return [new it(t.key, u, \"\".concat(o, \" stop domain type must match previous stop domain type \").concat(n))];\n        } else n = o;\n\n        if (\"number\" !== o && \"string\" !== o && \"boolean\" !== o) return [new it(t.key, u, \"stop domain value must be a number, string, or boolean\")];\n\n        if (\"number\" !== o && \"categorical\" !== r) {\n          var _n31 = \"number expected, \".concat(o, \" found\");\n\n          return xr(e) && void 0 === r && (_n31 += '\\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`.'), [new it(t.key, u, _n31)];\n        }\n\n        return \"categorical\" !== r || \"number\" !== o || isFinite(l) && Math.floor(l) === l ? \"categorical\" !== r && \"number\" === o && void 0 !== i && l < i ? [new it(t.key, u, \"stop domain values must appear in ascending order\")] : (i = l, \"categorical\" === r && l in a ? [new it(t.key, u, \"stop domain values must be unique\")] : (a[l] = !0, [])) : [new it(t.key, u, \"integer expected, found \".concat(l))];\n      }\n    }\n\n    function qr(t) {\n      var e = (\"property\" === t.expressionContext ? Tr : Vr)(lt(t.value), t.valueSpec);\n      if (\"error\" === e.result) return e.value.map(function (e) {\n        return new it(\"\".concat(t.key).concat(e.key), t.value, e.message);\n      });\n      var r = e.value.expression || e.value._styleExpression.expression;\n      if (\"property\" === t.expressionContext && \"text-font\" === t.propertyKey && !r.outputDefined()) return [new it(t.key, t.value, \"Invalid data expression for \\\"\".concat(t.propertyKey, \"\\\". Output values must be contained as literals within the expression.\"))];\n      if (\"property\" === t.expressionContext && \"layout\" === t.propertyType && !xe(r)) return [new it(t.key, t.value, '\"feature-state\" data expressions are not supported with layout properties.')];\n      if (\"filter\" === t.expressionContext && !xe(r)) return [new it(t.key, t.value, '\"feature-state\" data expressions are not supported with filters.')];\n\n      if (t.expressionContext && 0 === t.expressionContext.indexOf(\"cluster\")) {\n        if (!ve(r, [\"zoom\", \"feature-state\"])) return [new it(t.key, t.value, '\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.')];\n        if (\"cluster-initial\" === t.expressionContext && !ge(r)) return [new it(t.key, t.value, \"Feature data expressions are not supported with initial expression part of cluster properties.\")];\n      }\n\n      return [];\n    }\n\n    function jr(t) {\n      var e = t.key,\n          r = t.value,\n          n = t.valueSpec,\n          i = [];\n      return Array.isArray(n.values) ? -1 === n.values.indexOf(ot(r)) && i.push(new it(e, r, \"expected one of [\".concat(n.values.join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))) : -1 === Object.keys(n.values).indexOf(ot(r)) && i.push(new it(e, r, \"expected one of [\".concat(Object.keys(n.values).join(\", \"), \"], \").concat(JSON.stringify(r), \" found\"))), i;\n    }\n\n    function Nr(t) {\n      if (!0 === t || !1 === t) return !0;\n      if (!Array.isArray(t) || 0 === t.length) return !1;\n\n      switch (t[0]) {\n        case \"has\":\n          return t.length >= 2 && \"$id\" !== t[1] && \"$type\" !== t[1];\n\n        case \"in\":\n          return t.length >= 3 && (\"string\" != typeof t[1] || Array.isArray(t[2]));\n\n        case \"!in\":\n        case \"!has\":\n        case \"none\":\n          return !1;\n\n        case \"==\":\n        case \"!=\":\n        case \">\":\n        case \">=\":\n        case \"<\":\n        case \"<=\":\n          return 3 !== t.length || Array.isArray(t[1]) || Array.isArray(t[2]);\n\n        case \"any\":\n        case \"all\":\n          var _iterator42 = _createForOfIteratorHelper(t.slice(1)),\n              _step42;\n\n          try {\n            for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n              var _e43 = _step42.value;\n              if (!Nr(_e43) && \"boolean\" != typeof _e43) return !1;\n            }\n          } catch (err) {\n            _iterator42.e(err);\n          } finally {\n            _iterator42.f();\n          }\n\n          return !0;\n\n        default:\n          return !0;\n      }\n    }\n\n    var Kr = {\n      type: \"boolean\",\n      default: !1,\n      transition: !1,\n      \"property-type\": \"data-driven\",\n      expression: {\n        interpolated: !1,\n        parameters: [\"zoom\", \"feature\"]\n      }\n    };\n\n    function Zr(t) {\n      if (null == t) return {\n        filter: function filter() {\n          return !0;\n        },\n        needGeometry: !1\n      };\n      Nr(t) || (t = Xr(t));\n      var e = Vr(t, Kr);\n      if (\"error\" === e.result) throw new Error(e.value.map(function (t) {\n        return \"\".concat(t.key, \": \").concat(t.message);\n      }).join(\", \"));\n      return {\n        filter: function filter(t, r, n) {\n          return e.value.evaluate(t, r, {}, n);\n        },\n        needGeometry: Jr(t)\n      };\n    }\n\n    function Gr(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n\n    function Jr(t) {\n      if (!Array.isArray(t)) return !1;\n      if (\"within\" === t[0]) return !0;\n\n      for (var _e44 = 1; _e44 < t.length; _e44++) {\n        if (Jr(t[_e44])) return !0;\n      }\n\n      return !1;\n    }\n\n    function Xr(t) {\n      if (!t) return !0;\n      var e = t[0];\n      return t.length <= 1 ? \"any\" !== e : \"==\" === e ? Yr(t[1], t[2], \"==\") : \"!=\" === e ? Qr(Yr(t[1], t[2], \"==\")) : \"<\" === e || \">\" === e || \"<=\" === e || \">=\" === e ? Yr(t[1], t[2], e) : \"any\" === e ? (r = t.slice(1), [\"any\"].concat(r.map(Xr))) : \"all\" === e ? [\"all\"].concat(t.slice(1).map(Xr)) : \"none\" === e ? [\"all\"].concat(t.slice(1).map(Xr).map(Qr)) : \"in\" === e ? Hr(t[1], t.slice(2)) : \"!in\" === e ? Qr(Hr(t[1], t.slice(2))) : \"has\" === e ? Wr(t[1]) : \"!has\" === e ? Qr(Wr(t[1])) : \"within\" !== e || t;\n      var r;\n    }\n\n    function Yr(t, e, r) {\n      switch (t) {\n        case \"$type\":\n          return [\"filter-type-\".concat(r), e];\n\n        case \"$id\":\n          return [\"filter-id-\".concat(r), e];\n\n        default:\n          return [\"filter-\".concat(r), t, e];\n      }\n    }\n\n    function Hr(t, e) {\n      if (0 === e.length) return !1;\n\n      switch (t) {\n        case \"$type\":\n          return [\"filter-type-in\", [\"literal\", e]];\n\n        case \"$id\":\n          return [\"filter-id-in\", [\"literal\", e]];\n\n        default:\n          return e.length > 200 && !e.some(function (t) {\n            return typeof t != typeof e[0];\n          }) ? [\"filter-in-large\", t, [\"literal\", e.sort(Gr)]] : [\"filter-in-small\", t, [\"literal\", e]];\n      }\n    }\n\n    function Wr(t) {\n      switch (t) {\n        case \"$type\":\n          return !0;\n\n        case \"$id\":\n          return [\"filter-has-id\"];\n\n        default:\n          return [\"filter-has\", t];\n      }\n    }\n\n    function Qr(t) {\n      return [\"!\", t];\n    }\n\n    function tn(t) {\n      return Nr(lt(t.value)) ? qr(at({}, t, {\n        expressionContext: \"filter\",\n        valueSpec: {\n          value: \"boolean\"\n        }\n      })) : en(t);\n    }\n\n    function en(t) {\n      var e = t.value,\n          r = t.key;\n      if (\"array\" !== wr(e)) return [new it(r, e, \"array expected, \".concat(wr(e), \" found\"))];\n      var n = t.styleSpec;\n      var i,\n          s = [];\n      if (e.length < 1) return [new it(r, e, \"filter array must have at least 1 element\")];\n\n      switch (s = s.concat(jr({\n        key: \"\".concat(r, \"[0]\"),\n        value: e[0],\n        valueSpec: n.filter_operator,\n        style: t.style,\n        styleSpec: t.styleSpec\n      })), ot(e[0])) {\n        case \"<\":\n        case \"<=\":\n        case \">\":\n        case \">=\":\n          e.length >= 2 && \"$type\" === ot(e[1]) && s.push(new it(r, e, \"\\\"$type\\\" cannot be use with operator \\\"\".concat(e[0], \"\\\"\")));\n\n        case \"==\":\n        case \"!=\":\n          3 !== e.length && s.push(new it(r, e, \"filter array for operator \\\"\".concat(e[0], \"\\\" must have 3 elements\")));\n\n        case \"in\":\n        case \"!in\":\n          e.length >= 2 && (i = wr(e[1]), \"string\" !== i && s.push(new it(\"\".concat(r, \"[1]\"), e[1], \"string expected, \".concat(i, \" found\"))));\n\n          for (var _a17 = 2; _a17 < e.length; _a17++) {\n            i = wr(e[_a17]), \"$type\" === ot(e[1]) ? s = s.concat(jr({\n              key: \"\".concat(r, \"[\").concat(_a17, \"]\"),\n              value: e[_a17],\n              valueSpec: n.geometry_type,\n              style: t.style,\n              styleSpec: t.styleSpec\n            })) : \"string\" !== i && \"number\" !== i && \"boolean\" !== i && s.push(new it(\"\".concat(r, \"[\").concat(_a17, \"]\"), e[_a17], \"string, number, or boolean expected, \".concat(i, \" found\")));\n          }\n\n          break;\n\n        case \"any\":\n        case \"all\":\n        case \"none\":\n          for (var _n32 = 1; _n32 < e.length; _n32++) {\n            s = s.concat(en({\n              key: \"\".concat(r, \"[\").concat(_n32, \"]\"),\n              value: e[_n32],\n              style: t.style,\n              styleSpec: t.styleSpec\n            }));\n          }\n\n          break;\n\n        case \"has\":\n        case \"!has\":\n          i = wr(e[1]), 2 !== e.length ? s.push(new it(r, e, \"filter array for \\\"\".concat(e[0], \"\\\" operator must have 2 elements\"))) : \"string\" !== i && s.push(new it(\"\".concat(r, \"[1]\"), e[1], \"string expected, \".concat(i, \" found\")));\n          break;\n\n        case \"within\":\n          i = wr(e[1]), 2 !== e.length ? s.push(new it(r, e, \"filter array for \\\"\".concat(e[0], \"\\\" operator must have 2 elements\"))) : \"object\" !== i && s.push(new it(\"\".concat(r, \"[1]\"), e[1], \"object expected, \".concat(i, \" found\")));\n      }\n\n      return s;\n    }\n\n    function rn(t, e) {\n      var r = t.key,\n          n = t.style,\n          i = t.styleSpec,\n          s = t.value,\n          a = t.objectKey,\n          o = i[\"\".concat(e, \"_\").concat(t.layerType)];\n      if (!o) return [];\n      var l = a.match(/^(.*)-transition$/);\n      if (\"paint\" === e && l && o[l[1]] && o[l[1]].transition) return pn({\n        key: r,\n        value: s,\n        valueSpec: i.transition,\n        style: n,\n        styleSpec: i\n      });\n      var u = t.valueSpec || o[a];\n      if (!u) return [new it(r, s, \"unknown property \\\"\".concat(a, \"\\\"\"))];\n      var c;\n      if (\"string\" === wr(s) && xr(u) && !u.tokens && (c = /^{([^}]+)}$/.exec(s))) return [new it(r, s, \"\\\"\".concat(a, \"\\\" does not support interpolation syntax\\nUse an identity property function instead: `{ \\\"type\\\": \\\"identity\\\", \\\"property\\\": \").concat(JSON.stringify(c[1]), \" }`.\"))];\n      var h = [];\n      return \"symbol\" === t.layerType && (\"text-field\" === a && n && !n.glyphs && h.push(new it(r, s, 'use of \"text-field\" requires a style \"glyphs\" property')), \"text-font\" === a && _r(lt(s)) && \"identity\" === ot(s.type) && h.push(new it(r, s, '\"text-font\" does not support identity functions'))), h.concat(pn({\n        key: t.key,\n        value: s,\n        valueSpec: u,\n        style: n,\n        styleSpec: i,\n        expressionContext: \"property\",\n        propertyType: e,\n        propertyKey: a\n      }));\n    }\n\n    function nn(t) {\n      return rn(t, \"paint\");\n    }\n\n    function sn(t) {\n      return rn(t, \"layout\");\n    }\n\n    function an(t) {\n      var e = [];\n      var r = t.value,\n          n = t.key,\n          i = t.style,\n          s = t.styleSpec;\n      r.type || r.ref || e.push(new it(n, r, 'either \"type\" or \"ref\" is required'));\n      var a = ot(r.type);\n      var o = ot(r.ref);\n\n      if (r.id) {\n        var _s19 = ot(r.id);\n\n        for (var _a18 = 0; _a18 < t.arrayIndex; _a18++) {\n          var _t38 = i.layers[_a18];\n          ot(_t38.id) === _s19 && e.push(new it(n, r.id, \"duplicate layer id \\\"\".concat(r.id, \"\\\", previously used at line \").concat(_t38.id.__line__)));\n        }\n      }\n\n      if (\"ref\" in r) {\n        var _t39;\n\n        [\"type\", \"source\", \"source-layer\", \"filter\", \"layout\"].forEach(function (t) {\n          t in r && e.push(new it(n, r[t], \"\\\"\".concat(t, \"\\\" is prohibited for ref layers\")));\n        }), i.layers.forEach(function (e) {\n          ot(e.id) === o && (_t39 = e);\n        }), _t39 ? _t39.ref ? e.push(new it(n, r.ref, \"ref cannot reference another ref layer\")) : a = ot(_t39.type) : e.push(new it(n, r.ref, \"ref layer \\\"\".concat(o, \"\\\" not found\")));\n      } else if (\"background\" !== a) if (r.source) {\n        var _t40 = i.sources && i.sources[r.source],\n            _s20 = _t40 && ot(_t40.type);\n\n        _t40 ? \"vector\" === _s20 && \"raster\" === a ? e.push(new it(n, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a raster source\"))) : \"raster\" === _s20 && \"raster\" !== a ? e.push(new it(n, r.source, \"layer \\\"\".concat(r.id, \"\\\" requires a vector source\"))) : \"vector\" !== _s20 || r[\"source-layer\"] ? \"raster-dem\" === _s20 && \"hillshade\" !== a ? e.push(new it(n, r.source, \"raster-dem source can only be used with layer type 'hillshade'.\")) : \"line\" !== a || !r.paint || !r.paint[\"line-gradient\"] || \"geojson\" === _s20 && _t40.lineMetrics || e.push(new it(n, r, \"layer \\\"\".concat(r.id, \"\\\" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.\"))) : e.push(new it(n, r, \"layer \\\"\".concat(r.id, \"\\\" must specify a \\\"source-layer\\\"\"))) : e.push(new it(n, r.source, \"source \\\"\".concat(r.source, \"\\\" not found\")));\n      } else e.push(new it(n, r, 'missing required property \"source\"'));\n\n      return e = e.concat($r({\n        key: n,\n        value: r,\n        valueSpec: s.layer,\n        style: t.style,\n        styleSpec: t.styleSpec,\n        objectElementValidators: {\n          \"*\": function _() {\n            return [];\n          },\n          type: function type() {\n            return pn({\n              key: \"\".concat(n, \".type\"),\n              value: r.type,\n              valueSpec: s.layer.type,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              object: r,\n              objectKey: \"type\"\n            });\n          },\n          filter: tn,\n          layout: function layout(t) {\n            return $r({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return sn(at({\n                    layerType: a\n                  }, t));\n                }\n              }\n            });\n          },\n          paint: function paint(t) {\n            return $r({\n              layer: r,\n              key: t.key,\n              value: t.value,\n              style: t.style,\n              styleSpec: t.styleSpec,\n              objectElementValidators: {\n                \"*\": function _(t) {\n                  return nn(at({\n                    layerType: a\n                  }, t));\n                }\n              }\n            });\n          }\n        }\n      })), e;\n    }\n\n    function on(t) {\n      var e = t.value,\n          r = t.key,\n          n = wr(e);\n      return \"string\" !== n ? [new it(r, e, \"string expected, \".concat(n, \" found\"))] : [];\n    }\n\n    var ln = {\n      promoteId: function promoteId(_ref111) {\n        var t = _ref111.key,\n            e = _ref111.value;\n        if (\"string\" === wr(e)) return on({\n          key: t,\n          value: e\n        });\n        {\n          var _r50 = [];\n\n          for (var _n33 in e) {\n            _r50.push.apply(_r50, _toConsumableArray(on({\n              key: \"\".concat(t, \".\").concat(_n33),\n              value: e[_n33]\n            })));\n          }\n\n          return _r50;\n        }\n      }\n    };\n\n    function un(t) {\n      var e = t.value,\n          r = t.key,\n          n = t.styleSpec,\n          i = t.style;\n      if (!e.type) return [new it(r, e, '\"type\" is required')];\n      var s = ot(e.type);\n      var a;\n\n      switch (s) {\n        case \"vector\":\n        case \"raster\":\n        case \"raster-dem\":\n          return a = $r({\n            key: r,\n            value: e,\n            valueSpec: n[\"source_\".concat(s.replace(\"-\", \"_\"))],\n            style: t.style,\n            styleSpec: n,\n            objectElementValidators: ln\n          }), a;\n\n        case \"geojson\":\n          if (a = $r({\n            key: r,\n            value: e,\n            valueSpec: n.source_geojson,\n            style: i,\n            styleSpec: n,\n            objectElementValidators: ln\n          }), e.cluster) for (var _t41 in e.clusterProperties) {\n            var _a19, _a20;\n\n            var _e$clusterProperties$ = _slicedToArray(e.clusterProperties[_t41], 2),\n                _n34 = _e$clusterProperties$[0],\n                _i27 = _e$clusterProperties$[1],\n                _s21 = \"string\" == typeof _n34 ? [_n34, [\"accumulated\"], [\"get\", _t41]] : _n34;\n\n            (_a19 = a).push.apply(_a19, _toConsumableArray(qr({\n              key: \"\".concat(r, \".\").concat(_t41, \".map\"),\n              value: _i27,\n              expressionContext: \"cluster-map\"\n            }))), (_a20 = a).push.apply(_a20, _toConsumableArray(qr({\n              key: \"\".concat(r, \".\").concat(_t41, \".reduce\"),\n              value: _s21,\n              expressionContext: \"cluster-reduce\"\n            })));\n          }\n          return a;\n\n        case \"video\":\n          return $r({\n            key: r,\n            value: e,\n            valueSpec: n.source_video,\n            style: i,\n            styleSpec: n\n          });\n\n        case \"image\":\n          return $r({\n            key: r,\n            value: e,\n            valueSpec: n.source_image,\n            style: i,\n            styleSpec: n\n          });\n\n        case \"canvas\":\n          return [new it(r, null, \"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.\", \"source.canvas\")];\n\n        default:\n          return jr({\n            key: \"\".concat(r, \".type\"),\n            value: e.type,\n            valueSpec: {\n              values: [\"vector\", \"raster\", \"raster-dem\", \"geojson\", \"video\", \"image\"]\n            },\n            style: i,\n            styleSpec: n\n          });\n      }\n    }\n\n    function cn(t) {\n      var e = t.value,\n          r = t.styleSpec,\n          n = r.light,\n          i = t.style;\n      var s = [];\n      var a = wr(e);\n      if (void 0 === e) return s;\n      if (\"object\" !== a) return s = s.concat([new it(\"light\", e, \"object expected, \".concat(a, \" found\"))]), s;\n\n      for (var _t42 in e) {\n        var _a21 = _t42.match(/^(.*)-transition$/);\n\n        s = s.concat(_a21 && n[_a21[1]] && n[_a21[1]].transition ? pn({\n          key: _t42,\n          value: e[_t42],\n          valueSpec: r.transition,\n          style: i,\n          styleSpec: r\n        }) : n[_t42] ? pn({\n          key: _t42,\n          value: e[_t42],\n          valueSpec: n[_t42],\n          style: i,\n          styleSpec: r\n        }) : [new it(_t42, e[_t42], \"unknown property \\\"\".concat(_t42, \"\\\"\"))]);\n      }\n\n      return s;\n    }\n\n    var hn = {\n      \"*\": function _() {\n        return [];\n      },\n      array: Rr,\n      boolean: function boolean(t) {\n        var e = t.value,\n            r = t.key,\n            n = wr(e);\n        return \"boolean\" !== n ? [new it(r, e, \"boolean expected, \".concat(n, \" found\"))] : [];\n      },\n      number: Ur,\n      color: function color(t) {\n        var e = t.key,\n            r = t.value,\n            n = wr(r);\n        return \"string\" !== n ? [new it(e, r, \"color expected, \".concat(n, \" found\"))] : null === It(r) ? [new it(e, r, \"color expected, \\\"\".concat(r, \"\\\" found\"))] : [];\n      },\n      constants: st,\n      enum: jr,\n      filter: tn,\n      function: Or,\n      layer: an,\n      object: $r,\n      source: un,\n      light: cn,\n      string: on,\n      formatted: function formatted(t) {\n        return 0 === on(t).length ? [] : qr(t);\n      },\n      resolvedImage: function resolvedImage(t) {\n        return 0 === on(t).length ? [] : qr(t);\n      }\n    };\n\n    function pn(t) {\n      var e = t.value,\n          r = t.valueSpec,\n          n = t.styleSpec;\n      return r.expression && _r(ot(e)) ? Or(t) : r.expression && Pr(lt(e)) ? qr(t) : r.type && hn[r.type] ? hn[r.type](t) : $r(at({}, t, {\n        valueSpec: r.type ? n[r.type] : r\n      }));\n    }\n\n    function fn(t) {\n      var e = t.value,\n          r = t.key,\n          n = on(t);\n      return n.length || (-1 === e.indexOf(\"{fontstack}\") && n.push(new it(r, e, '\"glyphs\" url must include a \"{fontstack}\" token')), -1 === e.indexOf(\"{range}\") && n.push(new it(r, e, '\"glyphs\" url must include a \"{range}\" token'))), n;\n    }\n\n    function dn(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : nt;\n      var r = [];\n      return r = r.concat(pn({\n        key: \"\",\n        value: t,\n        valueSpec: e.$root,\n        styleSpec: e,\n        style: t,\n        objectElementValidators: {\n          glyphs: fn,\n          \"*\": function _() {\n            return [];\n          }\n        }\n      })), t.constants && (r = r.concat(st({\n        key: \"constants\",\n        value: t.constants,\n        style: t,\n        styleSpec: e\n      }))), yn(r);\n    }\n\n    function yn(t) {\n      return [].concat(t).sort(function (t, e) {\n        return t.line - e.line;\n      });\n    }\n\n    function mn(t) {\n      return function () {\n        for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n          e[_key5] = arguments[_key5];\n        }\n\n        return yn(t.apply(this, e));\n      };\n    }\n\n    dn.source = mn(un), dn.light = mn(cn), dn.layer = mn(an), dn.filter = mn(tn), dn.paintProperty = mn(nn), dn.layoutProperty = mn(sn);\n    var gn = dn,\n        xn = gn.light,\n        vn = gn.paintProperty,\n        bn = gn.layoutProperty;\n\n    function wn(t, e) {\n      var r = !1;\n\n      if (e && e.length) {\n        var _iterator43 = _createForOfIteratorHelper(e),\n            _step43;\n\n        try {\n          for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n            var _n35 = _step43.value;\n            t.fire(new et(new Error(_n35.message))), r = !0;\n          }\n        } catch (err) {\n          _iterator43.e(err);\n        } finally {\n          _iterator43.f();\n        }\n      }\n\n      return r;\n    }\n\n    var _n = /*#__PURE__*/function () {\n      function _n(t, e, r) {\n        _classCallCheck(this, _n);\n\n        var n = this.cells = [];\n\n        if (t instanceof ArrayBuffer) {\n          this.arrayBuffer = t;\n\n          var _i28 = new Int32Array(this.arrayBuffer);\n\n          t = _i28[0], this.d = (e = _i28[1]) + 2 * (r = _i28[2]);\n\n          for (var _t43 = 0; _t43 < this.d * this.d; _t43++) {\n            var _e45 = _i28[3 + _t43],\n                _r51 = _i28[3 + _t43 + 1];\n            n.push(_e45 === _r51 ? null : _i28.subarray(_e45, _r51));\n          }\n\n          var _s22 = _i28[3 + n.length + 1];\n          this.keys = _i28.subarray(_i28[3 + n.length], _s22), this.bboxes = _i28.subarray(_s22), this.insert = this._insertReadonly;\n        } else {\n          this.d = e + 2 * r;\n\n          for (var _t44 = 0; _t44 < this.d * this.d; _t44++) {\n            n.push([]);\n          }\n\n          this.keys = [], this.bboxes = [];\n        }\n\n        this.n = e, this.extent = t, this.padding = r, this.scale = e / t, this.uid = 0;\n        var i = r / e * t;\n        this.min = -i, this.max = t + i;\n      }\n\n      _createClass(_n, [{\n        key: \"insert\",\n        value: function insert(t, e, r, n, i) {\n          this._forEachCell(e, r, n, i, this._insertCell, this.uid++, void 0, void 0), this.keys.push(t), this.bboxes.push(e), this.bboxes.push(r), this.bboxes.push(n), this.bboxes.push(i);\n        }\n      }, {\n        key: \"_insertReadonly\",\n        value: function _insertReadonly() {\n          throw new Error(\"Cannot insert into a GridIndex created from an ArrayBuffer.\");\n        }\n      }, {\n        key: \"_insertCell\",\n        value: function _insertCell(t, e, r, n, i, s) {\n          this.cells[i].push(s);\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, r, n, i) {\n          var s = this.min,\n              a = this.max;\n          if (t <= s && e <= s && a <= r && a <= n && !i) return Array.prototype.slice.call(this.keys);\n          {\n            var _s23 = [];\n            return this._forEachCell(t, e, r, n, this._queryCell, _s23, {}, i), _s23;\n          }\n        }\n      }, {\n        key: \"_queryCell\",\n        value: function _queryCell(t, e, r, n, i, s, a, o) {\n          var l = this.cells[i];\n\n          if (null !== l) {\n            var _i29 = this.keys,\n                _u7 = this.bboxes;\n\n            for (var _c3 = 0; _c3 < l.length; _c3++) {\n              var _h = l[_c3];\n\n              if (void 0 === a[_h]) {\n                var _l7 = 4 * _h;\n\n                (o ? o(_u7[_l7 + 0], _u7[_l7 + 1], _u7[_l7 + 2], _u7[_l7 + 3]) : t <= _u7[_l7 + 2] && e <= _u7[_l7 + 3] && r >= _u7[_l7 + 0] && n >= _u7[_l7 + 1]) ? (a[_h] = !0, s.push(_i29[_h])) : a[_h] = !1;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"_forEachCell\",\n        value: function _forEachCell(t, e, r, n, i, s, a, o) {\n          var l = this._convertToCellCoord(t),\n              u = this._convertToCellCoord(e),\n              c = this._convertToCellCoord(r),\n              h = this._convertToCellCoord(n);\n\n          for (var _p = l; _p <= c; _p++) {\n            for (var _l8 = u; _l8 <= h; _l8++) {\n              var _u8 = this.d * _l8 + _p;\n\n              if ((!o || o(this._convertFromCellCoord(_p), this._convertFromCellCoord(_l8), this._convertFromCellCoord(_p + 1), this._convertFromCellCoord(_l8 + 1))) && i.call(this, t, e, r, n, _u8, s, a, o)) return;\n            }\n          }\n        }\n      }, {\n        key: \"_convertFromCellCoord\",\n        value: function _convertFromCellCoord(t) {\n          return (t - this.padding) / this.scale;\n        }\n      }, {\n        key: \"_convertToCellCoord\",\n        value: function _convertToCellCoord(t) {\n          return Math.max(0, Math.min(this.d - 1, Math.floor(t * this.scale) + this.padding));\n        }\n      }, {\n        key: \"toArrayBuffer\",\n        value: function toArrayBuffer() {\n          if (this.arrayBuffer) return this.arrayBuffer;\n          var t = this.cells,\n              e = 3 + this.cells.length + 1 + 1;\n          var r = 0;\n\n          for (var _t45 = 0; _t45 < this.cells.length; _t45++) {\n            r += this.cells[_t45].length;\n          }\n\n          var n = new Int32Array(e + r + this.keys.length + this.bboxes.length);\n          n[0] = this.extent, n[1] = this.n, n[2] = this.padding;\n          var i = e;\n\n          for (var _e46 = 0; _e46 < t.length; _e46++) {\n            var _r52 = t[_e46];\n            n[3 + _e46] = i, n.set(_r52, i), i += _r52.length;\n          }\n\n          return n[3 + t.length] = i, n.set(this.keys, i), i += this.keys.length, n[3 + t.length + 1] = i, n.set(this.bboxes, i), i += this.bboxes.length, n.buffer;\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          var r = t.toArrayBuffer();\n          return e && e.push(r), {\n            buffer: r\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          return new _n(t.buffer);\n        }\n      }]);\n\n      return _n;\n    }();\n\n    var An = {};\n\n    function kn(t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      Object.defineProperty(e, \"_classRegistryKey\", {\n        value: t,\n        writeable: !1\n      }), An[t] = {\n        klass: e,\n        omit: r.omit || [],\n        shallow: r.shallow || []\n      };\n    }\n\n    kn(\"Object\", Object), kn(\"TransferableGridIndex\", _n), kn(\"Color\", Et), kn(\"Error\", Error), kn(\"AJAXError\", q), kn(\"ResolvedImage\", Dt), kn(\"StylePropertyFunction\", Lr), kn(\"StyleExpression\", Cr, {\n      omit: [\"_evaluator\"]\n    }), kn(\"ZoomDependentExpression\", Fr), kn(\"ZoomConstantExpression\", Er), kn(\"CompoundExpression\", Wt, {\n      omit: [\"_evaluate\"]\n    });\n\n    for (var _t46 in hr) {\n      hr[_t46]._classRegistryKey || kn(\"Expression_\".concat(_t46), hr[_t46]);\n    }\n\n    function Sn(t) {\n      return t && \"undefined\" != typeof ArrayBuffer && (t instanceof ArrayBuffer || t.constructor && \"ArrayBuffer\" === t.constructor.name);\n    }\n\n    function zn(t, e) {\n      if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof Blob) return t;\n      if (Sn(t)) return e && e.push(t), t;\n      if (A(t)) return e && e.push(t), t;\n\n      if (ArrayBuffer.isView(t)) {\n        var _r53 = t;\n        return e && e.push(_r53.buffer), _r53;\n      }\n\n      if (t instanceof ImageData) return e && e.push(t.data.buffer), t;\n\n      if (Array.isArray(t)) {\n        var _r54 = [];\n\n        var _iterator44 = _createForOfIteratorHelper(t),\n            _step44;\n\n        try {\n          for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n            var _n36 = _step44.value;\n\n            _r54.push(zn(_n36, e));\n          }\n        } catch (err) {\n          _iterator44.e(err);\n        } finally {\n          _iterator44.f();\n        }\n\n        return _r54;\n      }\n\n      if (\"object\" == typeof t) {\n        var _r55 = t.constructor,\n            _n37 = _r55._classRegistryKey;\n        if (!_n37) throw new Error(\"can't serialize object of unregistered class\");\n\n        var _i30 = _r55.serialize ? _r55.serialize(t, e) : {};\n\n        if (!_r55.serialize) {\n          for (var _r56 in t) {\n            if (!t.hasOwnProperty(_r56)) continue;\n            if (An[_n37].omit.indexOf(_r56) >= 0) continue;\n            var _s24 = t[_r56];\n            _i30[_r56] = An[_n37].shallow.indexOf(_r56) >= 0 ? _s24 : zn(_s24, e);\n          }\n\n          t instanceof Error && (_i30.message = t.message);\n        }\n\n        if (_i30.$name) throw new Error(\"$name property is reserved for worker serialization logic.\");\n        return \"Object\" !== _n37 && (_i30.$name = _n37), _i30;\n      }\n\n      throw new Error(\"can't serialize object of type \" + typeof t);\n    }\n\n    function In(t) {\n      if (null == t || \"boolean\" == typeof t || \"number\" == typeof t || \"string\" == typeof t || t instanceof Boolean || t instanceof Number || t instanceof String || t instanceof Date || t instanceof RegExp || t instanceof Blob || Sn(t) || A(t) || ArrayBuffer.isView(t) || t instanceof ImageData) return t;\n      if (Array.isArray(t)) return t.map(In);\n\n      if (\"object\" == typeof t) {\n        var _e47 = t.$name || \"Object\";\n\n        if (!An[_e47]) throw new Error(\"can't deserialize unregistered class \".concat(_e47));\n        var _r57 = An[_e47].klass;\n        if (!_r57) throw new Error(\"can't deserialize unregistered class \".concat(_e47));\n        if (_r57.deserialize) return _r57.deserialize(t);\n\n        var _n38 = Object.create(_r57.prototype);\n\n        for (var _i31 = 0, _Object$keys = Object.keys(t); _i31 < _Object$keys.length; _i31++) {\n          var _r58 = _Object$keys[_i31];\n          if (\"$name\" === _r58) continue;\n          var _i32 = t[_r58];\n          _n38[_r58] = An[_e47].shallow.indexOf(_r58) >= 0 ? _i32 : In(_i32);\n        }\n\n        return _n38;\n      }\n\n      throw new Error(\"can't deserialize object of type \" + typeof t);\n    }\n\n    var Mn = /*#__PURE__*/function () {\n      function Mn() {\n        _classCallCheck(this, Mn);\n\n        this.first = !0;\n      }\n\n      _createClass(Mn, [{\n        key: \"update\",\n        value: function update(t, e) {\n          var r = Math.floor(t);\n          return this.first ? (this.first = !1, this.lastIntegerZoom = r, this.lastIntegerZoomTime = 0, this.lastZoom = t, this.lastFloorZoom = r, !0) : (this.lastFloorZoom > r ? (this.lastIntegerZoom = r + 1, this.lastIntegerZoomTime = e) : this.lastFloorZoom < r && (this.lastIntegerZoom = r, this.lastIntegerZoomTime = e), t !== this.lastZoom && (this.lastZoom = t, this.lastFloorZoom = r, !0));\n        }\n      }]);\n\n      return Mn;\n    }();\n\n    var Bn = {\n      \"Latin-1 Supplement\": function Latin1Supplement(t) {\n        return t >= 128 && t <= 255;\n      },\n      Arabic: function Arabic(t) {\n        return t >= 1536 && t <= 1791;\n      },\n      \"Arabic Supplement\": function ArabicSupplement(t) {\n        return t >= 1872 && t <= 1919;\n      },\n      \"Arabic Extended-A\": function ArabicExtendedA(t) {\n        return t >= 2208 && t <= 2303;\n      },\n      \"Hangul Jamo\": function HangulJamo(t) {\n        return t >= 4352 && t <= 4607;\n      },\n      \"Unified Canadian Aboriginal Syllabics\": function UnifiedCanadianAboriginalSyllabics(t) {\n        return t >= 5120 && t <= 5759;\n      },\n      Khmer: function Khmer(t) {\n        return t >= 6016 && t <= 6143;\n      },\n      \"Unified Canadian Aboriginal Syllabics Extended\": function UnifiedCanadianAboriginalSyllabicsExtended(t) {\n        return t >= 6320 && t <= 6399;\n      },\n      \"General Punctuation\": function GeneralPunctuation(t) {\n        return t >= 8192 && t <= 8303;\n      },\n      \"Letterlike Symbols\": function LetterlikeSymbols(t) {\n        return t >= 8448 && t <= 8527;\n      },\n      \"Number Forms\": function NumberForms(t) {\n        return t >= 8528 && t <= 8591;\n      },\n      \"Miscellaneous Technical\": function MiscellaneousTechnical(t) {\n        return t >= 8960 && t <= 9215;\n      },\n      \"Control Pictures\": function ControlPictures(t) {\n        return t >= 9216 && t <= 9279;\n      },\n      \"Optical Character Recognition\": function OpticalCharacterRecognition(t) {\n        return t >= 9280 && t <= 9311;\n      },\n      \"Enclosed Alphanumerics\": function EnclosedAlphanumerics(t) {\n        return t >= 9312 && t <= 9471;\n      },\n      \"Geometric Shapes\": function GeometricShapes(t) {\n        return t >= 9632 && t <= 9727;\n      },\n      \"Miscellaneous Symbols\": function MiscellaneousSymbols(t) {\n        return t >= 9728 && t <= 9983;\n      },\n      \"Miscellaneous Symbols and Arrows\": function MiscellaneousSymbolsAndArrows(t) {\n        return t >= 11008 && t <= 11263;\n      },\n      \"CJK Radicals Supplement\": function CJKRadicalsSupplement(t) {\n        return t >= 11904 && t <= 12031;\n      },\n      \"Kangxi Radicals\": function KangxiRadicals(t) {\n        return t >= 12032 && t <= 12255;\n      },\n      \"Ideographic Description Characters\": function IdeographicDescriptionCharacters(t) {\n        return t >= 12272 && t <= 12287;\n      },\n      \"CJK Symbols and Punctuation\": function CJKSymbolsAndPunctuation(t) {\n        return t >= 12288 && t <= 12351;\n      },\n      Hiragana: function Hiragana(t) {\n        return t >= 12352 && t <= 12447;\n      },\n      Katakana: function Katakana(t) {\n        return t >= 12448 && t <= 12543;\n      },\n      Bopomofo: function Bopomofo(t) {\n        return t >= 12544 && t <= 12591;\n      },\n      \"Hangul Compatibility Jamo\": function HangulCompatibilityJamo(t) {\n        return t >= 12592 && t <= 12687;\n      },\n      Kanbun: function Kanbun(t) {\n        return t >= 12688 && t <= 12703;\n      },\n      \"Bopomofo Extended\": function BopomofoExtended(t) {\n        return t >= 12704 && t <= 12735;\n      },\n      \"CJK Strokes\": function CJKStrokes(t) {\n        return t >= 12736 && t <= 12783;\n      },\n      \"Katakana Phonetic Extensions\": function KatakanaPhoneticExtensions(t) {\n        return t >= 12784 && t <= 12799;\n      },\n      \"Enclosed CJK Letters and Months\": function EnclosedCJKLettersAndMonths(t) {\n        return t >= 12800 && t <= 13055;\n      },\n      \"CJK Compatibility\": function CJKCompatibility(t) {\n        return t >= 13056 && t <= 13311;\n      },\n      \"CJK Unified Ideographs Extension A\": function CJKUnifiedIdeographsExtensionA(t) {\n        return t >= 13312 && t <= 19903;\n      },\n      \"Yijing Hexagram Symbols\": function YijingHexagramSymbols(t) {\n        return t >= 19904 && t <= 19967;\n      },\n      \"CJK Unified Ideographs\": function CJKUnifiedIdeographs(t) {\n        return t >= 19968 && t <= 40959;\n      },\n      \"Yi Syllables\": function YiSyllables(t) {\n        return t >= 40960 && t <= 42127;\n      },\n      \"Yi Radicals\": function YiRadicals(t) {\n        return t >= 42128 && t <= 42191;\n      },\n      \"Hangul Jamo Extended-A\": function HangulJamoExtendedA(t) {\n        return t >= 43360 && t <= 43391;\n      },\n      \"Hangul Syllables\": function HangulSyllables(t) {\n        return t >= 44032 && t <= 55215;\n      },\n      \"Hangul Jamo Extended-B\": function HangulJamoExtendedB(t) {\n        return t >= 55216 && t <= 55295;\n      },\n      \"Private Use Area\": function PrivateUseArea(t) {\n        return t >= 57344 && t <= 63743;\n      },\n      \"CJK Compatibility Ideographs\": function CJKCompatibilityIdeographs(t) {\n        return t >= 63744 && t <= 64255;\n      },\n      \"Arabic Presentation Forms-A\": function ArabicPresentationFormsA(t) {\n        return t >= 64336 && t <= 65023;\n      },\n      \"Vertical Forms\": function VerticalForms(t) {\n        return t >= 65040 && t <= 65055;\n      },\n      \"CJK Compatibility Forms\": function CJKCompatibilityForms(t) {\n        return t >= 65072 && t <= 65103;\n      },\n      \"Small Form Variants\": function SmallFormVariants(t) {\n        return t >= 65104 && t <= 65135;\n      },\n      \"Arabic Presentation Forms-B\": function ArabicPresentationFormsB(t) {\n        return t >= 65136 && t <= 65279;\n      },\n      \"Halfwidth and Fullwidth Forms\": function HalfwidthAndFullwidthForms(t) {\n        return t >= 65280 && t <= 65519;\n      }\n    };\n\n    function Cn(t) {\n      var _iterator45 = _createForOfIteratorHelper(t),\n          _step45;\n\n      try {\n        for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n          var _e48 = _step45.value;\n          if (En(_e48.charCodeAt(0))) return !0;\n        }\n      } catch (err) {\n        _iterator45.e(err);\n      } finally {\n        _iterator45.f();\n      }\n\n      return !1;\n    }\n\n    function Pn(t) {\n      var _iterator46 = _createForOfIteratorHelper(t),\n          _step46;\n\n      try {\n        for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n          var _e49 = _step46.value;\n          if (!Vn(_e49.charCodeAt(0))) return !1;\n        }\n      } catch (err) {\n        _iterator46.e(err);\n      } finally {\n        _iterator46.f();\n      }\n\n      return !0;\n    }\n\n    function Vn(t) {\n      return !(Bn.Arabic(t) || Bn[\"Arabic Supplement\"](t) || Bn[\"Arabic Extended-A\"](t) || Bn[\"Arabic Presentation Forms-A\"](t) || Bn[\"Arabic Presentation Forms-B\"](t));\n    }\n\n    function En(t) {\n      return !(746 !== t && 747 !== t && (t < 4352 || !(Bn[\"Bopomofo Extended\"](t) || Bn.Bopomofo(t) || Bn[\"CJK Compatibility Forms\"](t) && !(t >= 65097 && t <= 65103) || Bn[\"CJK Compatibility Ideographs\"](t) || Bn[\"CJK Compatibility\"](t) || Bn[\"CJK Radicals Supplement\"](t) || Bn[\"CJK Strokes\"](t) || !(!Bn[\"CJK Symbols and Punctuation\"](t) || t >= 12296 && t <= 12305 || t >= 12308 && t <= 12319 || 12336 === t) || Bn[\"CJK Unified Ideographs Extension A\"](t) || Bn[\"CJK Unified Ideographs\"](t) || Bn[\"Enclosed CJK Letters and Months\"](t) || Bn[\"Hangul Compatibility Jamo\"](t) || Bn[\"Hangul Jamo Extended-A\"](t) || Bn[\"Hangul Jamo Extended-B\"](t) || Bn[\"Hangul Jamo\"](t) || Bn[\"Hangul Syllables\"](t) || Bn.Hiragana(t) || Bn[\"Ideographic Description Characters\"](t) || Bn.Kanbun(t) || Bn[\"Kangxi Radicals\"](t) || Bn[\"Katakana Phonetic Extensions\"](t) || Bn.Katakana(t) && 12540 !== t || !(!Bn[\"Halfwidth and Fullwidth Forms\"](t) || 65288 === t || 65289 === t || 65293 === t || t >= 65306 && t <= 65310 || 65339 === t || 65341 === t || 65343 === t || t >= 65371 && t <= 65503 || 65507 === t || t >= 65512 && t <= 65519) || !(!Bn[\"Small Form Variants\"](t) || t >= 65112 && t <= 65118 || t >= 65123 && t <= 65126) || Bn[\"Unified Canadian Aboriginal Syllabics\"](t) || Bn[\"Unified Canadian Aboriginal Syllabics Extended\"](t) || Bn[\"Vertical Forms\"](t) || Bn[\"Yijing Hexagram Symbols\"](t) || Bn[\"Yi Syllables\"](t) || Bn[\"Yi Radicals\"](t))));\n    }\n\n    function Fn(t) {\n      return !(En(t) || function (t) {\n        return !!(Bn[\"Latin-1 Supplement\"](t) && (167 === t || 169 === t || 174 === t || 177 === t || 188 === t || 189 === t || 190 === t || 215 === t || 247 === t) || Bn[\"General Punctuation\"](t) && (8214 === t || 8224 === t || 8225 === t || 8240 === t || 8241 === t || 8251 === t || 8252 === t || 8258 === t || 8263 === t || 8264 === t || 8265 === t || 8273 === t) || Bn[\"Letterlike Symbols\"](t) || Bn[\"Number Forms\"](t) || Bn[\"Miscellaneous Technical\"](t) && (t >= 8960 && t <= 8967 || t >= 8972 && t <= 8991 || t >= 8996 && t <= 9e3 || 9003 === t || t >= 9085 && t <= 9114 || t >= 9150 && t <= 9165 || 9167 === t || t >= 9169 && t <= 9179 || t >= 9186 && t <= 9215) || Bn[\"Control Pictures\"](t) && 9251 !== t || Bn[\"Optical Character Recognition\"](t) || Bn[\"Enclosed Alphanumerics\"](t) || Bn[\"Geometric Shapes\"](t) || Bn[\"Miscellaneous Symbols\"](t) && !(t >= 9754 && t <= 9759) || Bn[\"Miscellaneous Symbols and Arrows\"](t) && (t >= 11026 && t <= 11055 || t >= 11088 && t <= 11097 || t >= 11192 && t <= 11243) || Bn[\"CJK Symbols and Punctuation\"](t) || Bn.Katakana(t) || Bn[\"Private Use Area\"](t) || Bn[\"CJK Compatibility Forms\"](t) || Bn[\"Small Form Variants\"](t) || Bn[\"Halfwidth and Fullwidth Forms\"](t) || 8734 === t || 8756 === t || 8757 === t || t >= 9984 && t <= 10087 || t >= 10102 && t <= 10131 || 65532 === t || 65533 === t);\n      }(t));\n    }\n\n    function Tn(t) {\n      return t >= 1424 && t <= 2303 || Bn[\"Arabic Presentation Forms-A\"](t) || Bn[\"Arabic Presentation Forms-B\"](t);\n    }\n\n    function Ln(t, e) {\n      return !(!e && Tn(t) || t >= 2304 && t <= 3583 || t >= 3840 && t <= 4255 || Bn.Khmer(t));\n    }\n\n    function Dn(t) {\n      var _iterator47 = _createForOfIteratorHelper(t),\n          _step47;\n\n      try {\n        for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n          var _e50 = _step47.value;\n          if (Tn(_e50.charCodeAt(0))) return !0;\n        }\n      } catch (err) {\n        _iterator47.e(err);\n      } finally {\n        _iterator47.f();\n      }\n\n      return !1;\n    }\n\n    var $n = \"deferred\",\n        Rn = \"loading\",\n        Un = \"loaded\";\n    var On = null,\n        qn = \"unavailable\",\n        jn = null;\n\n    var Nn = function Nn(t) {\n      t && \"string\" == typeof t && t.indexOf(\"NetworkError\") > -1 && (qn = \"error\"), On && On(t);\n    };\n\n    function Kn() {\n      Zn.fire(new tt(\"pluginStateChange\", {\n        pluginStatus: qn,\n        pluginURL: jn\n      }));\n    }\n\n    var Zn = new rt(),\n        Gn = function Gn() {\n      return qn;\n    },\n        Jn = function Jn() {\n      if (qn !== $n || !jn) throw new Error(\"rtl-text-plugin cannot be downloaded unless a pluginURL is specified\");\n      qn = Rn, Kn(), jn && Z({\n        url: jn\n      }, function (t) {\n        t ? Nn(t) : (qn = Un, Kn());\n      });\n    },\n        Xn = {\n      applyArabicShaping: null,\n      processBidirectionalText: null,\n      processStyledBidirectionalText: null,\n      isLoaded: function isLoaded() {\n        return qn === Un || null != Xn.applyArabicShaping;\n      },\n      isLoading: function isLoading() {\n        return qn === Rn;\n      },\n      setState: function setState(t) {\n        qn = t.pluginStatus, jn = t.pluginURL;\n      },\n      isParsed: function isParsed() {\n        return null != Xn.applyArabicShaping && null != Xn.processBidirectionalText && null != Xn.processStyledBidirectionalText;\n      },\n      getPluginURL: function getPluginURL() {\n        return jn;\n      }\n    };\n\n    var Yn = /*#__PURE__*/function () {\n      function Yn(t, e) {\n        _classCallCheck(this, Yn);\n\n        this.zoom = t, e ? (this.now = e.now, this.fadeDuration = e.fadeDuration, this.zoomHistory = e.zoomHistory, this.transition = e.transition) : (this.now = 0, this.fadeDuration = 0, this.zoomHistory = new Mn(), this.transition = {});\n      }\n\n      _createClass(Yn, [{\n        key: \"isSupportedScript\",\n        value: function isSupportedScript(t) {\n          return function (t, e) {\n            var _iterator48 = _createForOfIteratorHelper(t),\n                _step48;\n\n            try {\n              for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n                var _r59 = _step48.value;\n                if (!Ln(_r59.charCodeAt(0), e)) return !1;\n              }\n            } catch (err) {\n              _iterator48.e(err);\n            } finally {\n              _iterator48.f();\n            }\n\n            return !0;\n          }(t, Xn.isLoaded());\n        }\n      }, {\n        key: \"crossFadingFactor\",\n        value: function crossFadingFactor() {\n          return 0 === this.fadeDuration ? 1 : Math.min((this.now - this.zoomHistory.lastIntegerZoomTime) / this.fadeDuration, 1);\n        }\n      }, {\n        key: \"getCrossfadeParameters\",\n        value: function getCrossfadeParameters() {\n          var t = this.zoom,\n              e = t - Math.floor(t),\n              r = this.crossFadingFactor();\n          return t > this.zoomHistory.lastIntegerZoom ? {\n            fromScale: 2,\n            toScale: 1,\n            t: e + (1 - e) * r\n          } : {\n            fromScale: .5,\n            toScale: 1,\n            t: 1 - (1 - r) * e\n          };\n        }\n      }]);\n\n      return Yn;\n    }();\n\n    var Hn = /*#__PURE__*/function () {\n      function Hn(t, e) {\n        _classCallCheck(this, Hn);\n\n        this.property = t, this.value = e, this.expression = function (t, e) {\n          if (_r(t)) return new Lr(t, e);\n\n          if (Pr(t)) {\n            var _r60 = Tr(t, e);\n\n            if (\"error\" === _r60.result) throw new Error(_r60.value.map(function (t) {\n              return \"\".concat(t.key, \": \").concat(t.message);\n            }).join(\", \"));\n            return _r60.value;\n          }\n\n          {\n            var _r61 = t;\n            return \"string\" == typeof t && \"color\" === e.type && (_r61 = Et.parse(t)), {\n              kind: \"constant\",\n              evaluate: function evaluate() {\n                return _r61;\n              }\n            };\n          }\n        }(void 0 === e ? t.specification.default : e, t.specification);\n      }\n\n      _createClass(Hn, [{\n        key: \"isDataDriven\",\n        value: function isDataDriven() {\n          return \"source\" === this.expression.kind || \"composite\" === this.expression.kind;\n        }\n      }, {\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          return this.property.possiblyEvaluate(this, t, e, r);\n        }\n      }]);\n\n      return Hn;\n    }();\n\n    var Wn = /*#__PURE__*/function () {\n      function Wn(t) {\n        _classCallCheck(this, Wn);\n\n        this.property = t, this.value = new Hn(t, void 0);\n      }\n\n      _createClass(Wn, [{\n        key: \"transitioned\",\n        value: function transitioned(t, e) {\n          return new ti(this.property, this.value, e, o({}, t.transition, this.transition), t.now);\n        }\n      }, {\n        key: \"untransitioned\",\n        value: function untransitioned() {\n          return new ti(this.property, this.value, null, {}, 0);\n        }\n      }]);\n\n      return Wn;\n    }();\n\n    var Qn = /*#__PURE__*/function () {\n      function Qn(t) {\n        _classCallCheck(this, Qn);\n\n        this._properties = t, this._values = Object.create(t.defaultTransitionablePropertyValues);\n      }\n\n      _createClass(Qn, [{\n        key: \"getValue\",\n        value: function getValue(t) {\n          return p(this._values[t].value.value);\n        }\n      }, {\n        key: \"setValue\",\n        value: function setValue(t, e) {\n          Object.prototype.hasOwnProperty.call(this._values, t) || (this._values[t] = new Wn(this._values[t].property)), this._values[t].value = new Hn(this._values[t].property, null === e ? void 0 : p(e));\n        }\n      }, {\n        key: \"getTransition\",\n        value: function getTransition(t) {\n          return p(this._values[t].transition);\n        }\n      }, {\n        key: \"setTransition\",\n        value: function setTransition(t, e) {\n          Object.prototype.hasOwnProperty.call(this._values, t) || (this._values[t] = new Wn(this._values[t].property)), this._values[t].transition = p(e) || void 0;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n\n          for (var _i33 = 0, _Object$keys2 = Object.keys(this._values); _i33 < _Object$keys2.length; _i33++) {\n            var _e51 = _Object$keys2[_i33];\n\n            var _r62 = this.getValue(_e51);\n\n            void 0 !== _r62 && (t[_e51] = _r62);\n\n            var _n39 = this.getTransition(_e51);\n\n            void 0 !== _n39 && (t[\"\".concat(_e51, \"-transition\")] = _n39);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"transitioned\",\n        value: function transitioned(t, e) {\n          var r = new ei(this._properties);\n\n          for (var _i34 = 0, _Object$keys3 = Object.keys(this._values); _i34 < _Object$keys3.length; _i34++) {\n            var _n40 = _Object$keys3[_i34];\n            r._values[_n40] = this._values[_n40].transitioned(t, e._values[_n40]);\n          }\n\n          return r;\n        }\n      }, {\n        key: \"untransitioned\",\n        value: function untransitioned() {\n          var t = new ei(this._properties);\n\n          for (var _i35 = 0, _Object$keys4 = Object.keys(this._values); _i35 < _Object$keys4.length; _i35++) {\n            var _e52 = _Object$keys4[_i35];\n            t._values[_e52] = this._values[_e52].untransitioned();\n          }\n\n          return t;\n        }\n      }]);\n\n      return Qn;\n    }();\n\n    var ti = /*#__PURE__*/function () {\n      function ti(t, e, r, n, i) {\n        _classCallCheck(this, ti);\n\n        this.property = t, this.value = e, this.begin = i + n.delay || 0, this.end = this.begin + n.duration || 0, t.specification.transition && (n.delay || n.duration) && (this.prior = r);\n      }\n\n      _createClass(ti, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var n = t.now || 0,\n              i = this.value.possiblyEvaluate(t, e, r),\n              s = this.prior;\n\n          if (s) {\n            if (n > this.end) return this.prior = null, i;\n            if (this.value.isDataDriven()) return this.prior = null, i;\n            if (n < this.begin) return s.possiblyEvaluate(t, e, r);\n            {\n              var _a22 = (n - this.begin) / (this.end - this.begin);\n\n              return this.property.interpolate(s.possiblyEvaluate(t, e, r), i, function (t) {\n                if (t <= 0) return 0;\n                if (t >= 1) return 1;\n                var e = t * t,\n                    r = e * t;\n                return 4 * (t < .5 ? r : 3 * (t - e) + r - .75);\n              }(_a22));\n            }\n          }\n\n          return i;\n        }\n      }]);\n\n      return ti;\n    }();\n\n    var ei = /*#__PURE__*/function () {\n      function ei(t) {\n        _classCallCheck(this, ei);\n\n        this._properties = t, this._values = Object.create(t.defaultTransitioningPropertyValues);\n      }\n\n      _createClass(ei, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var n = new ii(this._properties);\n\n          for (var _i36 = 0, _Object$keys5 = Object.keys(this._values); _i36 < _Object$keys5.length; _i36++) {\n            var _i37 = _Object$keys5[_i36];\n            n._values[_i37] = this._values[_i37].possiblyEvaluate(t, e, r);\n          }\n\n          return n;\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          for (var _i38 = 0, _Object$keys6 = Object.keys(this._values); _i38 < _Object$keys6.length; _i38++) {\n            var _t47 = _Object$keys6[_i38];\n            if (this._values[_t47].prior) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return ei;\n    }();\n\n    var ri = /*#__PURE__*/function () {\n      function ri(t) {\n        _classCallCheck(this, ri);\n\n        this._properties = t, this._values = Object.create(t.defaultPropertyValues);\n      }\n\n      _createClass(ri, [{\n        key: \"getValue\",\n        value: function getValue(t) {\n          return p(this._values[t].value);\n        }\n      }, {\n        key: \"setValue\",\n        value: function setValue(t, e) {\n          this._values[t] = new Hn(this._values[t].property, null === e ? void 0 : p(e));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {};\n\n          for (var _i39 = 0, _Object$keys7 = Object.keys(this._values); _i39 < _Object$keys7.length; _i39++) {\n            var _e53 = _Object$keys7[_i39];\n\n            var _r63 = this.getValue(_e53);\n\n            void 0 !== _r63 && (t[_e53] = _r63);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r) {\n          var n = new ii(this._properties);\n\n          for (var _i40 = 0, _Object$keys8 = Object.keys(this._values); _i40 < _Object$keys8.length; _i40++) {\n            var _i41 = _Object$keys8[_i40];\n            n._values[_i41] = this._values[_i41].possiblyEvaluate(t, e, r);\n          }\n\n          return n;\n        }\n      }]);\n\n      return ri;\n    }();\n\n    var ni = /*#__PURE__*/function () {\n      function ni(t, e, r) {\n        _classCallCheck(this, ni);\n\n        this.property = t, this.value = e, this.parameters = r;\n      }\n\n      _createClass(ni, [{\n        key: \"isConstant\",\n        value: function isConstant() {\n          return \"constant\" === this.value.kind;\n        }\n      }, {\n        key: \"constantOr\",\n        value: function constantOr(t) {\n          return \"constant\" === this.value.kind ? this.value.value : t;\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n) {\n          return this.property.evaluate(this.value, this.parameters, t, e, r, n);\n        }\n      }]);\n\n      return ni;\n    }();\n\n    var ii = /*#__PURE__*/function () {\n      function ii(t) {\n        _classCallCheck(this, ii);\n\n        this._properties = t, this._values = Object.create(t.defaultPossiblyEvaluatedValues);\n      }\n\n      _createClass(ii, [{\n        key: \"get\",\n        value: function get(t) {\n          return this._values[t];\n        }\n      }]);\n\n      return ii;\n    }();\n\n    var si = /*#__PURE__*/function () {\n      function si(t) {\n        _classCallCheck(this, si);\n\n        this.specification = t;\n      }\n\n      _createClass(si, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e) {\n          return t.expression.evaluate(e);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t, e, r) {\n          var n = ze[this.specification.type];\n          return n ? n(t, e, r) : t;\n        }\n      }]);\n\n      return si;\n    }();\n\n    var ai = /*#__PURE__*/function () {\n      function ai(t, e) {\n        _classCallCheck(this, ai);\n\n        this.specification = t, this.overrides = e;\n      }\n\n      _createClass(ai, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          return new ni(this, \"constant\" === t.expression.kind || \"camera\" === t.expression.kind ? {\n            kind: \"constant\",\n            value: t.expression.evaluate(e, null, {}, r, n)\n          } : t.expression, e);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t, e, r) {\n          if (\"constant\" !== t.value.kind || \"constant\" !== e.value.kind) return t;\n          if (void 0 === t.value.value || void 0 === e.value.value) return new ni(this, {\n            kind: \"constant\",\n            value: void 0\n          }, t.parameters);\n          var n = ze[this.specification.type];\n          return n ? new ni(this, {\n            kind: \"constant\",\n            value: n(t.value.value, e.value.value, r)\n          }, t.parameters) : t;\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, s) {\n          return \"constant\" === t.kind ? t.value : t.evaluate(e, r, n, i, s);\n        }\n      }]);\n\n      return ai;\n    }();\n\n    var oi = /*#__PURE__*/function (_ai) {\n      _inherits(oi, _ai);\n\n      function oi() {\n        _classCallCheck(this, oi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(oi).apply(this, arguments));\n      }\n\n      _createClass(oi, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          if (void 0 === t.value) return new ni(this, {\n            kind: \"constant\",\n            value: void 0\n          }, e);\n\n          if (\"constant\" === t.expression.kind) {\n            var _i42 = t.expression.evaluate(e, null, {}, r, n),\n                _s25 = \"resolvedImage\" === t.property.specification.type && \"string\" != typeof _i42 ? _i42.name : _i42,\n                _a23 = this._calculate(_s25, _s25, _s25, e);\n\n            return new ni(this, {\n              kind: \"constant\",\n              value: _a23\n            }, e);\n          }\n\n          if (\"camera\" === t.expression.kind) {\n            var _r64 = this._calculate(t.expression.evaluate({\n              zoom: e.zoom - 1\n            }), t.expression.evaluate({\n              zoom: e.zoom\n            }), t.expression.evaluate({\n              zoom: e.zoom + 1\n            }), e);\n\n            return new ni(this, {\n              kind: \"constant\",\n              value: _r64\n            }, e);\n          }\n\n          return new ni(this, t.expression, e);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n, i, s) {\n          if (\"source\" === t.kind) {\n            var _a24 = t.evaluate(e, r, n, i, s);\n\n            return this._calculate(_a24, _a24, _a24, e);\n          }\n\n          return \"composite\" === t.kind ? this._calculate(t.evaluate({\n            zoom: Math.floor(e.zoom) - 1\n          }, r, n), t.evaluate({\n            zoom: Math.floor(e.zoom)\n          }, r, n), t.evaluate({\n            zoom: Math.floor(e.zoom) + 1\n          }, r, n), e) : t.value;\n        }\n      }, {\n        key: \"_calculate\",\n        value: function _calculate(t, e, r, n) {\n          return n.zoom > n.zoomHistory.lastIntegerZoom ? {\n            from: t,\n            to: e\n          } : {\n            from: r,\n            to: e\n          };\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t) {\n          return t;\n        }\n      }]);\n\n      return oi;\n    }(ai);\n\n    var li = /*#__PURE__*/function () {\n      function li(t) {\n        _classCallCheck(this, li);\n\n        this.specification = t;\n      }\n\n      _createClass(li, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          if (void 0 !== t.value) {\n            if (\"constant\" === t.expression.kind) {\n              var _i43 = t.expression.evaluate(e, null, {}, r, n);\n\n              return this._calculate(_i43, _i43, _i43, e);\n            }\n\n            return this._calculate(t.expression.evaluate(new Yn(Math.floor(e.zoom - 1), e)), t.expression.evaluate(new Yn(Math.floor(e.zoom), e)), t.expression.evaluate(new Yn(Math.floor(e.zoom + 1), e)), e);\n          }\n        }\n      }, {\n        key: \"_calculate\",\n        value: function _calculate(t, e, r, n) {\n          return n.zoom > n.zoomHistory.lastIntegerZoom ? {\n            from: t,\n            to: e\n          } : {\n            from: r,\n            to: e\n          };\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate(t) {\n          return t;\n        }\n      }]);\n\n      return li;\n    }();\n\n    var ui = /*#__PURE__*/function () {\n      function ui(t) {\n        _classCallCheck(this, ui);\n\n        this.specification = t;\n      }\n\n      _createClass(ui, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e, r, n) {\n          return !!t.expression.evaluate(e, null, {}, r, n);\n        }\n      }, {\n        key: \"interpolate\",\n        value: function interpolate() {\n          return !1;\n        }\n      }]);\n\n      return ui;\n    }();\n\n    var ci = function ci(t) {\n      _classCallCheck(this, ci);\n\n      this.properties = t, this.defaultPropertyValues = {}, this.defaultTransitionablePropertyValues = {}, this.defaultTransitioningPropertyValues = {}, this.defaultPossiblyEvaluatedValues = {}, this.overridableProperties = [];\n\n      for (var _e54 in t) {\n        var _r65 = t[_e54];\n        _r65.specification.overridable && this.overridableProperties.push(_e54);\n\n        var _n41 = this.defaultPropertyValues[_e54] = new Hn(_r65, void 0),\n            _i44 = this.defaultTransitionablePropertyValues[_e54] = new Wn(_r65);\n\n        this.defaultTransitioningPropertyValues[_e54] = _i44.untransitioned(), this.defaultPossiblyEvaluatedValues[_e54] = _n41.possiblyEvaluate({});\n      }\n    };\n\n    kn(\"DataDrivenProperty\", ai), kn(\"DataConstantProperty\", si), kn(\"CrossFadedDataDrivenProperty\", oi), kn(\"CrossFadedProperty\", li), kn(\"ColorRampProperty\", ui);\n    var hi = \"-transition\";\n\n    var pi = /*#__PURE__*/function (_rt) {\n      _inherits(pi, _rt);\n\n      function pi(t, e) {\n        var _this4;\n\n        _classCallCheck(this, pi);\n\n        if (_this4 = _possibleConstructorReturn(this, _getPrototypeOf(pi).call(this)), _this4.id = t.id, _this4.type = t.type, _this4._featureFilter = {\n          filter: function filter() {\n            return !0;\n          },\n          needGeometry: !1\n        }, \"custom\" !== t.type && (_this4.metadata = (t = t).metadata, _this4.minzoom = t.minzoom, _this4.maxzoom = t.maxzoom, \"background\" !== t.type && (_this4.source = t.source, _this4.sourceLayer = t[\"source-layer\"], _this4.filter = t.filter), e.layout && (_this4._unevaluatedLayout = new ri(e.layout)), e.paint)) {\n          _this4._transitionablePaint = new Qn(e.paint);\n\n          for (var _e55 in t.paint) {\n            _this4.setPaintProperty(_e55, t.paint[_e55], {\n              validate: !1\n            });\n          }\n\n          for (var _e56 in t.layout) {\n            _this4.setLayoutProperty(_e56, t.layout[_e56], {\n              validate: !1\n            });\n          }\n\n          _this4._transitioningPaint = _this4._transitionablePaint.untransitioned(), _this4.paint = new ii(e.paint);\n        }\n\n        return _possibleConstructorReturn(_this4);\n      }\n\n      _createClass(pi, [{\n        key: \"getCrossfadeParameters\",\n        value: function getCrossfadeParameters() {\n          return this._crossfadeParameters;\n        }\n      }, {\n        key: \"getLayoutProperty\",\n        value: function getLayoutProperty(t) {\n          return \"visibility\" === t ? this.visibility : this._unevaluatedLayout.getValue(t);\n        }\n      }, {\n        key: \"setLayoutProperty\",\n        value: function setLayoutProperty(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          null != e && this._validate(bn, \"layers.\".concat(this.id, \".layout.\").concat(t), t, e, r) || (\"visibility\" !== t ? this._unevaluatedLayout.setValue(t, e) : this.visibility = e);\n        }\n      }, {\n        key: \"getPaintProperty\",\n        value: function getPaintProperty(t) {\n          return t.endsWith(hi) ? this._transitionablePaint.getTransition(t.slice(0, -hi.length)) : this._transitionablePaint.getValue(t);\n        }\n      }, {\n        key: \"setPaintProperty\",\n        value: function setPaintProperty(t, e) {\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (null != e && this._validate(vn, \"layers.\".concat(this.id, \".paint.\").concat(t), t, e, r)) return !1;\n          if (t.endsWith(hi)) return this._transitionablePaint.setTransition(t.slice(0, -hi.length), e || void 0), !1;\n          {\n            var _r66 = this._transitionablePaint._values[t],\n                _n42 = \"cross-faded-data-driven\" === _r66.property.specification[\"property-type\"],\n                _i45 = _r66.value.isDataDriven(),\n                _s26 = _r66.value;\n\n            this._transitionablePaint.setValue(t, e), this._handleSpecialPaintPropertyUpdate(t);\n            var _a25 = this._transitionablePaint._values[t].value;\n            return _a25.isDataDriven() || _i45 || _n42 || this._handleOverridablePaintPropertyUpdate(t, _s26, _a25);\n          }\n        }\n      }, {\n        key: \"_handleSpecialPaintPropertyUpdate\",\n        value: function _handleSpecialPaintPropertyUpdate(t) {}\n      }, {\n        key: \"_handleOverridablePaintPropertyUpdate\",\n        value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n          return !1;\n        }\n      }, {\n        key: \"isHidden\",\n        value: function isHidden(t) {\n          return !!(this.minzoom && t < this.minzoom) || !!(this.maxzoom && t >= this.maxzoom) || \"none\" === this.visibility;\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(t) {\n          this._transitioningPaint = this._transitionablePaint.transitioned(t, this._transitioningPaint);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioningPaint.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          t.getCrossfadeParameters && (this._crossfadeParameters = t.getCrossfadeParameters()), this._unevaluatedLayout && (this.layout = this._unevaluatedLayout.possiblyEvaluate(t, void 0, e)), this.paint = this._transitioningPaint.possiblyEvaluate(t, void 0, e);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          var t = {\n            id: this.id,\n            type: this.type,\n            source: this.source,\n            \"source-layer\": this.sourceLayer,\n            metadata: this.metadata,\n            minzoom: this.minzoom,\n            maxzoom: this.maxzoom,\n            filter: this.filter,\n            layout: this._unevaluatedLayout && this._unevaluatedLayout.serialize(),\n            paint: this._transitionablePaint && this._transitionablePaint.serialize()\n          };\n          return this.visibility && (t.layout = t.layout || {}, t.layout.visibility = this.visibility), h(t, function (t, e) {\n            return !(void 0 === t || \"layout\" === e && !Object.keys(t).length || \"paint\" === e && !Object.keys(t).length);\n          });\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(t, e, r, n) {\n          var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return (!i || !1 !== i.validate) && wn(this, t.call(gn, {\n            key: e,\n            layerType: this.type,\n            objectKey: r,\n            value: n,\n            styleSpec: nt,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            }\n          }));\n        }\n      }, {\n        key: \"is3D\",\n        value: function is3D() {\n          return !1;\n        }\n      }, {\n        key: \"isTileClipped\",\n        value: function isTileClipped() {\n          return !1;\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return !1;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize() {}\n      }, {\n        key: \"isStateDependent\",\n        value: function isStateDependent() {\n          for (var _t48 in this.paint._values) {\n            var _e57 = this.paint.get(_t48);\n\n            if (_e57 instanceof ni && xr(_e57.property.specification) && (\"source\" === _e57.value.kind || \"composite\" === _e57.value.kind) && _e57.value.isStateDependent) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return pi;\n    }(rt);\n\n    var fi = {\n      Int8: Int8Array,\n      Uint8: Uint8Array,\n      Int16: Int16Array,\n      Uint16: Uint16Array,\n      Int32: Int32Array,\n      Uint32: Uint32Array,\n      Float32: Float32Array\n    };\n\n    var di = function di(t, e) {\n      _classCallCheck(this, di);\n\n      this._structArray = t, this._pos1 = e * this.size, this._pos2 = this._pos1 / 2, this._pos4 = this._pos1 / 4, this._pos8 = this._pos1 / 8;\n    };\n\n    var yi = /*#__PURE__*/function () {\n      function yi() {\n        _classCallCheck(this, yi);\n\n        this.isTransferred = !1, this.capacity = -1, this.resize(0);\n      }\n\n      _createClass(yi, [{\n        key: \"_trim\",\n        value: function _trim() {\n          this.length !== this.capacity && (this.capacity = this.length, this.arrayBuffer = this.arrayBuffer.slice(0, this.length * this.bytesPerElement), this._refreshViews());\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this.length = 0;\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(t) {\n          this.reserve(t), this.length = t;\n        }\n      }, {\n        key: \"reserve\",\n        value: function reserve(t) {\n          if (t > this.capacity) {\n            this.capacity = Math.max(t, Math.floor(5 * this.capacity), 128), this.arrayBuffer = new ArrayBuffer(this.capacity * this.bytesPerElement);\n            var _e58 = this.uint8;\n            this._refreshViews(), _e58 && this.uint8.set(_e58);\n          }\n        }\n      }, {\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          throw new Error(\"_refreshViews() must be implemented by each concrete StructArray layout\");\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          return t._trim(), e && (t.isTransferred = !0, e.push(t.arrayBuffer)), {\n            length: t.length,\n            arrayBuffer: t.arrayBuffer\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          var e = Object.create(this.prototype);\n          return e.arrayBuffer = t.arrayBuffer, e.length = t.length, e.capacity = t.arrayBuffer.byteLength / e.bytesPerElement, e._refreshViews(), e;\n        }\n      }]);\n\n      return yi;\n    }();\n\n    function mi(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var r = 0,\n          n = 0;\n      return {\n        members: t.map(function (t) {\n          var i = fi[t.type].BYTES_PER_ELEMENT,\n              s = r = gi(r, Math.max(e, i)),\n              a = t.components || 1;\n          return n = Math.max(n, i), r += i * a, {\n            name: t.name,\n            type: t.type,\n            components: a,\n            offset: s\n          };\n        }),\n        size: gi(r, Math.max(n, e)),\n        alignment: e\n      };\n    }\n\n    function gi(t, e) {\n      return Math.ceil(t / e) * e;\n    }\n\n    var xi = /*#__PURE__*/function (_yi) {\n      _inherits(xi, _yi);\n\n      function xi() {\n        _classCallCheck(this, xi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(xi).apply(this, arguments));\n      }\n\n      _createClass(xi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var n = 2 * t;\n          return this.int16[n + 0] = e, this.int16[n + 1] = r, t;\n        }\n      }]);\n\n      return xi;\n    }(yi);\n\n    xi.prototype.bytesPerElement = 4, kn(\"StructArrayLayout2i4\", xi);\n\n    var vi = /*#__PURE__*/function (_yi2) {\n      _inherits(vi, _yi2);\n\n      function vi() {\n        _classCallCheck(this, vi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(vi).apply(this, arguments));\n      }\n\n      _createClass(vi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i) {\n          var s = 4 * t;\n          return this.int16[s + 0] = e, this.int16[s + 1] = r, this.int16[s + 2] = n, this.int16[s + 3] = i, t;\n        }\n      }]);\n\n      return vi;\n    }(yi);\n\n    vi.prototype.bytesPerElement = 8, kn(\"StructArrayLayout4i8\", vi);\n\n    var bi = /*#__PURE__*/function (_yi3) {\n      _inherits(bi, _yi3);\n\n      function bi() {\n        _classCallCheck(this, bi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(bi).apply(this, arguments));\n      }\n\n      _createClass(bi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s) {\n          var a = this.length;\n          return this.resize(a + 1), this.emplace(a, t, e, r, n, i, s);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a) {\n          var o = 6 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = n, this.int16[o + 3] = i, this.int16[o + 4] = s, this.int16[o + 5] = a, t;\n        }\n      }]);\n\n      return bi;\n    }(yi);\n\n    bi.prototype.bytesPerElement = 12, kn(\"StructArrayLayout2i4i12\", bi);\n\n    var wi = /*#__PURE__*/function (_yi4) {\n      _inherits(wi, _yi4);\n\n      function wi() {\n        _classCallCheck(this, wi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(wi).apply(this, arguments));\n      }\n\n      _createClass(wi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s) {\n          var a = this.length;\n          return this.resize(a + 1), this.emplace(a, t, e, r, n, i, s);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a) {\n          var o = 4 * t,\n              l = 8 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.uint8[l + 4] = n, this.uint8[l + 5] = i, this.uint8[l + 6] = s, this.uint8[l + 7] = a, t;\n        }\n      }]);\n\n      return wi;\n    }(yi);\n\n    wi.prototype.bytesPerElement = 8, kn(\"StructArrayLayout2i4ub8\", wi);\n\n    var _i = /*#__PURE__*/function (_yi5) {\n      _inherits(_i, _yi5);\n\n      function _i() {\n        _classCallCheck(this, _i);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_i).apply(this, arguments));\n      }\n\n      _createClass(_i, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var n = 2 * t;\n          return this.float32[n + 0] = e, this.float32[n + 1] = r, t;\n        }\n      }]);\n\n      return _i;\n    }(yi);\n\n    _i.prototype.bytesPerElement = 8, kn(\"StructArrayLayout2f8\", _i);\n\n    var Ai = /*#__PURE__*/function (_yi6) {\n      _inherits(Ai, _yi6);\n\n      function Ai() {\n        _classCallCheck(this, Ai);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ai).apply(this, arguments));\n      }\n\n      _createClass(Ai, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s, a, o, l, u) {\n          var c = this.length;\n          return this.resize(c + 1), this.emplace(c, t, e, r, n, i, s, a, o, l, u);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a, o, l, u, c) {\n          var h = 10 * t;\n          return this.uint16[h + 0] = e, this.uint16[h + 1] = r, this.uint16[h + 2] = n, this.uint16[h + 3] = i, this.uint16[h + 4] = s, this.uint16[h + 5] = a, this.uint16[h + 6] = o, this.uint16[h + 7] = l, this.uint16[h + 8] = u, this.uint16[h + 9] = c, t;\n        }\n      }]);\n\n      return Ai;\n    }(yi);\n\n    Ai.prototype.bytesPerElement = 20, kn(\"StructArrayLayout10ui20\", Ai);\n\n    var ki = /*#__PURE__*/function (_yi7) {\n      _inherits(ki, _yi7);\n\n      function ki() {\n        _classCallCheck(this, ki);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ki).apply(this, arguments));\n      }\n\n      _createClass(ki, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h) {\n          var p = this.length;\n          return this.resize(p + 1), this.emplace(p, t, e, r, n, i, s, a, o, l, u, c, h);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p) {\n          var f = 12 * t;\n          return this.int16[f + 0] = e, this.int16[f + 1] = r, this.int16[f + 2] = n, this.int16[f + 3] = i, this.uint16[f + 4] = s, this.uint16[f + 5] = a, this.uint16[f + 6] = o, this.uint16[f + 7] = l, this.int16[f + 8] = u, this.int16[f + 9] = c, this.int16[f + 10] = h, this.int16[f + 11] = p, t;\n        }\n      }]);\n\n      return ki;\n    }(yi);\n\n    ki.prototype.bytesPerElement = 24, kn(\"StructArrayLayout4i4ui4i24\", ki);\n\n    var Si = /*#__PURE__*/function (_yi8) {\n      _inherits(Si, _yi8);\n\n      function Si() {\n        _classCallCheck(this, Si);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Si).apply(this, arguments));\n      }\n\n      _createClass(Si, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 3 * t;\n          return this.float32[i + 0] = e, this.float32[i + 1] = r, this.float32[i + 2] = n, t;\n        }\n      }]);\n\n      return Si;\n    }(yi);\n\n    Si.prototype.bytesPerElement = 12, kn(\"StructArrayLayout3f12\", Si);\n\n    var zi = /*#__PURE__*/function (_yi9) {\n      _inherits(zi, _yi9);\n\n      function zi() {\n        _classCallCheck(this, zi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(zi).apply(this, arguments));\n      }\n\n      _createClass(zi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.uint32[1 * t + 0] = e, t;\n        }\n      }]);\n\n      return zi;\n    }(yi);\n\n    zi.prototype.bytesPerElement = 4, kn(\"StructArrayLayout1ul4\", zi);\n\n    var Ii = /*#__PURE__*/function (_yi10) {\n      _inherits(Ii, _yi10);\n\n      function Ii() {\n        _classCallCheck(this, Ii);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ii).apply(this, arguments));\n      }\n\n      _createClass(Ii, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s, a, o, l) {\n          var u = this.length;\n          return this.resize(u + 1), this.emplace(u, t, e, r, n, i, s, a, o, l);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a, o, l, u) {\n          var c = 10 * t,\n              h = 5 * t;\n          return this.int16[c + 0] = e, this.int16[c + 1] = r, this.int16[c + 2] = n, this.int16[c + 3] = i, this.int16[c + 4] = s, this.int16[c + 5] = a, this.uint32[h + 3] = o, this.uint16[c + 8] = l, this.uint16[c + 9] = u, t;\n        }\n      }]);\n\n      return Ii;\n    }(yi);\n\n    Ii.prototype.bytesPerElement = 20, kn(\"StructArrayLayout6i1ul2ui20\", Ii);\n\n    var Mi = /*#__PURE__*/function (_yi11) {\n      _inherits(Mi, _yi11);\n\n      function Mi() {\n        _classCallCheck(this, Mi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Mi).apply(this, arguments));\n      }\n\n      _createClass(Mi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s) {\n          var a = this.length;\n          return this.resize(a + 1), this.emplace(a, t, e, r, n, i, s);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a) {\n          var o = 6 * t;\n          return this.int16[o + 0] = e, this.int16[o + 1] = r, this.int16[o + 2] = n, this.int16[o + 3] = i, this.int16[o + 4] = s, this.int16[o + 5] = a, t;\n        }\n      }]);\n\n      return Mi;\n    }(yi);\n\n    Mi.prototype.bytesPerElement = 12, kn(\"StructArrayLayout2i2i2i12\", Mi);\n\n    var Bi = /*#__PURE__*/function (_yi12) {\n      _inherits(Bi, _yi12);\n\n      function Bi() {\n        _classCallCheck(this, Bi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Bi).apply(this, arguments));\n      }\n\n      _createClass(Bi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i) {\n          var s = this.length;\n          return this.resize(s + 1), this.emplace(s, t, e, r, n, i);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s) {\n          var a = 4 * t,\n              o = 8 * t;\n          return this.float32[a + 0] = e, this.float32[a + 1] = r, this.float32[a + 2] = n, this.int16[o + 6] = i, this.int16[o + 7] = s, t;\n        }\n      }]);\n\n      return Bi;\n    }(yi);\n\n    Bi.prototype.bytesPerElement = 16, kn(\"StructArrayLayout2f1f2i16\", Bi);\n\n    var Ci = /*#__PURE__*/function (_yi13) {\n      _inherits(Ci, _yi13);\n\n      function Ci() {\n        _classCallCheck(this, Ci);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ci).apply(this, arguments));\n      }\n\n      _createClass(Ci, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i) {\n          var s = 12 * t,\n              a = 3 * t;\n          return this.uint8[s + 0] = e, this.uint8[s + 1] = r, this.float32[a + 1] = n, this.float32[a + 2] = i, t;\n        }\n      }]);\n\n      return Ci;\n    }(yi);\n\n    Ci.prototype.bytesPerElement = 12, kn(\"StructArrayLayout2ub2f12\", Ci);\n\n    var Pi = /*#__PURE__*/function (_yi14) {\n      _inherits(Pi, _yi14);\n\n      function Pi() {\n        _classCallCheck(this, Pi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Pi).apply(this, arguments));\n      }\n\n      _createClass(Pi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 3 * t;\n          return this.uint16[i + 0] = e, this.uint16[i + 1] = r, this.uint16[i + 2] = n, t;\n        }\n      }]);\n\n      return Pi;\n    }(yi);\n\n    Pi.prototype.bytesPerElement = 6, kn(\"StructArrayLayout3ui6\", Pi);\n\n    var Vi = /*#__PURE__*/function (_yi15) {\n      _inherits(Vi, _yi15);\n\n      function Vi() {\n        _classCallCheck(this, Vi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Vi).apply(this, arguments));\n      }\n\n      _createClass(Vi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m) {\n          var g = this.length;\n          return this.resize(g + 1), this.emplace(g, t, e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m, g) {\n          var x = 24 * t,\n              v = 12 * t,\n              b = 48 * t;\n          return this.int16[x + 0] = e, this.int16[x + 1] = r, this.uint16[x + 2] = n, this.uint16[x + 3] = i, this.uint32[v + 2] = s, this.uint32[v + 3] = a, this.uint32[v + 4] = o, this.uint16[x + 10] = l, this.uint16[x + 11] = u, this.uint16[x + 12] = c, this.float32[v + 7] = h, this.float32[v + 8] = p, this.uint8[b + 36] = f, this.uint8[b + 37] = d, this.uint8[b + 38] = y, this.uint32[v + 10] = m, this.int16[x + 22] = g, t;\n        }\n      }]);\n\n      return Vi;\n    }(yi);\n\n    Vi.prototype.bytesPerElement = 48, kn(\"StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48\", Vi);\n\n    var Ei = /*#__PURE__*/function (_yi16) {\n      _inherits(Ei, _yi16);\n\n      function Ei() {\n        _classCallCheck(this, Ei);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ei).apply(this, arguments));\n      }\n\n      _createClass(Ei, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m, g, x, v, b, w, _, A, k, S, z, I) {\n          var M = this.length;\n          return this.resize(M + 1), this.emplace(M, t, e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m, g, x, v, b, w, _, A, k, S, z, I);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m, g, x, v, b, w, _, A, k, S, z, I, M) {\n          var B = 34 * t,\n              C = 17 * t;\n          return this.int16[B + 0] = e, this.int16[B + 1] = r, this.int16[B + 2] = n, this.int16[B + 3] = i, this.int16[B + 4] = s, this.int16[B + 5] = a, this.int16[B + 6] = o, this.int16[B + 7] = l, this.uint16[B + 8] = u, this.uint16[B + 9] = c, this.uint16[B + 10] = h, this.uint16[B + 11] = p, this.uint16[B + 12] = f, this.uint16[B + 13] = d, this.uint16[B + 14] = y, this.uint16[B + 15] = m, this.uint16[B + 16] = g, this.uint16[B + 17] = x, this.uint16[B + 18] = v, this.uint16[B + 19] = b, this.uint16[B + 20] = w, this.uint16[B + 21] = _, this.uint16[B + 22] = A, this.uint32[C + 12] = k, this.float32[C + 13] = S, this.float32[C + 14] = z, this.float32[C + 15] = I, this.float32[C + 16] = M, t;\n        }\n      }]);\n\n      return Ei;\n    }(yi);\n\n    Ei.prototype.bytesPerElement = 68, kn(\"StructArrayLayout8i15ui1ul4f68\", Ei);\n\n    var Fi = /*#__PURE__*/function (_yi17) {\n      _inherits(Fi, _yi17);\n\n      function Fi() {\n        _classCallCheck(this, Fi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Fi).apply(this, arguments));\n      }\n\n      _createClass(Fi, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.float32[1 * t + 0] = e, t;\n        }\n      }]);\n\n      return Fi;\n    }(yi);\n\n    Fi.prototype.bytesPerElement = 4, kn(\"StructArrayLayout1f4\", Fi);\n\n    var Ti = /*#__PURE__*/function (_yi18) {\n      _inherits(Ti, _yi18);\n\n      function Ti() {\n        _classCallCheck(this, Ti);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ti).apply(this, arguments));\n      }\n\n      _createClass(Ti, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.int16 = new Int16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 3 * t;\n          return this.int16[i + 0] = e, this.int16[i + 1] = r, this.int16[i + 2] = n, t;\n        }\n      }]);\n\n      return Ti;\n    }(yi);\n\n    Ti.prototype.bytesPerElement = 6, kn(\"StructArrayLayout3i6\", Ti);\n\n    var Li = /*#__PURE__*/function (_yi19) {\n      _inherits(Li, _yi19);\n\n      function Li() {\n        _classCallCheck(this, Li);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Li).apply(this, arguments));\n      }\n\n      _createClass(Li, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint32 = new Uint32Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r) {\n          var n = this.length;\n          return this.resize(n + 1), this.emplace(n, t, e, r);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n) {\n          var i = 4 * t;\n          return this.uint32[2 * t + 0] = e, this.uint16[i + 2] = r, this.uint16[i + 3] = n, t;\n        }\n      }]);\n\n      return Li;\n    }(yi);\n\n    Li.prototype.bytesPerElement = 8, kn(\"StructArrayLayout1ul2ui8\", Li);\n\n    var Di = /*#__PURE__*/function (_yi20) {\n      _inherits(Di, _yi20);\n\n      function Di() {\n        _classCallCheck(this, Di);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Di).apply(this, arguments));\n      }\n\n      _createClass(Di, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e) {\n          var r = this.length;\n          return this.resize(r + 1), this.emplace(r, t, e);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r) {\n          var n = 2 * t;\n          return this.uint16[n + 0] = e, this.uint16[n + 1] = r, t;\n        }\n      }]);\n\n      return Di;\n    }(yi);\n\n    Di.prototype.bytesPerElement = 4, kn(\"StructArrayLayout2ui4\", Di);\n\n    var $i = /*#__PURE__*/function (_yi21) {\n      _inherits($i, _yi21);\n\n      function $i() {\n        _classCallCheck(this, $i);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf($i).apply(this, arguments));\n      }\n\n      _createClass($i, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.uint16 = new Uint16Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t) {\n          var e = this.length;\n          return this.resize(e + 1), this.emplace(e, t);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e) {\n          return this.uint16[1 * t + 0] = e, t;\n        }\n      }]);\n\n      return $i;\n    }(yi);\n\n    $i.prototype.bytesPerElement = 2, kn(\"StructArrayLayout1ui2\", $i);\n\n    var Ri = /*#__PURE__*/function (_yi22) {\n      _inherits(Ri, _yi22);\n\n      function Ri() {\n        _classCallCheck(this, Ri);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ri).apply(this, arguments));\n      }\n\n      _createClass(Ri, [{\n        key: \"_refreshViews\",\n        value: function _refreshViews() {\n          this.uint8 = new Uint8Array(this.arrayBuffer), this.float32 = new Float32Array(this.arrayBuffer);\n        }\n      }, {\n        key: \"emplaceBack\",\n        value: function emplaceBack(t, e, r, n) {\n          var i = this.length;\n          return this.resize(i + 1), this.emplace(i, t, e, r, n);\n        }\n      }, {\n        key: \"emplace\",\n        value: function emplace(t, e, r, n, i) {\n          var s = 4 * t;\n          return this.float32[s + 0] = e, this.float32[s + 1] = r, this.float32[s + 2] = n, this.float32[s + 3] = i, t;\n        }\n      }]);\n\n      return Ri;\n    }(yi);\n\n    Ri.prototype.bytesPerElement = 16, kn(\"StructArrayLayout4f16\", Ri);\n\n    var Ui = /*#__PURE__*/function (_di) {\n      _inherits(Ui, _di);\n\n      function Ui() {\n        _classCallCheck(this, Ui);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ui).apply(this, arguments));\n      }\n\n      _createClass(Ui, [{\n        key: \"anchorPointX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorPointY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"x1\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 2];\n        }\n      }, {\n        key: \"y1\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 3];\n        }\n      }, {\n        key: \"x2\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 4];\n        }\n      }, {\n        key: \"y2\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 5];\n        }\n      }, {\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 3];\n        }\n      }, {\n        key: \"sourceLayerIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 8];\n        }\n      }, {\n        key: \"bucketIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 9];\n        }\n      }, {\n        key: \"anchorPoint\",\n        get: function get() {\n          return new S(this.anchorPointX, this.anchorPointY);\n        }\n      }]);\n\n      return Ui;\n    }(di);\n\n    Ui.prototype.size = 20;\n\n    var Oi = /*#__PURE__*/function (_Ii) {\n      _inherits(Oi, _Ii);\n\n      function Oi() {\n        _classCallCheck(this, Oi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Oi).apply(this, arguments));\n      }\n\n      _createClass(Oi, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ui(this, t);\n        }\n      }]);\n\n      return Oi;\n    }(Ii);\n\n    kn(\"CollisionBoxArray\", Oi);\n\n    var qi = /*#__PURE__*/function (_di2) {\n      _inherits(qi, _di2);\n\n      function qi() {\n        _classCallCheck(this, qi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(qi).apply(this, arguments));\n      }\n\n      _createClass(qi, [{\n        key: \"anchorX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"glyphStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 2];\n        }\n      }, {\n        key: \"numGlyphs\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 3];\n        }\n      }, {\n        key: \"vertexStartIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 2];\n        }\n      }, {\n        key: \"lineStartIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 3];\n        }\n      }, {\n        key: \"lineLength\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 4];\n        }\n      }, {\n        key: \"segment\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 10];\n        }\n      }, {\n        key: \"lowerSize\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 11];\n        }\n      }, {\n        key: \"upperSize\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 12];\n        }\n      }, {\n        key: \"lineOffsetX\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 7];\n        }\n      }, {\n        key: \"lineOffsetY\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 8];\n        }\n      }, {\n        key: \"writingMode\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 36];\n        }\n      }, {\n        key: \"placedOrientation\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 37];\n        },\n        set: function set(t) {\n          this._structArray.uint8[this._pos1 + 37] = t;\n        }\n      }, {\n        key: \"hidden\",\n        get: function get() {\n          return this._structArray.uint8[this._pos1 + 38];\n        },\n        set: function set(t) {\n          this._structArray.uint8[this._pos1 + 38] = t;\n        }\n      }, {\n        key: \"crossTileID\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 10];\n        },\n        set: function set(t) {\n          this._structArray.uint32[this._pos4 + 10] = t;\n        }\n      }, {\n        key: \"associatedIconIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 22];\n        }\n      }]);\n\n      return qi;\n    }(di);\n\n    qi.prototype.size = 48;\n\n    var ji = /*#__PURE__*/function (_Vi) {\n      _inherits(ji, _Vi);\n\n      function ji() {\n        _classCallCheck(this, ji);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ji).apply(this, arguments));\n      }\n\n      _createClass(ji, [{\n        key: \"get\",\n        value: function get(t) {\n          return new qi(this, t);\n        }\n      }]);\n\n      return ji;\n    }(Vi);\n\n    kn(\"PlacedSymbolArray\", ji);\n\n    var Ni = /*#__PURE__*/function (_di3) {\n      _inherits(Ni, _di3);\n\n      function Ni() {\n        _classCallCheck(this, Ni);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ni).apply(this, arguments));\n      }\n\n      _createClass(Ni, [{\n        key: \"anchorX\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 0];\n        }\n      }, {\n        key: \"anchorY\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 1];\n        }\n      }, {\n        key: \"rightJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 2];\n        }\n      }, {\n        key: \"centerJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 3];\n        }\n      }, {\n        key: \"leftJustifiedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 4];\n        }\n      }, {\n        key: \"verticalPlacedTextSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 5];\n        }\n      }, {\n        key: \"placedIconSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 6];\n        }\n      }, {\n        key: \"verticalPlacedIconSymbolIndex\",\n        get: function get() {\n          return this._structArray.int16[this._pos2 + 7];\n        }\n      }, {\n        key: \"key\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 8];\n        }\n      }, {\n        key: \"textBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 9];\n        }\n      }, {\n        key: \"textBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 10];\n        }\n      }, {\n        key: \"verticalTextBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 11];\n        }\n      }, {\n        key: \"verticalTextBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 12];\n        }\n      }, {\n        key: \"iconBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 13];\n        }\n      }, {\n        key: \"iconBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 14];\n        }\n      }, {\n        key: \"verticalIconBoxStartIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 15];\n        }\n      }, {\n        key: \"verticalIconBoxEndIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 16];\n        }\n      }, {\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 17];\n        }\n      }, {\n        key: \"numHorizontalGlyphVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 18];\n        }\n      }, {\n        key: \"numVerticalGlyphVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 19];\n        }\n      }, {\n        key: \"numIconVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 20];\n        }\n      }, {\n        key: \"numVerticalIconVertices\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 21];\n        }\n      }, {\n        key: \"useRuntimeCollisionCircles\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 22];\n        }\n      }, {\n        key: \"crossTileID\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 12];\n        },\n        set: function set(t) {\n          this._structArray.uint32[this._pos4 + 12] = t;\n        }\n      }, {\n        key: \"textBoxScale\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 13];\n        }\n      }, {\n        key: \"textOffset0\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 14];\n        }\n      }, {\n        key: \"textOffset1\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 15];\n        }\n      }, {\n        key: \"collisionCircleDiameter\",\n        get: function get() {\n          return this._structArray.float32[this._pos4 + 16];\n        }\n      }]);\n\n      return Ni;\n    }(di);\n\n    Ni.prototype.size = 68;\n\n    var Ki = /*#__PURE__*/function (_Ei) {\n      _inherits(Ki, _Ei);\n\n      function Ki() {\n        _classCallCheck(this, Ki);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ki).apply(this, arguments));\n      }\n\n      _createClass(Ki, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ni(this, t);\n        }\n      }]);\n\n      return Ki;\n    }(Ei);\n\n    kn(\"SymbolInstanceArray\", Ki);\n\n    var Zi = /*#__PURE__*/function (_Fi) {\n      _inherits(Zi, _Fi);\n\n      function Zi() {\n        _classCallCheck(this, Zi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Zi).apply(this, arguments));\n      }\n\n      _createClass(Zi, [{\n        key: \"getoffsetX\",\n        value: function getoffsetX(t) {\n          return this.float32[1 * t + 0];\n        }\n      }]);\n\n      return Zi;\n    }(Fi);\n\n    kn(\"GlyphOffsetArray\", Zi);\n\n    var Gi = /*#__PURE__*/function (_Ti) {\n      _inherits(Gi, _Ti);\n\n      function Gi() {\n        _classCallCheck(this, Gi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Gi).apply(this, arguments));\n      }\n\n      _createClass(Gi, [{\n        key: \"getx\",\n        value: function getx(t) {\n          return this.int16[3 * t + 0];\n        }\n      }, {\n        key: \"gety\",\n        value: function gety(t) {\n          return this.int16[3 * t + 1];\n        }\n      }, {\n        key: \"gettileUnitDistanceFromAnchor\",\n        value: function gettileUnitDistanceFromAnchor(t) {\n          return this.int16[3 * t + 2];\n        }\n      }]);\n\n      return Gi;\n    }(Ti);\n\n    kn(\"SymbolLineVertexArray\", Gi);\n\n    var Ji = /*#__PURE__*/function (_di4) {\n      _inherits(Ji, _di4);\n\n      function Ji() {\n        _classCallCheck(this, Ji);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ji).apply(this, arguments));\n      }\n\n      _createClass(Ji, [{\n        key: \"featureIndex\",\n        get: function get() {\n          return this._structArray.uint32[this._pos4 + 0];\n        }\n      }, {\n        key: \"sourceLayerIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 2];\n        }\n      }, {\n        key: \"bucketIndex\",\n        get: function get() {\n          return this._structArray.uint16[this._pos2 + 3];\n        }\n      }]);\n\n      return Ji;\n    }(di);\n\n    Ji.prototype.size = 8;\n\n    var Xi = /*#__PURE__*/function (_Li) {\n      _inherits(Xi, _Li);\n\n      function Xi() {\n        _classCallCheck(this, Xi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Xi).apply(this, arguments));\n      }\n\n      _createClass(Xi, [{\n        key: \"get\",\n        value: function get(t) {\n          return new Ji(this, t);\n        }\n      }]);\n\n      return Xi;\n    }(Li);\n\n    kn(\"FeatureIndexArray\", Xi);\n\n    var Yi = /*#__PURE__*/function (_xi) {\n      _inherits(Yi, _xi);\n\n      function Yi() {\n        _classCallCheck(this, Yi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Yi).apply(this, arguments));\n      }\n\n      return Yi;\n    }(xi);\n\n    var Hi = /*#__PURE__*/function (_xi2) {\n      _inherits(Hi, _xi2);\n\n      function Hi() {\n        _classCallCheck(this, Hi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Hi).apply(this, arguments));\n      }\n\n      return Hi;\n    }(xi);\n\n    var Wi = /*#__PURE__*/function (_bi) {\n      _inherits(Wi, _bi);\n\n      function Wi() {\n        _classCallCheck(this, Wi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Wi).apply(this, arguments));\n      }\n\n      return Wi;\n    }(bi);\n\n    var Qi = /*#__PURE__*/function (_wi) {\n      _inherits(Qi, _wi);\n\n      function Qi() {\n        _classCallCheck(this, Qi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Qi).apply(this, arguments));\n      }\n\n      return Qi;\n    }(wi);\n\n    var ts = /*#__PURE__*/function (_i46) {\n      _inherits(ts, _i46);\n\n      function ts() {\n        _classCallCheck(this, ts);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ts).apply(this, arguments));\n      }\n\n      return ts;\n    }(_i);\n\n    var es = /*#__PURE__*/function (_Ai) {\n      _inherits(es, _Ai);\n\n      function es() {\n        _classCallCheck(this, es);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(es).apply(this, arguments));\n      }\n\n      return es;\n    }(Ai);\n\n    var rs = /*#__PURE__*/function (_ki) {\n      _inherits(rs, _ki);\n\n      function rs() {\n        _classCallCheck(this, rs);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(rs).apply(this, arguments));\n      }\n\n      return rs;\n    }(ki);\n\n    var ns = /*#__PURE__*/function (_Si) {\n      _inherits(ns, _Si);\n\n      function ns() {\n        _classCallCheck(this, ns);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ns).apply(this, arguments));\n      }\n\n      return ns;\n    }(Si);\n\n    var is = /*#__PURE__*/function (_zi) {\n      _inherits(is, _zi);\n\n      function is() {\n        _classCallCheck(this, is);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(is).apply(this, arguments));\n      }\n\n      return is;\n    }(zi);\n\n    var ss = /*#__PURE__*/function (_Mi) {\n      _inherits(ss, _Mi);\n\n      function ss() {\n        _classCallCheck(this, ss);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ss).apply(this, arguments));\n      }\n\n      return ss;\n    }(Mi);\n\n    var as = /*#__PURE__*/function (_Ci) {\n      _inherits(as, _Ci);\n\n      function as() {\n        _classCallCheck(this, as);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(as).apply(this, arguments));\n      }\n\n      return as;\n    }(Ci);\n\n    var os = /*#__PURE__*/function (_Pi) {\n      _inherits(os, _Pi);\n\n      function os() {\n        _classCallCheck(this, os);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(os).apply(this, arguments));\n      }\n\n      return os;\n    }(Pi);\n\n    var ls = /*#__PURE__*/function (_Di) {\n      _inherits(ls, _Di);\n\n      function ls() {\n        _classCallCheck(this, ls);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ls).apply(this, arguments));\n      }\n\n      return ls;\n    }(Di);\n\n    var us = mi([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n        cs = us.members;\n\n    var hs = /*#__PURE__*/function () {\n      function hs() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n        _classCallCheck(this, hs);\n\n        this.segments = t;\n      }\n\n      _createClass(hs, [{\n        key: \"prepareSegment\",\n        value: function prepareSegment(t, e, r, n) {\n          var i = this.segments[this.segments.length - 1];\n          return t > hs.MAX_VERTEX_ARRAY_LENGTH && d(\"Max vertices per segment is \".concat(hs.MAX_VERTEX_ARRAY_LENGTH, \": bucket requested \").concat(t)), (!i || i.vertexLength + t > hs.MAX_VERTEX_ARRAY_LENGTH || i.sortKey !== n) && (i = {\n            vertexOffset: e.length,\n            primitiveOffset: r.length,\n            vertexLength: 0,\n            primitiveLength: 0\n          }, void 0 !== n && (i.sortKey = n), this.segments.push(i)), i;\n        }\n      }, {\n        key: \"get\",\n        value: function get() {\n          return this.segments;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator49 = _createForOfIteratorHelper(this.segments),\n              _step49;\n\n          try {\n            for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {\n              var _t49 = _step49.value;\n\n              for (var _e59 in _t49.vaos) {\n                _t49.vaos[_e59].destroy();\n              }\n            }\n          } catch (err) {\n            _iterator49.e(err);\n          } finally {\n            _iterator49.f();\n          }\n        }\n      }], [{\n        key: \"simpleSegment\",\n        value: function simpleSegment(t, e, r, n) {\n          return new hs([{\n            vertexOffset: t,\n            primitiveOffset: e,\n            vertexLength: r,\n            primitiveLength: n,\n            vaos: {},\n            sortKey: 0\n          }]);\n        }\n      }]);\n\n      return hs;\n    }();\n\n    function ps(t, e) {\n      return 256 * (t = s(Math.floor(t), 0, 255)) + s(Math.floor(e), 0, 255);\n    }\n\n    hs.MAX_VERTEX_ARRAY_LENGTH = Math.pow(2, 16) - 1, kn(\"SegmentVector\", hs);\n    var fs = mi([{\n      name: \"a_pattern_from\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pattern_to\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio_from\",\n      components: 1,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixel_ratio_to\",\n      components: 1,\n      type: \"Uint16\"\n    }]);\n    var ds = {\n      exports: {}\n    },\n        ys = {\n      exports: {}\n    };\n\n    ys.exports = function (t, e) {\n      var r, n, i, s, a, o, l, u;\n\n      for (n = t.length - (r = 3 & t.length), i = e, a = 3432918353, o = 461845907, u = 0; u < n;) {\n        l = 255 & t.charCodeAt(u) | (255 & t.charCodeAt(++u)) << 8 | (255 & t.charCodeAt(++u)) << 16 | (255 & t.charCodeAt(++u)) << 24, ++u, i = 27492 + (65535 & (s = 5 * (65535 & (i = (i ^= l = (65535 & (l = (l = (65535 & l) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295) << 13 | i >>> 19)) + ((5 * (i >>> 16) & 65535) << 16) & 4294967295)) + ((58964 + (s >>> 16) & 65535) << 16);\n      }\n\n      switch (l = 0, r) {\n        case 3:\n          l ^= (255 & t.charCodeAt(u + 2)) << 16;\n\n        case 2:\n          l ^= (255 & t.charCodeAt(u + 1)) << 8;\n\n        case 1:\n          i ^= l = (65535 & (l = (l = (65535 & (l ^= 255 & t.charCodeAt(u))) * a + (((l >>> 16) * a & 65535) << 16) & 4294967295) << 15 | l >>> 17)) * o + (((l >>> 16) * o & 65535) << 16) & 4294967295;\n      }\n\n      return i ^= t.length, i = 2246822507 * (65535 & (i ^= i >>> 16)) + ((2246822507 * (i >>> 16) & 65535) << 16) & 4294967295, i = 3266489909 * (65535 & (i ^= i >>> 13)) + ((3266489909 * (i >>> 16) & 65535) << 16) & 4294967295, (i ^= i >>> 16) >>> 0;\n    };\n\n    var ms = {\n      exports: {}\n    };\n\n    ms.exports = function (t, e) {\n      for (var r, n = t.length, i = e ^ n, s = 0; n >= 4;) {\n        r = 1540483477 * (65535 & (r = 255 & t.charCodeAt(s) | (255 & t.charCodeAt(++s)) << 8 | (255 & t.charCodeAt(++s)) << 16 | (255 & t.charCodeAt(++s)) << 24)) + ((1540483477 * (r >>> 16) & 65535) << 16), i = 1540483477 * (65535 & i) + ((1540483477 * (i >>> 16) & 65535) << 16) ^ (r = 1540483477 * (65535 & (r ^= r >>> 24)) + ((1540483477 * (r >>> 16) & 65535) << 16)), n -= 4, ++s;\n      }\n\n      switch (n) {\n        case 3:\n          i ^= (255 & t.charCodeAt(s + 2)) << 16;\n\n        case 2:\n          i ^= (255 & t.charCodeAt(s + 1)) << 8;\n\n        case 1:\n          i = 1540483477 * (65535 & (i ^= 255 & t.charCodeAt(s))) + ((1540483477 * (i >>> 16) & 65535) << 16);\n      }\n\n      return i = 1540483477 * (65535 & (i ^= i >>> 13)) + ((1540483477 * (i >>> 16) & 65535) << 16), (i ^= i >>> 15) >>> 0;\n    };\n\n    var gs = ys.exports,\n        xs = ms.exports;\n    ds.exports = gs, ds.exports.murmur3 = gs, ds.exports.murmur2 = xs;\n    var vs = ds.exports;\n\n    var bs = /*#__PURE__*/function () {\n      function bs() {\n        _classCallCheck(this, bs);\n\n        this.ids = [], this.positions = [], this.indexed = !1;\n      }\n\n      _createClass(bs, [{\n        key: \"add\",\n        value: function add(t, e, r, n) {\n          this.ids.push(ws(t)), this.positions.push(e, r, n);\n        }\n      }, {\n        key: \"getPositions\",\n        value: function getPositions(t) {\n          var e = ws(t);\n          var r = 0,\n              n = this.ids.length - 1;\n\n          for (; r < n;) {\n            var _t50 = r + n >> 1;\n\n            this.ids[_t50] >= e ? n = _t50 : r = _t50 + 1;\n          }\n\n          var i = [];\n\n          for (; this.ids[r] === e;) {\n            i.push({\n              index: this.positions[3 * r],\n              start: this.positions[3 * r + 1],\n              end: this.positions[3 * r + 2]\n            }), r++;\n          }\n\n          return i;\n        }\n      }], [{\n        key: \"serialize\",\n        value: function serialize(t, e) {\n          var r = new Float64Array(t.ids),\n              n = new Uint32Array(t.positions);\n          return _s(r, n, 0, r.length - 1), e && e.push(r.buffer, n.buffer), {\n            ids: r,\n            positions: n\n          };\n        }\n      }, {\n        key: \"deserialize\",\n        value: function deserialize(t) {\n          var e = new bs();\n          return e.ids = t.ids, e.positions = t.positions, e.indexed = !0, e;\n        }\n      }]);\n\n      return bs;\n    }();\n\n    function ws(t) {\n      var e = +t;\n      return !isNaN(e) && e <= Number.MAX_SAFE_INTEGER ? e : vs(String(t));\n    }\n\n    function _s(t, e, r, n) {\n      for (; r < n;) {\n        var _i47 = t[r + n >> 1];\n\n        var _s27 = r - 1,\n            _a26 = n + 1;\n\n        for (;;) {\n          do {\n            _s27++;\n          } while (t[_s27] < _i47);\n\n          do {\n            _a26--;\n          } while (t[_a26] > _i47);\n\n          if (_s27 >= _a26) break;\n          As(t, _s27, _a26), As(e, 3 * _s27, 3 * _a26), As(e, 3 * _s27 + 1, 3 * _a26 + 1), As(e, 3 * _s27 + 2, 3 * _a26 + 2);\n        }\n\n        _a26 - r < n - _a26 ? (_s(t, e, r, _a26), r = _a26 + 1) : (_s(t, e, _a26 + 1, n), n = _a26);\n      }\n    }\n\n    function As(t, e, r) {\n      var n = t[e];\n      t[e] = t[r], t[r] = n;\n    }\n\n    kn(\"FeaturePositionMap\", bs);\n\n    var ks = function ks(t, e) {\n      _classCallCheck(this, ks);\n\n      this.gl = t.gl, this.location = e;\n    };\n\n    var Ss = /*#__PURE__*/function (_ks) {\n      _inherits(Ss, _ks);\n\n      function Ss(t, e) {\n        var _this5;\n\n        _classCallCheck(this, Ss);\n\n        _this5 = _possibleConstructorReturn(this, _getPrototypeOf(Ss).call(this, t, e)), _this5.current = 0;\n        return _this5;\n      }\n\n      _createClass(Ss, [{\n        key: \"set\",\n        value: function set(t) {\n          this.current !== t && (this.current = t, this.gl.uniform1f(this.location, t));\n        }\n      }]);\n\n      return Ss;\n    }(ks);\n\n    var zs = /*#__PURE__*/function (_ks2) {\n      _inherits(zs, _ks2);\n\n      function zs(t, e) {\n        var _this6;\n\n        _classCallCheck(this, zs);\n\n        _this6 = _possibleConstructorReturn(this, _getPrototypeOf(zs).call(this, t, e)), _this6.current = [0, 0, 0, 0];\n        return _this6;\n      }\n\n      _createClass(zs, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] && t[3] === this.current[3] || (this.current = t, this.gl.uniform4f(this.location, t[0], t[1], t[2], t[3]));\n        }\n      }]);\n\n      return zs;\n    }(ks);\n\n    var Is = /*#__PURE__*/function (_ks3) {\n      _inherits(Is, _ks3);\n\n      function Is(t, e) {\n        var _this7;\n\n        _classCallCheck(this, Is);\n\n        _this7 = _possibleConstructorReturn(this, _getPrototypeOf(Is).call(this, t, e)), _this7.current = Et.transparent;\n        return _this7;\n      }\n\n      _createClass(Is, [{\n        key: \"set\",\n        value: function set(t) {\n          t.r === this.current.r && t.g === this.current.g && t.b === this.current.b && t.a === this.current.a || (this.current = t, this.gl.uniform4f(this.location, t.r, t.g, t.b, t.a));\n        }\n      }]);\n\n      return Is;\n    }(ks);\n\n    var Ms = new Float32Array(16);\n\n    function Bs(t) {\n      return [ps(255 * t.r, 255 * t.g), ps(255 * t.b, 255 * t.a)];\n    }\n\n    var Cs = /*#__PURE__*/function () {\n      function Cs(t, e, r) {\n        _classCallCheck(this, Cs);\n\n        this.value = t, this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t);\n        }), this.type = r;\n      }\n\n      _createClass(Cs, [{\n        key: \"setUniform\",\n        value: function setUniform(t, e, r) {\n          t.set(r.constantOr(this.value));\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return \"color\" === this.type ? new Is(t, e) : new Ss(t, e);\n        }\n      }]);\n\n      return Cs;\n    }();\n\n    var Ps = /*#__PURE__*/function () {\n      function Ps(t, e) {\n        _classCallCheck(this, Ps);\n\n        this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t);\n        }), this.patternFrom = null, this.patternTo = null, this.pixelRatioFrom = 1, this.pixelRatioTo = 1;\n      }\n\n      _createClass(Ps, [{\n        key: \"setConstantPatternPositions\",\n        value: function setConstantPatternPositions(t, e) {\n          this.pixelRatioFrom = e.pixelRatio, this.pixelRatioTo = t.pixelRatio, this.patternFrom = e.tlbr, this.patternTo = t.tlbr;\n        }\n      }, {\n        key: \"setUniform\",\n        value: function setUniform(t, e, r, n) {\n          var i = \"u_pattern_to\" === n ? this.patternTo : \"u_pattern_from\" === n ? this.patternFrom : \"u_pixel_ratio_to\" === n ? this.pixelRatioTo : \"u_pixel_ratio_from\" === n ? this.pixelRatioFrom : null;\n          i && t.set(i);\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return \"u_pattern\" === r.substr(0, 9) ? new zs(t, e) : new Ss(t, e);\n        }\n      }]);\n\n      return Ps;\n    }();\n\n    var Vs = /*#__PURE__*/function () {\n      function Vs(t, e, r, n) {\n        _classCallCheck(this, Vs);\n\n        this.expression = t, this.type = r, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n          return {\n            name: \"a_\".concat(t),\n            type: \"Float32\",\n            components: \"color\" === r ? 2 : 1,\n            offset: 0\n          };\n        }), this.paintVertexArray = new n();\n      }\n\n      _createClass(Vs, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r, n, i) {\n          var s = this.paintVertexArray.length,\n              a = this.expression.evaluate(new Yn(0), e, {}, n, [], i);\n          this.paintVertexArray.resize(t), this._setPaintValue(s, t, a);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, n) {\n          var i = this.expression.evaluate({\n            zoom: 0\n          }, r, n);\n\n          this._setPaintValue(t, e, i);\n        }\n      }, {\n        key: \"_setPaintValue\",\n        value: function _setPaintValue(t, e, r) {\n          if (\"color\" === this.type) {\n            var _n43 = Bs(r);\n\n            for (var _r67 = t; _r67 < e; _r67++) {\n              this.paintVertexArray.emplace(_r67, _n43[0], _n43[1]);\n            }\n          } else {\n            for (var _n44 = t; _n44 < e; _n44++) {\n              this.paintVertexArray.emplace(_n44, r);\n            }\n\n            this.maxValue = Math.max(this.maxValue, Math.abs(r));\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n        }\n      }]);\n\n      return Vs;\n    }();\n\n    var Es = /*#__PURE__*/function () {\n      function Es(t, e, r, n, i, s) {\n        _classCallCheck(this, Es);\n\n        this.expression = t, this.uniformNames = e.map(function (t) {\n          return \"u_\".concat(t, \"_t\");\n        }), this.type = r, this.useIntegerZoom = n, this.zoom = i, this.maxValue = 0, this.paintVertexAttributes = e.map(function (t) {\n          return {\n            name: \"a_\".concat(t),\n            type: \"Float32\",\n            components: \"color\" === r ? 4 : 2,\n            offset: 0\n          };\n        }), this.paintVertexArray = new s();\n      }\n\n      _createClass(Es, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r, n, i) {\n          var s = this.expression.evaluate(new Yn(this.zoom), e, {}, n, [], i),\n              a = this.expression.evaluate(new Yn(this.zoom + 1), e, {}, n, [], i),\n              o = this.paintVertexArray.length;\n          this.paintVertexArray.resize(t), this._setPaintValue(o, t, s, a);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, n) {\n          var i = this.expression.evaluate({\n            zoom: this.zoom\n          }, r, n),\n              s = this.expression.evaluate({\n            zoom: this.zoom + 1\n          }, r, n);\n\n          this._setPaintValue(t, e, i, s);\n        }\n      }, {\n        key: \"_setPaintValue\",\n        value: function _setPaintValue(t, e, r, n) {\n          if (\"color\" === this.type) {\n            var _i48 = Bs(r),\n                _s28 = Bs(n);\n\n            for (var _r68 = t; _r68 < e; _r68++) {\n              this.paintVertexArray.emplace(_r68, _i48[0], _i48[1], _s28[0], _s28[1]);\n            }\n          } else {\n            for (var _i49 = t; _i49 < e; _i49++) {\n              this.paintVertexArray.emplace(_i49, r, n);\n            }\n\n            this.maxValue = Math.max(this.maxValue, Math.abs(r), Math.abs(n));\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.paintVertexArray && this.paintVertexArray.arrayBuffer && (this.paintVertexBuffer && this.paintVertexBuffer.buffer ? this.paintVertexBuffer.updateData(this.paintVertexArray) : this.paintVertexBuffer = t.createVertexBuffer(this.paintVertexArray, this.paintVertexAttributes, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.paintVertexBuffer && this.paintVertexBuffer.destroy();\n        }\n      }, {\n        key: \"setUniform\",\n        value: function setUniform(t, e) {\n          var r = this.useIntegerZoom ? Math.floor(e.zoom) : e.zoom,\n              n = s(this.expression.interpolationFactor(r, this.zoom, this.zoom + 1), 0, 1);\n          t.set(n);\n        }\n      }, {\n        key: \"getBinding\",\n        value: function getBinding(t, e, r) {\n          return new Ss(t, e);\n        }\n      }]);\n\n      return Es;\n    }();\n\n    var Fs = /*#__PURE__*/function () {\n      function Fs(t, e, r, n, i, s) {\n        _classCallCheck(this, Fs);\n\n        this.expression = t, this.type = e, this.useIntegerZoom = r, this.zoom = n, this.layerId = s, this.zoomInPaintVertexArray = new i(), this.zoomOutPaintVertexArray = new i();\n      }\n\n      _createClass(Fs, [{\n        key: \"populatePaintArray\",\n        value: function populatePaintArray(t, e, r) {\n          var n = this.zoomInPaintVertexArray.length;\n          this.zoomInPaintVertexArray.resize(t), this.zoomOutPaintVertexArray.resize(t), this._setPaintValues(n, t, e.patterns && e.patterns[this.layerId], r);\n        }\n      }, {\n        key: \"updatePaintArray\",\n        value: function updatePaintArray(t, e, r, n, i) {\n          this._setPaintValues(t, e, r.patterns && r.patterns[this.layerId], i);\n        }\n      }, {\n        key: \"_setPaintValues\",\n        value: function _setPaintValues(t, e, r, n) {\n          if (!n || !r) return;\n          var i = r.min,\n              s = r.mid,\n              a = r.max,\n              o = n[i],\n              l = n[s],\n              u = n[a];\n          if (o && l && u) for (var _r69 = t; _r69 < e; _r69++) {\n            this.zoomInPaintVertexArray.emplace(_r69, l.tl[0], l.tl[1], l.br[0], l.br[1], o.tl[0], o.tl[1], o.br[0], o.br[1], l.pixelRatio, o.pixelRatio), this.zoomOutPaintVertexArray.emplace(_r69, l.tl[0], l.tl[1], l.br[0], l.br[1], u.tl[0], u.tl[1], u.br[0], u.br[1], l.pixelRatio, u.pixelRatio);\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.zoomInPaintVertexArray && this.zoomInPaintVertexArray.arrayBuffer && this.zoomOutPaintVertexArray && this.zoomOutPaintVertexArray.arrayBuffer && (this.zoomInPaintVertexBuffer = t.createVertexBuffer(this.zoomInPaintVertexArray, fs.members, this.expression.isStateDependent), this.zoomOutPaintVertexBuffer = t.createVertexBuffer(this.zoomOutPaintVertexArray, fs.members, this.expression.isStateDependent));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.zoomOutPaintVertexBuffer && this.zoomOutPaintVertexBuffer.destroy(), this.zoomInPaintVertexBuffer && this.zoomInPaintVertexBuffer.destroy();\n        }\n      }]);\n\n      return Fs;\n    }();\n\n    var Ts = /*#__PURE__*/function () {\n      function Ts(t, e, r) {\n        _classCallCheck(this, Ts);\n\n        this.binders = {}, this._buffers = [];\n        var n = [];\n\n        for (var _i50 in t.paint._values) {\n          if (!r(_i50)) continue;\n\n          var _s29 = t.paint.get(_i50);\n\n          if (!(_s29 instanceof ni && xr(_s29.property.specification))) continue;\n\n          var _a27 = Ds(_i50, t.type),\n              _o7 = _s29.value,\n              _l9 = _s29.property.specification.type,\n              _u9 = _s29.property.useIntegerZoom,\n              _c4 = _s29.property.specification[\"property-type\"],\n              _h2 = \"cross-faded\" === _c4 || \"cross-faded-data-driven\" === _c4;\n\n          if (\"constant\" === _o7.kind) this.binders[_i50] = _h2 ? new Ps(_o7.value, _a27) : new Cs(_o7.value, _a27, _l9), n.push(\"/u_\".concat(_i50));else if (\"source\" === _o7.kind || _h2) {\n            var _r70 = $s(_i50, _l9, \"source\");\n\n            this.binders[_i50] = _h2 ? new Fs(_o7, _l9, _u9, e, _r70, t.id) : new Vs(_o7, _a27, _l9, _r70), n.push(\"/a_\".concat(_i50));\n          } else {\n            var _t51 = $s(_i50, _l9, \"composite\");\n\n            this.binders[_i50] = new Es(_o7, _a27, _l9, _u9, e, _t51), n.push(\"/z_\".concat(_i50));\n          }\n        }\n\n        this.cacheKey = n.sort().join(\"\");\n      }\n\n      _createClass(Ts, [{\n        key: \"getMaxValue\",\n        value: function getMaxValue(t) {\n          var e = this.binders[t];\n          return e instanceof Vs || e instanceof Es ? e.maxValue : 0;\n        }\n      }, {\n        key: \"populatePaintArrays\",\n        value: function populatePaintArrays(t, e, r, n, i) {\n          for (var _s30 in this.binders) {\n            var _a28 = this.binders[_s30];\n            (_a28 instanceof Vs || _a28 instanceof Es || _a28 instanceof Fs) && _a28.populatePaintArray(t, e, r, n, i);\n          }\n        }\n      }, {\n        key: \"setConstantPatternPositions\",\n        value: function setConstantPatternPositions(t, e) {\n          for (var _r71 in this.binders) {\n            var _n45 = this.binders[_r71];\n            _n45 instanceof Ps && _n45.setConstantPatternPositions(t, e);\n          }\n        }\n      }, {\n        key: \"updatePaintArrays\",\n        value: function updatePaintArrays(t, e, r, n, i) {\n          var s = !1;\n\n          for (var _a29 in t) {\n            var _o8 = e.getPositions(_a29);\n\n            var _iterator50 = _createForOfIteratorHelper(_o8),\n                _step50;\n\n            try {\n              for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {\n                var _e60 = _step50.value;\n\n                var _o9 = r.feature(_e60.index);\n\n                for (var _r72 in this.binders) {\n                  var _l10 = this.binders[_r72];\n\n                  if ((_l10 instanceof Vs || _l10 instanceof Es || _l10 instanceof Fs) && !0 === _l10.expression.isStateDependent) {\n                    var _u10 = n.paint.get(_r72);\n\n                    _l10.expression = _u10.value, _l10.updatePaintArray(_e60.start, _e60.end, _o9, t[_a29], i), s = !0;\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator50.e(err);\n            } finally {\n              _iterator50.f();\n            }\n          }\n\n          return s;\n        }\n      }, {\n        key: \"defines\",\n        value: function defines() {\n          var t = [];\n\n          for (var _e61 in this.binders) {\n            var _r73 = this.binders[_e61];\n            (_r73 instanceof Cs || _r73 instanceof Ps) && t.push.apply(t, _toConsumableArray(_r73.uniformNames.map(function (t) {\n              return \"#define HAS_UNIFORM_\".concat(t);\n            })));\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getBinderAttributes\",\n        value: function getBinderAttributes() {\n          var t = [];\n\n          for (var _e62 in this.binders) {\n            var _r74 = this.binders[_e62];\n            if (_r74 instanceof Vs || _r74 instanceof Es) for (var _e63 = 0; _e63 < _r74.paintVertexAttributes.length; _e63++) {\n              t.push(_r74.paintVertexAttributes[_e63].name);\n            } else if (_r74 instanceof Fs) for (var _e64 = 0; _e64 < fs.members.length; _e64++) {\n              t.push(fs.members[_e64].name);\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getBinderUniforms\",\n        value: function getBinderUniforms() {\n          var t = [];\n\n          for (var _e65 in this.binders) {\n            var _r75 = this.binders[_e65];\n\n            if (_r75 instanceof Cs || _r75 instanceof Ps || _r75 instanceof Es) {\n              var _iterator51 = _createForOfIteratorHelper(_r75.uniformNames),\n                  _step51;\n\n              try {\n                for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {\n                  var _e66 = _step51.value;\n                  t.push(_e66);\n                }\n              } catch (err) {\n                _iterator51.e(err);\n              } finally {\n                _iterator51.f();\n              }\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getPaintVertexBuffers\",\n        value: function getPaintVertexBuffers() {\n          return this._buffers;\n        }\n      }, {\n        key: \"getUniforms\",\n        value: function getUniforms(t, e) {\n          var r = [];\n\n          for (var _n46 in this.binders) {\n            var _i51 = this.binders[_n46];\n\n            if (_i51 instanceof Cs || _i51 instanceof Ps || _i51 instanceof Es) {\n              var _iterator52 = _createForOfIteratorHelper(_i51.uniformNames),\n                  _step52;\n\n              try {\n                for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {\n                  var _s31 = _step52.value;\n\n                  if (e[_s31]) {\n                    var _a30 = _i51.getBinding(t, e[_s31], _s31);\n\n                    r.push({\n                      name: _s31,\n                      property: _n46,\n                      binding: _a30\n                    });\n                  }\n                }\n              } catch (err) {\n                _iterator52.e(err);\n              } finally {\n                _iterator52.f();\n              }\n            }\n          }\n\n          return r;\n        }\n      }, {\n        key: \"setUniforms\",\n        value: function setUniforms(t, e, r, n) {\n          var _iterator53 = _createForOfIteratorHelper(e),\n              _step53;\n\n          try {\n            for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {\n              var _step53$value = _step53.value,\n                  _t52 = _step53$value.name,\n                  _i52 = _step53$value.property,\n                  _s32 = _step53$value.binding;\n\n              this.binders[_i52].setUniform(_s32, n, r.get(_i52), _t52);\n            }\n          } catch (err) {\n            _iterator53.e(err);\n          } finally {\n            _iterator53.f();\n          }\n        }\n      }, {\n        key: \"updatePaintBuffers\",\n        value: function updatePaintBuffers(t) {\n          this._buffers = [];\n\n          for (var _e67 in this.binders) {\n            var _r76 = this.binders[_e67];\n\n            if (t && _r76 instanceof Fs) {\n              var _e68 = 2 === t.fromScale ? _r76.zoomInPaintVertexBuffer : _r76.zoomOutPaintVertexBuffer;\n\n              _e68 && this._buffers.push(_e68);\n            } else (_r76 instanceof Vs || _r76 instanceof Es) && _r76.paintVertexBuffer && this._buffers.push(_r76.paintVertexBuffer);\n          }\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          for (var _e69 in this.binders) {\n            var _r77 = this.binders[_e69];\n            (_r77 instanceof Vs || _r77 instanceof Es || _r77 instanceof Fs) && _r77.upload(t);\n          }\n\n          this.updatePaintBuffers();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _t53 in this.binders) {\n            var _e70 = this.binders[_t53];\n            (_e70 instanceof Vs || _e70 instanceof Es || _e70 instanceof Fs) && _e70.destroy();\n          }\n        }\n      }]);\n\n      return Ts;\n    }();\n\n    var Ls = /*#__PURE__*/function () {\n      function Ls(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {\n          return !0;\n        };\n\n        _classCallCheck(this, Ls);\n\n        this.programConfigurations = {};\n\n        var _iterator54 = _createForOfIteratorHelper(t),\n            _step54;\n\n        try {\n          for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {\n            var _n47 = _step54.value;\n            this.programConfigurations[_n47.id] = new Ts(_n47, e, r);\n          }\n        } catch (err) {\n          _iterator54.e(err);\n        } finally {\n          _iterator54.f();\n        }\n\n        this.needsUpload = !1, this._featureMap = new bs(), this._bufferOffset = 0;\n      }\n\n      _createClass(Ls, [{\n        key: \"populatePaintArrays\",\n        value: function populatePaintArrays(t, e, r, n, i, s) {\n          for (var _r78 in this.programConfigurations) {\n            this.programConfigurations[_r78].populatePaintArrays(t, e, n, i, s);\n          }\n\n          void 0 !== e.id && this._featureMap.add(e.id, r, this._bufferOffset, t), this._bufferOffset = t, this.needsUpload = !0;\n        }\n      }, {\n        key: \"updatePaintArrays\",\n        value: function updatePaintArrays(t, e, r, n) {\n          var _iterator55 = _createForOfIteratorHelper(r),\n              _step55;\n\n          try {\n            for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {\n              var _i53 = _step55.value;\n              this.needsUpload = this.programConfigurations[_i53.id].updatePaintArrays(t, this._featureMap, e, _i53, n) || this.needsUpload;\n            }\n          } catch (err) {\n            _iterator55.e(err);\n          } finally {\n            _iterator55.f();\n          }\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          return this.programConfigurations[t];\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          if (this.needsUpload) {\n            for (var _e71 in this.programConfigurations) {\n              this.programConfigurations[_e71].upload(t);\n            }\n\n            this.needsUpload = !1;\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _t54 in this.programConfigurations) {\n            this.programConfigurations[_t54].destroy();\n          }\n        }\n      }]);\n\n      return Ls;\n    }();\n\n    function Ds(t, e) {\n      return {\n        \"text-opacity\": [\"opacity\"],\n        \"icon-opacity\": [\"opacity\"],\n        \"text-color\": [\"fill_color\"],\n        \"icon-color\": [\"fill_color\"],\n        \"text-halo-color\": [\"halo_color\"],\n        \"icon-halo-color\": [\"halo_color\"],\n        \"text-halo-blur\": [\"halo_blur\"],\n        \"icon-halo-blur\": [\"halo_blur\"],\n        \"text-halo-width\": [\"halo_width\"],\n        \"icon-halo-width\": [\"halo_width\"],\n        \"line-gap-width\": [\"gapwidth\"],\n        \"line-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"],\n        \"fill-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"],\n        \"fill-extrusion-pattern\": [\"pattern_to\", \"pattern_from\", \"pixel_ratio_to\", \"pixel_ratio_from\"]\n      }[t] || [t.replace(\"\".concat(e, \"-\"), \"\").replace(/-/g, \"_\")];\n    }\n\n    function $s(t, e, r) {\n      var n = {\n        color: {\n          source: _i,\n          composite: Ri\n        },\n        number: {\n          source: Fi,\n          composite: _i\n        }\n      },\n          i = function (t) {\n        return {\n          \"line-pattern\": {\n            source: es,\n            composite: es\n          },\n          \"fill-pattern\": {\n            source: es,\n            composite: es\n          },\n          \"fill-extrusion-pattern\": {\n            source: es,\n            composite: es\n          }\n        }[t];\n      }(t);\n\n      return i && i[r] || n[e][r];\n    }\n\n    kn(\"ConstantBinder\", Cs), kn(\"CrossFadedConstantBinder\", Ps), kn(\"SourceExpressionBinder\", Vs), kn(\"CrossFadedCompositeBinder\", Fs), kn(\"CompositeExpressionBinder\", Es), kn(\"ProgramConfiguration\", Ts, {\n      omit: [\"_buffers\"]\n    }), kn(\"ProgramConfigurationSet\", Ls);\n    var Rs = 8192;\n    var Us = Math.pow(2, 14) - 1,\n        Os = -Us - 1;\n\n    function qs(t) {\n      var e = Rs / t.extent,\n          r = t.loadGeometry();\n\n      for (var _t55 = 0; _t55 < r.length; _t55++) {\n        var _n48 = r[_t55];\n\n        for (var _t56 = 0; _t56 < _n48.length; _t56++) {\n          var _r79 = _n48[_t56],\n              _i54 = Math.round(_r79.x * e),\n              _a31 = Math.round(_r79.y * e);\n\n          _r79.x = s(_i54, Os, Us), _r79.y = s(_a31, Os, Us), (_i54 < _r79.x || _i54 > _r79.x + 1 || _a31 < _r79.y || _a31 > _r79.y + 1) && d(\"Geometry exceeds allowed extent, reduce your vector tile buffer size\");\n        }\n      }\n\n      return r;\n    }\n\n    function js(t, e) {\n      return {\n        type: t.type,\n        id: t.id,\n        properties: t.properties,\n        geometry: e ? qs(t) : []\n      };\n    }\n\n    function Ns(t, e, r, n, i) {\n      t.emplaceBack(2 * e + (n + 1) / 2, 2 * r + (i + 1) / 2);\n    }\n\n    var Ks = /*#__PURE__*/function () {\n      function Ks(t) {\n        _classCallCheck(this, Ks);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new Yi(), this.indexArray = new os(), this.segments = new hs(), this.programConfigurations = new Ls(t.layers, t.zoom), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(Ks, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          var n = this.layers[0],\n              i = [];\n          var s = null,\n              a = !1;\n          \"circle\" === n.type && (s = n.layout.get(\"circle-sort-key\"), a = !s.isConstant());\n\n          var _iterator56 = _createForOfIteratorHelper(t),\n              _step56;\n\n          try {\n            for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {\n              var _step56$value = _step56.value,\n                  _e72 = _step56$value.feature,\n                  _n50 = _step56$value.id,\n                  _o11 = _step56$value.index,\n                  _l11 = _step56$value.sourceLayerIndex;\n\n              var _t57 = this.layers[0]._featureFilter.needGeometry,\n                  _u11 = js(_e72, _t57);\n\n              if (!this.layers[0]._featureFilter.filter(new Yn(this.zoom), _u11, r)) continue;\n\n              var _c5 = a ? s.evaluate(_u11, {}, r) : void 0,\n                  _h3 = {\n                id: _n50,\n                properties: _e72.properties,\n                type: _e72.type,\n                sourceLayerIndex: _l11,\n                index: _o11,\n                geometry: _t57 ? _u11.geometry : qs(_e72),\n                patterns: {},\n                sortKey: _c5\n              };\n\n              i.push(_h3);\n            }\n          } catch (err) {\n            _iterator56.e(err);\n          } finally {\n            _iterator56.f();\n          }\n\n          a && i.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n\n          for (var _i56 = 0, _i55 = i; _i56 < _i55.length; _i56++) {\n            var _n49 = _i55[_i56];\n            var _i57 = _n49.geometry,\n                _s33 = _n49.index,\n                _a32 = _n49.sourceLayerIndex,\n                _o10 = t[_s33].feature;\n            this.addFeature(_n49, _i57, _s33, r), e.featureIndex.insert(_o10, _i57, _s33, _a32, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, cs), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n) {\n          var _iterator57 = _createForOfIteratorHelper(e),\n              _step57;\n\n          try {\n            for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {\n              var _r80 = _step57.value;\n\n              var _iterator58 = _createForOfIteratorHelper(_r80),\n                  _step58;\n\n              try {\n                for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {\n                  var _e73 = _step58.value;\n                  var _r81 = _e73.x,\n                      _n51 = _e73.y;\n                  if (_r81 < 0 || _r81 >= Rs || _n51 < 0 || _n51 >= Rs) continue;\n\n                  var _i58 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray, t.sortKey),\n                      _s34 = _i58.vertexLength;\n\n                  Ns(this.layoutVertexArray, _r81, _n51, -1, -1), Ns(this.layoutVertexArray, _r81, _n51, 1, -1), Ns(this.layoutVertexArray, _r81, _n51, 1, 1), Ns(this.layoutVertexArray, _r81, _n51, -1, 1), this.indexArray.emplaceBack(_s34, _s34 + 1, _s34 + 2), this.indexArray.emplaceBack(_s34, _s34 + 3, _s34 + 2), _i58.vertexLength += 4, _i58.primitiveLength += 2;\n                }\n              } catch (err) {\n                _iterator58.e(err);\n              } finally {\n                _iterator58.f();\n              }\n            }\n          } catch (err) {\n            _iterator57.e(err);\n          } finally {\n            _iterator57.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, {}, n);\n        }\n      }]);\n\n      return Ks;\n    }();\n\n    function Zs(t, e) {\n      for (var _r82 = 0; _r82 < t.length; _r82++) {\n        if (ea(e, t[_r82])) return !0;\n      }\n\n      for (var _r83 = 0; _r83 < e.length; _r83++) {\n        if (ea(t, e[_r83])) return !0;\n      }\n\n      return !!Ys(t, e);\n    }\n\n    function Gs(t, e, r) {\n      return !!ea(t, e) || !!Ws(e, t, r);\n    }\n\n    function Js(t, e) {\n      if (1 === t.length) return ta(e, t[0]);\n\n      for (var _r84 = 0; _r84 < e.length; _r84++) {\n        var _n52 = e[_r84];\n\n        for (var _e74 = 0; _e74 < _n52.length; _e74++) {\n          if (ea(t, _n52[_e74])) return !0;\n        }\n      }\n\n      for (var _r85 = 0; _r85 < t.length; _r85++) {\n        if (ta(e, t[_r85])) return !0;\n      }\n\n      for (var _r86 = 0; _r86 < e.length; _r86++) {\n        if (Ys(t, e[_r86])) return !0;\n      }\n\n      return !1;\n    }\n\n    function Xs(t, e, r) {\n      if (t.length > 1) {\n        if (Ys(t, e)) return !0;\n\n        for (var _n53 = 0; _n53 < e.length; _n53++) {\n          if (Ws(e[_n53], t, r)) return !0;\n        }\n      }\n\n      for (var _n54 = 0; _n54 < t.length; _n54++) {\n        if (Ws(t[_n54], e, r)) return !0;\n      }\n\n      return !1;\n    }\n\n    function Ys(t, e) {\n      if (0 === t.length || 0 === e.length) return !1;\n\n      for (var _r87 = 0; _r87 < t.length - 1; _r87++) {\n        var _n55 = t[_r87],\n            _i59 = t[_r87 + 1];\n\n        for (var _t58 = 0; _t58 < e.length - 1; _t58++) {\n          if (Hs(_n55, _i59, e[_t58], e[_t58 + 1])) return !0;\n        }\n      }\n\n      return !1;\n    }\n\n    function Hs(t, e, r, n) {\n      return y(t, r, n) !== y(e, r, n) && y(t, e, r) !== y(t, e, n);\n    }\n\n    function Ws(t, e, r) {\n      var n = r * r;\n      if (1 === e.length) return t.distSqr(e[0]) < n;\n\n      for (var _r88 = 1; _r88 < e.length; _r88++) {\n        if (Qs(t, e[_r88 - 1], e[_r88]) < n) return !0;\n      }\n\n      return !1;\n    }\n\n    function Qs(t, e, r) {\n      var n = e.distSqr(r);\n      if (0 === n) return t.distSqr(e);\n      var i = ((t.x - e.x) * (r.x - e.x) + (t.y - e.y) * (r.y - e.y)) / n;\n      return t.distSqr(i < 0 ? e : i > 1 ? r : r.sub(e)._mult(i)._add(e));\n    }\n\n    function ta(t, e) {\n      var r,\n          n,\n          i,\n          s = !1;\n\n      for (var _a33 = 0; _a33 < t.length; _a33++) {\n        r = t[_a33];\n\n        for (var _t59 = 0, _a34 = r.length - 1; _t59 < r.length; _a34 = _t59++) {\n          n = r[_t59], i = r[_a34], n.y > e.y != i.y > e.y && e.x < (i.x - n.x) * (e.y - n.y) / (i.y - n.y) + n.x && (s = !s);\n        }\n      }\n\n      return s;\n    }\n\n    function ea(t, e) {\n      var r = !1;\n\n      for (var _n56 = 0, _i60 = t.length - 1; _n56 < t.length; _i60 = _n56++) {\n        var _s35 = t[_n56],\n            _a35 = t[_i60];\n        _s35.y > e.y != _a35.y > e.y && e.x < (_a35.x - _s35.x) * (e.y - _s35.y) / (_a35.y - _s35.y) + _s35.x && (r = !r);\n      }\n\n      return r;\n    }\n\n    function ra(t, e, r) {\n      var n = r[0],\n          i = r[2];\n      if (t.x < n.x && e.x < n.x || t.x > i.x && e.x > i.x || t.y < n.y && e.y < n.y || t.y > i.y && e.y > i.y) return !1;\n      var s = y(t, e, r[0]);\n      return s !== y(t, e, r[1]) || s !== y(t, e, r[2]) || s !== y(t, e, r[3]);\n    }\n\n    function na(t, e, r) {\n      var n = e.paint.get(t).value;\n      return \"constant\" === n.kind ? n.value : r.programConfigurations.get(e.id).getMaxValue(t);\n    }\n\n    function ia(t) {\n      return Math.sqrt(t[0] * t[0] + t[1] * t[1]);\n    }\n\n    function sa(t, e, r, n, i) {\n      if (!e[0] && !e[1]) return t;\n\n      var s = S.convert(e)._mult(i);\n\n      \"viewport\" === r && s._rotate(-n);\n      var a = [];\n\n      for (var _e75 = 0; _e75 < t.length; _e75++) {\n        a.push(t[_e75].sub(s));\n      }\n\n      return a;\n    }\n\n    kn(\"CircleBucket\", Ks, {\n      omit: [\"layers\"]\n    });\n    var aa = new ci({\n      \"circle-sort-key\": new ai(nt.layout_circle[\"circle-sort-key\"])\n    });\n    var oa = {\n      paint: new ci({\n        \"circle-radius\": new ai(nt.paint_circle[\"circle-radius\"]),\n        \"circle-color\": new ai(nt.paint_circle[\"circle-color\"]),\n        \"circle-blur\": new ai(nt.paint_circle[\"circle-blur\"]),\n        \"circle-opacity\": new ai(nt.paint_circle[\"circle-opacity\"]),\n        \"circle-translate\": new si(nt.paint_circle[\"circle-translate\"]),\n        \"circle-translate-anchor\": new si(nt.paint_circle[\"circle-translate-anchor\"]),\n        \"circle-pitch-scale\": new si(nt.paint_circle[\"circle-pitch-scale\"]),\n        \"circle-pitch-alignment\": new si(nt.paint_circle[\"circle-pitch-alignment\"]),\n        \"circle-stroke-width\": new ai(nt.paint_circle[\"circle-stroke-width\"]),\n        \"circle-stroke-color\": new ai(nt.paint_circle[\"circle-stroke-color\"]),\n        \"circle-stroke-opacity\": new ai(nt.paint_circle[\"circle-stroke-opacity\"])\n      }),\n      layout: aa\n    },\n        la = \"undefined\" != typeof Float32Array ? Float32Array : Array;\n\n    function ua(t) {\n      return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = 1, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 1, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, t;\n    }\n\n    function ca(t, e, r) {\n      var n = e[0],\n          i = e[1],\n          s = e[2],\n          a = e[3],\n          o = e[4],\n          l = e[5],\n          u = e[6],\n          c = e[7],\n          h = e[8],\n          p = e[9],\n          f = e[10],\n          d = e[11],\n          y = e[12],\n          m = e[13],\n          g = e[14],\n          x = e[15],\n          v = r[0],\n          b = r[1],\n          w = r[2],\n          _ = r[3];\n      return t[0] = v * n + b * o + w * h + _ * y, t[1] = v * i + b * l + w * p + _ * m, t[2] = v * s + b * u + w * f + _ * g, t[3] = v * a + b * c + w * d + _ * x, t[4] = (v = r[4]) * n + (b = r[5]) * o + (w = r[6]) * h + (_ = r[7]) * y, t[5] = v * i + b * l + w * p + _ * m, t[6] = v * s + b * u + w * f + _ * g, t[7] = v * a + b * c + w * d + _ * x, t[8] = (v = r[8]) * n + (b = r[9]) * o + (w = r[10]) * h + (_ = r[11]) * y, t[9] = v * i + b * l + w * p + _ * m, t[10] = v * s + b * u + w * f + _ * g, t[11] = v * a + b * c + w * d + _ * x, t[12] = (v = r[12]) * n + (b = r[13]) * o + (w = r[14]) * h + (_ = r[15]) * y, t[13] = v * i + b * l + w * p + _ * m, t[14] = v * s + b * u + w * f + _ * g, t[15] = v * a + b * c + w * d + _ * x, t;\n    }\n\n    Math.hypot || (Math.hypot = function () {\n      for (var t = 0, e = arguments.length; e--;) {\n        t += arguments[e] * arguments[e];\n      }\n\n      return Math.sqrt(t);\n    });\n    var ha,\n        pa = ca;\n\n    function fa(t, e, r) {\n      var n = e[0],\n          i = e[1],\n          s = e[2],\n          a = e[3];\n      return t[0] = r[0] * n + r[4] * i + r[8] * s + r[12] * a, t[1] = r[1] * n + r[5] * i + r[9] * s + r[13] * a, t[2] = r[2] * n + r[6] * i + r[10] * s + r[14] * a, t[3] = r[3] * n + r[7] * i + r[11] * s + r[15] * a, t;\n    }\n\n    function da(t, e) {\n      var r = fa([], [t.x, t.y, 0, 1], e);\n      return new S(r[0] / r[3], r[1] / r[3]);\n    }\n\n    ha = new la(4), la != Float32Array && (ha[0] = 0, ha[1] = 0, ha[2] = 0, ha[3] = 0);\n\n    var ya = /*#__PURE__*/function (_Ks) {\n      _inherits(ya, _Ks);\n\n      function ya() {\n        _classCallCheck(this, ya);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ya).apply(this, arguments));\n      }\n\n      return ya;\n    }(Ks);\n\n    kn(\"HeatmapBucket\", ya, {\n      omit: [\"layers\"]\n    });\n    var ma = {\n      paint: new ci({\n        \"heatmap-radius\": new ai(nt.paint_heatmap[\"heatmap-radius\"]),\n        \"heatmap-weight\": new ai(nt.paint_heatmap[\"heatmap-weight\"]),\n        \"heatmap-intensity\": new si(nt.paint_heatmap[\"heatmap-intensity\"]),\n        \"heatmap-color\": new ui(nt.paint_heatmap[\"heatmap-color\"]),\n        \"heatmap-opacity\": new si(nt.paint_heatmap[\"heatmap-opacity\"])\n      })\n    };\n\n    function ga(t, _ref112, n, i) {\n      var e = _ref112.width,\n          r = _ref112.height;\n\n      if (i) {\n        if (i instanceof Uint8ClampedArray) i = new Uint8Array(i.buffer);else if (i.length !== e * r * n) throw new RangeError(\"mismatched image size. expected: \".concat(i.length, \" but got: \").concat(e * r * n));\n      } else i = new Uint8Array(e * r * n);\n\n      return t.width = e, t.height = r, t.data = i, t;\n    }\n\n    function xa(t, _ref113, n) {\n      var e = _ref113.width,\n          r = _ref113.height;\n      if (e === t.width && r === t.height) return;\n      var i = ga({}, {\n        width: e,\n        height: r\n      }, n);\n      va(t, i, {\n        x: 0,\n        y: 0\n      }, {\n        x: 0,\n        y: 0\n      }, {\n        width: Math.min(t.width, e),\n        height: Math.min(t.height, r)\n      }, n), t.width = e, t.height = r, t.data = i.data;\n    }\n\n    function va(t, e, r, n, i, s) {\n      if (0 === i.width || 0 === i.height) return e;\n      if (i.width > t.width || i.height > t.height || r.x > t.width - i.width || r.y > t.height - i.height) throw new RangeError(\"out of range source coordinates for image copy\");\n      if (i.width > e.width || i.height > e.height || n.x > e.width - i.width || n.y > e.height - i.height) throw new RangeError(\"out of range destination coordinates for image copy\");\n      var a = t.data,\n          o = e.data;\n\n      for (var _l12 = 0; _l12 < i.height; _l12++) {\n        var _u12 = ((r.y + _l12) * t.width + r.x) * s,\n            _c6 = ((n.y + _l12) * e.width + n.x) * s;\n\n        for (var _t60 = 0; _t60 < i.width * s; _t60++) {\n          o[_c6 + _t60] = a[_u12 + _t60];\n        }\n      }\n\n      return e;\n    }\n\n    var ba = /*#__PURE__*/function () {\n      function ba(t, e) {\n        _classCallCheck(this, ba);\n\n        ga(this, t, 1, e);\n      }\n\n      _createClass(ba, [{\n        key: \"resize\",\n        value: function resize(t) {\n          xa(this, t, 1);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new ba({\n            width: this.width,\n            height: this.height\n          }, new Uint8Array(this.data));\n        }\n      }], [{\n        key: \"copy\",\n        value: function copy(t, e, r, n, i) {\n          va(t, e, r, n, i, 1);\n        }\n      }]);\n\n      return ba;\n    }();\n\n    var wa = /*#__PURE__*/function () {\n      function wa(t, e) {\n        _classCallCheck(this, wa);\n\n        ga(this, t, 4, e);\n      }\n\n      _createClass(wa, [{\n        key: \"resize\",\n        value: function resize(t) {\n          xa(this, t, 4);\n        }\n      }, {\n        key: \"replace\",\n        value: function replace(t, e) {\n          e ? this.data.set(t) : this.data = t instanceof Uint8ClampedArray ? new Uint8Array(t.buffer) : t;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new wa({\n            width: this.width,\n            height: this.height\n          }, new Uint8Array(this.data));\n        }\n      }], [{\n        key: \"copy\",\n        value: function copy(t, e, r, n, i) {\n          va(t, e, r, n, i, 4);\n        }\n      }]);\n\n      return wa;\n    }();\n\n    function _a(t) {\n      var e = {},\n          r = t.resolution || 256,\n          n = t.clips ? t.clips.length : 1,\n          i = t.image || new wa({\n        width: r,\n        height: n\n      }),\n          s = function s(r, n, _s36) {\n        e[t.evaluationKey] = _s36;\n        var a = t.expression.evaluate(e);\n        i.data[r + n + 0] = Math.floor(255 * a.r / a.a), i.data[r + n + 1] = Math.floor(255 * a.g / a.a), i.data[r + n + 2] = Math.floor(255 * a.b / a.a), i.data[r + n + 3] = Math.floor(255 * a.a);\n      };\n\n      if (t.clips) for (var _e76 = 0, _i61 = 0; _e76 < n; ++_e76, _i61 += 4 * r) {\n        for (var _n57 = 0, _a36 = 0; _n57 < r; _n57++, _a36 += 4) {\n          var _o12 = _n57 / (r - 1),\n              _t$clips$_e = t.clips[_e76],\n              _l13 = _t$clips$_e.start,\n              _u13 = _t$clips$_e.end;\n\n          s(_i61, _a36, _l13 * (1 - _o12) + _u13 * _o12);\n        }\n      } else for (var _t61 = 0, _e77 = 0; _t61 < r; _t61++, _e77 += 4) {\n        s(0, _e77, _t61 / (r - 1));\n      }\n      return i;\n    }\n\n    kn(\"AlphaImage\", ba), kn(\"RGBAImage\", wa);\n    var Aa = {\n      paint: new ci({\n        \"hillshade-illumination-direction\": new si(nt.paint_hillshade[\"hillshade-illumination-direction\"]),\n        \"hillshade-illumination-anchor\": new si(nt.paint_hillshade[\"hillshade-illumination-anchor\"]),\n        \"hillshade-exaggeration\": new si(nt.paint_hillshade[\"hillshade-exaggeration\"]),\n        \"hillshade-shadow-color\": new si(nt.paint_hillshade[\"hillshade-shadow-color\"]),\n        \"hillshade-highlight-color\": new si(nt.paint_hillshade[\"hillshade-highlight-color\"]),\n        \"hillshade-accent-color\": new si(nt.paint_hillshade[\"hillshade-accent-color\"])\n      })\n    };\n    var ka = mi([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n        Sa = ka.members;\n    var za = {\n      exports: {}\n    };\n\n    function Ia(t, e, r) {\n      r = r || 2;\n      var n,\n          i,\n          s,\n          a,\n          o,\n          l,\n          u,\n          c = e && e.length,\n          h = c ? e[0] * r : t.length,\n          p = Ma(t, 0, h, r, !0),\n          f = [];\n      if (!p || p.next === p.prev) return f;\n\n      if (c && (p = function (t, e, r, n) {\n        var i,\n            s,\n            a,\n            o = [];\n\n        for (i = 0, s = e.length; i < s; i++) {\n          (a = Ma(t, e[i] * n, i < s - 1 ? e[i + 1] * n : t.length, n, !1)) === a.next && (a.steiner = !0), o.push(Ra(a));\n        }\n\n        for (o.sort(Ta), i = 0; i < o.length; i++) {\n          r = Ba(r = La(o[i], r), r.next);\n        }\n\n        return r;\n      }(t, e, p, r)), t.length > 80 * r) {\n        n = s = t[0], i = a = t[1];\n\n        for (var d = r; d < h; d += r) {\n          (o = t[d]) < n && (n = o), (l = t[d + 1]) < i && (i = l), o > s && (s = o), l > a && (a = l);\n        }\n\n        u = 0 !== (u = Math.max(s - n, a - i)) ? 1 / u : 0;\n      }\n\n      return Ca(p, f, r, n, i, u), f;\n    }\n\n    function Ma(t, e, r, n, i) {\n      var s, a;\n      if (i === Wa(t, e, r, n) > 0) for (s = e; s < r; s += n) {\n        a = Xa(s, t[s], t[s + 1], a);\n      } else for (s = r - n; s >= e; s -= n) {\n        a = Xa(s, t[s], t[s + 1], a);\n      }\n      return a && ja(a, a.next) && (Ya(a), a = a.next), a;\n    }\n\n    function Ba(t, e) {\n      if (!t) return t;\n      e || (e = t);\n      var r,\n          n = t;\n\n      do {\n        if (r = !1, n.steiner || !ja(n, n.next) && 0 !== qa(n.prev, n, n.next)) n = n.next;else {\n          if (Ya(n), (n = e = n.prev) === n.next) break;\n          r = !0;\n        }\n      } while (r || n !== e);\n\n      return e;\n    }\n\n    function Ca(t, e, r, n, i, s, a) {\n      if (t) {\n        !a && s && function (t, e, r, n) {\n          var i = t;\n\n          do {\n            null === i.z && (i.z = $a(i.x, i.y, e, r, n)), i.prevZ = i.prev, i.nextZ = i.next, i = i.next;\n          } while (i !== t);\n\n          i.prevZ.nextZ = null, i.prevZ = null, function (t) {\n            var e,\n                r,\n                n,\n                i,\n                s,\n                a,\n                o,\n                l,\n                u = 1;\n\n            do {\n              for (r = t, t = null, s = null, a = 0; r;) {\n                for (a++, n = r, o = 0, e = 0; e < u && (o++, n = n.nextZ); e++) {\n                  ;\n                }\n\n                for (l = u; o > 0 || l > 0 && n;) {\n                  0 !== o && (0 === l || !n || r.z <= n.z) ? (i = r, r = r.nextZ, o--) : (i = n, n = n.nextZ, l--), s ? s.nextZ = i : t = i, i.prevZ = s, s = i;\n                }\n\n                r = n;\n              }\n\n              s.nextZ = null, u *= 2;\n            } while (a > 1);\n          }(i);\n        }(t, n, i, s);\n\n        for (var o, l, u = t; t.prev !== t.next;) {\n          if (o = t.prev, l = t.next, s ? Va(t, n, i, s) : Pa(t)) e.push(o.i / r), e.push(t.i / r), e.push(l.i / r), Ya(t), t = l.next, u = l.next;else if ((t = l) === u) {\n            a ? 1 === a ? Ca(t = Ea(Ba(t), e, r), e, r, n, i, s, 2) : 2 === a && Fa(t, e, r, n, i, s) : Ca(Ba(t), e, r, n, i, s, 1);\n            break;\n          }\n        }\n      }\n    }\n\n    function Pa(t) {\n      var e = t.prev,\n          r = t,\n          n = t.next;\n      if (qa(e, r, n) >= 0) return !1;\n\n      for (var i = t.next.next; i !== t.prev;) {\n        if (Ua(e.x, e.y, r.x, r.y, n.x, n.y, i.x, i.y) && qa(i.prev, i, i.next) >= 0) return !1;\n        i = i.next;\n      }\n\n      return !0;\n    }\n\n    function Va(t, e, r, n) {\n      var i = t.prev,\n          s = t,\n          a = t.next;\n      if (qa(i, s, a) >= 0) return !1;\n\n      for (var o = i.x > s.x ? i.x > a.x ? i.x : a.x : s.x > a.x ? s.x : a.x, l = i.y > s.y ? i.y > a.y ? i.y : a.y : s.y > a.y ? s.y : a.y, u = $a(i.x < s.x ? i.x < a.x ? i.x : a.x : s.x < a.x ? s.x : a.x, i.y < s.y ? i.y < a.y ? i.y : a.y : s.y < a.y ? s.y : a.y, e, r, n), c = $a(o, l, e, r, n), h = t.prevZ, p = t.nextZ; h && h.z >= u && p && p.z <= c;) {\n        if (h !== t.prev && h !== t.next && Ua(i.x, i.y, s.x, s.y, a.x, a.y, h.x, h.y) && qa(h.prev, h, h.next) >= 0) return !1;\n        if (h = h.prevZ, p !== t.prev && p !== t.next && Ua(i.x, i.y, s.x, s.y, a.x, a.y, p.x, p.y) && qa(p.prev, p, p.next) >= 0) return !1;\n        p = p.nextZ;\n      }\n\n      for (; h && h.z >= u;) {\n        if (h !== t.prev && h !== t.next && Ua(i.x, i.y, s.x, s.y, a.x, a.y, h.x, h.y) && qa(h.prev, h, h.next) >= 0) return !1;\n        h = h.prevZ;\n      }\n\n      for (; p && p.z <= c;) {\n        if (p !== t.prev && p !== t.next && Ua(i.x, i.y, s.x, s.y, a.x, a.y, p.x, p.y) && qa(p.prev, p, p.next) >= 0) return !1;\n        p = p.nextZ;\n      }\n\n      return !0;\n    }\n\n    function Ea(t, e, r) {\n      var n = t;\n\n      do {\n        var i = n.prev,\n            s = n.next.next;\n        !ja(i, s) && Na(i, n, n.next, s) && Ga(i, s) && Ga(s, i) && (e.push(i.i / r), e.push(n.i / r), e.push(s.i / r), Ya(n), Ya(n.next), n = t = s), n = n.next;\n      } while (n !== t);\n\n      return Ba(n);\n    }\n\n    function Fa(t, e, r, n, i, s) {\n      var a = t;\n\n      do {\n        for (var o = a.next.next; o !== a.prev;) {\n          if (a.i !== o.i && Oa(a, o)) {\n            var l = Ja(a, o);\n            return a = Ba(a, a.next), l = Ba(l, l.next), Ca(a, e, r, n, i, s), void Ca(l, e, r, n, i, s);\n          }\n\n          o = o.next;\n        }\n\n        a = a.next;\n      } while (a !== t);\n    }\n\n    function Ta(t, e) {\n      return t.x - e.x;\n    }\n\n    function La(t, e) {\n      var r = function (t, e) {\n        var r,\n            n = e,\n            i = t.x,\n            s = t.y,\n            a = -1 / 0;\n\n        do {\n          if (s <= n.y && s >= n.next.y && n.next.y !== n.y) {\n            var o = n.x + (s - n.y) * (n.next.x - n.x) / (n.next.y - n.y);\n\n            if (o <= i && o > a) {\n              if (a = o, o === i) {\n                if (s === n.y) return n;\n                if (s === n.next.y) return n.next;\n              }\n\n              r = n.x < n.next.x ? n : n.next;\n            }\n          }\n\n          n = n.next;\n        } while (n !== e);\n\n        if (!r) return null;\n        if (i === a) return r;\n        var l,\n            u = r,\n            c = r.x,\n            h = r.y,\n            p = 1 / 0;\n        n = r;\n\n        do {\n          i >= n.x && n.x >= c && i !== n.x && Ua(s < h ? i : a, s, c, h, s < h ? a : i, s, n.x, n.y) && (l = Math.abs(s - n.y) / (i - n.x), Ga(n, t) && (l < p || l === p && (n.x > r.x || n.x === r.x && Da(r, n))) && (r = n, p = l)), n = n.next;\n        } while (n !== u);\n\n        return r;\n      }(t, e);\n\n      if (!r) return e;\n      var n = Ja(r, t),\n          i = Ba(r, r.next);\n      return Ba(n, n.next), e === r ? i : e;\n    }\n\n    function Da(t, e) {\n      return qa(t.prev, t, e.prev) < 0 && qa(e.next, t, t.next) < 0;\n    }\n\n    function $a(t, e, r, n, i) {\n      return (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - r) * i) | t << 8)) | t << 4)) | t << 2)) | t << 1)) | (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - n) * i) | e << 8)) | e << 4)) | e << 2)) | e << 1)) << 1;\n    }\n\n    function Ra(t) {\n      var e = t,\n          r = t;\n\n      do {\n        (e.x < r.x || e.x === r.x && e.y < r.y) && (r = e), e = e.next;\n      } while (e !== t);\n\n      return r;\n    }\n\n    function Ua(t, e, r, n, i, s, a, o) {\n      return (i - a) * (e - o) - (t - a) * (s - o) >= 0 && (t - a) * (n - o) - (r - a) * (e - o) >= 0 && (r - a) * (s - o) - (i - a) * (n - o) >= 0;\n    }\n\n    function Oa(t, e) {\n      return t.next.i !== e.i && t.prev.i !== e.i && !function (t, e) {\n        var r = t;\n\n        do {\n          if (r.i !== t.i && r.next.i !== t.i && r.i !== e.i && r.next.i !== e.i && Na(r, r.next, t, e)) return !0;\n          r = r.next;\n        } while (r !== t);\n\n        return !1;\n      }(t, e) && (Ga(t, e) && Ga(e, t) && function (t, e) {\n        var r = t,\n            n = !1,\n            i = (t.x + e.x) / 2,\n            s = (t.y + e.y) / 2;\n\n        do {\n          r.y > s != r.next.y > s && r.next.y !== r.y && i < (r.next.x - r.x) * (s - r.y) / (r.next.y - r.y) + r.x && (n = !n), r = r.next;\n        } while (r !== t);\n\n        return n;\n      }(t, e) && (qa(t.prev, t, e.prev) || qa(t, e.prev, e)) || ja(t, e) && qa(t.prev, t, t.next) > 0 && qa(e.prev, e, e.next) > 0);\n    }\n\n    function qa(t, e, r) {\n      return (e.y - t.y) * (r.x - e.x) - (e.x - t.x) * (r.y - e.y);\n    }\n\n    function ja(t, e) {\n      return t.x === e.x && t.y === e.y;\n    }\n\n    function Na(t, e, r, n) {\n      var i = Za(qa(t, e, r)),\n          s = Za(qa(t, e, n)),\n          a = Za(qa(r, n, t)),\n          o = Za(qa(r, n, e));\n      return i !== s && a !== o || !(0 !== i || !Ka(t, r, e)) || !(0 !== s || !Ka(t, n, e)) || !(0 !== a || !Ka(r, t, n)) || !(0 !== o || !Ka(r, e, n));\n    }\n\n    function Ka(t, e, r) {\n      return e.x <= Math.max(t.x, r.x) && e.x >= Math.min(t.x, r.x) && e.y <= Math.max(t.y, r.y) && e.y >= Math.min(t.y, r.y);\n    }\n\n    function Za(t) {\n      return t > 0 ? 1 : t < 0 ? -1 : 0;\n    }\n\n    function Ga(t, e) {\n      return qa(t.prev, t, t.next) < 0 ? qa(t, e, t.next) >= 0 && qa(t, t.prev, e) >= 0 : qa(t, e, t.prev) < 0 || qa(t, t.next, e) < 0;\n    }\n\n    function Ja(t, e) {\n      var r = new Ha(t.i, t.x, t.y),\n          n = new Ha(e.i, e.x, e.y),\n          i = t.next,\n          s = e.prev;\n      return t.next = e, e.prev = t, r.next = i, i.prev = r, n.next = r, r.prev = n, s.next = n, n.prev = s, n;\n    }\n\n    function Xa(t, e, r, n) {\n      var i = new Ha(t, e, r);\n      return n ? (i.next = n.next, i.prev = n, n.next.prev = i, n.next = i) : (i.prev = i, i.next = i), i;\n    }\n\n    function Ya(t) {\n      t.next.prev = t.prev, t.prev.next = t.next, t.prevZ && (t.prevZ.nextZ = t.nextZ), t.nextZ && (t.nextZ.prevZ = t.prevZ);\n    }\n\n    function Ha(t, e, r) {\n      this.i = t, this.x = e, this.y = r, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1;\n    }\n\n    function Wa(t, e, r, n) {\n      for (var i = 0, s = e, a = r - n; s < r; s += n) {\n        i += (t[a] - t[s]) * (t[s + 1] + t[a + 1]), a = s;\n      }\n\n      return i;\n    }\n\n    za.exports = Ia, za.exports.default = Ia, Ia.deviation = function (t, e, r, n) {\n      var i = e && e.length,\n          s = Math.abs(Wa(t, 0, i ? e[0] * r : t.length, r));\n      if (i) for (var a = 0, o = e.length; a < o; a++) {\n        s -= Math.abs(Wa(t, e[a] * r, a < o - 1 ? e[a + 1] * r : t.length, r));\n      }\n      var l = 0;\n\n      for (a = 0; a < n.length; a += 3) {\n        var u = n[a] * r,\n            c = n[a + 1] * r,\n            h = n[a + 2] * r;\n        l += Math.abs((t[u] - t[h]) * (t[c + 1] - t[u + 1]) - (t[u] - t[c]) * (t[h + 1] - t[u + 1]));\n      }\n\n      return 0 === s && 0 === l ? 0 : Math.abs((l - s) / s);\n    }, Ia.flatten = function (t) {\n      for (var e = t[0][0].length, r = {\n        vertices: [],\n        holes: [],\n        dimensions: e\n      }, n = 0, i = 0; i < t.length; i++) {\n        for (var s = 0; s < t[i].length; s++) {\n          for (var a = 0; a < e; a++) {\n            r.vertices.push(t[i][s][a]);\n          }\n        }\n\n        i > 0 && r.holes.push(n += t[i - 1].length);\n      }\n\n      return r;\n    };\n    var Qa = za.exports;\n\n    function to(t, e, r, n, i) {\n      eo(t, e, r || 0, n || t.length - 1, i || no);\n    }\n\n    function eo(t, e, r, n, i) {\n      for (; n > r;) {\n        if (n - r > 600) {\n          var s = n - r + 1,\n              a = e - r + 1,\n              o = Math.log(s),\n              l = .5 * Math.exp(2 * o / 3),\n              u = .5 * Math.sqrt(o * l * (s - l) / s) * (a - s / 2 < 0 ? -1 : 1);\n          eo(t, e, Math.max(r, Math.floor(e - a * l / s + u)), Math.min(n, Math.floor(e + (s - a) * l / s + u)), i);\n        }\n\n        var c = t[e],\n            h = r,\n            p = n;\n\n        for (ro(t, r, e), i(t[n], c) > 0 && ro(t, r, n); h < p;) {\n          for (ro(t, h, p), h++, p--; i(t[h], c) < 0;) {\n            h++;\n          }\n\n          for (; i(t[p], c) > 0;) {\n            p--;\n          }\n        }\n\n        0 === i(t[r], c) ? ro(t, r, p) : ro(t, ++p, n), p <= e && (r = p + 1), e <= p && (n = p - 1);\n      }\n    }\n\n    function ro(t, e, r) {\n      var n = t[e];\n      t[e] = t[r], t[r] = n;\n    }\n\n    function no(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n\n    function io(t, e) {\n      var r = t.length;\n      if (r <= 1) return [t];\n      var n = [];\n      var i, s;\n\n      for (var _e78 = 0; _e78 < r; _e78++) {\n        var _r89 = m(t[_e78]);\n\n        0 !== _r89 && (t[_e78].area = Math.abs(_r89), void 0 === s && (s = _r89 < 0), s === _r89 < 0 ? (i && n.push(i), i = [t[_e78]]) : i.push(t[_e78]));\n      }\n\n      if (i && n.push(i), e > 1) for (var _t62 = 0; _t62 < n.length; _t62++) {\n        n[_t62].length <= e || (to(n[_t62], e, 1, n[_t62].length - 1, so), n[_t62] = n[_t62].slice(0, e));\n      }\n      return n;\n    }\n\n    function so(t, e) {\n      return e.area - t.area;\n    }\n\n    function ao(t, e, r) {\n      var n = r.patternDependencies;\n      var i = !1;\n\n      var _iterator59 = _createForOfIteratorHelper(e),\n          _step59;\n\n      try {\n        for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {\n          var _r90 = _step59.value;\n\n          var _e79 = _r90.paint.get(\"\".concat(t, \"-pattern\"));\n\n          _e79.isConstant() || (i = !0);\n\n          var _s37 = _e79.constantOr(null);\n\n          _s37 && (i = !0, n[_s37.to] = !0, n[_s37.from] = !0);\n        }\n      } catch (err) {\n        _iterator59.e(err);\n      } finally {\n        _iterator59.f();\n      }\n\n      return i;\n    }\n\n    function oo(t, e, r, n, i) {\n      var s = i.patternDependencies;\n\n      var _iterator60 = _createForOfIteratorHelper(e),\n          _step60;\n\n      try {\n        for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {\n          var _a37 = _step60.value;\n\n          var _e80 = _a37.paint.get(\"\".concat(t, \"-pattern\")).value;\n\n          if (\"constant\" !== _e80.kind) {\n            var _t63 = _e80.evaluate({\n              zoom: n - 1\n            }, r, {}, i.availableImages),\n                _o13 = _e80.evaluate({\n              zoom: n\n            }, r, {}, i.availableImages),\n                _l14 = _e80.evaluate({\n              zoom: n + 1\n            }, r, {}, i.availableImages);\n\n            _t63 = _t63 && _t63.name ? _t63.name : _t63, _o13 = _o13 && _o13.name ? _o13.name : _o13, _l14 = _l14 && _l14.name ? _l14.name : _l14, s[_t63] = !0, s[_o13] = !0, s[_l14] = !0, r.patterns[_a37.id] = {\n              min: _t63,\n              mid: _o13,\n              max: _l14\n            };\n          }\n        }\n      } catch (err) {\n        _iterator60.e(err);\n      } finally {\n        _iterator60.f();\n      }\n\n      return r;\n    }\n\n    var lo = /*#__PURE__*/function () {\n      function lo(t) {\n        _classCallCheck(this, lo);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.layoutVertexArray = new Hi(), this.indexArray = new os(), this.indexArray2 = new ls(), this.programConfigurations = new Ls(t.layers, t.zoom), this.segments = new hs(), this.segments2 = new hs(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(lo, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.hasPattern = ao(\"fill\", this.layers, e);\n          var n = this.layers[0].layout.get(\"fill-sort-key\"),\n              i = !n.isConstant(),\n              s = [];\n\n          var _iterator61 = _createForOfIteratorHelper(t),\n              _step61;\n\n          try {\n            for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {\n              var _step61$value = _step61.value,\n                  _a39 = _step61$value.feature,\n                  _o14 = _step61$value.id,\n                  _l15 = _step61$value.index,\n                  _u14 = _step61$value.sourceLayerIndex;\n\n              var _t65 = this.layers[0]._featureFilter.needGeometry,\n                  _c7 = js(_a39, _t65);\n\n              if (!this.layers[0]._featureFilter.filter(new Yn(this.zoom), _c7, r)) continue;\n\n              var _h4 = i ? n.evaluate(_c7, {}, r, e.availableImages) : void 0,\n                  _p2 = {\n                id: _o14,\n                properties: _a39.properties,\n                type: _a39.type,\n                sourceLayerIndex: _u14,\n                index: _l15,\n                geometry: _t65 ? _c7.geometry : qs(_a39),\n                patterns: {},\n                sortKey: _h4\n              };\n\n              s.push(_p2);\n            }\n          } catch (err) {\n            _iterator61.e(err);\n          } finally {\n            _iterator61.f();\n          }\n\n          i && s.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n\n          for (var _i62 = 0, _s38 = s; _i62 < _s38.length; _i62++) {\n            var _n58 = _s38[_i62];\n            var _i63 = _n58.geometry,\n                _s39 = _n58.index,\n                _a38 = _n58.sourceLayerIndex;\n\n            if (this.hasPattern) {\n              var _t64 = oo(\"fill\", this.layers, _n58, this.zoom, e);\n\n              this.patternFeatures.push(_t64);\n            } else this.addFeature(_n58, _i63, _s39, r, {});\n\n            e.featureIndex.insert(t[_s39].feature, _i63, _s39, _a38, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator62 = _createForOfIteratorHelper(this.patternFeatures),\n              _step62;\n\n          try {\n            for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {\n              var _t66 = _step62.value;\n              this.addFeature(_t66, _t66.geometry, _t66.index, e, r);\n            }\n          } catch (err) {\n            _iterator62.e(err);\n          } finally {\n            _iterator62.f();\n          }\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Sa), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.indexBuffer2 = t.createIndexBuffer(this.indexArray2)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.indexBuffer2.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.segments2.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n, i) {\n          var _iterator63 = _createForOfIteratorHelper(io(e, 500)),\n              _step63;\n\n          try {\n            for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {\n              var _t67 = _step63.value;\n              var _e81 = 0;\n\n              var _iterator64 = _createForOfIteratorHelper(_t67),\n                  _step64;\n\n              try {\n                for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {\n                  var _r92 = _step64.value;\n                  _e81 += _r92.length;\n                }\n              } catch (err) {\n                _iterator64.e(err);\n              } finally {\n                _iterator64.f();\n              }\n\n              var _r91 = this.segments.prepareSegment(_e81, this.layoutVertexArray, this.indexArray),\n                  _n59 = _r91.vertexLength,\n                  _i64 = [],\n                  _s40 = [];\n\n              var _iterator65 = _createForOfIteratorHelper(_t67),\n                  _step65;\n\n              try {\n                for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {\n                  var _e82 = _step65.value;\n                  if (0 === _e82.length) continue;\n                  _e82 !== _t67[0] && _s40.push(_i64.length / 2);\n\n                  var _r93 = this.segments2.prepareSegment(_e82.length, this.layoutVertexArray, this.indexArray2),\n                      _n60 = _r93.vertexLength;\n\n                  this.layoutVertexArray.emplaceBack(_e82[0].x, _e82[0].y), this.indexArray2.emplaceBack(_n60 + _e82.length - 1, _n60), _i64.push(_e82[0].x), _i64.push(_e82[0].y);\n\n                  for (var _t69 = 1; _t69 < _e82.length; _t69++) {\n                    this.layoutVertexArray.emplaceBack(_e82[_t69].x, _e82[_t69].y), this.indexArray2.emplaceBack(_n60 + _t69 - 1, _n60 + _t69), _i64.push(_e82[_t69].x), _i64.push(_e82[_t69].y);\n                  }\n\n                  _r93.vertexLength += _e82.length, _r93.primitiveLength += _e82.length;\n                }\n              } catch (err) {\n                _iterator65.e(err);\n              } finally {\n                _iterator65.f();\n              }\n\n              var _a40 = Qa(_i64, _s40);\n\n              for (var _t68 = 0; _t68 < _a40.length; _t68 += 3) {\n                this.indexArray.emplaceBack(_n59 + _a40[_t68], _n59 + _a40[_t68 + 1], _n59 + _a40[_t68 + 2]);\n              }\n\n              _r91.vertexLength += _e81, _r91.primitiveLength += _a40.length / 3;\n            }\n          } catch (err) {\n            _iterator63.e(err);\n          } finally {\n            _iterator63.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, n);\n        }\n      }]);\n\n      return lo;\n    }();\n\n    kn(\"FillBucket\", lo, {\n      omit: [\"layers\", \"patternFeatures\"]\n    });\n    var uo = new ci({\n      \"fill-sort-key\": new ai(nt.layout_fill[\"fill-sort-key\"])\n    });\n    var co = {\n      paint: new ci({\n        \"fill-antialias\": new si(nt.paint_fill[\"fill-antialias\"]),\n        \"fill-opacity\": new ai(nt.paint_fill[\"fill-opacity\"]),\n        \"fill-color\": new ai(nt.paint_fill[\"fill-color\"]),\n        \"fill-outline-color\": new ai(nt.paint_fill[\"fill-outline-color\"]),\n        \"fill-translate\": new si(nt.paint_fill[\"fill-translate\"]),\n        \"fill-translate-anchor\": new si(nt.paint_fill[\"fill-translate-anchor\"]),\n        \"fill-pattern\": new oi(nt.paint_fill[\"fill-pattern\"])\n      }),\n      layout: uo\n    };\n    var ho = mi([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_normal_ed\",\n      components: 4,\n      type: \"Int16\"\n    }], 4),\n        po = ho.members;\n    var fo = {},\n        yo = S,\n        mo = go;\n\n    function go(t, e, r, n, i) {\n      this.properties = {}, this.extent = r, this.type = 0, this._pbf = t, this._geometry = -1, this._keys = n, this._values = i, t.readFields(xo, this, e);\n    }\n\n    function xo(t, e, r) {\n      1 == t ? e.id = r.readVarint() : 2 == t ? function (t, e) {\n        for (var r = t.readVarint() + t.pos; t.pos < r;) {\n          var n = e._keys[t.readVarint()],\n              i = e._values[t.readVarint()];\n\n          e.properties[n] = i;\n        }\n      }(r, e) : 3 == t ? e.type = r.readVarint() : 4 == t && (e._geometry = r.pos);\n    }\n\n    function vo(t) {\n      for (var e, r, n = 0, i = 0, s = t.length, a = s - 1; i < s; a = i++) {\n        n += ((r = t[a]).x - (e = t[i]).x) * (e.y + r.y);\n      }\n\n      return n;\n    }\n\n    go.types = [\"Unknown\", \"Point\", \"LineString\", \"Polygon\"], go.prototype.loadGeometry = function () {\n      var t = this._pbf;\n      t.pos = this._geometry;\n\n      for (var e, r = t.readVarint() + t.pos, n = 1, i = 0, s = 0, a = 0, o = []; t.pos < r;) {\n        if (i <= 0) {\n          var l = t.readVarint();\n          n = 7 & l, i = l >> 3;\n        }\n\n        if (i--, 1 === n || 2 === n) s += t.readSVarint(), a += t.readSVarint(), 1 === n && (e && o.push(e), e = []), e.push(new yo(s, a));else {\n          if (7 !== n) throw new Error(\"unknown command \" + n);\n          e && e.push(e[0].clone());\n        }\n      }\n\n      return e && o.push(e), o;\n    }, go.prototype.bbox = function () {\n      var t = this._pbf;\n      t.pos = this._geometry;\n\n      for (var e = t.readVarint() + t.pos, r = 1, n = 0, i = 0, s = 0, a = 1 / 0, o = -1 / 0, l = 1 / 0, u = -1 / 0; t.pos < e;) {\n        if (n <= 0) {\n          var c = t.readVarint();\n          r = 7 & c, n = c >> 3;\n        }\n\n        if (n--, 1 === r || 2 === r) (i += t.readSVarint()) < a && (a = i), i > o && (o = i), (s += t.readSVarint()) < l && (l = s), s > u && (u = s);else if (7 !== r) throw new Error(\"unknown command \" + r);\n      }\n\n      return [a, l, o, u];\n    }, go.prototype.toGeoJSON = function (t, e, r) {\n      var n,\n          i,\n          s = this.extent * Math.pow(2, r),\n          a = this.extent * t,\n          o = this.extent * e,\n          l = this.loadGeometry(),\n          u = go.types[this.type];\n\n      function c(t) {\n        for (var e = 0; e < t.length; e++) {\n          var r = t[e];\n          t[e] = [360 * (r.x + a) / s - 180, 360 / Math.PI * Math.atan(Math.exp((180 - 360 * (r.y + o) / s) * Math.PI / 180)) - 90];\n        }\n      }\n\n      switch (this.type) {\n        case 1:\n          var h = [];\n\n          for (n = 0; n < l.length; n++) {\n            h[n] = l[n][0];\n          }\n\n          c(l = h);\n          break;\n\n        case 2:\n          for (n = 0; n < l.length; n++) {\n            c(l[n]);\n          }\n\n          break;\n\n        case 3:\n          for (l = function (t) {\n            var e = t.length;\n            if (e <= 1) return [t];\n\n            for (var r, n, i = [], s = 0; s < e; s++) {\n              var a = vo(t[s]);\n              0 !== a && (void 0 === n && (n = a < 0), n === a < 0 ? (r && i.push(r), r = [t[s]]) : r.push(t[s]));\n            }\n\n            return r && i.push(r), i;\n          }(l), n = 0; n < l.length; n++) {\n            for (i = 0; i < l[n].length; i++) {\n              c(l[n][i]);\n            }\n          }\n\n      }\n\n      1 === l.length ? l = l[0] : u = \"Multi\" + u;\n      var p = {\n        type: \"Feature\",\n        geometry: {\n          type: u,\n          coordinates: l\n        },\n        properties: this.properties\n      };\n      return \"id\" in this && (p.id = this.id), p;\n    };\n    var bo = mo,\n        wo = _o;\n\n    function _o(t, e) {\n      this.version = 1, this.name = null, this.extent = 4096, this.length = 0, this._pbf = t, this._keys = [], this._values = [], this._features = [], t.readFields(Ao, this, e), this.length = this._features.length;\n    }\n\n    function Ao(t, e, r) {\n      15 === t ? e.version = r.readVarint() : 1 === t ? e.name = r.readString() : 5 === t ? e.extent = r.readVarint() : 2 === t ? e._features.push(r.pos) : 3 === t ? e._keys.push(r.readString()) : 4 === t && e._values.push(function (t) {\n        for (var e = null, r = t.readVarint() + t.pos; t.pos < r;) {\n          var n = t.readVarint() >> 3;\n          e = 1 === n ? t.readString() : 2 === n ? t.readFloat() : 3 === n ? t.readDouble() : 4 === n ? t.readVarint64() : 5 === n ? t.readVarint() : 6 === n ? t.readSVarint() : 7 === n ? t.readBoolean() : null;\n        }\n\n        return e;\n      }(r));\n    }\n\n    _o.prototype.feature = function (t) {\n      if (t < 0 || t >= this._features.length) throw new Error(\"feature index out of bounds\");\n      this._pbf.pos = this._features[t];\n\n      var e = this._pbf.readVarint() + this._pbf.pos;\n\n      return new bo(this._pbf, e, this.extent, this._keys, this._values);\n    };\n\n    var ko = wo;\n\n    function So(t, e, r) {\n      if (3 === t) {\n        var n = new ko(r, r.readVarint() + r.pos);\n        n.length && (e[n.name] = n);\n      }\n    }\n\n    fo.VectorTile = function (t, e) {\n      this.layers = t.readFields(So, {}, e);\n    }, fo.VectorTileFeature = mo, fo.VectorTileLayer = wo;\n    var zo = fo.VectorTileFeature.types,\n        Io = Math.pow(2, 13);\n\n    function Mo(t, e, r, n, i, s, a, o) {\n      t.emplaceBack(e, r, 2 * Math.floor(n * Io) + a, i * Io * 2, s * Io * 2, Math.round(o));\n    }\n\n    var Bo = /*#__PURE__*/function () {\n      function Bo(t) {\n        _classCallCheck(this, Bo);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.layoutVertexArray = new Wi(), this.indexArray = new os(), this.programConfigurations = new Ls(t.layers, t.zoom), this.segments = new hs(), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(Bo, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.features = [], this.hasPattern = ao(\"fill-extrusion\", this.layers, e);\n\n          var _iterator66 = _createForOfIteratorHelper(t),\n              _step66;\n\n          try {\n            for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {\n              var _step66$value = _step66.value,\n                  _n61 = _step66$value.feature,\n                  _i65 = _step66$value.id,\n                  _s41 = _step66$value.index,\n                  _a41 = _step66$value.sourceLayerIndex;\n\n              var _t70 = this.layers[0]._featureFilter.needGeometry,\n                  _o15 = js(_n61, _t70);\n\n              if (!this.layers[0]._featureFilter.filter(new Yn(this.zoom), _o15, r)) continue;\n              var _l16 = {\n                id: _i65,\n                sourceLayerIndex: _a41,\n                index: _s41,\n                geometry: _t70 ? _o15.geometry : qs(_n61),\n                properties: _n61.properties,\n                type: _n61.type,\n                patterns: {}\n              };\n              this.hasPattern ? this.features.push(oo(\"fill-extrusion\", this.layers, _l16, this.zoom, e)) : this.addFeature(_l16, _l16.geometry, _s41, r, {}), e.featureIndex.insert(_n61, _l16.geometry, _s41, _a41, this.index, !0);\n            }\n          } catch (err) {\n            _iterator66.e(err);\n          } finally {\n            _iterator66.f();\n          }\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator67 = _createForOfIteratorHelper(this.features),\n              _step67;\n\n          try {\n            for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {\n              var _t71 = _step67.value;\n              var _n62 = _t71.geometry;\n              this.addFeature(_t71, _n62, _t71.index, e, r);\n            }\n          } catch (err) {\n            _iterator67.e(err);\n          } finally {\n            _iterator67.f();\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, po), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n, i) {\n          var _iterator68 = _createForOfIteratorHelper(io(e, 500)),\n              _step68;\n\n          try {\n            for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {\n              var _r94 = _step68.value;\n              var _e83 = 0;\n\n              var _iterator69 = _createForOfIteratorHelper(_r94),\n                  _step69;\n\n              try {\n                for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {\n                  var _t73 = _step69.value;\n                  _e83 += _t73.length;\n                }\n              } catch (err) {\n                _iterator69.e(err);\n              } finally {\n                _iterator69.f();\n              }\n\n              var _n63 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray);\n\n              var _iterator70 = _createForOfIteratorHelper(_r94),\n                  _step70;\n\n              try {\n                for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {\n                  var _t74 = _step70.value;\n                  if (0 === _t74.length) continue;\n                  if (Po(_t74)) continue;\n                  var _e84 = 0;\n\n                  for (var _r95 = 0; _r95 < _t74.length; _r95++) {\n                    var _i67 = _t74[_r95];\n\n                    if (_r95 >= 1) {\n                      var _s43 = _t74[_r95 - 1];\n\n                      if (!Co(_i67, _s43)) {\n                        _n63.vertexLength + 4 > hs.MAX_VERTEX_ARRAY_LENGTH && (_n63 = this.segments.prepareSegment(4, this.layoutVertexArray, this.indexArray));\n\n                        var _t75 = _i67.sub(_s43)._perp()._unit(),\n                            _r96 = _s43.dist(_i67);\n\n                        _e84 + _r96 > 32768 && (_e84 = 0), Mo(this.layoutVertexArray, _i67.x, _i67.y, _t75.x, _t75.y, 0, 0, _e84), Mo(this.layoutVertexArray, _i67.x, _i67.y, _t75.x, _t75.y, 0, 1, _e84), _e84 += _r96, Mo(this.layoutVertexArray, _s43.x, _s43.y, _t75.x, _t75.y, 0, 0, _e84), Mo(this.layoutVertexArray, _s43.x, _s43.y, _t75.x, _t75.y, 0, 1, _e84);\n                        var _a43 = _n63.vertexLength;\n                        this.indexArray.emplaceBack(_a43, _a43 + 2, _a43 + 1), this.indexArray.emplaceBack(_a43 + 1, _a43 + 2, _a43 + 3), _n63.vertexLength += 4, _n63.primitiveLength += 2;\n                      }\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator70.e(err);\n              } finally {\n                _iterator70.f();\n              }\n\n              if (_n63.vertexLength + _e83 > hs.MAX_VERTEX_ARRAY_LENGTH && (_n63 = this.segments.prepareSegment(_e83, this.layoutVertexArray, this.indexArray)), \"Polygon\" !== zo[t.type]) continue;\n              var _i66 = [],\n                  _s42 = [],\n                  _a42 = _n63.vertexLength;\n\n              var _iterator71 = _createForOfIteratorHelper(_r94),\n                  _step71;\n\n              try {\n                for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {\n                  var _t76 = _step71.value;\n\n                  if (0 !== _t76.length) {\n                    _t76 !== _r94[0] && _s42.push(_i66.length / 2);\n\n                    for (var _e85 = 0; _e85 < _t76.length; _e85++) {\n                      var _r97 = _t76[_e85];\n                      Mo(this.layoutVertexArray, _r97.x, _r97.y, 0, 0, 1, 1, 0), _i66.push(_r97.x), _i66.push(_r97.y);\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator71.e(err);\n              } finally {\n                _iterator71.f();\n              }\n\n              var _o16 = Qa(_i66, _s42);\n\n              for (var _t72 = 0; _t72 < _o16.length; _t72 += 3) {\n                this.indexArray.emplaceBack(_a42 + _o16[_t72], _a42 + _o16[_t72 + 2], _a42 + _o16[_t72 + 1]);\n              }\n\n              _n63.primitiveLength += _o16.length / 3, _n63.vertexLength += _e83;\n            }\n          } catch (err) {\n            _iterator68.e(err);\n          } finally {\n            _iterator68.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, n);\n        }\n      }]);\n\n      return Bo;\n    }();\n\n    function Co(t, e) {\n      return t.x === e.x && (t.x < 0 || t.x > Rs) || t.y === e.y && (t.y < 0 || t.y > Rs);\n    }\n\n    function Po(t) {\n      return t.every(function (t) {\n        return t.x < 0;\n      }) || t.every(function (t) {\n        return t.x > Rs;\n      }) || t.every(function (t) {\n        return t.y < 0;\n      }) || t.every(function (t) {\n        return t.y > Rs;\n      });\n    }\n\n    kn(\"FillExtrusionBucket\", Bo, {\n      omit: [\"layers\", \"features\"]\n    });\n    var Vo = {\n      paint: new ci({\n        \"fill-extrusion-opacity\": new si(nt[\"paint_fill-extrusion\"][\"fill-extrusion-opacity\"]),\n        \"fill-extrusion-color\": new ai(nt[\"paint_fill-extrusion\"][\"fill-extrusion-color\"]),\n        \"fill-extrusion-translate\": new si(nt[\"paint_fill-extrusion\"][\"fill-extrusion-translate\"]),\n        \"fill-extrusion-translate-anchor\": new si(nt[\"paint_fill-extrusion\"][\"fill-extrusion-translate-anchor\"]),\n        \"fill-extrusion-pattern\": new oi(nt[\"paint_fill-extrusion\"][\"fill-extrusion-pattern\"]),\n        \"fill-extrusion-height\": new ai(nt[\"paint_fill-extrusion\"][\"fill-extrusion-height\"]),\n        \"fill-extrusion-base\": new ai(nt[\"paint_fill-extrusion\"][\"fill-extrusion-base\"]),\n        \"fill-extrusion-vertical-gradient\": new si(nt[\"paint_fill-extrusion\"][\"fill-extrusion-vertical-gradient\"])\n      })\n    };\n\n    function Eo(t, e) {\n      return t.x * e.x + t.y * e.y;\n    }\n\n    function Fo(t, e) {\n      if (1 === t.length) {\n        var _r98 = 0;\n        var _n64 = e[_r98++];\n\n        var _i68;\n\n        for (; !_i68 || _n64.equals(_i68);) {\n          if (_i68 = e[_r98++], !_i68) return 1 / 0;\n        }\n\n        for (; _r98 < e.length; _r98++) {\n          var _s44 = e[_r98],\n              _a44 = t[0],\n              _o17 = _i68.sub(_n64),\n              _l17 = _s44.sub(_n64),\n              _u15 = _a44.sub(_n64),\n              _c8 = Eo(_o17, _o17),\n              _h5 = Eo(_o17, _l17),\n              _p3 = Eo(_l17, _l17),\n              _f = Eo(_u15, _o17),\n              _d = Eo(_u15, _l17),\n              _y = _c8 * _p3 - _h5 * _h5,\n              _m = (_p3 * _f - _h5 * _d) / _y,\n              _g = (_c8 * _d - _h5 * _f) / _y,\n              _x = _n64.z * (1 - _m - _g) + _i68.z * _m + _s44.z * _g;\n\n          if (isFinite(_x)) return _x;\n        }\n\n        return 1 / 0;\n      }\n\n      {\n        var _t77 = 1 / 0;\n\n        var _iterator72 = _createForOfIteratorHelper(e),\n            _step72;\n\n        try {\n          for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {\n            var _r99 = _step72.value;\n            _t77 = Math.min(_t77, _r99.z);\n          }\n        } catch (err) {\n          _iterator72.e(err);\n        } finally {\n          _iterator72.f();\n        }\n\n        return _t77;\n      }\n    }\n\n    var To = mi([{\n      name: \"a_pos_normal\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_data\",\n      components: 4,\n      type: \"Uint8\"\n    }], 4),\n        Lo = To.members,\n        Do = mi([{\n      name: \"a_uv_x\",\n      components: 1,\n      type: \"Float32\"\n    }, {\n      name: \"a_split_index\",\n      components: 1,\n      type: \"Float32\"\n    }]),\n        $o = Do.members,\n        Ro = fo.VectorTileFeature.types,\n        Uo = Math.cos(Math.PI / 180 * 37.5),\n        Oo = Math.pow(2, 14) / .5;\n\n    var qo = /*#__PURE__*/function () {\n      function qo(t) {\n        var _this8 = this;\n\n        _classCallCheck(this, qo);\n\n        this.zoom = t.zoom, this.overscaling = t.overscaling, this.layers = t.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = t.index, this.hasPattern = !1, this.patternFeatures = [], this.lineClipsArray = [], this.gradients = {}, this.layers.forEach(function (t) {\n          _this8.gradients[t.id] = {};\n        }), this.layoutVertexArray = new Qi(), this.layoutVertexArray2 = new ts(), this.indexArray = new os(), this.programConfigurations = new Ls(t.layers, t.zoom), this.segments = new hs(), this.maxLineLength = 0, this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        });\n      }\n\n      _createClass(qo, [{\n        key: \"populate\",\n        value: function populate(t, e, r) {\n          this.hasPattern = ao(\"line\", this.layers, e);\n          var n = this.layers[0].layout.get(\"line-sort-key\"),\n              i = !n.isConstant(),\n              s = [];\n\n          var _iterator73 = _createForOfIteratorHelper(t),\n              _step73;\n\n          try {\n            for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {\n              var _step73$value = _step73.value,\n                  _e86 = _step73$value.feature,\n                  _a46 = _step73$value.id,\n                  _o18 = _step73$value.index,\n                  _l18 = _step73$value.sourceLayerIndex;\n\n              var _t79 = this.layers[0]._featureFilter.needGeometry,\n                  _u16 = js(_e86, _t79);\n\n              if (!this.layers[0]._featureFilter.filter(new Yn(this.zoom), _u16, r)) continue;\n\n              var _c9 = i ? n.evaluate(_u16, {}, r) : void 0,\n                  _h6 = {\n                id: _a46,\n                properties: _e86.properties,\n                type: _e86.type,\n                sourceLayerIndex: _l18,\n                index: _o18,\n                geometry: _t79 ? _u16.geometry : qs(_e86),\n                patterns: {},\n                sortKey: _c9\n              };\n\n              s.push(_h6);\n            }\n          } catch (err) {\n            _iterator73.e(err);\n          } finally {\n            _iterator73.f();\n          }\n\n          i && s.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n\n          for (var _i69 = 0, _s45 = s; _i69 < _s45.length; _i69++) {\n            var _n65 = _s45[_i69];\n            var _i70 = _n65.geometry,\n                _s46 = _n65.index,\n                _a45 = _n65.sourceLayerIndex;\n\n            if (this.hasPattern) {\n              var _t78 = oo(\"line\", this.layers, _n65, this.zoom, e);\n\n              this.patternFeatures.push(_t78);\n            } else this.addFeature(_n65, _i70, _s46, r, {});\n\n            e.featureIndex.insert(t[_s46].feature, _i70, _s46, _a45, this.index);\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && this.programConfigurations.updatePaintArrays(t, e, this.stateDependentLayers, r);\n        }\n      }, {\n        key: \"addFeatures\",\n        value: function addFeatures(t, e, r) {\n          var _iterator74 = _createForOfIteratorHelper(this.patternFeatures),\n              _step74;\n\n          try {\n            for (_iterator74.s(); !(_step74 = _iterator74.n()).done;) {\n              var _t80 = _step74.value;\n              this.addFeature(_t80, _t80.geometry, _t80.index, e, r);\n            }\n          } catch (err) {\n            _iterator74.e(err);\n          } finally {\n            _iterator74.f();\n          }\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          this.uploaded || (0 !== this.layoutVertexArray2.length && (this.layoutVertexBuffer2 = t.createVertexBuffer(this.layoutVertexArray2, $o)), this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Lo), this.indexBuffer = t.createIndexBuffer(this.indexArray)), this.programConfigurations.upload(t), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy());\n        }\n      }, {\n        key: \"lineFeatureClips\",\n        value: function lineFeatureClips(t) {\n          if (t.properties && Object.prototype.hasOwnProperty.call(t.properties, \"mapbox_clip_start\") && Object.prototype.hasOwnProperty.call(t.properties, \"mapbox_clip_end\")) return {\n            start: +t.properties.mapbox_clip_start,\n            end: +t.properties.mapbox_clip_end\n          };\n        }\n      }, {\n        key: \"addFeature\",\n        value: function addFeature(t, e, r, n, i) {\n          var s = this.layers[0].layout,\n              a = s.get(\"line-join\").evaluate(t, {}),\n              o = s.get(\"line-cap\"),\n              l = s.get(\"line-miter-limit\"),\n              u = s.get(\"line-round-limit\");\n          this.lineClips = this.lineFeatureClips(t);\n\n          var _iterator75 = _createForOfIteratorHelper(e),\n              _step75;\n\n          try {\n            for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {\n              var _r100 = _step75.value;\n              this.addLine(_r100, t, a, o, l, u);\n            }\n          } catch (err) {\n            _iterator75.e(err);\n          } finally {\n            _iterator75.f();\n          }\n\n          this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length, t, r, i, n);\n        }\n      }, {\n        key: \"addLine\",\n        value: function addLine(t, e, r, n, i, s) {\n          if (this.distance = 0, this.scaledDistance = 0, this.totalDistance = 0, this.lineClips) {\n            this.lineClipsArray.push(this.lineClips);\n\n            for (var _e87 = 0; _e87 < t.length - 1; _e87++) {\n              this.totalDistance += t[_e87].dist(t[_e87 + 1]);\n            }\n\n            this.updateScaledDistance(), this.maxLineLength = Math.max(this.maxLineLength, this.totalDistance);\n          }\n\n          var a = \"Polygon\" === Ro[e.type];\n          var o = t.length;\n\n          for (; o >= 2 && t[o - 1].equals(t[o - 2]);) {\n            o--;\n          }\n\n          var l = 0;\n\n          for (; l < o - 1 && t[l].equals(t[l + 1]);) {\n            l++;\n          }\n\n          if (o < (a ? 3 : 2)) return;\n          \"bevel\" === r && (i = 1.05);\n          var u = this.overscaling <= 16 ? 122880 / (512 * this.overscaling) : 0,\n              c = this.segments.prepareSegment(10 * o, this.layoutVertexArray, this.indexArray);\n          var h, p, f, d, y;\n          this.e1 = this.e2 = -1, a && (h = t[o - 2], y = t[l].sub(h)._unit()._perp());\n\n          for (var _e88 = l; _e88 < o; _e88++) {\n            if (f = _e88 === o - 1 ? a ? t[l + 1] : void 0 : t[_e88 + 1], f && t[_e88].equals(f)) continue;\n            y && (d = y), h && (p = h), h = t[_e88], y = f ? f.sub(h)._unit()._perp() : d, d = d || y;\n\n            var _m2 = d.add(y);\n\n            0 === _m2.x && 0 === _m2.y || _m2._unit();\n\n            var _g2 = d.x * y.x + d.y * y.y,\n                _x2 = _m2.x * y.x + _m2.y * y.y,\n                _v = 0 !== _x2 ? 1 / _x2 : 1 / 0,\n                _b = 2 * Math.sqrt(2 - 2 * _x2),\n                _w = _x2 < Uo && p && f,\n                _2 = d.x * y.y - d.y * y.x > 0;\n\n            if (_w && _e88 > l) {\n              var _t81 = h.dist(p);\n\n              if (_t81 > 2 * u) {\n                var _e89 = h.sub(h.sub(p)._mult(u / _t81)._round());\n\n                this.updateDistance(p, _e89), this.addCurrentVertex(_e89, d, 0, 0, c), p = _e89;\n              }\n            }\n\n            var _A = p && f;\n\n            var _k = _A ? r : a ? \"butt\" : n;\n\n            if (_A && \"round\" === _k && (_v < s ? _k = \"miter\" : _v <= 2 && (_k = \"fakeround\")), \"miter\" === _k && _v > i && (_k = \"bevel\"), \"bevel\" === _k && (_v > 2 && (_k = \"flipbevel\"), _v < i && (_k = \"miter\")), p && this.updateDistance(p, h), \"miter\" === _k) _m2._mult(_v), this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"flipbevel\" === _k) {\n              if (_v > 100) _m2 = y.mult(-1);else {\n                var _t82 = _v * d.add(y).mag() / d.sub(y).mag();\n\n                _m2._perp()._mult(_t82 * (_2 ? -1 : 1));\n              }\n              this.addCurrentVertex(h, _m2, 0, 0, c), this.addCurrentVertex(h, _m2.mult(-1), 0, 0, c);\n            } else if (\"bevel\" === _k || \"fakeround\" === _k) {\n              var _t83 = -Math.sqrt(_v * _v - 1),\n                  _e90 = _2 ? _t83 : 0,\n                  _r101 = _2 ? 0 : _t83;\n\n              if (p && this.addCurrentVertex(h, d, _e90, _r101, c), \"fakeround\" === _k) {\n                var _t84 = Math.round(180 * _b / Math.PI / 20);\n\n                for (var _e91 = 1; _e91 < _t84; _e91++) {\n                  var _r102 = _e91 / _t84;\n\n                  if (.5 !== _r102) {\n                    var _t85 = _r102 - .5;\n\n                    _r102 += _r102 * _t85 * (_r102 - 1) * ((1.0904 + _g2 * (_g2 * (3.55645 - 1.43519 * _g2) - 3.2452)) * _t85 * _t85 + (.848013 + _g2 * (.215638 * _g2 - 1.06021)));\n                  }\n\n                  var _n66 = y.sub(d)._mult(_r102)._add(d)._unit()._mult(_2 ? -1 : 1);\n\n                  this.addHalfVertex(h, _n66.x, _n66.y, !1, _2, 0, c);\n                }\n              }\n\n              f && this.addCurrentVertex(h, y, -_e90, -_r101, c);\n            } else if (\"butt\" === _k) this.addCurrentVertex(h, _m2, 0, 0, c);else if (\"square\" === _k) {\n              var _t86 = p ? 1 : -1;\n\n              this.addCurrentVertex(h, _m2, _t86, _t86, c);\n            } else \"round\" === _k && (p && (this.addCurrentVertex(h, d, 0, 0, c), this.addCurrentVertex(h, d, 1, 1, c, !0)), f && (this.addCurrentVertex(h, y, -1, -1, c, !0), this.addCurrentVertex(h, y, 0, 0, c)));\n\n            if (_w && _e88 < o - 1) {\n              var _t87 = h.dist(f);\n\n              if (_t87 > 2 * u) {\n                var _e92 = h.add(f.sub(h)._mult(u / _t87)._round());\n\n                this.updateDistance(h, _e92), this.addCurrentVertex(_e92, y, 0, 0, c), h = _e92;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"addCurrentVertex\",\n        value: function addCurrentVertex(t, e, r, n, i) {\n          var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;\n          var a = e.y * n - e.x,\n              o = -e.y - e.x * n;\n          this.addHalfVertex(t, e.x + e.y * r, e.y - e.x * r, s, !1, r, i), this.addHalfVertex(t, a, o, s, !0, -n, i), this.distance > Oo / 2 && 0 === this.totalDistance && (this.distance = 0, this.addCurrentVertex(t, e, r, n, i, s));\n        }\n      }, {\n        key: \"addHalfVertex\",\n        value: function addHalfVertex(_ref114, r, n, i, s, a, o) {\n          var t = _ref114.x,\n              e = _ref114.y;\n          var l = .5 * (this.lineClips ? this.scaledDistance * (Oo - 1) : this.scaledDistance);\n          this.layoutVertexArray.emplaceBack((t << 1) + (i ? 1 : 0), (e << 1) + (s ? 1 : 0), Math.round(63 * r) + 128, Math.round(63 * n) + 128, 1 + (0 === a ? 0 : a < 0 ? -1 : 1) | (63 & l) << 2, l >> 6), this.lineClips && this.layoutVertexArray2.emplaceBack((this.scaledDistance - this.lineClips.start) / (this.lineClips.end - this.lineClips.start), this.lineClipsArray.length);\n          var u = o.vertexLength++;\n          this.e1 >= 0 && this.e2 >= 0 && (this.indexArray.emplaceBack(this.e1, this.e2, u), o.primitiveLength++), s ? this.e2 = u : this.e1 = u;\n        }\n      }, {\n        key: \"updateScaledDistance\",\n        value: function updateScaledDistance() {\n          this.scaledDistance = this.lineClips ? this.lineClips.start + (this.lineClips.end - this.lineClips.start) * this.distance / this.totalDistance : this.distance;\n        }\n      }, {\n        key: \"updateDistance\",\n        value: function updateDistance(t, e) {\n          this.distance += t.dist(e), this.updateScaledDistance();\n        }\n      }]);\n\n      return qo;\n    }();\n\n    kn(\"LineBucket\", qo, {\n      omit: [\"layers\", \"patternFeatures\"]\n    });\n    var jo = new ci({\n      \"line-cap\": new si(nt.layout_line[\"line-cap\"]),\n      \"line-join\": new ai(nt.layout_line[\"line-join\"]),\n      \"line-miter-limit\": new si(nt.layout_line[\"line-miter-limit\"]),\n      \"line-round-limit\": new si(nt.layout_line[\"line-round-limit\"]),\n      \"line-sort-key\": new ai(nt.layout_line[\"line-sort-key\"])\n    });\n    var No = {\n      paint: new ci({\n        \"line-opacity\": new ai(nt.paint_line[\"line-opacity\"]),\n        \"line-color\": new ai(nt.paint_line[\"line-color\"]),\n        \"line-translate\": new si(nt.paint_line[\"line-translate\"]),\n        \"line-translate-anchor\": new si(nt.paint_line[\"line-translate-anchor\"]),\n        \"line-width\": new ai(nt.paint_line[\"line-width\"]),\n        \"line-gap-width\": new ai(nt.paint_line[\"line-gap-width\"]),\n        \"line-offset\": new ai(nt.paint_line[\"line-offset\"]),\n        \"line-blur\": new ai(nt.paint_line[\"line-blur\"]),\n        \"line-dasharray\": new li(nt.paint_line[\"line-dasharray\"]),\n        \"line-pattern\": new oi(nt.paint_line[\"line-pattern\"]),\n        \"line-gradient\": new ui(nt.paint_line[\"line-gradient\"])\n      }),\n      layout: jo\n    };\n    var Ko = new ( /*#__PURE__*/function (_ai2) {\n      _inherits(_class, _ai2);\n\n      function _class() {\n        _classCallCheck(this, _class);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class).apply(this, arguments));\n      }\n\n      _createClass(_class, [{\n        key: \"possiblyEvaluate\",\n        value: function possiblyEvaluate(t, e) {\n          return e = new Yn(Math.floor(e.zoom), {\n            now: e.now,\n            fadeDuration: e.fadeDuration,\n            zoomHistory: e.zoomHistory,\n            transition: e.transition\n          }), _get(_getPrototypeOf(_class.prototype), \"possiblyEvaluate\", this).call(this, t, e);\n        }\n      }, {\n        key: \"evaluate\",\n        value: function evaluate(t, e, r, n) {\n          return e = o({}, e, {\n            zoom: Math.floor(e.zoom)\n          }), _get(_getPrototypeOf(_class.prototype), \"evaluate\", this).call(this, t, e, r, n);\n        }\n      }]);\n\n      return _class;\n    }(ai))(No.paint.properties[\"line-width\"].specification);\n\n    function Zo(t, e) {\n      return e > 0 ? e + 2 * t : t;\n    }\n\n    Ko.useIntegerZoom = !0;\n    var Go = mi([{\n      name: \"a_pos_offset\",\n      components: 4,\n      type: \"Int16\"\n    }, {\n      name: \"a_data\",\n      components: 4,\n      type: \"Uint16\"\n    }, {\n      name: \"a_pixeloffset\",\n      components: 4,\n      type: \"Int16\"\n    }], 4),\n        Jo = mi([{\n      name: \"a_projected_pos\",\n      components: 3,\n      type: \"Float32\"\n    }], 4);\n    mi([{\n      name: \"a_fade_opacity\",\n      components: 1,\n      type: \"Uint32\"\n    }], 4);\n    var Xo = mi([{\n      name: \"a_placed\",\n      components: 2,\n      type: \"Uint8\"\n    }, {\n      name: \"a_shift\",\n      components: 2,\n      type: \"Float32\"\n    }]);\n    mi([{\n      type: \"Int16\",\n      name: \"anchorPointX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorPointY\"\n    }, {\n      type: \"Int16\",\n      name: \"x1\"\n    }, {\n      type: \"Int16\",\n      name: \"y1\"\n    }, {\n      type: \"Int16\",\n      name: \"x2\"\n    }, {\n      type: \"Int16\",\n      name: \"y2\"\n    }, {\n      type: \"Uint32\",\n      name: \"featureIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"sourceLayerIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"bucketIndex\"\n    }]);\n    var Yo = mi([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_anchor_pos\",\n      components: 2,\n      type: \"Int16\"\n    }, {\n      name: \"a_extrude\",\n      components: 2,\n      type: \"Int16\"\n    }], 4),\n        Ho = mi([{\n      name: \"a_pos\",\n      components: 2,\n      type: \"Float32\"\n    }, {\n      name: \"a_radius\",\n      components: 1,\n      type: \"Float32\"\n    }, {\n      name: \"a_flags\",\n      components: 2,\n      type: \"Int16\"\n    }], 4);\n\n    function Wo(t, e, r) {\n      return t.sections.forEach(function (t) {\n        t.text = function (t, e, r) {\n          var n = e.layout.get(\"text-transform\").evaluate(r, {});\n          return \"uppercase\" === n ? t = t.toLocaleUpperCase() : \"lowercase\" === n && (t = t.toLocaleLowerCase()), Xn.applyArabicShaping && (t = Xn.applyArabicShaping(t)), t;\n        }(t.text, e, r);\n      }), t;\n    }\n\n    mi([{\n      name: \"triangle\",\n      components: 3,\n      type: \"Uint16\"\n    }]), mi([{\n      type: \"Int16\",\n      name: \"anchorX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorY\"\n    }, {\n      type: \"Uint16\",\n      name: \"glyphStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"numGlyphs\"\n    }, {\n      type: \"Uint32\",\n      name: \"vertexStartIndex\"\n    }, {\n      type: \"Uint32\",\n      name: \"lineStartIndex\"\n    }, {\n      type: \"Uint32\",\n      name: \"lineLength\"\n    }, {\n      type: \"Uint16\",\n      name: \"segment\"\n    }, {\n      type: \"Uint16\",\n      name: \"lowerSize\"\n    }, {\n      type: \"Uint16\",\n      name: \"upperSize\"\n    }, {\n      type: \"Float32\",\n      name: \"lineOffsetX\"\n    }, {\n      type: \"Float32\",\n      name: \"lineOffsetY\"\n    }, {\n      type: \"Uint8\",\n      name: \"writingMode\"\n    }, {\n      type: \"Uint8\",\n      name: \"placedOrientation\"\n    }, {\n      type: \"Uint8\",\n      name: \"hidden\"\n    }, {\n      type: \"Uint32\",\n      name: \"crossTileID\"\n    }, {\n      type: \"Int16\",\n      name: \"associatedIconIndex\"\n    }]), mi([{\n      type: \"Int16\",\n      name: \"anchorX\"\n    }, {\n      type: \"Int16\",\n      name: \"anchorY\"\n    }, {\n      type: \"Int16\",\n      name: \"rightJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"centerJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"leftJustifiedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"verticalPlacedTextSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"placedIconSymbolIndex\"\n    }, {\n      type: \"Int16\",\n      name: \"verticalPlacedIconSymbolIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"key\"\n    }, {\n      type: \"Uint16\",\n      name: \"textBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"textBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalTextBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalTextBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"iconBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"iconBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalIconBoxStartIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"verticalIconBoxEndIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"featureIndex\"\n    }, {\n      type: \"Uint16\",\n      name: \"numHorizontalGlyphVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numVerticalGlyphVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numIconVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"numVerticalIconVertices\"\n    }, {\n      type: \"Uint16\",\n      name: \"useRuntimeCollisionCircles\"\n    }, {\n      type: \"Uint32\",\n      name: \"crossTileID\"\n    }, {\n      type: \"Float32\",\n      name: \"textBoxScale\"\n    }, {\n      type: \"Float32\",\n      components: 2,\n      name: \"textOffset\"\n    }, {\n      type: \"Float32\",\n      name: \"collisionCircleDiameter\"\n    }]), mi([{\n      type: \"Float32\",\n      name: \"offsetX\"\n    }]), mi([{\n      type: \"Int16\",\n      name: \"x\"\n    }, {\n      type: \"Int16\",\n      name: \"y\"\n    }, {\n      type: \"Int16\",\n      name: \"tileUnitDistanceFromAnchor\"\n    }]);\n    var Qo = {\n      \"!\": \"\",\n      \"#\": \"\",\n      $: \"\",\n      \"%\": \"\",\n      \"&\": \"\",\n      \"(\": \"\",\n      \")\": \"\",\n      \"*\": \"\",\n      \"+\": \"\",\n      \",\": \"\",\n      \"-\": \"\",\n      \".\": \"\",\n      \"/\": \"\",\n      \":\": \"\",\n      \";\": \"\",\n      \"<\": \"\",\n      \"=\": \"\",\n      \">\": \"\",\n      \"?\": \"\",\n      \"@\": \"\",\n      \"[\": \"\",\n      \"\\\\\": \"\",\n      \"]\": \"\",\n      \"^\": \"\",\n      _: \"\",\n      \"`\": \"\",\n      \"{\": \"\",\n      \"|\": \"\",\n      \"}\": \"\",\n      \"~\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\",\n      \"\": \"\"\n    };\n\n    var tl = 24,\n        el = il,\n        rl = function rl(t, e, r, n, i) {\n      var s,\n          a,\n          o = 8 * i - n - 1,\n          l = (1 << o) - 1,\n          u = l >> 1,\n          c = -7,\n          h = r ? i - 1 : 0,\n          p = r ? -1 : 1,\n          f = t[e + h];\n\n      for (h += p, s = f & (1 << -c) - 1, f >>= -c, c += o; c > 0; s = 256 * s + t[e + h], h += p, c -= 8) {\n        ;\n      }\n\n      for (a = s & (1 << -c) - 1, s >>= -c, c += n; c > 0; a = 256 * a + t[e + h], h += p, c -= 8) {\n        ;\n      }\n\n      if (0 === s) s = 1 - u;else {\n        if (s === l) return a ? NaN : 1 / 0 * (f ? -1 : 1);\n        a += Math.pow(2, n), s -= u;\n      }\n      return (f ? -1 : 1) * a * Math.pow(2, s - n);\n    },\n        nl = function nl(t, e, r, n, i, s) {\n      var a,\n          o,\n          l,\n          u = 8 * s - i - 1,\n          c = (1 << u) - 1,\n          h = c >> 1,\n          p = 23 === i ? Math.pow(2, -24) - Math.pow(2, -77) : 0,\n          f = n ? 0 : s - 1,\n          d = n ? 1 : -1,\n          y = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;\n\n      for (e = Math.abs(e), isNaN(e) || e === 1 / 0 ? (o = isNaN(e) ? 1 : 0, a = c) : (a = Math.floor(Math.log(e) / Math.LN2), e * (l = Math.pow(2, -a)) < 1 && (a--, l *= 2), (e += a + h >= 1 ? p / l : p * Math.pow(2, 1 - h)) * l >= 2 && (a++, l /= 2), a + h >= c ? (o = 0, a = c) : a + h >= 1 ? (o = (e * l - 1) * Math.pow(2, i), a += h) : (o = e * Math.pow(2, h - 1) * Math.pow(2, i), a = 0)); i >= 8; t[r + f] = 255 & o, f += d, o /= 256, i -= 8) {\n        ;\n      }\n\n      for (a = a << i | o, u += i; u > 0; t[r + f] = 255 & a, f += d, a /= 256, u -= 8) {\n        ;\n      }\n\n      t[r + f - d] |= 128 * y;\n    };\n\n    function il(t) {\n      this.buf = ArrayBuffer.isView && ArrayBuffer.isView(t) ? t : new Uint8Array(t || 0), this.pos = 0, this.type = 0, this.length = this.buf.length;\n    }\n\n    il.Varint = 0, il.Fixed64 = 1, il.Bytes = 2, il.Fixed32 = 5;\n    var sl,\n        al = 4294967296,\n        ol = 1 / al,\n        ll = \"undefined\" == typeof TextDecoder ? null : new TextDecoder(\"utf8\");\n\n    function ul(t) {\n      return t.type === il.Bytes ? t.readVarint() + t.pos : t.pos + 1;\n    }\n\n    function cl(t, e, r) {\n      return r ? 4294967296 * e + (t >>> 0) : 4294967296 * (e >>> 0) + (t >>> 0);\n    }\n\n    function hl(t, e, r) {\n      var n = e <= 16383 ? 1 : e <= 2097151 ? 2 : e <= 268435455 ? 3 : Math.floor(Math.log(e) / (7 * Math.LN2));\n      r.realloc(n);\n\n      for (var i = r.pos - 1; i >= t; i--) {\n        r.buf[i + n] = r.buf[i];\n      }\n    }\n\n    function pl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeVarint(t[r]);\n      }\n    }\n\n    function fl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeSVarint(t[r]);\n      }\n    }\n\n    function dl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeFloat(t[r]);\n      }\n    }\n\n    function yl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeDouble(t[r]);\n      }\n    }\n\n    function ml(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeBoolean(t[r]);\n      }\n    }\n\n    function gl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeFixed32(t[r]);\n      }\n    }\n\n    function xl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeSFixed32(t[r]);\n      }\n    }\n\n    function vl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeFixed64(t[r]);\n      }\n    }\n\n    function bl(t, e) {\n      for (var r = 0; r < t.length; r++) {\n        e.writeSFixed64(t[r]);\n      }\n    }\n\n    function wl(t, e) {\n      return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + 16777216 * t[e + 3];\n    }\n\n    function _l(t, e, r) {\n      t[r] = e, t[r + 1] = e >>> 8, t[r + 2] = e >>> 16, t[r + 3] = e >>> 24;\n    }\n\n    function Al(t, e) {\n      return (t[e] | t[e + 1] << 8 | t[e + 2] << 16) + (t[e + 3] << 24);\n    }\n\n    function kl(t, e, r) {\n      1 === t && r.readMessage(Sl, e);\n    }\n\n    function Sl(t, e, r) {\n      if (3 === t) {\n        var _r$readMessage = r.readMessage(zl, {}),\n            _t88 = _r$readMessage.id,\n            _n67 = _r$readMessage.bitmap,\n            _i71 = _r$readMessage.width,\n            _s47 = _r$readMessage.height,\n            _a47 = _r$readMessage.left,\n            _o19 = _r$readMessage.top,\n            _l19 = _r$readMessage.advance;\n\n        e.push({\n          id: _t88,\n          bitmap: new ba({\n            width: _i71 + 6,\n            height: _s47 + 6\n          }, _n67),\n          metrics: {\n            width: _i71,\n            height: _s47,\n            left: _a47,\n            top: _o19,\n            advance: _l19\n          }\n        });\n      }\n    }\n\n    function zl(t, e, r) {\n      1 === t ? e.id = r.readVarint() : 2 === t ? e.bitmap = r.readBytes() : 3 === t ? e.width = r.readVarint() : 4 === t ? e.height = r.readVarint() : 5 === t ? e.left = r.readSVarint() : 6 === t ? e.top = r.readSVarint() : 7 === t && (e.advance = r.readVarint());\n    }\n\n    function Il(t) {\n      var e = 0,\n          r = 0;\n\n      var _iterator76 = _createForOfIteratorHelper(t),\n          _step76;\n\n      try {\n        for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {\n          var _n68 = _step76.value;\n          e += _n68.w * _n68.h, r = Math.max(r, _n68.w);\n        }\n      } catch (err) {\n        _iterator76.e(err);\n      } finally {\n        _iterator76.f();\n      }\n\n      t.sort(function (t, e) {\n        return e.h - t.h;\n      });\n      var n = [{\n        x: 0,\n        y: 0,\n        w: Math.max(Math.ceil(Math.sqrt(e / .95)), r),\n        h: 1 / 0\n      }];\n      var i = 0,\n          s = 0;\n\n      var _iterator77 = _createForOfIteratorHelper(t),\n          _step77;\n\n      try {\n        for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {\n          var _e93 = _step77.value;\n\n          for (var _t89 = n.length - 1; _t89 >= 0; _t89--) {\n            var _r103 = n[_t89];\n\n            if (!(_e93.w > _r103.w || _e93.h > _r103.h)) {\n              if (_e93.x = _r103.x, _e93.y = _r103.y, s = Math.max(s, _e93.y + _e93.h), i = Math.max(i, _e93.x + _e93.w), _e93.w === _r103.w && _e93.h === _r103.h) {\n                var _e94 = n.pop();\n\n                _t89 < n.length && (n[_t89] = _e94);\n              } else _e93.h === _r103.h ? (_r103.x += _e93.w, _r103.w -= _e93.w) : _e93.w === _r103.w ? (_r103.y += _e93.h, _r103.h -= _e93.h) : (n.push({\n                x: _r103.x + _e93.w,\n                y: _r103.y,\n                w: _r103.w - _e93.w,\n                h: _e93.h\n              }), _r103.y += _e93.h, _r103.h -= _e93.h);\n\n              break;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator77.e(err);\n      } finally {\n        _iterator77.f();\n      }\n\n      return {\n        w: i,\n        h: s,\n        fill: e / (i * s) || 0\n      };\n    }\n\n    il.prototype = {\n      destroy: function destroy() {\n        this.buf = null;\n      },\n      readFields: function readFields(t, e, r) {\n        for (r = r || this.length; this.pos < r;) {\n          var n = this.readVarint(),\n              i = n >> 3,\n              s = this.pos;\n          this.type = 7 & n, t(i, e, this), this.pos === s && this.skip(n);\n        }\n\n        return e;\n      },\n      readMessage: function readMessage(t, e) {\n        return this.readFields(t, e, this.readVarint() + this.pos);\n      },\n      readFixed32: function readFixed32() {\n        var t = wl(this.buf, this.pos);\n        return this.pos += 4, t;\n      },\n      readSFixed32: function readSFixed32() {\n        var t = Al(this.buf, this.pos);\n        return this.pos += 4, t;\n      },\n      readFixed64: function readFixed64() {\n        var t = wl(this.buf, this.pos) + wl(this.buf, this.pos + 4) * al;\n        return this.pos += 8, t;\n      },\n      readSFixed64: function readSFixed64() {\n        var t = wl(this.buf, this.pos) + Al(this.buf, this.pos + 4) * al;\n        return this.pos += 8, t;\n      },\n      readFloat: function readFloat() {\n        var t = rl(this.buf, this.pos, !0, 23, 4);\n        return this.pos += 4, t;\n      },\n      readDouble: function readDouble() {\n        var t = rl(this.buf, this.pos, !0, 52, 8);\n        return this.pos += 8, t;\n      },\n      readVarint: function readVarint(t) {\n        var e,\n            r,\n            n = this.buf;\n        return e = 127 & (r = n[this.pos++]), r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 7, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 14, r < 128 ? e : (e |= (127 & (r = n[this.pos++])) << 21, r < 128 ? e : function (t, e, r) {\n          var n,\n              i,\n              s = r.buf;\n          if (n = (112 & (i = s[r.pos++])) >> 4, i < 128) return cl(t, n, e);\n          if (n |= (127 & (i = s[r.pos++])) << 3, i < 128) return cl(t, n, e);\n          if (n |= (127 & (i = s[r.pos++])) << 10, i < 128) return cl(t, n, e);\n          if (n |= (127 & (i = s[r.pos++])) << 17, i < 128) return cl(t, n, e);\n          if (n |= (127 & (i = s[r.pos++])) << 24, i < 128) return cl(t, n, e);\n          if (n |= (1 & (i = s[r.pos++])) << 31, i < 128) return cl(t, n, e);\n          throw new Error(\"Expected varint not more than 10 bytes\");\n        }(e |= (15 & (r = n[this.pos])) << 28, t, this))));\n      },\n      readVarint64: function readVarint64() {\n        return this.readVarint(!0);\n      },\n      readSVarint: function readSVarint() {\n        var t = this.readVarint();\n        return t % 2 == 1 ? (t + 1) / -2 : t / 2;\n      },\n      readBoolean: function readBoolean() {\n        return Boolean(this.readVarint());\n      },\n      readString: function readString() {\n        var t = this.readVarint() + this.pos,\n            e = this.pos;\n        return this.pos = t, t - e >= 12 && ll ? function (t, e, r) {\n          return ll.decode(t.subarray(e, r));\n        }(this.buf, e, t) : function (t, e, r) {\n          for (var n = \"\", i = e; i < r;) {\n            var s,\n                a,\n                o,\n                l = t[i],\n                u = null,\n                c = l > 239 ? 4 : l > 223 ? 3 : l > 191 ? 2 : 1;\n            if (i + c > r) break;\n            1 === c ? l < 128 && (u = l) : 2 === c ? 128 == (192 & (s = t[i + 1])) && (u = (31 & l) << 6 | 63 & s) <= 127 && (u = null) : 3 === c ? (a = t[i + 2], 128 == (192 & (s = t[i + 1])) && 128 == (192 & a) && ((u = (15 & l) << 12 | (63 & s) << 6 | 63 & a) <= 2047 || u >= 55296 && u <= 57343) && (u = null)) : 4 === c && (a = t[i + 2], o = t[i + 3], 128 == (192 & (s = t[i + 1])) && 128 == (192 & a) && 128 == (192 & o) && ((u = (15 & l) << 18 | (63 & s) << 12 | (63 & a) << 6 | 63 & o) <= 65535 || u >= 1114112) && (u = null)), null === u ? (u = 65533, c = 1) : u > 65535 && (u -= 65536, n += String.fromCharCode(u >>> 10 & 1023 | 55296), u = 56320 | 1023 & u), n += String.fromCharCode(u), i += c;\n          }\n\n          return n;\n        }(this.buf, e, t);\n      },\n      readBytes: function readBytes() {\n        var t = this.readVarint() + this.pos,\n            e = this.buf.subarray(this.pos, t);\n        return this.pos = t, e;\n      },\n      readPackedVarint: function readPackedVarint(t, e) {\n        if (this.type !== il.Bytes) return t.push(this.readVarint(e));\n        var r = ul(this);\n\n        for (t = t || []; this.pos < r;) {\n          t.push(this.readVarint(e));\n        }\n\n        return t;\n      },\n      readPackedSVarint: function readPackedSVarint(t) {\n        if (this.type !== il.Bytes) return t.push(this.readSVarint());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readSVarint());\n        }\n\n        return t;\n      },\n      readPackedBoolean: function readPackedBoolean(t) {\n        if (this.type !== il.Bytes) return t.push(this.readBoolean());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readBoolean());\n        }\n\n        return t;\n      },\n      readPackedFloat: function readPackedFloat(t) {\n        if (this.type !== il.Bytes) return t.push(this.readFloat());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readFloat());\n        }\n\n        return t;\n      },\n      readPackedDouble: function readPackedDouble(t) {\n        if (this.type !== il.Bytes) return t.push(this.readDouble());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readDouble());\n        }\n\n        return t;\n      },\n      readPackedFixed32: function readPackedFixed32(t) {\n        if (this.type !== il.Bytes) return t.push(this.readFixed32());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readFixed32());\n        }\n\n        return t;\n      },\n      readPackedSFixed32: function readPackedSFixed32(t) {\n        if (this.type !== il.Bytes) return t.push(this.readSFixed32());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readSFixed32());\n        }\n\n        return t;\n      },\n      readPackedFixed64: function readPackedFixed64(t) {\n        if (this.type !== il.Bytes) return t.push(this.readFixed64());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readFixed64());\n        }\n\n        return t;\n      },\n      readPackedSFixed64: function readPackedSFixed64(t) {\n        if (this.type !== il.Bytes) return t.push(this.readSFixed64());\n        var e = ul(this);\n\n        for (t = t || []; this.pos < e;) {\n          t.push(this.readSFixed64());\n        }\n\n        return t;\n      },\n      skip: function skip(t) {\n        var e = 7 & t;\n        if (e === il.Varint) for (; this.buf[this.pos++] > 127;) {\n          ;\n        } else if (e === il.Bytes) this.pos = this.readVarint() + this.pos;else if (e === il.Fixed32) this.pos += 4;else {\n          if (e !== il.Fixed64) throw new Error(\"Unimplemented type: \" + e);\n          this.pos += 8;\n        }\n      },\n      writeTag: function writeTag(t, e) {\n        this.writeVarint(t << 3 | e);\n      },\n      realloc: function realloc(t) {\n        for (var e = this.length || 16; e < this.pos + t;) {\n          e *= 2;\n        }\n\n        if (e !== this.length) {\n          var r = new Uint8Array(e);\n          r.set(this.buf), this.buf = r, this.length = e;\n        }\n      },\n      finish: function finish() {\n        return this.length = this.pos, this.pos = 0, this.buf.subarray(0, this.length);\n      },\n      writeFixed32: function writeFixed32(t) {\n        this.realloc(4), _l(this.buf, t, this.pos), this.pos += 4;\n      },\n      writeSFixed32: function writeSFixed32(t) {\n        this.realloc(4), _l(this.buf, t, this.pos), this.pos += 4;\n      },\n      writeFixed64: function writeFixed64(t) {\n        this.realloc(8), _l(this.buf, -1 & t, this.pos), _l(this.buf, Math.floor(t * ol), this.pos + 4), this.pos += 8;\n      },\n      writeSFixed64: function writeSFixed64(t) {\n        this.realloc(8), _l(this.buf, -1 & t, this.pos), _l(this.buf, Math.floor(t * ol), this.pos + 4), this.pos += 8;\n      },\n      writeVarint: function writeVarint(t) {\n        (t = +t || 0) > 268435455 || t < 0 ? function (t, e) {\n          var r, n;\n          if (t >= 0 ? (r = t % 4294967296 | 0, n = t / 4294967296 | 0) : (n = ~(-t / 4294967296), 4294967295 ^ (r = ~(-t % 4294967296)) ? r = r + 1 | 0 : (r = 0, n = n + 1 | 0)), t >= 0x10000000000000000 || t < -0x10000000000000000) throw new Error(\"Given varint doesn't fit into 10 bytes\");\n          e.realloc(10), function (t, e, r) {\n            r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, t >>>= 7, r.buf[r.pos++] = 127 & t | 128, r.buf[r.pos] = 127 & (t >>>= 7);\n          }(r, 0, e), function (t, e) {\n            var r = (7 & t) << 4;\n            e.buf[e.pos++] |= r | ((t >>>= 3) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t | ((t >>>= 7) ? 128 : 0), t && (e.buf[e.pos++] = 127 & t)))));\n          }(n, e);\n        }(t, this) : (this.realloc(4), this.buf[this.pos++] = 127 & t | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = 127 & (t >>>= 7) | (t > 127 ? 128 : 0), t <= 127 || (this.buf[this.pos++] = t >>> 7 & 127))));\n      },\n      writeSVarint: function writeSVarint(t) {\n        this.writeVarint(t < 0 ? 2 * -t - 1 : 2 * t);\n      },\n      writeBoolean: function writeBoolean(t) {\n        this.writeVarint(Boolean(t));\n      },\n      writeString: function writeString(t) {\n        t = String(t), this.realloc(4 * t.length), this.pos++;\n        var e = this.pos;\n\n        this.pos = function (t, e, r) {\n          for (var n, i, s = 0; s < e.length; s++) {\n            if ((n = e.charCodeAt(s)) > 55295 && n < 57344) {\n              if (!i) {\n                n > 56319 || s + 1 === e.length ? (t[r++] = 239, t[r++] = 191, t[r++] = 189) : i = n;\n                continue;\n              }\n\n              if (n < 56320) {\n                t[r++] = 239, t[r++] = 191, t[r++] = 189, i = n;\n                continue;\n              }\n\n              n = i - 55296 << 10 | n - 56320 | 65536, i = null;\n            } else i && (t[r++] = 239, t[r++] = 191, t[r++] = 189, i = null);\n\n            n < 128 ? t[r++] = n : (n < 2048 ? t[r++] = n >> 6 | 192 : (n < 65536 ? t[r++] = n >> 12 | 224 : (t[r++] = n >> 18 | 240, t[r++] = n >> 12 & 63 | 128), t[r++] = n >> 6 & 63 | 128), t[r++] = 63 & n | 128);\n          }\n\n          return r;\n        }(this.buf, t, this.pos);\n\n        var r = this.pos - e;\n        r >= 128 && hl(e, r, this), this.pos = e - 1, this.writeVarint(r), this.pos += r;\n      },\n      writeFloat: function writeFloat(t) {\n        this.realloc(4), nl(this.buf, t, this.pos, !0, 23, 4), this.pos += 4;\n      },\n      writeDouble: function writeDouble(t) {\n        this.realloc(8), nl(this.buf, t, this.pos, !0, 52, 8), this.pos += 8;\n      },\n      writeBytes: function writeBytes(t) {\n        var e = t.length;\n        this.writeVarint(e), this.realloc(e);\n\n        for (var r = 0; r < e; r++) {\n          this.buf[this.pos++] = t[r];\n        }\n      },\n      writeRawMessage: function writeRawMessage(t, e) {\n        this.pos++;\n        var r = this.pos;\n        t(e, this);\n        var n = this.pos - r;\n        n >= 128 && hl(r, n, this), this.pos = r - 1, this.writeVarint(n), this.pos += n;\n      },\n      writeMessage: function writeMessage(t, e, r) {\n        this.writeTag(t, il.Bytes), this.writeRawMessage(e, r);\n      },\n      writePackedVarint: function writePackedVarint(t, e) {\n        e.length && this.writeMessage(t, pl, e);\n      },\n      writePackedSVarint: function writePackedSVarint(t, e) {\n        e.length && this.writeMessage(t, fl, e);\n      },\n      writePackedBoolean: function writePackedBoolean(t, e) {\n        e.length && this.writeMessage(t, ml, e);\n      },\n      writePackedFloat: function writePackedFloat(t, e) {\n        e.length && this.writeMessage(t, dl, e);\n      },\n      writePackedDouble: function writePackedDouble(t, e) {\n        e.length && this.writeMessage(t, yl, e);\n      },\n      writePackedFixed32: function writePackedFixed32(t, e) {\n        e.length && this.writeMessage(t, gl, e);\n      },\n      writePackedSFixed32: function writePackedSFixed32(t, e) {\n        e.length && this.writeMessage(t, xl, e);\n      },\n      writePackedFixed64: function writePackedFixed64(t, e) {\n        e.length && this.writeMessage(t, vl, e);\n      },\n      writePackedSFixed64: function writePackedSFixed64(t, e) {\n        e.length && this.writeMessage(t, bl, e);\n      },\n      writeBytesField: function writeBytesField(t, e) {\n        this.writeTag(t, il.Bytes), this.writeBytes(e);\n      },\n      writeFixed32Field: function writeFixed32Field(t, e) {\n        this.writeTag(t, il.Fixed32), this.writeFixed32(e);\n      },\n      writeSFixed32Field: function writeSFixed32Field(t, e) {\n        this.writeTag(t, il.Fixed32), this.writeSFixed32(e);\n      },\n      writeFixed64Field: function writeFixed64Field(t, e) {\n        this.writeTag(t, il.Fixed64), this.writeFixed64(e);\n      },\n      writeSFixed64Field: function writeSFixed64Field(t, e) {\n        this.writeTag(t, il.Fixed64), this.writeSFixed64(e);\n      },\n      writeVarintField: function writeVarintField(t, e) {\n        this.writeTag(t, il.Varint), this.writeVarint(e);\n      },\n      writeSVarintField: function writeSVarintField(t, e) {\n        this.writeTag(t, il.Varint), this.writeSVarint(e);\n      },\n      writeStringField: function writeStringField(t, e) {\n        this.writeTag(t, il.Bytes), this.writeString(e);\n      },\n      writeFloatField: function writeFloatField(t, e) {\n        this.writeTag(t, il.Fixed32), this.writeFloat(e);\n      },\n      writeDoubleField: function writeDoubleField(t, e) {\n        this.writeTag(t, il.Fixed64), this.writeDouble(e);\n      },\n      writeBooleanField: function writeBooleanField(t, e) {\n        this.writeVarintField(t, Boolean(e));\n      }\n    };\n\n    var Ml = /*#__PURE__*/function () {\n      function Ml(t, _ref115) {\n        var e = _ref115.pixelRatio,\n            r = _ref115.version,\n            n = _ref115.stretchX,\n            i = _ref115.stretchY,\n            s = _ref115.content;\n\n        _classCallCheck(this, Ml);\n\n        this.paddedRect = t, this.pixelRatio = e, this.stretchX = n, this.stretchY = i, this.content = s, this.version = r;\n      }\n\n      _createClass(Ml, [{\n        key: \"tl\",\n        get: function get() {\n          return [this.paddedRect.x + 1, this.paddedRect.y + 1];\n        }\n      }, {\n        key: \"br\",\n        get: function get() {\n          return [this.paddedRect.x + this.paddedRect.w - 1, this.paddedRect.y + this.paddedRect.h - 1];\n        }\n      }, {\n        key: \"tlbr\",\n        get: function get() {\n          return this.tl.concat(this.br);\n        }\n      }, {\n        key: \"displaySize\",\n        get: function get() {\n          return [(this.paddedRect.w - 2) / this.pixelRatio, (this.paddedRect.h - 2) / this.pixelRatio];\n        }\n      }]);\n\n      return Ml;\n    }();\n\n    var Bl = /*#__PURE__*/function () {\n      function Bl(t, e) {\n        _classCallCheck(this, Bl);\n\n        var r = {},\n            n = {};\n        this.haveRenderCallbacks = [];\n        var i = [];\n        this.addImages(t, r, i), this.addImages(e, n, i);\n\n        var _Il = Il(i),\n            s = _Il.w,\n            a = _Il.h,\n            o = new wa({\n          width: s || 1,\n          height: a || 1\n        });\n\n        for (var _e95 in t) {\n          var _n69 = t[_e95],\n              _i72 = r[_e95].paddedRect;\n          wa.copy(_n69.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _i72.x + 1,\n            y: _i72.y + 1\n          }, _n69.data);\n        }\n\n        for (var _t90 in e) {\n          var _r104 = e[_t90],\n              _i73 = n[_t90].paddedRect,\n              _s48 = _i73.x + 1,\n              _a48 = _i73.y + 1,\n              _l20 = _r104.data.width,\n              _u17 = _r104.data.height;\n\n          wa.copy(_r104.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _s48,\n            y: _a48\n          }, _r104.data), wa.copy(_r104.data, o, {\n            x: 0,\n            y: _u17 - 1\n          }, {\n            x: _s48,\n            y: _a48 - 1\n          }, {\n            width: _l20,\n            height: 1\n          }), wa.copy(_r104.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _s48,\n            y: _a48 + _u17\n          }, {\n            width: _l20,\n            height: 1\n          }), wa.copy(_r104.data, o, {\n            x: _l20 - 1,\n            y: 0\n          }, {\n            x: _s48 - 1,\n            y: _a48\n          }, {\n            width: 1,\n            height: _u17\n          }), wa.copy(_r104.data, o, {\n            x: 0,\n            y: 0\n          }, {\n            x: _s48 + _l20,\n            y: _a48\n          }, {\n            width: 1,\n            height: _u17\n          });\n        }\n\n        this.image = o, this.iconPositions = r, this.patternPositions = n;\n      }\n\n      _createClass(Bl, [{\n        key: \"addImages\",\n        value: function addImages(t, e, r) {\n          for (var _n70 in t) {\n            var _i74 = t[_n70],\n                _s49 = {\n              x: 0,\n              y: 0,\n              w: _i74.data.width + 2,\n              h: _i74.data.height + 2\n            };\n            r.push(_s49), e[_n70] = new Ml(_s49, _i74), _i74.hasRenderCallback && this.haveRenderCallbacks.push(_n70);\n          }\n        }\n      }, {\n        key: \"patchUpdatedImages\",\n        value: function patchUpdatedImages(t, e) {\n          t.dispatchRenderCallbacks(this.haveRenderCallbacks);\n\n          for (var _r105 in t.updatedImages) {\n            this.patchUpdatedImage(this.iconPositions[_r105], t.getImage(_r105), e), this.patchUpdatedImage(this.patternPositions[_r105], t.getImage(_r105), e);\n          }\n        }\n      }, {\n        key: \"patchUpdatedImage\",\n        value: function patchUpdatedImage(t, e, r) {\n          if (!t || !e) return;\n          if (t.version === e.version) return;\n          t.version = e.version;\n\n          var _t$tl = _slicedToArray(t.tl, 2),\n              n = _t$tl[0],\n              i = _t$tl[1];\n\n          r.update(e.data, void 0, {\n            x: n,\n            y: i\n          });\n        }\n      }]);\n\n      return Bl;\n    }();\n\n    kn(\"ImagePosition\", Ml), kn(\"ImageAtlas\", Bl), t.WritingMode = void 0, (sl = t.WritingMode || (t.WritingMode = {}))[sl.none = 0] = \"none\", sl[sl.horizontal = 1] = \"horizontal\", sl[sl.vertical = 2] = \"vertical\", sl[sl.horizontalOnly = 3] = \"horizontalOnly\";\n    var Cl = -17;\n\n    var Pl = /*#__PURE__*/function () {\n      function Pl() {\n        _classCallCheck(this, Pl);\n\n        this.scale = 1, this.fontStack = \"\", this.imageName = null;\n      }\n\n      _createClass(Pl, null, [{\n        key: \"forText\",\n        value: function forText(t, e) {\n          var r = new Pl();\n          return r.scale = t || 1, r.fontStack = e, r;\n        }\n      }, {\n        key: \"forImage\",\n        value: function forImage(t) {\n          var e = new Pl();\n          return e.imageName = t, e;\n        }\n      }]);\n\n      return Pl;\n    }();\n\n    var Vl = /*#__PURE__*/function () {\n      function Vl() {\n        _classCallCheck(this, Vl);\n\n        this.text = \"\", this.sectionIndex = [], this.sections = [], this.imageSectionID = null;\n      }\n\n      _createClass(Vl, [{\n        key: \"length\",\n        value: function length() {\n          return this.text.length;\n        }\n      }, {\n        key: \"getSection\",\n        value: function getSection(t) {\n          return this.sections[this.sectionIndex[t]];\n        }\n      }, {\n        key: \"getSectionIndex\",\n        value: function getSectionIndex(t) {\n          return this.sectionIndex[t];\n        }\n      }, {\n        key: \"getCharCode\",\n        value: function getCharCode(t) {\n          return this.text.charCodeAt(t);\n        }\n      }, {\n        key: \"verticalizePunctuation\",\n        value: function verticalizePunctuation() {\n          this.text = function (t) {\n            var e = \"\";\n\n            for (var _r106 = 0; _r106 < t.length; _r106++) {\n              var _n71 = t.charCodeAt(_r106 + 1) || null,\n                  _i75 = t.charCodeAt(_r106 - 1) || null;\n\n              e += _n71 && Fn(_n71) && !Qo[t[_r106 + 1]] || _i75 && Fn(_i75) && !Qo[t[_r106 - 1]] || !Qo[t[_r106]] ? t[_r106] : Qo[t[_r106]];\n            }\n\n            return e;\n          }(this.text);\n        }\n      }, {\n        key: \"trim\",\n        value: function trim() {\n          var t = 0;\n\n          for (var _e96 = 0; _e96 < this.text.length && Fl[this.text.charCodeAt(_e96)]; _e96++) {\n            t++;\n          }\n\n          var e = this.text.length;\n\n          for (var _r107 = this.text.length - 1; _r107 >= 0 && _r107 >= t && Fl[this.text.charCodeAt(_r107)]; _r107--) {\n            e--;\n          }\n\n          this.text = this.text.substring(t, e), this.sectionIndex = this.sectionIndex.slice(t, e);\n        }\n      }, {\n        key: \"substring\",\n        value: function substring(t, e) {\n          var r = new Vl();\n          return r.text = this.text.substring(t, e), r.sectionIndex = this.sectionIndex.slice(t, e), r.sections = this.sections, r;\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return this.text;\n        }\n      }, {\n        key: \"getMaxScale\",\n        value: function getMaxScale() {\n          var _this9 = this;\n\n          return this.sectionIndex.reduce(function (t, e) {\n            return Math.max(t, _this9.sections[e].scale);\n          }, 0);\n        }\n      }, {\n        key: \"addTextSection\",\n        value: function addTextSection(t, e) {\n          this.text += t.text, this.sections.push(Pl.forText(t.scale, t.fontStack || e));\n          var r = this.sections.length - 1;\n\n          for (var _e97 = 0; _e97 < t.text.length; ++_e97) {\n            this.sectionIndex.push(r);\n          }\n        }\n      }, {\n        key: \"addImageSection\",\n        value: function addImageSection(t) {\n          var e = t.image ? t.image.name : \"\";\n          if (0 === e.length) return void d(\"Can't add FormattedSection with an empty image.\");\n          var r = this.getNextImageSectionCharCode();\n          r ? (this.text += String.fromCharCode(r), this.sections.push(Pl.forImage(e)), this.sectionIndex.push(this.sections.length - 1)) : d(\"Reached maximum number of images 6401\");\n        }\n      }, {\n        key: \"getNextImageSectionCharCode\",\n        value: function getNextImageSectionCharCode() {\n          return this.imageSectionID ? this.imageSectionID >= 63743 ? null : ++this.imageSectionID : (this.imageSectionID = 57344, this.imageSectionID);\n        }\n      }], [{\n        key: \"fromFeature\",\n        value: function fromFeature(t, e) {\n          var r = new Vl();\n\n          for (var _n72 = 0; _n72 < t.sections.length; _n72++) {\n            var _i76 = t.sections[_n72];\n            _i76.image ? r.addImageSection(_i76) : r.addTextSection(_i76, e);\n          }\n\n          return r;\n        }\n      }]);\n\n      return Vl;\n    }();\n\n    function El(e, r, n, i, s, a, o, l, u, c, h, p, f, d, y, m) {\n      var g = Vl.fromFeature(e, s);\n      var x;\n      p === t.WritingMode.vertical && g.verticalizePunctuation();\n      var v = Xn.processBidirectionalText,\n          b = Xn.processStyledBidirectionalText;\n\n      if (v && 1 === g.sections.length) {\n        x = [];\n\n        var _t91 = v(g.toString(), Ol(g, c, a, r, i, d, y));\n\n        var _iterator78 = _createForOfIteratorHelper(_t91),\n            _step78;\n\n        try {\n          for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {\n            var _e98 = _step78.value;\n\n            var _t92 = new Vl();\n\n            _t92.text = _e98, _t92.sections = g.sections;\n\n            for (var _r108 = 0; _r108 < _e98.length; _r108++) {\n              _t92.sectionIndex.push(0);\n            }\n\n            x.push(_t92);\n          }\n        } catch (err) {\n          _iterator78.e(err);\n        } finally {\n          _iterator78.f();\n        }\n      } else if (b) {\n        x = [];\n\n        var _t93 = b(g.text, g.sectionIndex, Ol(g, c, a, r, i, d, y));\n\n        var _iterator79 = _createForOfIteratorHelper(_t93),\n            _step79;\n\n        try {\n          for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {\n            var _e99 = _step79.value;\n\n            var _t94 = new Vl();\n\n            _t94.text = _e99[0], _t94.sectionIndex = _e99[1], _t94.sections = g.sections, x.push(_t94);\n          }\n        } catch (err) {\n          _iterator79.e(err);\n        } finally {\n          _iterator79.f();\n        }\n      } else x = function (t, e) {\n        var r = [],\n            n = t.text;\n        var i = 0;\n\n        var _iterator80 = _createForOfIteratorHelper(e),\n            _step80;\n\n        try {\n          for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {\n            var _n73 = _step80.value;\n            r.push(t.substring(i, _n73)), i = _n73;\n          }\n        } catch (err) {\n          _iterator80.e(err);\n        } finally {\n          _iterator80.f();\n        }\n\n        return i < n.length && r.push(t.substring(i, n.length)), r;\n      }(g, Ol(g, c, a, r, i, d, y));\n\n      var w = [],\n          _ = {\n        positionedLines: w,\n        text: g.toString(),\n        top: h[1],\n        bottom: h[1],\n        left: h[0],\n        right: h[0],\n        writingMode: p,\n        iconsInText: !1,\n        verticalizable: !1\n      };\n      return function (e, r, n, i, s, a, o, l, u, c, h, p) {\n        var f = 0,\n            d = Cl,\n            y = 0,\n            m = 0;\n        var g = \"right\" === l ? 1 : \"left\" === l ? 0 : .5;\n        var x = 0;\n\n        var _iterator81 = _createForOfIteratorHelper(s),\n            _step81;\n\n        try {\n          for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {\n            var _o20 = _step81.value;\n\n            _o20.trim();\n\n            var _s50 = _o20.getMaxScale(),\n                _l21 = (_s50 - 1) * tl,\n                _b2 = {\n              positionedGlyphs: [],\n              lineOffset: 0\n            };\n\n            e.positionedLines[x] = _b2;\n            var _w2 = _b2.positionedGlyphs;\n            var _3 = 0;\n\n            if (!_o20.length()) {\n              d += a, ++x;\n              continue;\n            }\n\n            for (var _a49 = 0; _a49 < _o20.length(); _a49++) {\n              var _y2 = _o20.getSection(_a49),\n                  _m3 = _o20.getSectionIndex(_a49),\n                  _g3 = _o20.getCharCode(_a49);\n\n              var _x3 = 0,\n                  _b3 = null,\n                  _A3 = null,\n                  _k2 = null,\n                  _S = tl;\n\n              var _z = !(u === t.WritingMode.horizontal || !h && !En(_g3) || h && (Fl[_g3] || (v = _g3, Bn.Arabic(v) || Bn[\"Arabic Supplement\"](v) || Bn[\"Arabic Extended-A\"](v) || Bn[\"Arabic Presentation Forms-A\"](v) || Bn[\"Arabic Presentation Forms-B\"](v))));\n\n              if (_y2.imageName) {\n                var _t96 = i[_y2.imageName];\n                if (!_t96) continue;\n                _k2 = _y2.imageName, e.iconsInText = e.iconsInText || !0, _A3 = _t96.paddedRect;\n                var _r109 = _t96.displaySize;\n                _y2.scale = _y2.scale * tl / p, _b3 = {\n                  width: _r109[0],\n                  height: _r109[1],\n                  left: 1,\n                  top: -3,\n                  advance: _z ? _r109[1] : _r109[0]\n                }, _x3 = _l21 + (tl - _r109[1] * _y2.scale), _S = _b3.advance;\n\n                var _n74 = _z ? _r109[0] * _y2.scale - tl * _s50 : _r109[1] * _y2.scale - tl * _s50;\n\n                _n74 > 0 && _n74 > _3 && (_3 = _n74);\n              } else {\n                var _t97 = n[_y2.fontStack],\n                    _e101 = _t97 && _t97[_g3];\n\n                if (_e101 && _e101.rect) _A3 = _e101.rect, _b3 = _e101.metrics;else {\n                  var _t98 = r[_y2.fontStack],\n                      _e102 = _t98 && _t98[_g3];\n\n                  if (!_e102) continue;\n                  _b3 = _e102.metrics;\n                }\n                _x3 = (_s50 - _y2.scale) * tl;\n              }\n\n              _z ? (e.verticalizable = !0, _w2.push({\n                glyph: _g3,\n                imageName: _k2,\n                x: f,\n                y: d + _x3,\n                vertical: _z,\n                scale: _y2.scale,\n                fontStack: _y2.fontStack,\n                sectionIndex: _m3,\n                metrics: _b3,\n                rect: _A3\n              }), f += _S * _y2.scale + c) : (_w2.push({\n                glyph: _g3,\n                imageName: _k2,\n                x: f,\n                y: d + _x3,\n                vertical: _z,\n                scale: _y2.scale,\n                fontStack: _y2.fontStack,\n                sectionIndex: _m3,\n                metrics: _b3,\n                rect: _A3\n              }), f += _b3.advance * _y2.scale + c);\n            }\n\n            0 !== _w2.length && (y = Math.max(f - c, y), jl(_w2, 0, _w2.length - 1, g, _3)), f = 0;\n\n            var _A2 = a * _s50 + _3;\n\n            _b2.lineOffset = Math.max(_3, _l21), d += _A2, m = Math.max(_A2, m), ++x;\n          }\n        } catch (err) {\n          _iterator81.e(err);\n        } finally {\n          _iterator81.f();\n        }\n\n        var v;\n\n        var b = d - Cl,\n            _ql = ql(o),\n            w = _ql.horizontalAlign,\n            _ = _ql.verticalAlign;\n\n        (function (t, e, r, n, i, s, a, o, l) {\n          var u = (e - r) * i;\n          var c = 0;\n          c = s !== a ? -o * n - Cl : (-n * l + .5) * a;\n\n          var _iterator82 = _createForOfIteratorHelper(t),\n              _step82;\n\n          try {\n            for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {\n              var _e100 = _step82.value;\n\n              var _iterator83 = _createForOfIteratorHelper(_e100.positionedGlyphs),\n                  _step83;\n\n              try {\n                for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {\n                  var _t95 = _step83.value;\n                  _t95.x += u, _t95.y += c;\n                }\n              } catch (err) {\n                _iterator83.e(err);\n              } finally {\n                _iterator83.f();\n              }\n            }\n          } catch (err) {\n            _iterator82.e(err);\n          } finally {\n            _iterator82.f();\n          }\n        })(e.positionedLines, g, w, _, y, m, a, b, s.length), e.top += -_ * b, e.bottom = e.top + b, e.left += -w * y, e.right = e.left + y;\n      }(_, r, n, i, x, o, l, u, p, c, f, m), !function (t) {\n        var _iterator84 = _createForOfIteratorHelper(t),\n            _step84;\n\n        try {\n          for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {\n            var _e103 = _step84.value;\n            if (0 !== _e103.positionedGlyphs.length) return !1;\n          }\n        } catch (err) {\n          _iterator84.e(err);\n        } finally {\n          _iterator84.f();\n        }\n\n        return !0;\n      }(w) && _;\n    }\n\n    var Fl = {\n      9: !0,\n      10: !0,\n      11: !0,\n      12: !0,\n      13: !0,\n      32: !0\n    },\n        Tl = {\n      10: !0,\n      32: !0,\n      38: !0,\n      40: !0,\n      41: !0,\n      43: !0,\n      45: !0,\n      47: !0,\n      173: !0,\n      183: !0,\n      8203: !0,\n      8208: !0,\n      8211: !0,\n      8231: !0\n    };\n\n    function Ll(t, e, r, n, i, s) {\n      if (e.imageName) {\n        var _t99 = n[e.imageName];\n        return _t99 ? _t99.displaySize[0] * e.scale * tl / s + i : 0;\n      }\n\n      {\n        var _n75 = r[e.fontStack],\n            _s51 = _n75 && _n75[t];\n\n        return _s51 ? _s51.metrics.advance * e.scale + i : 0;\n      }\n    }\n\n    function Dl(t, e, r, n) {\n      var i = Math.pow(t - e, 2);\n      return n ? t < e ? i / 2 : 2 * i : i + Math.abs(r) * r;\n    }\n\n    function $l(t, e, r) {\n      var n = 0;\n      return 10 === t && (n -= 1e4), r && (n += 150), 40 !== t && 65288 !== t || (n += 50), 41 !== e && 65289 !== e || (n += 50), n;\n    }\n\n    function Rl(t, e, r, n, i, s) {\n      var a = null,\n          o = Dl(e, r, i, s);\n\n      var _iterator85 = _createForOfIteratorHelper(n),\n          _step85;\n\n      try {\n        for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {\n          var _t100 = _step85.value;\n\n          var _n76 = Dl(e - _t100.x, r, i, s) + _t100.badness;\n\n          _n76 <= o && (a = _t100, o = _n76);\n        }\n      } catch (err) {\n        _iterator85.e(err);\n      } finally {\n        _iterator85.f();\n      }\n\n      return {\n        index: t,\n        x: e,\n        priorBreak: a,\n        badness: o\n      };\n    }\n\n    function Ul(t) {\n      return t ? Ul(t.priorBreak).concat(t.index) : [];\n    }\n\n    function Ol(t, e, r, n, i, s, a) {\n      if (\"point\" !== s) return [];\n      if (!t) return [];\n\n      var o = [],\n          l = function (t, e, r, n, i, s) {\n        var a = 0;\n\n        for (var _r110 = 0; _r110 < t.length(); _r110++) {\n          var _o21 = t.getSection(_r110);\n\n          a += Ll(t.getCharCode(_r110), _o21, n, i, e, s);\n        }\n\n        return a / Math.max(1, Math.ceil(a / r));\n      }(t, e, r, n, i, a),\n          u = t.text.indexOf(\"\") >= 0;\n\n      var c = 0;\n\n      for (var _r111 = 0; _r111 < t.length(); _r111++) {\n        var _s52 = t.getSection(_r111),\n            _p4 = t.getCharCode(_r111);\n\n        if (Fl[_p4] || (c += Ll(_p4, _s52, n, i, e, a)), _r111 < t.length() - 1) {\n          var _e104 = !((h = _p4) < 11904 || !(Bn[\"Bopomofo Extended\"](h) || Bn.Bopomofo(h) || Bn[\"CJK Compatibility Forms\"](h) || Bn[\"CJK Compatibility Ideographs\"](h) || Bn[\"CJK Compatibility\"](h) || Bn[\"CJK Radicals Supplement\"](h) || Bn[\"CJK Strokes\"](h) || Bn[\"CJK Symbols and Punctuation\"](h) || Bn[\"CJK Unified Ideographs Extension A\"](h) || Bn[\"CJK Unified Ideographs\"](h) || Bn[\"Enclosed CJK Letters and Months\"](h) || Bn[\"Halfwidth and Fullwidth Forms\"](h) || Bn.Hiragana(h) || Bn[\"Ideographic Description Characters\"](h) || Bn[\"Kangxi Radicals\"](h) || Bn[\"Katakana Phonetic Extensions\"](h) || Bn.Katakana(h) || Bn[\"Vertical Forms\"](h) || Bn[\"Yi Radicals\"](h) || Bn[\"Yi Syllables\"](h)));\n\n          (Tl[_p4] || _e104 || _s52.imageName) && o.push(Rl(_r111 + 1, c, l, o, $l(_p4, t.getCharCode(_r111 + 1), _e104 && u), !1));\n        }\n      }\n\n      var h;\n      return Ul(Rl(t.length(), c, l, o, 0, !0));\n    }\n\n    function ql(t) {\n      var e = .5,\n          r = .5;\n\n      switch (t) {\n        case \"right\":\n        case \"top-right\":\n        case \"bottom-right\":\n          e = 1;\n          break;\n\n        case \"left\":\n        case \"top-left\":\n        case \"bottom-left\":\n          e = 0;\n      }\n\n      switch (t) {\n        case \"bottom\":\n        case \"bottom-right\":\n        case \"bottom-left\":\n          r = 1;\n          break;\n\n        case \"top\":\n        case \"top-right\":\n        case \"top-left\":\n          r = 0;\n      }\n\n      return {\n        horizontalAlign: e,\n        verticalAlign: r\n      };\n    }\n\n    function jl(t, e, r, n, i) {\n      if (!n && !i) return;\n      var s = t[r],\n          a = (t[r].x + s.metrics.advance * s.scale) * n;\n\n      for (var _n77 = e; _n77 <= r; _n77++) {\n        t[_n77].x -= a, t[_n77].y += i;\n      }\n    }\n\n    function Nl(t, e, r) {\n      var _ql2 = ql(r),\n          n = _ql2.horizontalAlign,\n          i = _ql2.verticalAlign,\n          s = e[0] - t.displaySize[0] * n,\n          a = e[1] - t.displaySize[1] * i;\n\n      return {\n        image: t,\n        top: a,\n        bottom: a + t.displaySize[1],\n        left: s,\n        right: s + t.displaySize[0]\n      };\n    }\n\n    function Kl(t, e, r, n, i, s) {\n      var a = t.image;\n      var o;\n\n      if (a.content) {\n        var _t101 = a.content,\n            _e105 = a.pixelRatio || 1;\n\n        o = [_t101[0] / _e105, _t101[1] / _e105, a.displaySize[0] - _t101[2] / _e105, a.displaySize[1] - _t101[3] / _e105];\n      }\n\n      var l = e.left * s,\n          u = e.right * s;\n      var c, h, p, f;\n      \"width\" === r || \"both\" === r ? (f = i[0] + l - n[3], h = i[0] + u + n[1]) : (f = i[0] + (l + u - a.displaySize[0]) / 2, h = f + a.displaySize[0]);\n      var d = e.top * s,\n          y = e.bottom * s;\n      return \"height\" === r || \"both\" === r ? (c = i[1] + d - n[0], p = i[1] + y + n[2]) : (c = i[1] + (d + y - a.displaySize[1]) / 2, p = c + a.displaySize[1]), {\n        image: a,\n        top: c,\n        right: h,\n        bottom: p,\n        left: f,\n        collisionPadding: o\n      };\n    }\n\n    var Zl = 128;\n\n    function Gl(t, e) {\n      var r = e.expression;\n      if (\"constant\" === r.kind) return {\n        kind: \"constant\",\n        layoutSize: r.evaluate(new Yn(t + 1))\n      };\n      if (\"source\" === r.kind) return {\n        kind: \"source\"\n      };\n      {\n        var _e106 = r.zoomStops,\n            _n78 = r.interpolationType;\n        var _i77 = 0;\n\n        for (; _i77 < _e106.length && _e106[_i77] <= t;) {\n          _i77++;\n        }\n\n        _i77 = Math.max(0, _i77 - 1);\n        var _s53 = _i77;\n\n        for (; _s53 < _e106.length && _e106[_s53] < t + 1;) {\n          _s53++;\n        }\n\n        _s53 = Math.min(_e106.length - 1, _s53);\n        var _a50 = _e106[_i77],\n            _o22 = _e106[_s53];\n        return \"composite\" === r.kind ? {\n          kind: \"composite\",\n          minZoom: _a50,\n          maxZoom: _o22,\n          interpolationType: _n78\n        } : {\n          kind: \"camera\",\n          minZoom: _a50,\n          maxZoom: _o22,\n          minSize: r.evaluate(new Yn(_a50)),\n          maxSize: r.evaluate(new Yn(_o22)),\n          interpolationType: _n78\n        };\n      }\n    }\n\n    var Jl = /*#__PURE__*/function (_S2) {\n      _inherits(Jl, _S2);\n\n      function Jl(t, e, r, n) {\n        var _this10;\n\n        _classCallCheck(this, Jl);\n\n        _this10 = _possibleConstructorReturn(this, _getPrototypeOf(Jl).call(this, t, e)), _this10.angle = r, void 0 !== n && (_this10.segment = n);\n        return _this10;\n      }\n\n      _createClass(Jl, [{\n        key: \"clone\",\n        value: function clone() {\n          return new Jl(this.x, this.y, this.angle, this.segment);\n        }\n      }]);\n\n      return Jl;\n    }(S);\n\n    function Xl(t, e, r, n, i) {\n      if (void 0 === e.segment) return !0;\n      var s = e,\n          a = e.segment + 1,\n          o = 0;\n\n      for (; o > -r / 2;) {\n        if (a--, a < 0) return !1;\n        o -= t[a].dist(s), s = t[a];\n      }\n\n      o += t[a].dist(t[a + 1]), a++;\n      var l = [];\n      var u = 0;\n\n      for (; o < r / 2;) {\n        var _e107 = t[a],\n            _r112 = t[a + 1];\n        if (!_r112) return !1;\n\n        var _s54 = t[a - 1].angleTo(_e107) - _e107.angleTo(_r112);\n\n        for (_s54 = Math.abs((_s54 + 3 * Math.PI) % (2 * Math.PI) - Math.PI), l.push({\n          distance: o,\n          angleDelta: _s54\n        }), u += _s54; o - l[0].distance > n;) {\n          u -= l.shift().angleDelta;\n        }\n\n        if (u > i) return !1;\n        a++, o += _e107.dist(_r112);\n      }\n\n      return !0;\n    }\n\n    function Yl(t) {\n      var e = 0;\n\n      for (var _r113 = 0; _r113 < t.length - 1; _r113++) {\n        e += t[_r113].dist(t[_r113 + 1]);\n      }\n\n      return e;\n    }\n\n    function Hl(t, e, r) {\n      return t ? .6 * e * r : 0;\n    }\n\n    function Wl(t, e) {\n      return Math.max(t ? t.right - t.left : 0, e ? e.right - e.left : 0);\n    }\n\n    function Ql(t, e, r, n, i, s) {\n      var a = Hl(r, i, s),\n          o = Wl(r, n) * s;\n      var l = 0;\n      var u = Yl(t) / 2;\n\n      for (var _r114 = 0; _r114 < t.length - 1; _r114++) {\n        var _n79 = t[_r114],\n            _i78 = t[_r114 + 1],\n            _s55 = _n79.dist(_i78);\n\n        if (l + _s55 > u) {\n          var _c10 = (u - l) / _s55,\n              _h7 = Se(_n79.x, _i78.x, _c10),\n              _p5 = Se(_n79.y, _i78.y, _c10),\n              _f2 = new Jl(_h7, _p5, _i78.angleTo(_n79), _r114);\n\n          return _f2._round(), !a || Xl(t, _f2, o, a, e) ? _f2 : void 0;\n        }\n\n        l += _s55;\n      }\n    }\n\n    function tu(t, e, r, n, i, s, a, o, l) {\n      var u = Hl(n, s, a),\n          c = Wl(n, i),\n          h = c * a,\n          p = 0 === t[0].x || t[0].x === l || 0 === t[0].y || t[0].y === l;\n      return e - h < e / 4 && (e = h + e / 4), eu(t, p ? e / 2 * o % e : (c / 2 + 2 * s) * a * o % e, e, u, r, h, p, !1, l);\n    }\n\n    function eu(t, e, r, n, i, s, a, o, l) {\n      var u = s / 2,\n          c = Yl(t);\n      var h = 0,\n          p = e - r,\n          f = [];\n\n      for (var _e108 = 0; _e108 < t.length - 1; _e108++) {\n        var _a51 = t[_e108],\n            _o23 = t[_e108 + 1],\n            _d2 = _a51.dist(_o23),\n            _y3 = _o23.angleTo(_a51);\n\n        for (; p + r < h + _d2;) {\n          p += r;\n\n          var _m4 = (p - h) / _d2,\n              _g4 = Se(_a51.x, _o23.x, _m4),\n              _x4 = Se(_a51.y, _o23.y, _m4);\n\n          if (_g4 >= 0 && _g4 < l && _x4 >= 0 && _x4 < l && p - u >= 0 && p + u <= c) {\n            var _r115 = new Jl(_g4, _x4, _y3, _e108);\n\n            _r115._round(), n && !Xl(t, _r115, s, n, i) || f.push(_r115);\n          }\n        }\n\n        h += _d2;\n      }\n\n      return o || f.length || a || (f = eu(t, h / 2, r, n, i, s, a, !0, l)), f;\n    }\n\n    function ru(t, e, r, n, i) {\n      var s = [];\n\n      for (var _a52 = 0; _a52 < t.length; _a52++) {\n        var _o24 = t[_a52];\n\n        var _l22 = void 0;\n\n        for (var _t102 = 0; _t102 < _o24.length - 1; _t102++) {\n          var _a53 = _o24[_t102],\n              _u18 = _o24[_t102 + 1];\n          _a53.x < e && _u18.x < e || (_a53.x < e ? _a53 = new S(e, _a53.y + (e - _a53.x) / (_u18.x - _a53.x) * (_u18.y - _a53.y))._round() : _u18.x < e && (_u18 = new S(e, _a53.y + (e - _a53.x) / (_u18.x - _a53.x) * (_u18.y - _a53.y))._round()), _a53.y < r && _u18.y < r || (_a53.y < r ? _a53 = new S(_a53.x + (r - _a53.y) / (_u18.y - _a53.y) * (_u18.x - _a53.x), r)._round() : _u18.y < r && (_u18 = new S(_a53.x + (r - _a53.y) / (_u18.y - _a53.y) * (_u18.x - _a53.x), r)._round()), _a53.x >= n && _u18.x >= n || (_a53.x >= n ? _a53 = new S(n, _a53.y + (n - _a53.x) / (_u18.x - _a53.x) * (_u18.y - _a53.y))._round() : _u18.x >= n && (_u18 = new S(n, _a53.y + (n - _a53.x) / (_u18.x - _a53.x) * (_u18.y - _a53.y))._round()), _a53.y >= i && _u18.y >= i || (_a53.y >= i ? _a53 = new S(_a53.x + (i - _a53.y) / (_u18.y - _a53.y) * (_u18.x - _a53.x), i)._round() : _u18.y >= i && (_u18 = new S(_a53.x + (i - _a53.y) / (_u18.y - _a53.y) * (_u18.x - _a53.x), i)._round()), _l22 && _a53.equals(_l22[_l22.length - 1]) || (_l22 = [_a53], s.push(_l22)), _l22.push(_u18)))));\n        }\n      }\n\n      return s;\n    }\n\n    function nu(t, e, r, n) {\n      var i = [],\n          s = t.image,\n          a = s.pixelRatio,\n          o = s.paddedRect.w - 2,\n          l = s.paddedRect.h - 2,\n          u = t.right - t.left,\n          c = t.bottom - t.top,\n          h = s.stretchX || [[0, o]],\n          p = s.stretchY || [[0, l]],\n          f = function f(t, e) {\n        return t + e[1] - e[0];\n      },\n          d = h.reduce(f, 0),\n          y = p.reduce(f, 0),\n          m = o - d,\n          g = l - y;\n\n      var x = 0,\n          v = d,\n          b = 0,\n          w = y,\n          _ = 0,\n          A = m,\n          k = 0,\n          z = g;\n\n      if (s.content && n) {\n        var _t103 = s.content;\n        x = iu(h, 0, _t103[0]), b = iu(p, 0, _t103[1]), v = iu(h, _t103[0], _t103[2]), w = iu(p, _t103[1], _t103[3]), _ = _t103[0] - x, k = _t103[1] - b, A = _t103[2] - _t103[0] - v, z = _t103[3] - _t103[1] - w;\n      }\n\n      var I = function I(n, i, o, l) {\n        var h = au(n.stretch - x, v, u, t.left),\n            p = ou(n.fixed - _, A, n.stretch, d),\n            f = au(i.stretch - b, w, c, t.top),\n            m = ou(i.fixed - k, z, i.stretch, y),\n            g = au(o.stretch - x, v, u, t.left),\n            I = ou(o.fixed - _, A, o.stretch, d),\n            M = au(l.stretch - b, w, c, t.top),\n            B = ou(l.fixed - k, z, l.stretch, y),\n            C = new S(h, f),\n            P = new S(g, f),\n            V = new S(g, M),\n            E = new S(h, M),\n            F = new S(p / a, m / a),\n            T = new S(I / a, B / a),\n            L = e * Math.PI / 180;\n\n        if (L) {\n          var _t104 = Math.sin(L),\n              _e109 = Math.cos(L),\n              _r116 = [_e109, -_t104, _t104, _e109];\n\n          C._matMult(_r116), P._matMult(_r116), E._matMult(_r116), V._matMult(_r116);\n        }\n\n        var D = n.stretch + n.fixed,\n            $ = i.stretch + i.fixed;\n        return {\n          tl: C,\n          tr: P,\n          bl: E,\n          br: V,\n          tex: {\n            x: s.paddedRect.x + 1 + D,\n            y: s.paddedRect.y + 1 + $,\n            w: o.stretch + o.fixed - D,\n            h: l.stretch + l.fixed - $\n          },\n          writingMode: void 0,\n          glyphOffset: [0, 0],\n          sectionIndex: 0,\n          pixelOffsetTL: F,\n          pixelOffsetBR: T,\n          minFontScaleX: A / a / u,\n          minFontScaleY: z / a / c,\n          isSDF: r\n        };\n      };\n\n      if (n && (s.stretchX || s.stretchY)) {\n        var _t105 = su(h, m, d),\n            _e110 = su(p, g, y);\n\n        for (var _r117 = 0; _r117 < _t105.length - 1; _r117++) {\n          var _n80 = _t105[_r117],\n              _s56 = _t105[_r117 + 1];\n\n          for (var _t106 = 0; _t106 < _e110.length - 1; _t106++) {\n            i.push(I(_n80, _e110[_t106], _s56, _e110[_t106 + 1]));\n          }\n        }\n      } else i.push(I({\n        fixed: 0,\n        stretch: -1\n      }, {\n        fixed: 0,\n        stretch: -1\n      }, {\n        fixed: 0,\n        stretch: o + 1\n      }, {\n        fixed: 0,\n        stretch: l + 1\n      }));\n\n      return i;\n    }\n\n    function iu(t, e, r) {\n      var n = 0;\n\n      var _iterator86 = _createForOfIteratorHelper(t),\n          _step86;\n\n      try {\n        for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {\n          var _i79 = _step86.value;\n          n += Math.max(e, Math.min(r, _i79[1])) - Math.max(e, Math.min(r, _i79[0]));\n        }\n      } catch (err) {\n        _iterator86.e(err);\n      } finally {\n        _iterator86.f();\n      }\n\n      return n;\n    }\n\n    function su(t, e, r) {\n      var n = [{\n        fixed: -1,\n        stretch: 0\n      }];\n\n      var _iterator87 = _createForOfIteratorHelper(t),\n          _step87;\n\n      try {\n        for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {\n          var _step87$value = _slicedToArray(_step87.value, 2),\n              _e111 = _step87$value[0],\n              _r118 = _step87$value[1];\n\n          var _t107 = n[n.length - 1];\n          n.push({\n            fixed: _e111 - _t107.stretch,\n            stretch: _t107.stretch\n          }), n.push({\n            fixed: _e111 - _t107.stretch,\n            stretch: _t107.stretch + (_r118 - _e111)\n          });\n        }\n      } catch (err) {\n        _iterator87.e(err);\n      } finally {\n        _iterator87.f();\n      }\n\n      return n.push({\n        fixed: e + 1,\n        stretch: r\n      }), n;\n    }\n\n    function au(t, e, r, n) {\n      return t / e * r + n;\n    }\n\n    function ou(t, e, r, n) {\n      return t - e * r / n;\n    }\n\n    kn(\"Anchor\", Jl);\n\n    var lu = function lu(t, e, r, n, i, s, a, o, l, u) {\n      _classCallCheck(this, lu);\n\n      if (this.boxStartIndex = t.length, l) {\n        var _t108 = s.top,\n            _e112 = s.bottom;\n        var _r119 = s.collisionPadding;\n        _r119 && (_t108 -= _r119[1], _e112 += _r119[3]);\n\n        var _n81 = _e112 - _t108;\n\n        _n81 > 0 && (_n81 = Math.max(10, _n81), this.circleDiameter = _n81);\n      } else {\n        var _l23 = s.top * a - o,\n            _c11 = s.bottom * a + o,\n            _h8 = s.left * a - o,\n            _p6 = s.right * a + o;\n\n        var _f3 = s.collisionPadding;\n\n        if (_f3 && (_h8 -= _f3[0] * a, _l23 -= _f3[1] * a, _p6 += _f3[2] * a, _c11 += _f3[3] * a), u) {\n          var _t109 = new S(_h8, _l23),\n              _e113 = new S(_p6, _l23),\n              _r120 = new S(_h8, _c11),\n              _n82 = new S(_p6, _c11),\n              _i80 = u * Math.PI / 180;\n\n          _t109._rotate(_i80), _e113._rotate(_i80), _r120._rotate(_i80), _n82._rotate(_i80), _h8 = Math.min(_t109.x, _e113.x, _r120.x, _n82.x), _p6 = Math.max(_t109.x, _e113.x, _r120.x, _n82.x), _l23 = Math.min(_t109.y, _e113.y, _r120.y, _n82.y), _c11 = Math.max(_t109.y, _e113.y, _r120.y, _n82.y);\n        }\n\n        t.emplaceBack(e.x, e.y, _h8, _l23, _p6, _c11, r, n, i);\n      }\n\n      this.boxEndIndex = t.length;\n    };\n\n    var uu = /*#__PURE__*/function () {\n      function uu() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : cu;\n\n        _classCallCheck(this, uu);\n\n        if (this.data = t, this.length = this.data.length, this.compare = e, this.length > 0) for (var _t110 = (this.length >> 1) - 1; _t110 >= 0; _t110--) {\n          this._down(_t110);\n        }\n      }\n\n      _createClass(uu, [{\n        key: \"push\",\n        value: function push(t) {\n          this.data.push(t), this.length++, this._up(this.length - 1);\n        }\n      }, {\n        key: \"pop\",\n        value: function pop() {\n          if (0 === this.length) return;\n          var t = this.data[0],\n              e = this.data.pop();\n          return this.length--, this.length > 0 && (this.data[0] = e, this._down(0)), t;\n        }\n      }, {\n        key: \"peek\",\n        value: function peek() {\n          return this.data[0];\n        }\n      }, {\n        key: \"_up\",\n        value: function _up(t) {\n          var e = this.data,\n              r = this.compare,\n              n = e[t];\n\n          for (; t > 0;) {\n            var _i81 = t - 1 >> 1,\n                _s57 = e[_i81];\n\n            if (r(n, _s57) >= 0) break;\n            e[t] = _s57, t = _i81;\n          }\n\n          e[t] = n;\n        }\n      }, {\n        key: \"_down\",\n        value: function _down(t) {\n          var e = this.data,\n              r = this.compare,\n              n = this.length >> 1,\n              i = e[t];\n\n          for (; t < n;) {\n            var _n83 = 1 + (t << 1),\n                _s58 = e[_n83];\n\n            var _a54 = _n83 + 1;\n\n            if (_a54 < this.length && r(e[_a54], _s58) < 0 && (_n83 = _a54, _s58 = e[_a54]), r(_s58, i) >= 0) break;\n            e[t] = _s58, t = _n83;\n          }\n\n          e[t] = i;\n        }\n      }]);\n\n      return uu;\n    }();\n\n    function cu(t, e) {\n      return t < e ? -1 : t > e ? 1 : 0;\n    }\n\n    function hu(t) {\n      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      var n = 1 / 0,\n          i = 1 / 0,\n          s = -1 / 0,\n          a = -1 / 0;\n      var o = t[0];\n\n      for (var _t111 = 0; _t111 < o.length; _t111++) {\n        var _e114 = o[_t111];\n        (!_t111 || _e114.x < n) && (n = _e114.x), (!_t111 || _e114.y < i) && (i = _e114.y), (!_t111 || _e114.x > s) && (s = _e114.x), (!_t111 || _e114.y > a) && (a = _e114.y);\n      }\n\n      var l = Math.min(s - n, a - i);\n      var u = l / 2;\n      var c = new uu([], pu);\n      if (0 === l) return new S(n, i);\n\n      for (var _e115 = n; _e115 < s; _e115 += l) {\n        for (var _r121 = i; _r121 < a; _r121 += l) {\n          c.push(new fu(_e115 + u, _r121 + u, u, t));\n        }\n      }\n\n      var h = function (t) {\n        var e = 0,\n            r = 0,\n            n = 0;\n        var i = t[0];\n\n        for (var _t112 = 0, _s59 = i.length, _a55 = _s59 - 1; _t112 < _s59; _a55 = _t112++) {\n          var _s60 = i[_t112],\n              _o25 = i[_a55],\n              _l24 = _s60.x * _o25.y - _o25.x * _s60.y;\n\n          r += (_s60.x + _o25.x) * _l24, n += (_s60.y + _o25.y) * _l24, e += 3 * _l24;\n        }\n\n        return new fu(r / e, n / e, 0, t);\n      }(t),\n          p = c.length;\n\n      for (; c.length;) {\n        var _n84 = c.pop();\n\n        (_n84.d > h.d || !h.d) && (h = _n84, r && console.log(\"found best %d after %d probes\", Math.round(1e4 * _n84.d) / 1e4, p)), _n84.max - h.d <= e || (u = _n84.h / 2, c.push(new fu(_n84.p.x - u, _n84.p.y - u, u, t)), c.push(new fu(_n84.p.x + u, _n84.p.y - u, u, t)), c.push(new fu(_n84.p.x - u, _n84.p.y + u, u, t)), c.push(new fu(_n84.p.x + u, _n84.p.y + u, u, t)), p += 4);\n      }\n\n      return r && (console.log(\"num probes: \".concat(p)), console.log(\"best distance: \".concat(h.d))), h.p;\n    }\n\n    function pu(t, e) {\n      return e.max - t.max;\n    }\n\n    function fu(t, e, r, n) {\n      this.p = new S(t, e), this.h = r, this.d = function (t, e) {\n        var r = !1,\n            n = 1 / 0;\n\n        for (var _i82 = 0; _i82 < e.length; _i82++) {\n          var _s61 = e[_i82];\n\n          for (var _e116 = 0, _i83 = _s61.length, _a56 = _i83 - 1; _e116 < _i83; _a56 = _e116++) {\n            var _i84 = _s61[_e116],\n                _o26 = _s61[_a56];\n            _i84.y > t.y != _o26.y > t.y && t.x < (_o26.x - _i84.x) * (t.y - _i84.y) / (_o26.y - _i84.y) + _i84.x && (r = !r), n = Math.min(n, Qs(t, _i84, _o26));\n          }\n        }\n\n        return (r ? 1 : -1) * Math.sqrt(n);\n      }(this.p, n), this.max = this.d + this.h * Math.SQRT2;\n    }\n\n    var du = Number.POSITIVE_INFINITY;\n\n    function yu(t, e) {\n      return e[1] !== du ? function (t, e, r) {\n        var n = 0,\n            i = 0;\n\n        switch (e = Math.abs(e), r = Math.abs(r), t) {\n          case \"top-right\":\n          case \"top-left\":\n          case \"top\":\n            i = r - 7;\n            break;\n\n          case \"bottom-right\":\n          case \"bottom-left\":\n          case \"bottom\":\n            i = 7 - r;\n        }\n\n        switch (t) {\n          case \"top-right\":\n          case \"bottom-right\":\n          case \"right\":\n            n = -e;\n            break;\n\n          case \"top-left\":\n          case \"bottom-left\":\n          case \"left\":\n            n = e;\n        }\n\n        return [n, i];\n      }(t, e[0], e[1]) : function (t, e) {\n        var r = 0,\n            n = 0;\n        e < 0 && (e = 0);\n        var i = e / Math.sqrt(2);\n\n        switch (t) {\n          case \"top-right\":\n          case \"top-left\":\n            n = i - 7;\n            break;\n\n          case \"bottom-right\":\n          case \"bottom-left\":\n            n = 7 - i;\n            break;\n\n          case \"bottom\":\n            n = 7 - e;\n            break;\n\n          case \"top\":\n            n = e - 7;\n        }\n\n        switch (t) {\n          case \"top-right\":\n          case \"bottom-right\":\n            r = -i;\n            break;\n\n          case \"top-left\":\n          case \"bottom-left\":\n            r = i;\n            break;\n\n          case \"left\":\n            r = e;\n            break;\n\n          case \"right\":\n            r = -e;\n        }\n\n        return [r, n];\n      }(t, e[0]);\n    }\n\n    function mu(t) {\n      switch (t) {\n        case \"right\":\n        case \"top-right\":\n        case \"bottom-right\":\n          return \"right\";\n\n        case \"left\":\n        case \"top-left\":\n        case \"bottom-left\":\n          return \"left\";\n      }\n\n      return \"center\";\n    }\n\n    function gu(e, r, n, i, s, a, o, l, u, c, h) {\n      var p = a.textMaxSize.evaluate(r, {});\n      void 0 === p && (p = o);\n\n      var f = e.layers[0].layout,\n          y = f.get(\"icon-offset\").evaluate(r, {}, h),\n          m = bu(n.horizontal),\n          g = o / 24,\n          x = e.tilePixelRatio * g,\n          v = e.tilePixelRatio * p / 24,\n          b = e.tilePixelRatio * l,\n          w = e.tilePixelRatio * f.get(\"symbol-spacing\"),\n          _ = f.get(\"text-padding\") * e.tilePixelRatio,\n          A = f.get(\"icon-padding\") * e.tilePixelRatio,\n          k = f.get(\"text-max-angle\") / 180 * Math.PI,\n          S = \"viewport\" !== f.get(\"text-rotation-alignment\") && \"point\" !== f.get(\"symbol-placement\"),\n          z = \"map\" === f.get(\"icon-rotation-alignment\") && \"point\" !== f.get(\"symbol-placement\"),\n          I = f.get(\"symbol-placement\"),\n          M = w / 2,\n          B = f.get(\"icon-text-fit\");\n\n      var C;\n      i && \"none\" !== B && (e.allowVerticalPlacement && n.vertical && (C = Kl(i, n.vertical, B, f.get(\"icon-text-fit-padding\"), y, g)), m && (i = Kl(i, m, B, f.get(\"icon-text-fit-padding\"), y, g)));\n\n      var P = function P(l, p) {\n        p.x < 0 || p.x >= Rs || p.y < 0 || p.y >= Rs || function (e, r, n, i, s, a, o, l, u, c, h, p, f, y, m, g, x, v, b, w, _, A, k, S, z) {\n          var _l$layout$get$evaluat, _l$layout$get$evaluat2;\n\n          var I = e.addToLineVertexArray(r, n);\n          var M,\n              B,\n              C,\n              P,\n              V = 0,\n              E = 0,\n              F = 0,\n              T = 0,\n              L = -1,\n              D = -1;\n          var $ = {};\n          var R = vs(\"\"),\n              U = 0,\n              O = 0;\n\n          if (void 0 === l._unevaluatedLayout.getValue(\"text-radial-offset\") ? (_l$layout$get$evaluat = l.layout.get(\"text-offset\").evaluate(_, {}, S).map(function (t) {\n            return t * tl;\n          }), _l$layout$get$evaluat2 = _slicedToArray(_l$layout$get$evaluat, 2), U = _l$layout$get$evaluat2[0], O = _l$layout$get$evaluat2[1], _l$layout$get$evaluat) : (U = l.layout.get(\"text-radial-offset\").evaluate(_, {}, S) * tl, O = du), e.allowVerticalPlacement && i.vertical) {\n            var _t113 = l.layout.get(\"text-rotate\").evaluate(_, {}, S) + 90;\n\n            C = new lu(u, r, c, h, p, i.vertical, f, y, m, _t113), o && (P = new lu(u, r, c, h, p, o, x, v, m, _t113));\n          }\n\n          if (s) {\n            var _n85 = l.layout.get(\"icon-rotate\").evaluate(_, {}),\n                _i85 = \"none\" !== l.layout.get(\"icon-text-fit\"),\n                _a57 = nu(s, _n85, k, _i85),\n                _f4 = o ? nu(o, _n85, k, _i85) : void 0;\n\n            B = new lu(u, r, c, h, p, s, x, v, !1, _n85), V = 4 * _a57.length;\n            var _y4 = e.iconSizeData;\n            var _m5 = null;\n            \"source\" === _y4.kind ? (_m5 = [Zl * l.layout.get(\"icon-size\").evaluate(_, {})], _m5[0] > xu && d(\"\".concat(e.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))) : \"composite\" === _y4.kind && (_m5 = [Zl * A.compositeIconSizes[0].evaluate(_, {}, S), Zl * A.compositeIconSizes[1].evaluate(_, {}, S)], (_m5[0] > xu || _m5[1] > xu) && d(\"\".concat(e.layerIds[0], \": Value for \\\"icon-size\\\" is >= 255. Reduce your \\\"icon-size\\\".\"))), e.addSymbols(e.icon, _a57, _m5, w, b, _, t.WritingMode.none, r, I.lineStartIndex, I.lineLength, -1, S), L = e.icon.placedSymbolArray.length - 1, _f4 && (E = 4 * _f4.length, e.addSymbols(e.icon, _f4, _m5, w, b, _, t.WritingMode.vertical, r, I.lineStartIndex, I.lineLength, -1, S), D = e.icon.placedSymbolArray.length - 1);\n          }\n\n          var q = Object.keys(i.horizontal);\n\n          for (var _i86 = 0, _q = q; _i86 < _q.length; _i86++) {\n            var _n86 = _q[_i86];\n            var _s62 = i.horizontal[_n86];\n\n            if (!M) {\n              R = vs(_s62.text);\n\n              var _t114 = l.layout.get(\"text-rotate\").evaluate(_, {}, S);\n\n              M = new lu(u, r, c, h, p, _s62, f, y, m, _t114);\n            }\n\n            var _o27 = 1 === _s62.positionedLines.length;\n\n            if (F += vu(e, r, _s62, a, l, m, _, g, I, i.vertical ? t.WritingMode.horizontal : t.WritingMode.horizontalOnly, _o27 ? q : [_n86], $, L, A, S), _o27) break;\n          }\n\n          i.vertical && (T += vu(e, r, i.vertical, a, l, m, _, g, I, t.WritingMode.vertical, [\"vertical\"], $, D, A, S));\n          var j = M ? M.boxStartIndex : e.collisionBoxArray.length,\n              N = M ? M.boxEndIndex : e.collisionBoxArray.length,\n              K = C ? C.boxStartIndex : e.collisionBoxArray.length,\n              Z = C ? C.boxEndIndex : e.collisionBoxArray.length,\n              G = B ? B.boxStartIndex : e.collisionBoxArray.length,\n              J = B ? B.boxEndIndex : e.collisionBoxArray.length,\n              X = P ? P.boxStartIndex : e.collisionBoxArray.length,\n              Y = P ? P.boxEndIndex : e.collisionBoxArray.length;\n          var H = -1;\n\n          var W = function W(t, e) {\n            return t && t.circleDiameter ? Math.max(t.circleDiameter, e) : e;\n          };\n\n          H = W(M, H), H = W(C, H), H = W(B, H), H = W(P, H);\n          var Q = H > -1 ? 1 : 0;\n          Q && (H *= z / tl), e.glyphOffsetArray.length >= Bu.MAX_GLYPHS && d(\"Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907\"), void 0 !== _.sortKey && e.addToSortKeyRanges(e.symbolInstances.length, _.sortKey), e.symbolInstances.emplaceBack(r.x, r.y, $.right >= 0 ? $.right : -1, $.center >= 0 ? $.center : -1, $.left >= 0 ? $.left : -1, $.vertical || -1, L, D, R, j, N, K, Z, G, J, X, Y, c, F, T, V, E, Q, 0, f, U, O, H);\n        }(e, p, l, n, i, s, C, e.layers[0], e.collisionBoxArray, r.index, r.sourceLayerIndex, e.index, x, _, S, u, b, A, z, y, r, a, c, h, o);\n      };\n\n      if (\"line\" === I) {\n        var _iterator88 = _createForOfIteratorHelper(ru(r.geometry, 0, 0, Rs, Rs)),\n            _step88;\n\n        try {\n          for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {\n            var _t115 = _step88.value;\n\n            var _r122 = tu(_t115, w, k, n.vertical || m, i, 24, v, e.overscaling, Rs);\n\n            var _iterator89 = _createForOfIteratorHelper(_r122),\n                _step89;\n\n            try {\n              for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {\n                var _n87 = _step89.value;\n                var _r123 = m;\n                _r123 && wu(e, _r123.text, M, _n87) || P(_t115, _n87);\n              }\n            } catch (err) {\n              _iterator89.e(err);\n            } finally {\n              _iterator89.f();\n            }\n          }\n        } catch (err) {\n          _iterator88.e(err);\n        } finally {\n          _iterator88.f();\n        }\n      } else if (\"line-center\" === I) {\n        var _iterator90 = _createForOfIteratorHelper(r.geometry),\n            _step90;\n\n        try {\n          for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {\n            var _t116 = _step90.value;\n\n            if (_t116.length > 1) {\n              var _e117 = Ql(_t116, k, n.vertical || m, i, 24, v);\n\n              _e117 && P(_t116, _e117);\n            }\n          }\n        } catch (err) {\n          _iterator90.e(err);\n        } finally {\n          _iterator90.f();\n        }\n      } else if (\"Polygon\" === r.type) {\n        var _iterator91 = _createForOfIteratorHelper(io(r.geometry, 0)),\n            _step91;\n\n        try {\n          for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {\n            var _t117 = _step91.value;\n\n            var _e118 = hu(_t117, 16);\n\n            P(_t117[0], new Jl(_e118.x, _e118.y, 0));\n          }\n        } catch (err) {\n          _iterator91.e(err);\n        } finally {\n          _iterator91.f();\n        }\n      } else if (\"LineString\" === r.type) {\n        var _iterator92 = _createForOfIteratorHelper(r.geometry),\n            _step92;\n\n        try {\n          for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {\n            var _t118 = _step92.value;\n            P(_t118, new Jl(_t118[0].x, _t118[0].y, 0));\n          }\n        } catch (err) {\n          _iterator92.e(err);\n        } finally {\n          _iterator92.f();\n        }\n      } else if (\"Point\" === r.type) {\n        var _iterator93 = _createForOfIteratorHelper(r.geometry),\n            _step93;\n\n        try {\n          for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {\n            var _t119 = _step93.value;\n\n            var _iterator94 = _createForOfIteratorHelper(_t119),\n                _step94;\n\n            try {\n              for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {\n                var _e119 = _step94.value;\n                P([_e119], new Jl(_e119.x, _e119.y, 0));\n              }\n            } catch (err) {\n              _iterator94.e(err);\n            } finally {\n              _iterator94.f();\n            }\n          }\n        } catch (err) {\n          _iterator93.e(err);\n        } finally {\n          _iterator93.f();\n        }\n      }\n    }\n\n    var xu = 32640;\n\n    function vu(t, e, r, n, i, s, a, o, l, u, c, h, p, f, y) {\n      var m = function (t, e, r, n, i, s, a, o) {\n        var l = n.layout.get(\"text-rotate\").evaluate(s, {}) * Math.PI / 180,\n            u = [];\n\n        var _iterator95 = _createForOfIteratorHelper(e.positionedLines),\n            _step95;\n\n        try {\n          for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {\n            var _t120 = _step95.value;\n\n            var _iterator96 = _createForOfIteratorHelper(_t120.positionedGlyphs),\n                _step96;\n\n            try {\n              for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {\n                var _n88 = _step96.value;\n                if (!_n88.rect) continue;\n\n                var _s63 = _n88.rect || {};\n\n                var _c12 = 4,\n                    _h9 = !0,\n                    _p7 = 1,\n                    _f5 = 0;\n\n                var _d3 = (i || o) && _n88.vertical,\n                    _y5 = _n88.metrics.advance * _n88.scale / 2;\n\n                if (o && e.verticalizable) {\n                  var _e120 = (_n88.scale - 1) * tl,\n                      _r124 = (tl - _n88.metrics.width * _n88.scale) / 2;\n\n                  _f5 = _t120.lineOffset / 2 - (_n88.imageName ? -_r124 : _e120);\n                }\n\n                if (_n88.imageName) {\n                  var _t121 = a[_n88.imageName];\n                  _h9 = _t121.sdf, _p7 = _t121.pixelRatio, _c12 = 1 / _p7;\n                }\n\n                var _m6 = i ? [_n88.x + _y5, _n88.y] : [0, 0];\n\n                var _g5 = i ? [0, 0] : [_n88.x + _y5 + r[0], _n88.y + r[1] - _f5],\n                    _x5 = [0, 0];\n\n                _d3 && (_x5 = _g5, _g5 = [0, 0]);\n\n                var _v2 = (_n88.metrics.left - _c12) * _n88.scale - _y5 + _g5[0],\n                    _b4 = (-_n88.metrics.top - _c12) * _n88.scale + _g5[1],\n                    _w3 = _v2 + _s63.w * _n88.scale / _p7,\n                    _4 = _b4 + _s63.h * _n88.scale / _p7,\n                    _A4 = new S(_v2, _b4),\n                    _k3 = new S(_w3, _b4),\n                    _z2 = new S(_v2, _4),\n                    _I = new S(_w3, _4);\n\n                if (_d3) {\n                  var _t122 = new S(-_y5, _y5 - Cl),\n                      _e121 = -Math.PI / 2,\n                      _r125 = 12 - _y5,\n                      _i87 = new S(22 - _r125, -(_n88.imageName ? _r125 : 0)),\n                      _s64 = _construct(S, _toConsumableArray(_x5));\n\n                  _A4._rotateAround(_e121, _t122)._add(_i87)._add(_s64), _k3._rotateAround(_e121, _t122)._add(_i87)._add(_s64), _z2._rotateAround(_e121, _t122)._add(_i87)._add(_s64), _I._rotateAround(_e121, _t122)._add(_i87)._add(_s64);\n                }\n\n                if (l) {\n                  var _t123 = Math.sin(l),\n                      _e122 = Math.cos(l),\n                      _r126 = [_e122, -_t123, _t123, _e122];\n\n                  _A4._matMult(_r126), _k3._matMult(_r126), _z2._matMult(_r126), _I._matMult(_r126);\n                }\n\n                var _M = new S(0, 0),\n                    _B = new S(0, 0);\n\n                u.push({\n                  tl: _A4,\n                  tr: _k3,\n                  bl: _z2,\n                  br: _I,\n                  tex: _s63,\n                  writingMode: e.writingMode,\n                  glyphOffset: _m6,\n                  sectionIndex: _n88.sectionIndex,\n                  isSDF: _h9,\n                  pixelOffsetTL: _M,\n                  pixelOffsetBR: _B,\n                  minFontScaleX: 0,\n                  minFontScaleY: 0\n                });\n              }\n            } catch (err) {\n              _iterator96.e(err);\n            } finally {\n              _iterator96.f();\n            }\n          }\n        } catch (err) {\n          _iterator95.e(err);\n        } finally {\n          _iterator95.f();\n        }\n\n        return u;\n      }(0, r, o, i, s, a, n, t.allowVerticalPlacement),\n          g = t.textSizeData;\n\n      var x = null;\n      \"source\" === g.kind ? (x = [Zl * i.layout.get(\"text-size\").evaluate(a, {})], x[0] > xu && d(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))) : \"composite\" === g.kind && (x = [Zl * f.compositeTextSizes[0].evaluate(a, {}, y), Zl * f.compositeTextSizes[1].evaluate(a, {}, y)], (x[0] > xu || x[1] > xu) && d(\"\".concat(t.layerIds[0], \": Value for \\\"text-size\\\" is >= 255. Reduce your \\\"text-size\\\".\"))), t.addSymbols(t.text, m, x, o, s, a, u, e, l.lineStartIndex, l.lineLength, p, y);\n\n      var _iterator97 = _createForOfIteratorHelper(c),\n          _step97;\n\n      try {\n        for (_iterator97.s(); !(_step97 = _iterator97.n()).done;) {\n          var _e123 = _step97.value;\n          h[_e123] = t.text.placedSymbolArray.length - 1;\n        }\n      } catch (err) {\n        _iterator97.e(err);\n      } finally {\n        _iterator97.f();\n      }\n\n      return 4 * m.length;\n    }\n\n    function bu(t) {\n      for (var _e124 in t) {\n        return t[_e124];\n      }\n\n      return null;\n    }\n\n    function wu(t, e, r, n) {\n      var i = t.compareText;\n\n      if (e in i) {\n        var _t124 = i[e];\n\n        for (var _e125 = _t124.length - 1; _e125 >= 0; _e125--) {\n          if (n.dist(_t124[_e125]) < r) return !0;\n        }\n      } else i[e] = [];\n\n      return i[e].push(n), !1;\n    }\n\n    var _u = fo.VectorTileFeature.types,\n        Au = [{\n      name: \"a_fade_opacity\",\n      components: 1,\n      type: \"Uint8\",\n      offset: 0\n    }];\n\n    function ku(t, e, r, n, i, s, a, o, l, u, c, h, p) {\n      var f = o ? Math.min(xu, Math.round(o[0])) : 0,\n          d = o ? Math.min(xu, Math.round(o[1])) : 0;\n      t.emplaceBack(e, r, Math.round(32 * n), Math.round(32 * i), s, a, (f << 1) + (l ? 1 : 0), d, 16 * u, 16 * c, 256 * h, 256 * p);\n    }\n\n    function Su(t, e, r) {\n      t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r), t.emplaceBack(e.x, e.y, r);\n    }\n\n    function zu(t) {\n      var _iterator98 = _createForOfIteratorHelper(t.sections),\n          _step98;\n\n      try {\n        for (_iterator98.s(); !(_step98 = _iterator98.n()).done;) {\n          var _e126 = _step98.value;\n          if (Dn(_e126.text)) return !0;\n        }\n      } catch (err) {\n        _iterator98.e(err);\n      } finally {\n        _iterator98.f();\n      }\n\n      return !1;\n    }\n\n    var Iu = /*#__PURE__*/function () {\n      function Iu(t) {\n        _classCallCheck(this, Iu);\n\n        this.layoutVertexArray = new rs(), this.indexArray = new os(), this.programConfigurations = t, this.segments = new hs(), this.dynamicLayoutVertexArray = new ns(), this.opacityVertexArray = new is(), this.placedSymbolArray = new ji();\n      }\n\n      _createClass(Iu, [{\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.layoutVertexArray.length && 0 === this.indexArray.length && 0 === this.dynamicLayoutVertexArray.length && 0 === this.opacityVertexArray.length;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t, e, r, n) {\n          this.isEmpty() || (r && (this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, Go.members), this.indexBuffer = t.createIndexBuffer(this.indexArray, e), this.dynamicLayoutVertexBuffer = t.createVertexBuffer(this.dynamicLayoutVertexArray, Jo.members, !0), this.opacityVertexBuffer = t.createVertexBuffer(this.opacityVertexArray, Au, !0), this.opacityVertexBuffer.itemSize = 1), (r || n) && this.programConfigurations.upload(t));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.programConfigurations.destroy(), this.segments.destroy(), this.dynamicLayoutVertexBuffer.destroy(), this.opacityVertexBuffer.destroy());\n        }\n      }]);\n\n      return Iu;\n    }();\n\n    kn(\"SymbolBuffers\", Iu);\n\n    var Mu = /*#__PURE__*/function () {\n      function Mu(t, e, r) {\n        _classCallCheck(this, Mu);\n\n        this.layoutVertexArray = new t(), this.layoutAttributes = e, this.indexArray = new r(), this.segments = new hs(), this.collisionVertexArray = new as();\n      }\n\n      _createClass(Mu, [{\n        key: \"upload\",\n        value: function upload(t) {\n          this.layoutVertexBuffer = t.createVertexBuffer(this.layoutVertexArray, this.layoutAttributes), this.indexBuffer = t.createIndexBuffer(this.indexArray), this.collisionVertexBuffer = t.createVertexBuffer(this.collisionVertexArray, Xo.members, !0);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.layoutVertexBuffer && (this.layoutVertexBuffer.destroy(), this.indexBuffer.destroy(), this.segments.destroy(), this.collisionVertexBuffer.destroy());\n        }\n      }]);\n\n      return Mu;\n    }();\n\n    kn(\"CollisionBuffers\", Mu);\n\n    var Bu = /*#__PURE__*/function () {\n      function Bu(e) {\n        _classCallCheck(this, Bu);\n\n        this.collisionBoxArray = e.collisionBoxArray, this.zoom = e.zoom, this.overscaling = e.overscaling, this.layers = e.layers, this.layerIds = this.layers.map(function (t) {\n          return t.id;\n        }), this.index = e.index, this.pixelRatio = e.pixelRatio, this.sourceLayerIndex = e.sourceLayerIndex, this.hasPattern = !1, this.hasRTLText = !1, this.sortKeyRanges = [], this.collisionCircleArray = [], this.placementInvProjMatrix = ua([]), this.placementViewportMatrix = ua([]);\n        var r = this.layers[0]._unevaluatedLayout._values;\n        this.textSizeData = Gl(this.zoom, r[\"text-size\"]), this.iconSizeData = Gl(this.zoom, r[\"icon-size\"]);\n        var n = this.layers[0].layout,\n            i = n.get(\"symbol-sort-key\"),\n            s = n.get(\"symbol-z-order\");\n        this.canOverlap = \"never\" !== Fu(n, \"text-overlap\", \"text-allow-overlap\") || \"never\" !== Fu(n, \"icon-overlap\", \"icon-allow-overlap\") || n.get(\"text-ignore-placement\") || n.get(\"icon-ignore-placement\"), this.sortFeaturesByKey = \"viewport-y\" !== s && !i.isConstant(), this.sortFeaturesByY = (\"viewport-y\" === s || \"auto\" === s && !this.sortFeaturesByKey) && this.canOverlap, \"point\" === n.get(\"symbol-placement\") && (this.writingModes = n.get(\"text-writing-mode\").map(function (e) {\n          return t.WritingMode[e];\n        })), this.stateDependentLayerIds = this.layers.filter(function (t) {\n          return t.isStateDependent();\n        }).map(function (t) {\n          return t.id;\n        }), this.sourceID = e.sourceID;\n      }\n\n      _createClass(Bu, [{\n        key: \"createArrays\",\n        value: function createArrays() {\n          this.text = new Iu(new Ls(this.layers, this.zoom, function (t) {\n            return /^text/.test(t);\n          })), this.icon = new Iu(new Ls(this.layers, this.zoom, function (t) {\n            return /^icon/.test(t);\n          })), this.glyphOffsetArray = new Zi(), this.lineVertexArray = new Gi(), this.symbolInstances = new Ki();\n        }\n      }, {\n        key: \"calculateGlyphDependencies\",\n        value: function calculateGlyphDependencies(t, e, r, n, i) {\n          for (var _s65 = 0; _s65 < t.length; _s65++) {\n            if (e[t.charCodeAt(_s65)] = !0, (r || n) && i) {\n              var _r127 = Qo[t.charAt(_s65)];\n              _r127 && (e[_r127.charCodeAt(0)] = !0);\n            }\n          }\n        }\n      }, {\n        key: \"populate\",\n        value: function populate(e, r, n) {\n          var i = this.layers[0],\n              s = i.layout,\n              a = s.get(\"text-font\"),\n              o = s.get(\"text-field\"),\n              l = s.get(\"icon-image\"),\n              u = (\"constant\" !== o.value.kind || o.value.value instanceof Lt && !o.value.value.isEmpty() || o.value.value.toString().length > 0) && (\"constant\" !== a.value.kind || a.value.value.length > 0),\n              c = \"constant\" !== l.value.kind || !!l.value.value || Object.keys(l.parameters).length > 0,\n              h = s.get(\"symbol-sort-key\");\n          if (this.features = [], !u && !c) return;\n          var p = r.iconDependencies,\n              f = r.glyphDependencies,\n              d = r.availableImages,\n              y = new Yn(this.zoom);\n\n          var _iterator99 = _createForOfIteratorHelper(e),\n              _step99;\n\n          try {\n            for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {\n              var _step99$value = _step99.value,\n                  _r128 = _step99$value.feature,\n                  _o28 = _step99$value.id,\n                  _l25 = _step99$value.index,\n                  _m7 = _step99$value.sourceLayerIndex;\n\n              var _e127 = i._featureFilter.needGeometry,\n                  _g6 = js(_r128, _e127);\n\n              if (!i._featureFilter.filter(y, _g6, n)) continue;\n\n              var _x6 = void 0,\n                  _v3 = void 0;\n\n              if (_e127 || (_g6.geometry = qs(_r128)), u) {\n                var _t126 = i.getValueAndResolveTokens(\"text-field\", _g6, n, d),\n                    _e128 = Lt.factory(_t126);\n\n                zu(_e128) && (this.hasRTLText = !0), (!this.hasRTLText || \"unavailable\" === Gn() || this.hasRTLText && Xn.isParsed()) && (_x6 = Wo(_e128, i, _g6));\n              }\n\n              if (c) {\n                var _t127 = i.getValueAndResolveTokens(\"icon-image\", _g6, n, d);\n\n                _v3 = _t127 instanceof Dt ? _t127 : Dt.fromString(_t127);\n              }\n\n              if (!_x6 && !_v3) continue;\n\n              var _b5 = this.sortFeaturesByKey ? h.evaluate(_g6, {}, n) : void 0;\n\n              if (this.features.push({\n                id: _o28,\n                text: _x6,\n                icon: _v3,\n                index: _l25,\n                sourceLayerIndex: _m7,\n                geometry: _g6.geometry,\n                properties: _r128.properties,\n                type: _u[_r128.type],\n                sortKey: _b5\n              }), _v3 && (p[_v3.name] = !0), _x6) {\n                var _e129 = a.evaluate(_g6, {}, n).join(\",\"),\n                    _r129 = \"viewport\" !== s.get(\"text-rotation-alignment\") && \"point\" !== s.get(\"symbol-placement\");\n\n                this.allowVerticalPlacement = this.writingModes && this.writingModes.indexOf(t.WritingMode.vertical) >= 0;\n\n                var _iterator100 = _createForOfIteratorHelper(_x6.sections),\n                    _step100;\n\n                try {\n                  for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {\n                    var _t128 = _step100.value;\n                    if (_t128.image) p[_t128.image.name] = !0;else {\n                      var _n89 = Cn(_x6.toString()),\n                          _i89 = _t128.fontStack || _e129,\n                          _s66 = f[_i89] = f[_i89] || {};\n\n                      this.calculateGlyphDependencies(_t128.text, _s66, _r129, this.allowVerticalPlacement, _n89);\n                    }\n                  }\n                } catch (err) {\n                  _iterator100.e(err);\n                } finally {\n                  _iterator100.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator99.e(err);\n          } finally {\n            _iterator99.f();\n          }\n\n          \"line\" === s.get(\"symbol-placement\") && (this.features = function (t) {\n            var e = {},\n                r = {},\n                n = [];\n            var i = 0;\n\n            function s(e) {\n              n.push(t[e]), i++;\n            }\n\n            function a(t, e, i) {\n              var s = r[t];\n              return delete r[t], r[e] = s, n[s].geometry[0].pop(), n[s].geometry[0] = n[s].geometry[0].concat(i[0]), s;\n            }\n\n            function o(t, r, i) {\n              var s = e[r];\n              return delete e[r], e[t] = s, n[s].geometry[0].shift(), n[s].geometry[0] = i[0].concat(n[s].geometry[0]), s;\n            }\n\n            function l(t, e, r) {\n              var n = r ? e[0][e[0].length - 1] : e[0][0];\n              return \"\".concat(t, \":\").concat(n.x, \":\").concat(n.y);\n            }\n\n            for (var _u19 = 0; _u19 < t.length; _u19++) {\n              var _c13 = t[_u19],\n                  _h10 = _c13.geometry,\n                  _p8 = _c13.text ? _c13.text.toString() : null;\n\n              if (!_p8) {\n                s(_u19);\n                continue;\n              }\n\n              var _f6 = l(_p8, _h10),\n                  _d4 = l(_p8, _h10, !0);\n\n              if (_f6 in r && _d4 in e && r[_f6] !== e[_d4]) {\n                var _t125 = o(_f6, _d4, _h10),\n                    _i88 = a(_f6, _d4, n[_t125].geometry);\n\n                delete e[_f6], delete r[_d4], r[l(_p8, n[_i88].geometry, !0)] = _i88, n[_t125].geometry = null;\n              } else _f6 in r ? a(_f6, _d4, _h10) : _d4 in e ? o(_f6, _d4, _h10) : (s(_u19), e[_f6] = i - 1, r[_d4] = i - 1);\n            }\n\n            return n.filter(function (t) {\n              return t.geometry;\n            });\n          }(this.features)), this.sortFeaturesByKey && this.features.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          });\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, e, r) {\n          this.stateDependentLayers.length && (this.text.programConfigurations.updatePaintArrays(t, e, this.layers, r), this.icon.programConfigurations.updatePaintArrays(t, e, this.layers, r));\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return 0 === this.symbolInstances.length && !this.hasRTLText;\n        }\n      }, {\n        key: \"uploadPending\",\n        value: function uploadPending() {\n          return !this.uploaded || this.text.programConfigurations.needsUpload || this.icon.programConfigurations.needsUpload;\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          !this.uploaded && this.hasDebugData() && (this.textCollisionBox.upload(t), this.iconCollisionBox.upload(t)), this.text.upload(t, this.sortFeaturesByY, !this.uploaded, this.text.programConfigurations.needsUpload), this.icon.upload(t, this.sortFeaturesByY, !this.uploaded, this.icon.programConfigurations.needsUpload), this.uploaded = !0;\n        }\n      }, {\n        key: \"destroyDebugData\",\n        value: function destroyDebugData() {\n          this.textCollisionBox.destroy(), this.iconCollisionBox.destroy();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.text.destroy(), this.icon.destroy(), this.hasDebugData() && this.destroyDebugData();\n        }\n      }, {\n        key: \"addToLineVertexArray\",\n        value: function addToLineVertexArray(t, e) {\n          var r = this.lineVertexArray.length;\n\n          if (void 0 !== t.segment) {\n            var _r130 = t.dist(e[t.segment + 1]),\n                _n90 = t.dist(e[t.segment]);\n\n            var _i90 = {};\n\n            for (var _n91 = t.segment + 1; _n91 < e.length; _n91++) {\n              _i90[_n91] = {\n                x: e[_n91].x,\n                y: e[_n91].y,\n                tileUnitDistanceFromAnchor: _r130\n              }, _n91 < e.length - 1 && (_r130 += e[_n91 + 1].dist(e[_n91]));\n            }\n\n            for (var _r131 = t.segment || 0; _r131 >= 0; _r131--) {\n              _i90[_r131] = {\n                x: e[_r131].x,\n                y: e[_r131].y,\n                tileUnitDistanceFromAnchor: _n90\n              }, _r131 > 0 && (_n90 += e[_r131 - 1].dist(e[_r131]));\n            }\n\n            for (var _t129 = 0; _t129 < e.length; _t129++) {\n              var _e130 = _i90[_t129];\n              this.lineVertexArray.emplaceBack(_e130.x, _e130.y, _e130.tileUnitDistanceFromAnchor);\n            }\n          }\n\n          return {\n            lineStartIndex: r,\n            lineLength: this.lineVertexArray.length - r\n          };\n        }\n      }, {\n        key: \"addSymbols\",\n        value: function addSymbols(e, r, n, i, s, a, o, l, u, c, h, p) {\n          var f = e.indexArray,\n              d = e.layoutVertexArray,\n              y = e.segments.prepareSegment(4 * r.length, d, f, this.canOverlap ? a.sortKey : void 0),\n              m = this.glyphOffsetArray.length,\n              g = y.vertexLength,\n              x = this.allowVerticalPlacement && o === t.WritingMode.vertical ? Math.PI / 2 : 0,\n              v = a.text && a.text.sections;\n\n          for (var _t130 = 0; _t130 < r.length; _t130++) {\n            var _r$_t = r[_t130],\n                _i91 = _r$_t.tl,\n                _s67 = _r$_t.tr,\n                _o29 = _r$_t.bl,\n                _u20 = _r$_t.br,\n                _c14 = _r$_t.tex,\n                _h11 = _r$_t.pixelOffsetTL,\n                _m8 = _r$_t.pixelOffsetBR,\n                _g7 = _r$_t.minFontScaleX,\n                _b6 = _r$_t.minFontScaleY,\n                _w4 = _r$_t.glyphOffset,\n                _5 = _r$_t.isSDF,\n                _A5 = _r$_t.sectionIndex,\n                _k4 = y.vertexLength,\n                _S3 = _w4[1];\n            ku(d, l.x, l.y, _i91.x, _S3 + _i91.y, _c14.x, _c14.y, n, _5, _h11.x, _h11.y, _g7, _b6), ku(d, l.x, l.y, _s67.x, _S3 + _s67.y, _c14.x + _c14.w, _c14.y, n, _5, _m8.x, _h11.y, _g7, _b6), ku(d, l.x, l.y, _o29.x, _S3 + _o29.y, _c14.x, _c14.y + _c14.h, n, _5, _h11.x, _m8.y, _g7, _b6), ku(d, l.x, l.y, _u20.x, _S3 + _u20.y, _c14.x + _c14.w, _c14.y + _c14.h, n, _5, _m8.x, _m8.y, _g7, _b6), Su(e.dynamicLayoutVertexArray, l, x), f.emplaceBack(_k4, _k4 + 1, _k4 + 2), f.emplaceBack(_k4 + 1, _k4 + 2, _k4 + 3), y.vertexLength += 4, y.primitiveLength += 2, this.glyphOffsetArray.emplaceBack(_w4[0]), _t130 !== r.length - 1 && _A5 === r[_t130 + 1].sectionIndex || e.programConfigurations.populatePaintArrays(d.length, a, a.index, {}, p, v && v[_A5]);\n          }\n\n          e.placedSymbolArray.emplaceBack(l.x, l.y, m, this.glyphOffsetArray.length - m, g, u, c, l.segment, n ? n[0] : 0, n ? n[1] : 0, i[0], i[1], o, 0, !1, 0, h);\n        }\n      }, {\n        key: \"_addCollisionDebugVertex\",\n        value: function _addCollisionDebugVertex(t, e, r, n, i, s) {\n          return e.emplaceBack(0, 0), t.emplaceBack(r.x, r.y, n, i, Math.round(s.x), Math.round(s.y));\n        }\n      }, {\n        key: \"addCollisionDebugVertices\",\n        value: function addCollisionDebugVertices(t, e, r, n, i, s, a) {\n          var o = i.segments.prepareSegment(4, i.layoutVertexArray, i.indexArray),\n              l = o.vertexLength,\n              u = i.layoutVertexArray,\n              c = i.collisionVertexArray,\n              h = a.anchorX,\n              p = a.anchorY;\n          this._addCollisionDebugVertex(u, c, s, h, p, new S(t, e)), this._addCollisionDebugVertex(u, c, s, h, p, new S(r, e)), this._addCollisionDebugVertex(u, c, s, h, p, new S(r, n)), this._addCollisionDebugVertex(u, c, s, h, p, new S(t, n)), o.vertexLength += 4;\n          var f = i.indexArray;\n          f.emplaceBack(l, l + 1), f.emplaceBack(l + 1, l + 2), f.emplaceBack(l + 2, l + 3), f.emplaceBack(l + 3, l), o.primitiveLength += 4;\n        }\n      }, {\n        key: \"addDebugCollisionBoxes\",\n        value: function addDebugCollisionBoxes(t, e, r, n) {\n          for (var _i92 = t; _i92 < e; _i92++) {\n            var _t131 = this.collisionBoxArray.get(_i92);\n\n            this.addCollisionDebugVertices(_t131.x1, _t131.y1, _t131.x2, _t131.y2, n ? this.textCollisionBox : this.iconCollisionBox, _t131.anchorPoint, r);\n          }\n        }\n      }, {\n        key: \"generateCollisionDebugBuffers\",\n        value: function generateCollisionDebugBuffers() {\n          this.hasDebugData() && this.destroyDebugData(), this.textCollisionBox = new Mu(ss, Yo.members, ls), this.iconCollisionBox = new Mu(ss, Yo.members, ls);\n\n          for (var _t132 = 0; _t132 < this.symbolInstances.length; _t132++) {\n            var _e131 = this.symbolInstances.get(_t132);\n\n            this.addDebugCollisionBoxes(_e131.textBoxStartIndex, _e131.textBoxEndIndex, _e131, !0), this.addDebugCollisionBoxes(_e131.verticalTextBoxStartIndex, _e131.verticalTextBoxEndIndex, _e131, !0), this.addDebugCollisionBoxes(_e131.iconBoxStartIndex, _e131.iconBoxEndIndex, _e131, !1), this.addDebugCollisionBoxes(_e131.verticalIconBoxStartIndex, _e131.verticalIconBoxEndIndex, _e131, !1);\n          }\n        }\n      }, {\n        key: \"_deserializeCollisionBoxesForSymbol\",\n        value: function _deserializeCollisionBoxesForSymbol(t, e, r, n, i, s, a, o, l) {\n          var u = {};\n\n          for (var _n92 = e; _n92 < r; _n92++) {\n            var _e132 = t.get(_n92);\n\n            u.textBox = {\n              x1: _e132.x1,\n              y1: _e132.y1,\n              x2: _e132.x2,\n              y2: _e132.y2,\n              anchorPointX: _e132.anchorPointX,\n              anchorPointY: _e132.anchorPointY\n            }, u.textFeatureIndex = _e132.featureIndex;\n            break;\n          }\n\n          for (var _e133 = n; _e133 < i; _e133++) {\n            var _r132 = t.get(_e133);\n\n            u.verticalTextBox = {\n              x1: _r132.x1,\n              y1: _r132.y1,\n              x2: _r132.x2,\n              y2: _r132.y2,\n              anchorPointX: _r132.anchorPointX,\n              anchorPointY: _r132.anchorPointY\n            }, u.verticalTextFeatureIndex = _r132.featureIndex;\n            break;\n          }\n\n          for (var _e134 = s; _e134 < a; _e134++) {\n            var _r133 = t.get(_e134);\n\n            u.iconBox = {\n              x1: _r133.x1,\n              y1: _r133.y1,\n              x2: _r133.x2,\n              y2: _r133.y2,\n              anchorPointX: _r133.anchorPointX,\n              anchorPointY: _r133.anchorPointY\n            }, u.iconFeatureIndex = _r133.featureIndex;\n            break;\n          }\n\n          for (var _e135 = o; _e135 < l; _e135++) {\n            var _r134 = t.get(_e135);\n\n            u.verticalIconBox = {\n              x1: _r134.x1,\n              y1: _r134.y1,\n              x2: _r134.x2,\n              y2: _r134.y2,\n              anchorPointX: _r134.anchorPointX,\n              anchorPointY: _r134.anchorPointY\n            }, u.verticalIconFeatureIndex = _r134.featureIndex;\n            break;\n          }\n\n          return u;\n        }\n      }, {\n        key: \"deserializeCollisionBoxes\",\n        value: function deserializeCollisionBoxes(t) {\n          this.collisionArrays = [];\n\n          for (var _e136 = 0; _e136 < this.symbolInstances.length; _e136++) {\n            var _r135 = this.symbolInstances.get(_e136);\n\n            this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t, _r135.textBoxStartIndex, _r135.textBoxEndIndex, _r135.verticalTextBoxStartIndex, _r135.verticalTextBoxEndIndex, _r135.iconBoxStartIndex, _r135.iconBoxEndIndex, _r135.verticalIconBoxStartIndex, _r135.verticalIconBoxEndIndex));\n          }\n        }\n      }, {\n        key: \"hasTextData\",\n        value: function hasTextData() {\n          return this.text.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasIconData\",\n        value: function hasIconData() {\n          return this.icon.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasDebugData\",\n        value: function hasDebugData() {\n          return this.textCollisionBox && this.iconCollisionBox;\n        }\n      }, {\n        key: \"hasTextCollisionBoxData\",\n        value: function hasTextCollisionBoxData() {\n          return this.hasDebugData() && this.textCollisionBox.segments.get().length > 0;\n        }\n      }, {\n        key: \"hasIconCollisionBoxData\",\n        value: function hasIconCollisionBoxData() {\n          return this.hasDebugData() && this.iconCollisionBox.segments.get().length > 0;\n        }\n      }, {\n        key: \"addIndicesForPlacedSymbol\",\n        value: function addIndicesForPlacedSymbol(t, e) {\n          var r = t.placedSymbolArray.get(e),\n              n = r.vertexStartIndex + 4 * r.numGlyphs;\n\n          for (var _e137 = r.vertexStartIndex; _e137 < n; _e137 += 4) {\n            t.indexArray.emplaceBack(_e137, _e137 + 1, _e137 + 2), t.indexArray.emplaceBack(_e137 + 1, _e137 + 2, _e137 + 3);\n          }\n        }\n      }, {\n        key: \"getSortedSymbolIndexes\",\n        value: function getSortedSymbolIndexes(t) {\n          if (this.sortedAngle === t && void 0 !== this.symbolInstanceIndexes) return this.symbolInstanceIndexes;\n          var e = Math.sin(t),\n              r = Math.cos(t),\n              n = [],\n              i = [],\n              s = [];\n\n          for (var _t133 = 0; _t133 < this.symbolInstances.length; ++_t133) {\n            s.push(_t133);\n\n            var _a58 = this.symbolInstances.get(_t133);\n\n            n.push(0 | Math.round(e * _a58.anchorX + r * _a58.anchorY)), i.push(_a58.featureIndex);\n          }\n\n          return s.sort(function (t, e) {\n            return n[t] - n[e] || i[e] - i[t];\n          }), s;\n        }\n      }, {\n        key: \"addToSortKeyRanges\",\n        value: function addToSortKeyRanges(t, e) {\n          var r = this.sortKeyRanges[this.sortKeyRanges.length - 1];\n          r && r.sortKey === e ? r.symbolInstanceEnd = t + 1 : this.sortKeyRanges.push({\n            sortKey: e,\n            symbolInstanceStart: t,\n            symbolInstanceEnd: t + 1\n          });\n        }\n      }, {\n        key: \"sortFeatures\",\n        value: function sortFeatures(t) {\n          var _this11 = this;\n\n          if (this.sortFeaturesByY && this.sortedAngle !== t && !(this.text.segments.get().length > 1 || this.icon.segments.get().length > 1)) {\n            this.symbolInstanceIndexes = this.getSortedSymbolIndexes(t), this.sortedAngle = t, this.text.indexArray.clear(), this.icon.indexArray.clear(), this.featureSortOrder = [];\n\n            var _iterator101 = _createForOfIteratorHelper(this.symbolInstanceIndexes),\n                _step101;\n\n            try {\n              for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {\n                var _t134 = _step101.value;\n\n                var _e138 = this.symbolInstances.get(_t134);\n\n                this.featureSortOrder.push(_e138.featureIndex), [_e138.rightJustifiedTextSymbolIndex, _e138.centerJustifiedTextSymbolIndex, _e138.leftJustifiedTextSymbolIndex].forEach(function (t, e, r) {\n                  t >= 0 && r.indexOf(t) === e && _this11.addIndicesForPlacedSymbol(_this11.text, t);\n                }), _e138.verticalPlacedTextSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.text, _e138.verticalPlacedTextSymbolIndex), _e138.placedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, _e138.placedIconSymbolIndex), _e138.verticalPlacedIconSymbolIndex >= 0 && this.addIndicesForPlacedSymbol(this.icon, _e138.verticalPlacedIconSymbolIndex);\n              }\n            } catch (err) {\n              _iterator101.e(err);\n            } finally {\n              _iterator101.f();\n            }\n\n            this.text.indexBuffer && this.text.indexBuffer.updateData(this.text.indexArray), this.icon.indexBuffer && this.icon.indexBuffer.updateData(this.icon.indexArray);\n          }\n        }\n      }]);\n\n      return Bu;\n    }();\n\n    kn(\"SymbolBucket\", Bu, {\n      omit: [\"layers\", \"collisionBoxArray\", \"features\", \"compareText\"]\n    }), Bu.MAX_GLYPHS = 65535, Bu.addDynamicAttributes = Su;\n    var Cu = new ci({\n      \"symbol-placement\": new si(nt.layout_symbol[\"symbol-placement\"]),\n      \"symbol-spacing\": new si(nt.layout_symbol[\"symbol-spacing\"]),\n      \"symbol-avoid-edges\": new si(nt.layout_symbol[\"symbol-avoid-edges\"]),\n      \"symbol-sort-key\": new ai(nt.layout_symbol[\"symbol-sort-key\"]),\n      \"symbol-z-order\": new si(nt.layout_symbol[\"symbol-z-order\"]),\n      \"icon-allow-overlap\": new si(nt.layout_symbol[\"icon-allow-overlap\"]),\n      \"icon-overlap\": new si(nt.layout_symbol[\"icon-overlap\"]),\n      \"icon-ignore-placement\": new si(nt.layout_symbol[\"icon-ignore-placement\"]),\n      \"icon-optional\": new si(nt.layout_symbol[\"icon-optional\"]),\n      \"icon-rotation-alignment\": new si(nt.layout_symbol[\"icon-rotation-alignment\"]),\n      \"icon-size\": new ai(nt.layout_symbol[\"icon-size\"]),\n      \"icon-text-fit\": new si(nt.layout_symbol[\"icon-text-fit\"]),\n      \"icon-text-fit-padding\": new si(nt.layout_symbol[\"icon-text-fit-padding\"]),\n      \"icon-image\": new ai(nt.layout_symbol[\"icon-image\"]),\n      \"icon-rotate\": new ai(nt.layout_symbol[\"icon-rotate\"]),\n      \"icon-padding\": new si(nt.layout_symbol[\"icon-padding\"]),\n      \"icon-keep-upright\": new si(nt.layout_symbol[\"icon-keep-upright\"]),\n      \"icon-offset\": new ai(nt.layout_symbol[\"icon-offset\"]),\n      \"icon-anchor\": new ai(nt.layout_symbol[\"icon-anchor\"]),\n      \"icon-pitch-alignment\": new si(nt.layout_symbol[\"icon-pitch-alignment\"]),\n      \"text-pitch-alignment\": new si(nt.layout_symbol[\"text-pitch-alignment\"]),\n      \"text-rotation-alignment\": new si(nt.layout_symbol[\"text-rotation-alignment\"]),\n      \"text-field\": new ai(nt.layout_symbol[\"text-field\"]),\n      \"text-font\": new ai(nt.layout_symbol[\"text-font\"]),\n      \"text-size\": new ai(nt.layout_symbol[\"text-size\"]),\n      \"text-max-width\": new ai(nt.layout_symbol[\"text-max-width\"]),\n      \"text-line-height\": new si(nt.layout_symbol[\"text-line-height\"]),\n      \"text-letter-spacing\": new ai(nt.layout_symbol[\"text-letter-spacing\"]),\n      \"text-justify\": new ai(nt.layout_symbol[\"text-justify\"]),\n      \"text-radial-offset\": new ai(nt.layout_symbol[\"text-radial-offset\"]),\n      \"text-variable-anchor\": new si(nt.layout_symbol[\"text-variable-anchor\"]),\n      \"text-anchor\": new ai(nt.layout_symbol[\"text-anchor\"]),\n      \"text-max-angle\": new si(nt.layout_symbol[\"text-max-angle\"]),\n      \"text-writing-mode\": new si(nt.layout_symbol[\"text-writing-mode\"]),\n      \"text-rotate\": new ai(nt.layout_symbol[\"text-rotate\"]),\n      \"text-padding\": new si(nt.layout_symbol[\"text-padding\"]),\n      \"text-keep-upright\": new si(nt.layout_symbol[\"text-keep-upright\"]),\n      \"text-transform\": new ai(nt.layout_symbol[\"text-transform\"]),\n      \"text-offset\": new ai(nt.layout_symbol[\"text-offset\"]),\n      \"text-allow-overlap\": new si(nt.layout_symbol[\"text-allow-overlap\"]),\n      \"text-overlap\": new si(nt.layout_symbol[\"text-overlap\"]),\n      \"text-ignore-placement\": new si(nt.layout_symbol[\"text-ignore-placement\"]),\n      \"text-optional\": new si(nt.layout_symbol[\"text-optional\"])\n    });\n    var Pu = {\n      paint: new ci({\n        \"icon-opacity\": new ai(nt.paint_symbol[\"icon-opacity\"]),\n        \"icon-color\": new ai(nt.paint_symbol[\"icon-color\"]),\n        \"icon-halo-color\": new ai(nt.paint_symbol[\"icon-halo-color\"]),\n        \"icon-halo-width\": new ai(nt.paint_symbol[\"icon-halo-width\"]),\n        \"icon-halo-blur\": new ai(nt.paint_symbol[\"icon-halo-blur\"]),\n        \"icon-translate\": new si(nt.paint_symbol[\"icon-translate\"]),\n        \"icon-translate-anchor\": new si(nt.paint_symbol[\"icon-translate-anchor\"]),\n        \"text-opacity\": new ai(nt.paint_symbol[\"text-opacity\"]),\n        \"text-color\": new ai(nt.paint_symbol[\"text-color\"], {\n          runtimeType: yt,\n          getOverride: function getOverride(t) {\n            return t.textColor;\n          },\n          hasOverride: function hasOverride(t) {\n            return !!t.textColor;\n          }\n        }),\n        \"text-halo-color\": new ai(nt.paint_symbol[\"text-halo-color\"]),\n        \"text-halo-width\": new ai(nt.paint_symbol[\"text-halo-width\"]),\n        \"text-halo-blur\": new ai(nt.paint_symbol[\"text-halo-blur\"]),\n        \"text-translate\": new si(nt.paint_symbol[\"text-translate\"]),\n        \"text-translate-anchor\": new si(nt.paint_symbol[\"text-translate-anchor\"])\n      }),\n      layout: Cu\n    };\n\n    var Vu = /*#__PURE__*/function () {\n      function Vu(t) {\n        _classCallCheck(this, Vu);\n\n        this.type = t.property.overrides ? t.property.overrides.runtimeType : ht, this.defaultValue = t;\n      }\n\n      _createClass(Vu, [{\n        key: \"evaluate\",\n        value: function evaluate(t) {\n          if (t.formattedSection) {\n            var _e139 = this.defaultValue.property.overrides;\n            if (_e139 && _e139.hasOverride(t.formattedSection)) return _e139.getOverride(t.formattedSection);\n          }\n\n          return t.feature && t.featureState ? this.defaultValue.evaluate(t.feature, t.featureState) : this.defaultValue.property.specification.default;\n        }\n      }, {\n        key: \"eachChild\",\n        value: function eachChild(t) {\n          this.defaultValue.isConstant() || t(this.defaultValue.value._styleExpression.expression);\n        }\n      }, {\n        key: \"outputDefined\",\n        value: function outputDefined() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return null;\n        }\n      }]);\n\n      return Vu;\n    }();\n\n    kn(\"FormatSectionOverride\", Vu, {\n      omit: [\"defaultValue\"]\n    });\n\n    var Eu = /*#__PURE__*/function (_pi) {\n      _inherits(Eu, _pi);\n\n      function Eu(t) {\n        _classCallCheck(this, Eu);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Eu).call(this, t, Pu));\n      }\n\n      _createClass(Eu, [{\n        key: \"recalculate\",\n        value: function recalculate(t, e) {\n          if (_get(_getPrototypeOf(Eu.prototype), \"recalculate\", this).call(this, t, e), \"auto\" === this.layout.get(\"icon-rotation-alignment\") && (this.layout._values[\"icon-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-rotation-alignment\") && (this.layout._values[\"text-rotation-alignment\"] = \"point\" !== this.layout.get(\"symbol-placement\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"text-pitch-alignment\") && (this.layout._values[\"text-pitch-alignment\"] = \"map\" === this.layout.get(\"text-rotation-alignment\") ? \"map\" : \"viewport\"), \"auto\" === this.layout.get(\"icon-pitch-alignment\") && (this.layout._values[\"icon-pitch-alignment\"] = this.layout.get(\"icon-rotation-alignment\")), \"point\" === this.layout.get(\"symbol-placement\")) {\n            var _t135 = this.layout.get(\"text-writing-mode\");\n\n            if (_t135) {\n              var _e140 = [];\n\n              var _iterator102 = _createForOfIteratorHelper(_t135),\n                  _step102;\n\n              try {\n                for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {\n                  var _r136 = _step102.value;\n                  _e140.indexOf(_r136) < 0 && _e140.push(_r136);\n                }\n              } catch (err) {\n                _iterator102.e(err);\n              } finally {\n                _iterator102.f();\n              }\n\n              this.layout._values[\"text-writing-mode\"] = _e140;\n            } else this.layout._values[\"text-writing-mode\"] = [\"horizontal\"];\n          }\n\n          this._setPaintOverrides();\n        }\n      }, {\n        key: \"getValueAndResolveTokens\",\n        value: function getValueAndResolveTokens(t, e, r, n) {\n          var i = this.layout.get(t).evaluate(e, {}, r, n),\n              s = this._unevaluatedLayout._values[t];\n          return s.isDataDriven() || Pr(s.value) || !i ? i : function (t, e) {\n            return e.replace(/{([^{}]+)}/g, function (e, r) {\n              return r in t ? String(t[r]) : \"\";\n            });\n          }(e.properties, i);\n        }\n      }, {\n        key: \"createBucket\",\n        value: function createBucket(t) {\n          return new Bu(t);\n        }\n      }, {\n        key: \"queryRadius\",\n        value: function queryRadius() {\n          return 0;\n        }\n      }, {\n        key: \"queryIntersectsFeature\",\n        value: function queryIntersectsFeature() {\n          return !1;\n        }\n      }, {\n        key: \"_setPaintOverrides\",\n        value: function _setPaintOverrides() {\n          var _iterator103 = _createForOfIteratorHelper(Pu.paint.overridableProperties),\n              _step103;\n\n          try {\n            for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {\n              var _t136 = _step103.value;\n              if (!Eu.hasPaintOverride(this.layout, _t136)) continue;\n\n              var _e141 = this.paint.get(_t136),\n                  _r137 = new Vu(_e141),\n                  _n93 = new Cr(_r137, _e141.property.specification);\n\n              var _i93 = null;\n              _i93 = \"constant\" === _e141.value.kind || \"source\" === _e141.value.kind ? new Er(\"source\", _n93) : new Fr(\"composite\", _n93, _e141.value.zoomStops, _e141.value._interpolationType), this.paint._values[_t136] = new ni(_e141.property, _i93, _e141.parameters);\n            }\n          } catch (err) {\n            _iterator103.e(err);\n          } finally {\n            _iterator103.f();\n          }\n        }\n      }, {\n        key: \"_handleOverridablePaintPropertyUpdate\",\n        value: function _handleOverridablePaintPropertyUpdate(t, e, r) {\n          return !(!this.layout || e.isDataDriven() || r.isDataDriven()) && Eu.hasPaintOverride(this.layout, t);\n        }\n      }], [{\n        key: \"hasPaintOverride\",\n        value: function hasPaintOverride(t, e) {\n          var r = t.get(\"text-field\"),\n              n = Pu.paint.properties[e];\n          var i = !1;\n\n          var s = function s(t) {\n            var _iterator104 = _createForOfIteratorHelper(t),\n                _step104;\n\n            try {\n              for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {\n                var _e142 = _step104.value;\n                if (n.overrides && n.overrides.hasOverride(_e142)) return void (i = !0);\n              }\n            } catch (err) {\n              _iterator104.e(err);\n            } finally {\n              _iterator104.f();\n            }\n          };\n\n          if (\"constant\" === r.value.kind && r.value.value instanceof Lt) s(r.value.value.sections);else if (\"source\" === r.value.kind) {\n            var _t137 = function _t137(e) {\n              i || (e instanceof qt && Ut(e.value) === vt ? s(e.value.sections) : e instanceof Zt ? s(e.sections) : e.eachChild(_t137));\n            },\n                _e143 = r.value;\n\n            _e143._styleExpression && _t137(_e143._styleExpression.expression);\n          }\n          return i;\n        }\n      }]);\n\n      return Eu;\n    }(pi);\n\n    function Fu(t, e, r) {\n      var n = \"never\";\n      var i = t.get(e);\n      return i ? n = i : t.get(r) && (n = \"always\"), n;\n    }\n\n    var Tu = {\n      paint: new ci({\n        \"background-color\": new si(nt.paint_background[\"background-color\"]),\n        \"background-pattern\": new li(nt.paint_background[\"background-pattern\"]),\n        \"background-opacity\": new si(nt.paint_background[\"background-opacity\"])\n      })\n    },\n        Lu = {\n      paint: new ci({\n        \"raster-opacity\": new si(nt.paint_raster[\"raster-opacity\"]),\n        \"raster-hue-rotate\": new si(nt.paint_raster[\"raster-hue-rotate\"]),\n        \"raster-brightness-min\": new si(nt.paint_raster[\"raster-brightness-min\"]),\n        \"raster-brightness-max\": new si(nt.paint_raster[\"raster-brightness-max\"]),\n        \"raster-saturation\": new si(nt.paint_raster[\"raster-saturation\"]),\n        \"raster-contrast\": new si(nt.paint_raster[\"raster-contrast\"]),\n        \"raster-resampling\": new si(nt.paint_raster[\"raster-resampling\"]),\n        \"raster-fade-duration\": new si(nt.paint_raster[\"raster-fade-duration\"])\n      })\n    };\n\n    var Du = /*#__PURE__*/function (_pi2) {\n      _inherits(Du, _pi2);\n\n      function Du(t) {\n        var _this12;\n\n        _classCallCheck(this, Du);\n\n        _this12 = _possibleConstructorReturn(this, _getPrototypeOf(Du).call(this, t, {})), _this12.onAdd = function (t) {\n          _this12.implementation.onAdd && _this12.implementation.onAdd(t, t.painter.context.gl);\n        }, _this12.onRemove = function (t) {\n          _this12.implementation.onRemove && _this12.implementation.onRemove(t, t.painter.context.gl);\n        }, _this12.implementation = t;\n        return _this12;\n      }\n\n      _createClass(Du, [{\n        key: \"is3D\",\n        value: function is3D() {\n          return \"3d\" === this.implementation.renderingMode;\n        }\n      }, {\n        key: \"hasOffscreenPass\",\n        value: function hasOffscreenPass() {\n          return void 0 !== this.implementation.prerender;\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate() {}\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions() {}\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {}\n      }]);\n\n      return Du;\n    }(pi);\n\n    var $u = {\n      circle: /*#__PURE__*/function (_pi3) {\n        _inherits(circle, _pi3);\n\n        function circle(t) {\n          _classCallCheck(this, circle);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(circle).call(this, t, oa));\n        }\n\n        _createClass(circle, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new Ks(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius(t) {\n            var e = t;\n            return na(\"circle-radius\", this, e) + na(\"circle-stroke-width\", this, e) + ia(this.paint.get(\"circle-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, s, a, o) {\n            var l = sa(t, this.paint.get(\"circle-translate\"), this.paint.get(\"circle-translate-anchor\"), s.angle, a),\n                u = this.paint.get(\"circle-radius\").evaluate(e, r) + this.paint.get(\"circle-stroke-width\").evaluate(e, r),\n                c = \"map\" === this.paint.get(\"circle-pitch-alignment\"),\n                h = c ? l : function (t, e) {\n              return t.map(function (t) {\n                return da(t, e);\n              });\n            }(l, o),\n                p = c ? u * a : u;\n\n            var _iterator105 = _createForOfIteratorHelper(n),\n                _step105;\n\n            try {\n              for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {\n                var _t138 = _step105.value;\n\n                var _iterator106 = _createForOfIteratorHelper(_t138),\n                    _step106;\n\n                try {\n                  for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {\n                    var _e144 = _step106.value;\n\n                    var _t139 = c ? _e144 : da(_e144, o);\n\n                    var _r138 = p;\n\n                    var _n94 = fa([], [_e144.x, _e144.y, 0, 1], o);\n\n                    if (\"viewport\" === this.paint.get(\"circle-pitch-scale\") && \"map\" === this.paint.get(\"circle-pitch-alignment\") ? _r138 *= _n94[3] / s.cameraToCenterDistance : \"map\" === this.paint.get(\"circle-pitch-scale\") && \"viewport\" === this.paint.get(\"circle-pitch-alignment\") && (_r138 *= s.cameraToCenterDistance / _n94[3]), Gs(h, _t139, _r138)) return !0;\n                  }\n                } catch (err) {\n                  _iterator106.e(err);\n                } finally {\n                  _iterator106.f();\n                }\n              }\n            } catch (err) {\n              _iterator105.e(err);\n            } finally {\n              _iterator105.f();\n            }\n\n            return !1;\n          }\n        }]);\n\n        return circle;\n      }(pi),\n      heatmap: /*#__PURE__*/function (_pi4) {\n        _inherits(heatmap, _pi4);\n\n        function heatmap(t) {\n          var _this13;\n\n          _classCallCheck(this, heatmap);\n\n          _this13 = _possibleConstructorReturn(this, _getPrototypeOf(heatmap).call(this, t, ma)), _this13._updateColorRamp();\n          return _this13;\n        }\n\n        _createClass(heatmap, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new ya(t);\n          }\n        }, {\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"heatmap-color\" === t && this._updateColorRamp();\n          }\n        }, {\n          key: \"_updateColorRamp\",\n          value: function _updateColorRamp() {\n            this.colorRamp = _a({\n              expression: this._transitionablePaint._values[\"heatmap-color\"].value.expression,\n              evaluationKey: \"heatmapDensity\",\n              image: this.colorRamp\n            }), this.colorRampTexture = null;\n          }\n        }, {\n          key: \"resize\",\n          value: function resize() {\n            this.heatmapFbo && (this.heatmapFbo.destroy(), this.heatmapFbo = null);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return 0;\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature() {\n            return !1;\n          }\n        }, {\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return 0 !== this.paint.get(\"heatmap-opacity\") && \"none\" !== this.visibility;\n          }\n        }]);\n\n        return heatmap;\n      }(pi),\n      hillshade: /*#__PURE__*/function (_pi5) {\n        _inherits(hillshade, _pi5);\n\n        function hillshade(t) {\n          _classCallCheck(this, hillshade);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(hillshade).call(this, t, Aa));\n        }\n\n        _createClass(hillshade, [{\n          key: \"hasOffscreenPass\",\n          value: function hasOffscreenPass() {\n            return 0 !== this.paint.get(\"hillshade-exaggeration\") && \"none\" !== this.visibility;\n          }\n        }]);\n\n        return hillshade;\n      }(pi),\n      fill: /*#__PURE__*/function (_pi6) {\n        _inherits(fill, _pi6);\n\n        function fill(t) {\n          _classCallCheck(this, fill);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(fill).call(this, t, co));\n        }\n\n        _createClass(fill, [{\n          key: \"recalculate\",\n          value: function recalculate(t, e) {\n            _get(_getPrototypeOf(fill.prototype), \"recalculate\", this).call(this, t, e);\n\n            var r = this.paint._values[\"fill-outline-color\"];\n            \"constant\" === r.value.kind && void 0 === r.value.value && (this.paint._values[\"fill-outline-color\"] = this.paint._values[\"fill-color\"]);\n          }\n        }, {\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new lo(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return ia(this.paint.get(\"fill-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, s, a) {\n            return Js(sa(t, this.paint.get(\"fill-translate\"), this.paint.get(\"fill-translate-anchor\"), s.angle, a), n);\n          }\n        }, {\n          key: \"isTileClipped\",\n          value: function isTileClipped() {\n            return !0;\n          }\n        }]);\n\n        return fill;\n      }(pi),\n      \"fill-extrusion\": /*#__PURE__*/function (_pi7) {\n        _inherits(fillExtrusion, _pi7);\n\n        function fillExtrusion(t) {\n          _classCallCheck(this, fillExtrusion);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(fillExtrusion).call(this, t, Vo));\n        }\n\n        _createClass(fillExtrusion, [{\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new Bo(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius() {\n            return ia(this.paint.get(\"fill-extrusion-translate\"));\n          }\n        }, {\n          key: \"is3D\",\n          value: function is3D() {\n            return !0;\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, s, a, o) {\n            var l = sa(t, this.paint.get(\"fill-extrusion-translate\"), this.paint.get(\"fill-extrusion-translate-anchor\"), s.angle, a),\n                u = this.paint.get(\"fill-extrusion-height\").evaluate(e, r),\n                c = this.paint.get(\"fill-extrusion-base\").evaluate(e, r),\n                h = function (t, e, r, n) {\n              var i = [];\n\n              var _iterator107 = _createForOfIteratorHelper(t),\n                  _step107;\n\n              try {\n                for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {\n                  var _r139 = _step107.value;\n                  var _t140 = [_r139.x, _r139.y, 0, 1];\n                  fa(_t140, _t140, e), i.push(new S(_t140[0] / _t140[3], _t140[1] / _t140[3]));\n                }\n              } catch (err) {\n                _iterator107.e(err);\n              } finally {\n                _iterator107.f();\n              }\n\n              return i;\n            }(l, o),\n                p = function (t, e, r, n) {\n              var i = [],\n                  s = [],\n                  a = n[8] * e,\n                  o = n[9] * e,\n                  l = n[10] * e,\n                  u = n[11] * e,\n                  c = n[8] * r,\n                  h = n[9] * r,\n                  p = n[10] * r,\n                  f = n[11] * r;\n\n              var _iterator108 = _createForOfIteratorHelper(t),\n                  _step108;\n\n              try {\n                for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {\n                  var _e145 = _step108.value;\n                  var _t141 = [],\n                      _r140 = [];\n\n                  var _iterator109 = _createForOfIteratorHelper(_e145),\n                      _step109;\n\n                  try {\n                    for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {\n                      var _i94 = _step109.value;\n\n                      var _e146 = _i94.x,\n                          _s68 = _i94.y,\n                          _d5 = n[0] * _e146 + n[4] * _s68 + n[12],\n                          _y6 = n[1] * _e146 + n[5] * _s68 + n[13],\n                          _m9 = n[2] * _e146 + n[6] * _s68 + n[14],\n                          _g8 = n[3] * _e146 + n[7] * _s68 + n[15],\n                          _x7 = _m9 + l,\n                          _v4 = _g8 + u,\n                          _b7 = _d5 + c,\n                          _w5 = _y6 + h,\n                          _6 = _m9 + p,\n                          _A6 = _g8 + f,\n                          _k5 = new S((_d5 + a) / _v4, (_y6 + o) / _v4);\n\n                      _k5.z = _x7 / _v4, _t141.push(_k5);\n\n                      var _z3 = new S(_b7 / _A6, _w5 / _A6);\n\n                      _z3.z = _6 / _A6, _r140.push(_z3);\n                    }\n                  } catch (err) {\n                    _iterator109.e(err);\n                  } finally {\n                    _iterator109.f();\n                  }\n\n                  i.push(_t141), s.push(_r140);\n                }\n              } catch (err) {\n                _iterator108.e(err);\n              } finally {\n                _iterator108.f();\n              }\n\n              return [i, s];\n            }(n, c, u, o);\n\n            return function (t, e, r) {\n              var n = 1 / 0;\n              Js(r, e) && (n = Fo(r, e[0]));\n\n              for (var _i95 = 0; _i95 < e.length; _i95++) {\n                var _s69 = e[_i95],\n                    _a59 = t[_i95];\n\n                for (var _t142 = 0; _t142 < _s69.length - 1; _t142++) {\n                  var _e147 = _s69[_t142],\n                      _i96 = [_e147, _s69[_t142 + 1], _a59[_t142 + 1], _a59[_t142], _e147];\n                  Zs(r, _i96) && (n = Math.min(n, Fo(r, _i96)));\n                }\n              }\n\n              return n !== 1 / 0 && n;\n            }(p[0], p[1], h);\n          }\n        }]);\n\n        return fillExtrusion;\n      }(pi),\n      line: /*#__PURE__*/function (_pi8) {\n        _inherits(line, _pi8);\n\n        function line(t) {\n          var _this14;\n\n          _classCallCheck(this, line);\n\n          _this14 = _possibleConstructorReturn(this, _getPrototypeOf(line).call(this, t, No)), _this14.gradientVersion = 0;\n          return _this14;\n        }\n\n        _createClass(line, [{\n          key: \"_handleSpecialPaintPropertyUpdate\",\n          value: function _handleSpecialPaintPropertyUpdate(t) {\n            \"line-gradient\" === t && (this.stepInterpolant = this._transitionablePaint._values[\"line-gradient\"].value.expression._styleExpression.expression instanceof ke, this.gradientVersion = (this.gradientVersion + 1) % Number.MAX_SAFE_INTEGER);\n          }\n        }, {\n          key: \"gradientExpression\",\n          value: function gradientExpression() {\n            return this._transitionablePaint._values[\"line-gradient\"].value.expression;\n          }\n        }, {\n          key: \"recalculate\",\n          value: function recalculate(t, e) {\n            _get(_getPrototypeOf(line.prototype), \"recalculate\", this).call(this, t, e), this.paint._values[\"line-floorwidth\"] = Ko.possiblyEvaluate(this._transitioningPaint._values[\"line-width\"].value, t);\n          }\n        }, {\n          key: \"createBucket\",\n          value: function createBucket(t) {\n            return new qo(t);\n          }\n        }, {\n          key: \"queryRadius\",\n          value: function queryRadius(t) {\n            var e = t,\n                r = Zo(na(\"line-width\", this, e), na(\"line-gap-width\", this, e)),\n                n = na(\"line-offset\", this, e);\n            return r / 2 + Math.abs(n) + ia(this.paint.get(\"line-translate\"));\n          }\n        }, {\n          key: \"queryIntersectsFeature\",\n          value: function queryIntersectsFeature(t, e, r, n, i, s, a) {\n            var o = sa(t, this.paint.get(\"line-translate\"), this.paint.get(\"line-translate-anchor\"), s.angle, a),\n                l = a / 2 * Zo(this.paint.get(\"line-width\").evaluate(e, r), this.paint.get(\"line-gap-width\").evaluate(e, r)),\n                u = this.paint.get(\"line-offset\").evaluate(e, r);\n            return u && (n = function (t, e) {\n              var r = [];\n\n              for (var _n95 = 0; _n95 < t.length; _n95++) {\n                var _i97 = t[_n95],\n                    _s70 = [];\n\n                for (var _t143 = 0; _t143 < _i97.length; _t143++) {\n                  var _r141 = _i97[_t143 - 1],\n                      _n96 = _i97[_t143],\n                      _a60 = _i97[_t143 + 1],\n                      _o30 = 0 === _t143 ? new S(0, 0) : _n96.sub(_r141)._unit()._perp(),\n                      _l26 = _t143 === _i97.length - 1 ? new S(0, 0) : _a60.sub(_n96)._unit()._perp(),\n                      _u21 = _o30._add(_l26)._unit(),\n                      _c15 = _u21.x * _l26.x + _u21.y * _l26.y;\n\n                  0 !== _c15 && _u21._mult(1 / _c15), _s70.push(_u21._mult(e)._add(_n96));\n                }\n\n                r.push(_s70);\n              }\n\n              return r;\n            }(n, u * a)), function (t, e, r) {\n              for (var _n97 = 0; _n97 < e.length; _n97++) {\n                var _i98 = e[_n97];\n                if (t.length >= 3) for (var _e148 = 0; _e148 < _i98.length; _e148++) {\n                  if (ea(t, _i98[_e148])) return !0;\n                }\n                if (Xs(t, _i98, r)) return !0;\n              }\n\n              return !1;\n            }(o, n, l);\n          }\n        }, {\n          key: \"isTileClipped\",\n          value: function isTileClipped() {\n            return !0;\n          }\n        }]);\n\n        return line;\n      }(pi),\n      symbol: Eu,\n      background: /*#__PURE__*/function (_pi9) {\n        _inherits(background, _pi9);\n\n        function background(t) {\n          _classCallCheck(this, background);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(background).call(this, t, Tu));\n        }\n\n        return background;\n      }(pi),\n      raster: /*#__PURE__*/function (_pi10) {\n        _inherits(raster, _pi10);\n\n        function raster(t) {\n          _classCallCheck(this, raster);\n\n          return _possibleConstructorReturn(this, _getPrototypeOf(raster).call(this, t, Lu));\n        }\n\n        return raster;\n      }(pi)\n    };\n\n    var Ru = /*#__PURE__*/function () {\n      function Ru(t) {\n        var _this15 = this;\n\n        _classCallCheck(this, Ru);\n\n        this._callback = t, this._triggered = !1, \"undefined\" != typeof MessageChannel && (this._channel = new MessageChannel(), this._channel.port2.onmessage = function () {\n          _this15._triggered = !1, _this15._callback();\n        });\n      }\n\n      _createClass(Ru, [{\n        key: \"trigger\",\n        value: function trigger() {\n          var _this16 = this;\n\n          this._triggered || (this._triggered = !0, this._channel ? this._channel.port1.postMessage(!0) : setTimeout(function () {\n            _this16._triggered = !1, _this16._callback();\n          }, 0));\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          delete this._channel, this._callback = function () {};\n        }\n      }]);\n\n      return Ru;\n    }();\n\n    var Uu = 6371008.8;\n\n    var Ou = /*#__PURE__*/function () {\n      function Ou(t, e) {\n        _classCallCheck(this, Ou);\n\n        if (isNaN(t) || isNaN(e)) throw new Error(\"Invalid LngLat object: (\".concat(t, \", \").concat(e, \")\"));\n        if (this.lng = +t, this.lat = +e, this.lat > 90 || this.lat < -90) throw new Error(\"Invalid LngLat latitude value: must be between -90 and 90\");\n      }\n\n      _createClass(Ou, [{\n        key: \"wrap\",\n        value: function wrap() {\n          return new Ou(a(this.lng, -180, 180), this.lat);\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          return [this.lng, this.lat];\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"LngLat(\".concat(this.lng, \", \").concat(this.lat, \")\");\n        }\n      }, {\n        key: \"distanceTo\",\n        value: function distanceTo(t) {\n          var e = Math.PI / 180,\n              r = this.lat * e,\n              n = t.lat * e,\n              i = Math.sin(r) * Math.sin(n) + Math.cos(r) * Math.cos(n) * Math.cos((t.lng - this.lng) * e);\n          return Uu * Math.acos(Math.min(i, 1));\n        }\n      }, {\n        key: \"toBounds\",\n        value: function toBounds() {\n          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var e = 360 * t / 40075017,\n              r = e / Math.cos(Math.PI / 180 * this.lat);\n          return new qu(new Ou(this.lng - r, this.lat - e), new Ou(this.lng + r, this.lat + e));\n        }\n      }], [{\n        key: \"convert\",\n        value: function convert(t) {\n          if (t instanceof Ou) return t;\n          if (Array.isArray(t) && (2 === t.length || 3 === t.length)) return new Ou(Number(t[0]), Number(t[1]));\n          if (!Array.isArray(t) && \"object\" == typeof t && null !== t) return new Ou(Number(\"lng\" in t ? t.lng : t.lon), Number(t.lat));\n          throw new Error(\"`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]\");\n        }\n      }]);\n\n      return Ou;\n    }();\n\n    var qu = /*#__PURE__*/function () {\n      function qu(t, e) {\n        _classCallCheck(this, qu);\n\n        t && (e ? this.setSouthWest(t).setNorthEast(e) : 4 === t.length ? this.setSouthWest([t[0], t[1]]).setNorthEast([t[2], t[3]]) : this.setSouthWest(t[0]).setNorthEast(t[1]));\n      }\n\n      _createClass(qu, [{\n        key: \"setNorthEast\",\n        value: function setNorthEast(t) {\n          return this._ne = t instanceof Ou ? new Ou(t.lng, t.lat) : Ou.convert(t), this;\n        }\n      }, {\n        key: \"setSouthWest\",\n        value: function setSouthWest(t) {\n          return this._sw = t instanceof Ou ? new Ou(t.lng, t.lat) : Ou.convert(t), this;\n        }\n      }, {\n        key: \"extend\",\n        value: function extend(t) {\n          var e = this._sw,\n              r = this._ne;\n          var n, i;\n          if (t instanceof Ou) n = t, i = t;else {\n            if (!(t instanceof qu)) return Array.isArray(t) ? 4 === t.length || t.every(Array.isArray) ? this.extend(qu.convert(t)) : this.extend(Ou.convert(t)) : this;\n            if (n = t._sw, i = t._ne, !n || !i) return this;\n          }\n          return e || r ? (e.lng = Math.min(n.lng, e.lng), e.lat = Math.min(n.lat, e.lat), r.lng = Math.max(i.lng, r.lng), r.lat = Math.max(i.lat, r.lat)) : (this._sw = new Ou(n.lng, n.lat), this._ne = new Ou(i.lng, i.lat)), this;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter() {\n          return new Ou((this._sw.lng + this._ne.lng) / 2, (this._sw.lat + this._ne.lat) / 2);\n        }\n      }, {\n        key: \"getSouthWest\",\n        value: function getSouthWest() {\n          return this._sw;\n        }\n      }, {\n        key: \"getNorthEast\",\n        value: function getNorthEast() {\n          return this._ne;\n        }\n      }, {\n        key: \"getNorthWest\",\n        value: function getNorthWest() {\n          return new Ou(this.getWest(), this.getNorth());\n        }\n      }, {\n        key: \"getSouthEast\",\n        value: function getSouthEast() {\n          return new Ou(this.getEast(), this.getSouth());\n        }\n      }, {\n        key: \"getWest\",\n        value: function getWest() {\n          return this._sw.lng;\n        }\n      }, {\n        key: \"getSouth\",\n        value: function getSouth() {\n          return this._sw.lat;\n        }\n      }, {\n        key: \"getEast\",\n        value: function getEast() {\n          return this._ne.lng;\n        }\n      }, {\n        key: \"getNorth\",\n        value: function getNorth() {\n          return this._ne.lat;\n        }\n      }, {\n        key: \"toArray\",\n        value: function toArray() {\n          return [this._sw.toArray(), this._ne.toArray()];\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"LngLatBounds(\".concat(this._sw.toString(), \", \").concat(this._ne.toString(), \")\");\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty() {\n          return !(this._sw && this._ne);\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(t) {\n          var _Ou$convert = Ou.convert(t),\n              e = _Ou$convert.lng,\n              r = _Ou$convert.lat;\n\n          var n = this._sw.lng <= e && e <= this._ne.lng;\n          return this._sw.lng > this._ne.lng && (n = this._sw.lng >= e && e >= this._ne.lng), this._sw.lat <= r && r <= this._ne.lat && n;\n        }\n      }], [{\n        key: \"convert\",\n        value: function convert(t) {\n          return t instanceof qu ? t : t ? new qu(t) : t;\n        }\n      }]);\n\n      return qu;\n    }();\n\n    var ju = 2 * Math.PI * Uu;\n\n    function Nu(t) {\n      return ju * Math.cos(t * Math.PI / 180);\n    }\n\n    function Ku(t) {\n      return (180 + t) / 360;\n    }\n\n    function Zu(t) {\n      return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + t * Math.PI / 360))) / 360;\n    }\n\n    function Gu(t, e) {\n      return t / Nu(e);\n    }\n\n    function Ju(t) {\n      return 360 / Math.PI * Math.atan(Math.exp((180 - 360 * t) * Math.PI / 180)) - 90;\n    }\n\n    var Xu = /*#__PURE__*/function () {\n      function Xu(t, e) {\n        var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n        _classCallCheck(this, Xu);\n\n        this.x = +t, this.y = +e, this.z = +r;\n      }\n\n      _createClass(Xu, [{\n        key: \"toLngLat\",\n        value: function toLngLat() {\n          return new Ou(360 * this.x - 180, Ju(this.y));\n        }\n      }, {\n        key: \"toAltitude\",\n        value: function toAltitude() {\n          return this.z * Nu(Ju(this.y));\n        }\n      }, {\n        key: \"meterInMercatorCoordinateUnits\",\n        value: function meterInMercatorCoordinateUnits() {\n          return 1 / ju * (t = Ju(this.y), 1 / Math.cos(t * Math.PI / 180));\n          var t;\n        }\n      }], [{\n        key: \"fromLngLat\",\n        value: function fromLngLat(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n          var r = Ou.convert(t);\n          return new Xu(Ku(r.lng), Zu(r.lat), Gu(e, r.lat));\n        }\n      }]);\n\n      return Xu;\n    }();\n\n    function Yu(t, e, r) {\n      var n = 2 * Math.PI * 6378137 / 256 / Math.pow(2, r);\n      return [t * n - 2 * Math.PI * 6378137 / 2, e * n - 2 * Math.PI * 6378137 / 2];\n    }\n\n    var Hu = /*#__PURE__*/function () {\n      function Hu(t, e, r) {\n        _classCallCheck(this, Hu);\n\n        this.z = t, this.x = e, this.y = r, this.key = tc(0, t, t, e, r);\n      }\n\n      _createClass(Hu, [{\n        key: \"equals\",\n        value: function equals(t) {\n          return this.z === t.z && this.x === t.x && this.y === t.y;\n        }\n      }, {\n        key: \"url\",\n        value: function url(t, e, r) {\n          var n = (s = this.y, a = this.z, o = Yu(256 * (i = this.x), 256 * (s = Math.pow(2, a) - s - 1), a), l = Yu(256 * (i + 1), 256 * (s + 1), a), o[0] + \",\" + o[1] + \",\" + l[0] + \",\" + l[1]);\n          var i, s, a, o, l;\n\n          var u = function (t, e, r) {\n            var n,\n                i = \"\";\n\n            for (var _s71 = t; _s71 > 0; _s71--) {\n              n = 1 << _s71 - 1, i += (e & n ? 1 : 0) + (r & n ? 2 : 0);\n            }\n\n            return i;\n          }(this.z, this.x, this.y);\n\n          return t[(this.x + this.y) % t.length].replace(/{prefix}/g, (this.x % 16).toString(16) + (this.y % 16).toString(16)).replace(/{z}/g, String(this.z)).replace(/{x}/g, String(this.x)).replace(/{y}/g, String(\"tms\" === r ? Math.pow(2, this.z) - this.y - 1 : this.y)).replace(/{ratio}/g, e > 1 ? \"@2x\" : \"\").replace(/{quadkey}/g, u).replace(/{bbox-epsg-3857}/g, n);\n        }\n      }, {\n        key: \"getTilePoint\",\n        value: function getTilePoint(t) {\n          var e = Math.pow(2, this.z);\n          return new S((t.x * e - this.x) * Rs, (t.y * e - this.y) * Rs);\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.z, \"/\").concat(this.x, \"/\").concat(this.y);\n        }\n      }]);\n\n      return Hu;\n    }();\n\n    var Wu = function Wu(t, e) {\n      _classCallCheck(this, Wu);\n\n      this.wrap = t, this.canonical = e, this.key = tc(t, e.z, e.z, e.x, e.y);\n    };\n\n    var Qu = /*#__PURE__*/function () {\n      function Qu(t, e, r, n, i) {\n        _classCallCheck(this, Qu);\n\n        this.overscaledZ = t, this.wrap = e, this.canonical = new Hu(r, +n, +i), this.key = tc(e, t, r, n, i);\n      }\n\n      _createClass(Qu, [{\n        key: \"equals\",\n        value: function equals(t) {\n          return this.overscaledZ === t.overscaledZ && this.wrap === t.wrap && this.canonical.equals(t.canonical);\n        }\n      }, {\n        key: \"scaledTo\",\n        value: function scaledTo(t) {\n          var e = this.canonical.z - t;\n          return t > this.canonical.z ? new Qu(t, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y) : new Qu(t, this.wrap, t, this.canonical.x >> e, this.canonical.y >> e);\n        }\n      }, {\n        key: \"calculateScaledKey\",\n        value: function calculateScaledKey(t, e) {\n          var r = this.canonical.z - t;\n          return t > this.canonical.z ? tc(this.wrap * +e, t, this.canonical.z, this.canonical.x, this.canonical.y) : tc(this.wrap * +e, t, t, this.canonical.x >> r, this.canonical.y >> r);\n        }\n      }, {\n        key: \"isChildOf\",\n        value: function isChildOf(t) {\n          if (t.wrap !== this.wrap) return !1;\n          var e = this.canonical.z - t.canonical.z;\n          return 0 === t.overscaledZ || t.overscaledZ < this.overscaledZ && t.canonical.x === this.canonical.x >> e && t.canonical.y === this.canonical.y >> e;\n        }\n      }, {\n        key: \"children\",\n        value: function children(t) {\n          if (this.overscaledZ >= t) return [new Qu(this.overscaledZ + 1, this.wrap, this.canonical.z, this.canonical.x, this.canonical.y)];\n          var e = this.canonical.z + 1,\n              r = 2 * this.canonical.x,\n              n = 2 * this.canonical.y;\n          return [new Qu(e, this.wrap, e, r, n), new Qu(e, this.wrap, e, r + 1, n), new Qu(e, this.wrap, e, r, n + 1), new Qu(e, this.wrap, e, r + 1, n + 1)];\n        }\n      }, {\n        key: \"isLessThan\",\n        value: function isLessThan(t) {\n          return this.wrap < t.wrap || !(this.wrap > t.wrap) && (this.overscaledZ < t.overscaledZ || !(this.overscaledZ > t.overscaledZ) && (this.canonical.x < t.canonical.x || !(this.canonical.x > t.canonical.x) && this.canonical.y < t.canonical.y));\n        }\n      }, {\n        key: \"wrapped\",\n        value: function wrapped() {\n          return new Qu(this.overscaledZ, 0, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"unwrapTo\",\n        value: function unwrapTo(t) {\n          return new Qu(this.overscaledZ, t, this.canonical.z, this.canonical.x, this.canonical.y);\n        }\n      }, {\n        key: \"overscaleFactor\",\n        value: function overscaleFactor() {\n          return Math.pow(2, this.overscaledZ - this.canonical.z);\n        }\n      }, {\n        key: \"toUnwrapped\",\n        value: function toUnwrapped() {\n          return new Wu(this.wrap, this.canonical);\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          return \"\".concat(this.overscaledZ, \"/\").concat(this.canonical.x, \"/\").concat(this.canonical.y);\n        }\n      }, {\n        key: \"getTilePoint\",\n        value: function getTilePoint(t) {\n          return this.canonical.getTilePoint(new Xu(t.x - this.wrap, t.y));\n        }\n      }]);\n\n      return Qu;\n    }();\n\n    function tc(t, e, r, n, i) {\n      (t *= 2) < 0 && (t = -1 * t - 1);\n      var s = 1 << r;\n      return (s * s * t + s * i + n).toString(36) + r.toString(36) + e.toString(36);\n    }\n\n    kn(\"CanonicalTileID\", Hu), kn(\"OverscaledTileID\", Qu, {\n      omit: [\"posMatrix\"]\n    });\n\n    var ec = /*#__PURE__*/function () {\n      function ec(t, e, r) {\n        _classCallCheck(this, ec);\n\n        if (this.uid = t, e.height !== e.width) throw new RangeError(\"DEM tiles must be square\");\n        if (r && \"mapbox\" !== r && \"terrarium\" !== r) return void d(\"\\\"\".concat(r, \"\\\" is not a valid encoding type. Valid types include \\\"mapbox\\\" and \\\"terrarium\\\".\"));\n        this.stride = e.height;\n        var n = this.dim = e.height - 2;\n        this.data = new Uint32Array(e.data.buffer), this.encoding = r || \"mapbox\";\n\n        for (var _t144 = 0; _t144 < n; _t144++) {\n          this.data[this._idx(-1, _t144)] = this.data[this._idx(0, _t144)], this.data[this._idx(n, _t144)] = this.data[this._idx(n - 1, _t144)], this.data[this._idx(_t144, -1)] = this.data[this._idx(_t144, 0)], this.data[this._idx(_t144, n)] = this.data[this._idx(_t144, n - 1)];\n        }\n\n        this.data[this._idx(-1, -1)] = this.data[this._idx(0, 0)], this.data[this._idx(n, -1)] = this.data[this._idx(n - 1, 0)], this.data[this._idx(-1, n)] = this.data[this._idx(0, n - 1)], this.data[this._idx(n, n)] = this.data[this._idx(n - 1, n - 1)];\n      }\n\n      _createClass(ec, [{\n        key: \"get\",\n        value: function get(t, e) {\n          var r = new Uint8Array(this.data.buffer),\n              n = 4 * this._idx(t, e);\n\n          return (\"terrarium\" === this.encoding ? this._unpackTerrarium : this._unpackMapbox)(r[n], r[n + 1], r[n + 2]);\n        }\n      }, {\n        key: \"getUnpackVector\",\n        value: function getUnpackVector() {\n          return \"terrarium\" === this.encoding ? [256, 1, 1 / 256, 32768] : [6553.6, 25.6, .1, 1e4];\n        }\n      }, {\n        key: \"_idx\",\n        value: function _idx(t, e) {\n          if (t < -1 || t >= this.dim + 1 || e < -1 || e >= this.dim + 1) throw new RangeError(\"out of range source coordinates for DEM data\");\n          return (e + 1) * this.stride + (t + 1);\n        }\n      }, {\n        key: \"_unpackMapbox\",\n        value: function _unpackMapbox(t, e, r) {\n          return (256 * t * 256 + 256 * e + r) / 10 - 1e4;\n        }\n      }, {\n        key: \"_unpackTerrarium\",\n        value: function _unpackTerrarium(t, e, r) {\n          return 256 * t + e + r / 256 - 32768;\n        }\n      }, {\n        key: \"getPixels\",\n        value: function getPixels() {\n          return new wa({\n            width: this.stride,\n            height: this.stride\n          }, new Uint8Array(this.data.buffer));\n        }\n      }, {\n        key: \"backfillBorder\",\n        value: function backfillBorder(t, e, r) {\n          if (this.dim !== t.dim) throw new Error(\"dem dimension mismatch\");\n          var n = e * this.dim,\n              i = e * this.dim + this.dim,\n              s = r * this.dim,\n              a = r * this.dim + this.dim;\n\n          switch (e) {\n            case -1:\n              n = i - 1;\n              break;\n\n            case 1:\n              i = n + 1;\n          }\n\n          switch (r) {\n            case -1:\n              s = a - 1;\n              break;\n\n            case 1:\n              a = s + 1;\n          }\n\n          var o = -e * this.dim,\n              l = -r * this.dim;\n\n          for (var _e149 = s; _e149 < a; _e149++) {\n            for (var _r142 = n; _r142 < i; _r142++) {\n              this.data[this._idx(_r142, _e149)] = t.data[this._idx(_r142 + o, _e149 + l)];\n            }\n          }\n        }\n      }]);\n\n      return ec;\n    }();\n\n    kn(\"DEMData\", ec);\n\n    var rc = /*#__PURE__*/function () {\n      function rc(t) {\n        _classCallCheck(this, rc);\n\n        this._stringToNumber = {}, this._numberToString = [];\n\n        for (var _e150 = 0; _e150 < t.length; _e150++) {\n          var _r143 = t[_e150];\n          this._stringToNumber[_r143] = _e150, this._numberToString[_e150] = _r143;\n        }\n      }\n\n      _createClass(rc, [{\n        key: \"encode\",\n        value: function encode(t) {\n          return this._stringToNumber[t];\n        }\n      }, {\n        key: \"decode\",\n        value: function decode(t) {\n          return this._numberToString[t];\n        }\n      }]);\n\n      return rc;\n    }();\n\n    var nc = /*#__PURE__*/function () {\n      function nc(t, e, r, n, i) {\n        _classCallCheck(this, nc);\n\n        this.type = \"Feature\", this._vectorTileFeature = t, t._z = e, t._x = r, t._y = n, this.properties = t.properties, this.id = i;\n      }\n\n      _createClass(nc, [{\n        key: \"toJSON\",\n        value: function toJSON() {\n          var t = {\n            geometry: this.geometry\n          };\n\n          for (var _e151 in this) {\n            \"_geometry\" !== _e151 && \"_vectorTileFeature\" !== _e151 && (t[_e151] = this[_e151]);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"geometry\",\n        get: function get() {\n          return void 0 === this._geometry && (this._geometry = this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x, this._vectorTileFeature._y, this._vectorTileFeature._z).geometry), this._geometry;\n        },\n        set: function set(t) {\n          this._geometry = t;\n        }\n      }]);\n\n      return nc;\n    }();\n\n    var ic = /*#__PURE__*/function () {\n      function ic(t, e) {\n        _classCallCheck(this, ic);\n\n        this.tileID = t, this.x = t.canonical.x, this.y = t.canonical.y, this.z = t.canonical.z, this.grid = new _n(Rs, 16, 0), this.grid3D = new _n(Rs, 16, 0), this.featureIndexArray = new Xi(), this.promoteId = e;\n      }\n\n      _createClass(ic, [{\n        key: \"insert\",\n        value: function insert(t, e, r, n, i, s) {\n          var a = this.featureIndexArray.length;\n          this.featureIndexArray.emplaceBack(r, n, i);\n          var o = s ? this.grid3D : this.grid;\n\n          for (var _t145 = 0; _t145 < e.length; _t145++) {\n            var _r144 = e[_t145],\n                _n98 = [1 / 0, 1 / 0, -1 / 0, -1 / 0];\n\n            for (var _t146 = 0; _t146 < _r144.length; _t146++) {\n              var _e152 = _r144[_t146];\n              _n98[0] = Math.min(_n98[0], _e152.x), _n98[1] = Math.min(_n98[1], _e152.y), _n98[2] = Math.max(_n98[2], _e152.x), _n98[3] = Math.max(_n98[3], _e152.y);\n            }\n\n            _n98[0] < Rs && _n98[1] < Rs && _n98[2] >= 0 && _n98[3] >= 0 && o.insert(a, _n98[0], _n98[1], _n98[2], _n98[3]);\n          }\n        }\n      }, {\n        key: \"loadVTLayers\",\n        value: function loadVTLayers() {\n          return this.vtLayers || (this.vtLayers = new fo.VectorTile(new el(this.rawTileData)).layers, this.sourceLayerCoder = new rc(this.vtLayers ? Object.keys(this.vtLayers).sort() : [\"_geojsonTileLayer\"])), this.vtLayers;\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, r, n) {\n          var _this17 = this;\n\n          this.loadVTLayers();\n          var i = t.params || {},\n              s = Rs / t.tileSize / t.scale,\n              a = Zr(i.filter),\n              o = t.queryGeometry,\n              l = t.queryPadding * s,\n              u = ac(o),\n              c = this.grid.query(u.minX - l, u.minY - l, u.maxX + l, u.maxY + l),\n              h = ac(t.cameraQueryGeometry),\n              p = this.grid3D.query(h.minX - l, h.minY - l, h.maxX + l, h.maxY + l, function (e, r, n, i) {\n            return function (t, e, r, n, i) {\n              var _iterator110 = _createForOfIteratorHelper(t),\n                  _step110;\n\n              try {\n                for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {\n                  var _s72 = _step110.value;\n                  if (e <= _s72.x && r <= _s72.y && n >= _s72.x && i >= _s72.y) return !0;\n                }\n              } catch (err) {\n                _iterator110.e(err);\n              } finally {\n                _iterator110.f();\n              }\n\n              var s = [new S(e, r), new S(e, i), new S(n, i), new S(n, r)];\n\n              if (t.length > 2) {\n                var _iterator111 = _createForOfIteratorHelper(s),\n                    _step111;\n\n                try {\n                  for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {\n                    var _e153 = _step111.value;\n                    if (ea(t, _e153)) return !0;\n                  }\n                } catch (err) {\n                  _iterator111.e(err);\n                } finally {\n                  _iterator111.f();\n                }\n              }\n\n              for (var _e154 = 0; _e154 < t.length - 1; _e154++) {\n                if (ra(t[_e154], t[_e154 + 1], s)) return !0;\n              }\n\n              return !1;\n            }(t.cameraQueryGeometry, e - l, r - l, n + l, i + l);\n          });\n\n          var _iterator112 = _createForOfIteratorHelper(p),\n              _step112;\n\n          try {\n            for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {\n              var _t147 = _step112.value;\n              c.push(_t147);\n            }\n          } catch (err) {\n            _iterator112.e(err);\n          } finally {\n            _iterator112.f();\n          }\n\n          c.sort(oc);\n          var f = {};\n          var d;\n\n          var _loop = function _loop(_l27) {\n            var u = c[_l27];\n            if (u === d) return \"continue\";\n            d = u;\n\n            var h = _this17.featureIndexArray.get(u);\n\n            var p = null;\n\n            _this17.loadMatchingFeature(f, h.bucketIndex, h.sourceLayerIndex, h.featureIndex, a, i.layers, i.availableImages, e, r, n, function (e, r, n) {\n              return p || (p = qs(e)), r.queryIntersectsFeature(o, e, n, p, _this17.z, t.transform, s, t.pixelPosMatrix);\n            });\n          };\n\n          for (var _l27 = 0; _l27 < c.length; _l27++) {\n            var _ret = _loop(_l27);\n\n            if (_ret === \"continue\") continue;\n          }\n\n          return f;\n        }\n      }, {\n        key: \"loadMatchingFeature\",\n        value: function loadMatchingFeature(t, e, r, n, i, s, a, l, u, c, h) {\n          var p = this.bucketLayerIDs[e];\n          if (s && !function (t, e) {\n            for (var _r145 = 0; _r145 < t.length; _r145++) {\n              if (e.indexOf(t[_r145]) >= 0) return !0;\n            }\n\n            return !1;\n          }(s, p)) return;\n          var f = this.sourceLayerCoder.decode(r),\n              d = this.vtLayers[f].feature(n);\n\n          if (i.needGeometry) {\n            var _t148 = js(d, !0);\n\n            if (!i.filter(new Yn(this.tileID.overscaledZ), _t148, this.tileID.canonical)) return;\n          } else if (!i.filter(new Yn(this.tileID.overscaledZ), d)) return;\n\n          var y = this.getId(d, f);\n\n          for (var _e155 = 0; _e155 < p.length; _e155++) {\n            var _r146 = p[_e155];\n            if (s && s.indexOf(_r146) < 0) continue;\n            var _i99 = l[_r146];\n            if (!_i99) continue;\n            var _f7 = {};\n            y && c && (_f7 = c.getState(_i99.sourceLayer || \"_geojsonTileLayer\", y));\n\n            var _m10 = o({}, u[_r146]);\n\n            _m10.paint = sc(_m10.paint, _i99.paint, d, _f7, a), _m10.layout = sc(_m10.layout, _i99.layout, d, _f7, a);\n\n            var _g9 = !h || h(d, _i99, _f7);\n\n            if (!_g9) continue;\n\n            var _x8 = new nc(d, this.z, this.x, this.y, y);\n\n            _x8.layer = _m10;\n            var _v5 = t[_r146];\n            void 0 === _v5 && (_v5 = t[_r146] = []), _v5.push({\n              featureIndex: n,\n              feature: _x8,\n              intersectionZ: _g9\n            });\n          }\n        }\n      }, {\n        key: \"lookupSymbolFeatures\",\n        value: function lookupSymbolFeatures(t, e, r, n, i, s, a, o) {\n          var l = {};\n          this.loadVTLayers();\n          var u = Zr(i);\n\n          var _iterator113 = _createForOfIteratorHelper(t),\n              _step113;\n\n          try {\n            for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {\n              var _i100 = _step113.value;\n              this.loadMatchingFeature(l, r, n, _i100, u, s, a, o, e);\n            }\n          } catch (err) {\n            _iterator113.e(err);\n          } finally {\n            _iterator113.f();\n          }\n\n          return l;\n        }\n      }, {\n        key: \"hasLayer\",\n        value: function hasLayer(t) {\n          var _iterator114 = _createForOfIteratorHelper(this.bucketLayerIDs),\n              _step114;\n\n          try {\n            for (_iterator114.s(); !(_step114 = _iterator114.n()).done;) {\n              var _e156 = _step114.value;\n\n              var _iterator115 = _createForOfIteratorHelper(_e156),\n                  _step115;\n\n              try {\n                for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {\n                  var _r147 = _step115.value;\n                  if (t === _r147) return !0;\n                }\n              } catch (err) {\n                _iterator115.e(err);\n              } finally {\n                _iterator115.f();\n              }\n            }\n          } catch (err) {\n            _iterator114.e(err);\n          } finally {\n            _iterator114.f();\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"getId\",\n        value: function getId(t, e) {\n          var r = t.id;\n          return this.promoteId && (r = t.properties[\"string\" == typeof this.promoteId ? this.promoteId : this.promoteId[e]], \"boolean\" == typeof r && (r = Number(r))), r;\n        }\n      }]);\n\n      return ic;\n    }();\n\n    function sc(t, e, r, n, i) {\n      return c(t, function (t, s) {\n        var a = e instanceof ii ? e.get(s) : null;\n        return a && a.evaluate ? a.evaluate(r, n, i) : a;\n      });\n    }\n\n    function ac(t) {\n      var e = 1 / 0,\n          r = 1 / 0,\n          n = -1 / 0,\n          i = -1 / 0;\n\n      var _iterator116 = _createForOfIteratorHelper(t),\n          _step116;\n\n      try {\n        for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {\n          var _s73 = _step116.value;\n          e = Math.min(e, _s73.x), r = Math.min(r, _s73.y), n = Math.max(n, _s73.x), i = Math.max(i, _s73.y);\n        }\n      } catch (err) {\n        _iterator116.e(err);\n      } finally {\n        _iterator116.f();\n      }\n\n      return {\n        minX: e,\n        minY: r,\n        maxX: n,\n        maxY: i\n      };\n    }\n\n    function oc(t, e) {\n      return e - t;\n    }\n\n    var lc;\n    kn(\"FeatureIndex\", ic, {\n      omit: [\"rawTileData\", \"sourceLayerCoder\"]\n    }), t.PerformanceMarkers = void 0, (lc = t.PerformanceMarkers || (t.PerformanceMarkers = {})).create = \"create\", lc.load = \"load\", lc.fullLoad = \"fullLoad\";\n    var uc = null,\n        cc = [];\n    var hc = 1e3 / 30,\n        pc = {\n      mark: function mark(t) {\n        performance.mark(t);\n      },\n      frame: function frame(t) {\n        var e = t;\n        null != uc && cc.push(e - uc), uc = e;\n      },\n      clearMetrics: function clearMetrics() {\n        uc = null, cc = [], performance.clearMeasures(\"loadTime\"), performance.clearMeasures(\"fullLoadTime\");\n\n        for (var _e157 in t.PerformanceMarkers) {\n          performance.clearMarks(t.PerformanceMarkers[_e157]);\n        }\n      },\n      getPerformanceMetrics: function getPerformanceMetrics() {\n        performance.measure(\"loadTime\", t.PerformanceMarkers.create, t.PerformanceMarkers.load), performance.measure(\"fullLoadTime\", t.PerformanceMarkers.create, t.PerformanceMarkers.fullLoad);\n        var e = performance.getEntriesByName(\"loadTime\")[0].duration,\n            r = performance.getEntriesByName(\"fullLoadTime\")[0].duration,\n            n = cc.length,\n            i = 1 / (cc.reduce(function (t, e) {\n          return t + e;\n        }, 0) / n / 1e3),\n            s = cc.filter(function (t) {\n          return t > hc;\n        }).reduce(function (t, e) {\n          return t + (e - hc) / hc;\n        }, 0);\n        return {\n          loadTime: e,\n          fullLoadTime: r,\n          fps: i,\n          percentDroppedFrames: s / (n + s) * 100\n        };\n      }\n    };\n    t.AJAXError = q, t.ARRAY_TYPE = la, t.Actor = /*#__PURE__*/function () {\n      function _class2(t, e, r) {\n        _classCallCheck(this, _class2);\n\n        this.target = t, this.parent = e, this.mapId = r, this.callbacks = {}, this.tasks = {}, this.taskQueue = [], this.cancelCallbacks = {}, u([\"receive\", \"process\"], this), this.invoker = new Ru(this.process), this.target.addEventListener(\"message\", this.receive, !1), this.globalScope = g() ? t : window;\n      }\n\n      _createClass(_class2, [{\n        key: \"send\",\n        value: function send(t, e, r, n) {\n          var _this18 = this;\n\n          var i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n          var s = Math.round(1e18 * Math.random()).toString(36).substring(0, 10);\n          r && (this.callbacks[s] = r);\n          var a = _(this.globalScope) ? void 0 : [];\n          return this.target.postMessage({\n            id: s,\n            type: t,\n            hasCallback: !!r,\n            targetMapId: n,\n            mustQueue: i,\n            sourceMapId: this.mapId,\n            data: zn(e, a)\n          }, a), {\n            cancel: function cancel() {\n              r && delete _this18.callbacks[s], _this18.target.postMessage({\n                id: s,\n                type: \"<cancel>\",\n                targetMapId: n,\n                sourceMapId: _this18.mapId\n              });\n            }\n          };\n        }\n      }, {\n        key: \"receive\",\n        value: function receive(t) {\n          var e = t.data,\n              r = e.id;\n          if (r && (!e.targetMapId || this.mapId === e.targetMapId)) if (\"<cancel>\" === e.type) {\n            delete this.tasks[r];\n            var _t149 = this.cancelCallbacks[r];\n            delete this.cancelCallbacks[r], _t149 && _t149();\n          } else g() || e.mustQueue ? (this.tasks[r] = e, this.taskQueue.push(r), this.invoker.trigger()) : this.processTask(r, e);\n        }\n      }, {\n        key: \"process\",\n        value: function process() {\n          if (!this.taskQueue.length) return;\n          var t = this.taskQueue.shift(),\n              e = this.tasks[t];\n          delete this.tasks[t], this.taskQueue.length && this.invoker.trigger(), e && this.processTask(t, e);\n        }\n      }, {\n        key: \"processTask\",\n        value: function processTask(t, e) {\n          var _this19 = this;\n\n          if (\"<response>\" === e.type) {\n            var _r148 = this.callbacks[t];\n            delete this.callbacks[t], _r148 && (e.error ? _r148(In(e.error)) : _r148(null, In(e.data)));\n          } else {\n            var _r149 = !1;\n\n            var _n99 = _(this.globalScope) ? void 0 : [],\n                _i101 = e.hasCallback ? function (e, i) {\n              _r149 = !0, delete _this19.cancelCallbacks[t], _this19.target.postMessage({\n                id: t,\n                type: \"<response>\",\n                sourceMapId: _this19.mapId,\n                error: e ? zn(e) : null,\n                data: zn(i, _n99)\n              }, _n99);\n            } : function (t) {\n              _r149 = !0;\n            };\n\n            var _s74 = null;\n\n            var _a61 = In(e.data);\n\n            if (this.parent[e.type]) _s74 = this.parent[e.type](e.sourceMapId, _a61, _i101);else if (this.parent.getWorkerSource) {\n              var _t150 = e.type.split(\".\");\n\n              _s74 = this.parent.getWorkerSource(e.sourceMapId, _t150[0], _a61.source)[_t150[1]](_a61, _i101);\n            } else _i101(new Error(\"Could not find function \".concat(e.type)));\n            !_r149 && _s74 && _s74.cancel && (this.cancelCallbacks[t] = _s74.cancel);\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.invoker.remove(), this.target.removeEventListener(\"message\", this.receive, !1);\n        }\n      }]);\n\n      return _class2;\n    }(), t.AlphaImage = ba, t.CanonicalTileID = Hu, t.CollisionBoxArray = Oi, t.CollisionCircleLayoutArray = /*#__PURE__*/function (_Bi) {\n      _inherits(_class3, _Bi);\n\n      function _class3() {\n        _classCallCheck(this, _class3);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class3).apply(this, arguments));\n      }\n\n      return _class3;\n    }(Bi), t.Color = Et, t.DEMData = ec, t.DataConstantProperty = si, t.DictionaryCoder = rc, t.EXTENT = Rs, t.ErrorEvent = et, t.EvaluationParameters = Yn, t.Event = tt, t.Evented = rt, t.FeatureIndex = ic, t.FillBucket = lo, t.FillExtrusionBucket = Bo, t.GeoJSONFeature = nc, t.ImageAtlas = Bl, t.ImagePosition = Ml, t.LineBucket = qo, t.LineStripIndexArray = /*#__PURE__*/function (_$i) {\n      _inherits(_class4, _$i);\n\n      function _class4() {\n        _classCallCheck(this, _class4);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class4).apply(this, arguments));\n      }\n\n      return _class4;\n    }($i), t.LngLat = Ou, t.LngLatBounds = qu, t.MercatorCoordinate = Xu, t.ONE_EM = tl, t.OverscaledTileID = Qu, t.PerformanceUtils = pc, t.PosArray = /*#__PURE__*/function (_xi3) {\n      _inherits(_class5, _xi3);\n\n      function _class5() {\n        _classCallCheck(this, _class5);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class5).apply(this, arguments));\n      }\n\n      return _class5;\n    }(xi), t.Properties = ci, t.QuadTriangleArray = /*#__PURE__*/function (_Pi2) {\n      _inherits(_class6, _Pi2);\n\n      function _class6() {\n        _classCallCheck(this, _class6);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class6).apply(this, arguments));\n      }\n\n      return _class6;\n    }(Pi), t.RGBAImage = wa, t.RasterBoundsArray = /*#__PURE__*/function (_vi) {\n      _inherits(_class7, _vi);\n\n      function _class7() {\n        _classCallCheck(this, _class7);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_class7).apply(this, arguments));\n      }\n\n      return _class7;\n    }(vi), t.RequestPerformance = /*#__PURE__*/function () {\n      function _class8(t) {\n        _classCallCheck(this, _class8);\n\n        this._marks = {\n          start: [t.url, \"start\"].join(\"#\"),\n          end: [t.url, \"end\"].join(\"#\"),\n          measure: t.url.toString()\n        }, performance.mark(this._marks.start);\n      }\n\n      _createClass(_class8, [{\n        key: \"finish\",\n        value: function finish() {\n          performance.mark(this._marks.end);\n          var t = performance.getEntriesByName(this._marks.measure);\n          return 0 === t.length && (performance.measure(this._marks.measure, this._marks.start, this._marks.end), t = performance.getEntriesByName(this._marks.measure), performance.clearMarks(this._marks.start), performance.clearMarks(this._marks.end), performance.clearMeasures(this._marks.measure)), t;\n        }\n      }]);\n\n      return _class8;\n    }(), t.ResourceType = O, t.SegmentVector = hs, t.SymbolBucket = Bu, t.Transitionable = Qn, t.TriangleIndexArray = os, t.Uniform1f = Ss, t.Uniform1i = /*#__PURE__*/function (_ks4) {\n      _inherits(_class9, _ks4);\n\n      function _class9(t, e) {\n        var _this20;\n\n        _classCallCheck(this, _class9);\n\n        _this20 = _possibleConstructorReturn(this, _getPrototypeOf(_class9).call(this, t, e)), _this20.current = 0;\n        return _this20;\n      }\n\n      _createClass(_class9, [{\n        key: \"set\",\n        value: function set(t) {\n          this.current !== t && (this.current = t, this.gl.uniform1i(this.location, t));\n        }\n      }]);\n\n      return _class9;\n    }(ks), t.Uniform2f = /*#__PURE__*/function (_ks5) {\n      _inherits(_class10, _ks5);\n\n      function _class10(t, e) {\n        var _this21;\n\n        _classCallCheck(this, _class10);\n\n        _this21 = _possibleConstructorReturn(this, _getPrototypeOf(_class10).call(this, t, e)), _this21.current = [0, 0];\n        return _this21;\n      }\n\n      _createClass(_class10, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] || (this.current = t, this.gl.uniform2f(this.location, t[0], t[1]));\n        }\n      }]);\n\n      return _class10;\n    }(ks), t.Uniform3f = /*#__PURE__*/function (_ks6) {\n      _inherits(_class11, _ks6);\n\n      function _class11(t, e) {\n        var _this22;\n\n        _classCallCheck(this, _class11);\n\n        _this22 = _possibleConstructorReturn(this, _getPrototypeOf(_class11).call(this, t, e)), _this22.current = [0, 0, 0];\n        return _this22;\n      }\n\n      _createClass(_class11, [{\n        key: \"set\",\n        value: function set(t) {\n          t[0] === this.current[0] && t[1] === this.current[1] && t[2] === this.current[2] || (this.current = t, this.gl.uniform3f(this.location, t[0], t[1], t[2]));\n        }\n      }]);\n\n      return _class11;\n    }(ks), t.Uniform4f = zs, t.UniformColor = Is, t.UniformMatrix4f = /*#__PURE__*/function (_ks7) {\n      _inherits(_class12, _ks7);\n\n      function _class12(t, e) {\n        var _this23;\n\n        _classCallCheck(this, _class12);\n\n        _this23 = _possibleConstructorReturn(this, _getPrototypeOf(_class12).call(this, t, e)), _this23.current = Ms;\n        return _this23;\n      }\n\n      _createClass(_class12, [{\n        key: \"set\",\n        value: function set(t) {\n          if (t[12] !== this.current[12] || t[0] !== this.current[0]) return this.current = t, void this.gl.uniformMatrix4fv(this.location, !1, t);\n\n          for (var _e158 = 1; _e158 < 16; _e158++) {\n            if (t[_e158] !== this.current[_e158]) {\n              this.current = t, this.gl.uniformMatrix4fv(this.location, !1, t);\n              break;\n            }\n          }\n        }\n      }]);\n\n      return _class12;\n    }(ks), t.UnwrappedTileID = Wu, t.ValidationError = it, t.ZoomHistory = Mn, t.addDynamicAttributes = Su, t.asyncAll = function (t, e, r) {\n      if (!t.length) return r(null, []);\n      var n = t.length;\n      var i = new Array(t.length);\n      var s = null;\n      t.forEach(function (t, a) {\n        e(t, function (t, e) {\n          t && (s = t), i[a] = e, 0 == --n && r(s, i);\n        });\n      });\n    }, t.bezier = n, t.bindAll = u, t.cacheEntryPossiblyAdded = function (t) {\n      F++, F > V && (t.getActor().send(\"enforceCacheSizeLimit\", P), F = 0);\n    }, t.clamp = s, t.clearTileCache = function (t) {\n      var e = caches.delete(M);\n      t && e.catch(t).then(function () {\n        return t();\n      });\n    }, t.clipLine = ru, t.clone = function (t) {\n      var e = new la(16);\n      return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e[9] = t[9], e[10] = t[10], e[11] = t[11], e[12] = t[12], e[13] = t[13], e[14] = t[14], e[15] = t[15], e;\n    }, t.clone$1 = p, t.collisionCircleLayout = Ho, t.config = I, t.create = function () {\n      var t = new la(16);\n      return la != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0), t[0] = 1, t[5] = 1, t[10] = 1, t[15] = 1, t;\n    }, t.createExpression = Vr, t.createFilter = Zr, t.createLayout = mi, t.createStyleLayer = function (t) {\n      return \"custom\" === t.type ? new Du(t) : new $u[t.type](t);\n    }, t.dot = function (t, e) {\n      return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] + t[3] * e[3];\n    }, t.ease = i, t.emitValidationErrors = wn, t.enforceCacheSizeLimit = function (t) {\n      E(), B && B.then(function (e) {\n        e.keys().then(function (r) {\n          for (var _n100 = 0; _n100 < r.length - t; _n100++) {\n            e.delete(r[_n100]);\n          }\n        });\n      });\n    }, t.evaluateSizeForFeature = function (t, _ref116, _ref117) {\n      var e = _ref116.uSize,\n          r = _ref116.uSizeT;\n      var n = _ref117.lowerSize,\n          i = _ref117.upperSize;\n      return \"source\" === t.kind ? n / Zl : \"composite\" === t.kind ? Se(n / Zl, i / Zl, r) : e;\n    }, t.evaluateSizeForZoom = function (t, e) {\n      var r = 0,\n          n = 0;\n      if (\"constant\" === t.kind) n = t.layoutSize;else if (\"source\" !== t.kind) {\n        var _i102 = t.interpolationType,\n            _a62 = t.minZoom,\n            _o31 = t.maxZoom,\n            _l28 = _i102 ? s(Ne.interpolationFactor(_i102, e, _a62, _o31), 0, 1) : 0;\n\n        \"camera\" === t.kind ? n = Se(t.minSize, t.maxSize, _l28) : r = _l28;\n      }\n      return {\n        uSizeT: r,\n        uSize: n\n      };\n    }, t.evaluateVariableOffset = yu, t.evented = Zn, t.exported = k, t.exported$1 = T, t.extend = o, t.filterObject = h, t.getAnchorAlignment = ql, t.getAnchorJustification = mu, t.getArrayBuffer = Z, t.getImage = H, t.getJSON = function (t, e) {\n      return K(o(t, {\n        type: \"json\"\n      }), e);\n    }, t.getOverlapMode = Fu, t.getRTLTextPluginStatus = Gn, t.getReferrer = j, t.getVideo = function (t, e) {\n      var r = window.document.createElement(\"video\");\n      r.muted = !0, r.onloadstart = function () {\n        e(null, r);\n      };\n\n      for (var _e159 = 0; _e159 < t.length; _e159++) {\n        var _n101 = window.document.createElement(\"source\");\n\n        G(t[_e159]) || (r.crossOrigin = \"Anonymous\"), _n101.src = t[_e159], r.appendChild(_n101);\n      }\n\n      return {\n        cancel: function cancel() {}\n      };\n    }, t.identity = ua, t.invert = function (t, e) {\n      var r = e[0],\n          n = e[1],\n          i = e[2],\n          s = e[3],\n          a = e[4],\n          o = e[5],\n          l = e[6],\n          u = e[7],\n          c = e[8],\n          h = e[9],\n          p = e[10],\n          f = e[11],\n          d = e[12],\n          y = e[13],\n          m = e[14],\n          g = e[15],\n          x = r * o - n * a,\n          v = r * l - i * a,\n          b = r * u - s * a,\n          w = n * l - i * o,\n          _ = n * u - s * o,\n          A = i * u - s * l,\n          k = c * y - h * d,\n          S = c * m - p * d,\n          z = c * g - f * d,\n          I = h * m - p * y,\n          M = h * g - f * y,\n          B = p * g - f * m,\n          C = x * B - v * M + b * I + w * z - _ * S + A * k;\n\n      return C ? (t[0] = (o * B - l * M + u * I) * (C = 1 / C), t[1] = (i * M - n * B - s * I) * C, t[2] = (y * A - m * _ + g * w) * C, t[3] = (p * _ - h * A - f * w) * C, t[4] = (l * z - a * B - u * S) * C, t[5] = (r * B - i * z + s * S) * C, t[6] = (m * b - d * A - g * v) * C, t[7] = (c * A - p * b + f * v) * C, t[8] = (a * M - o * z + u * k) * C, t[9] = (n * z - r * M - s * k) * C, t[10] = (d * _ - y * b + g * x) * C, t[11] = (h * b - c * _ - f * x) * C, t[12] = (o * S - a * I - l * k) * C, t[13] = (r * I - n * S + i * k) * C, t[14] = (y * v - d * w - m * x) * C, t[15] = (c * w - h * v + p * x) * C, t) : null;\n    }, t.isImageBitmap = A, t.isSafari = _, t.keysDifference = function (t, e) {\n      var r = [];\n\n      for (var _n102 in t) {\n        _n102 in e || r.push(_n102);\n      }\n\n      return r;\n    }, t.lazyLoadRTLTextPlugin = function () {\n      Xn.isLoading() || Xn.isLoaded() || \"deferred\" !== Gn() || Jn();\n    }, t.makeRequest = K, t.mapObject = c, t.mercatorXfromLng = Ku, t.mercatorYfromLat = Zu, t.mercatorZfromAltitude = Gu, t.mul = pa, t.multiply = ca, t.nextPowerOfTwo = function (t) {\n      return t <= 1 ? 1 : Math.pow(2, Math.ceil(Math.log(t) / Math.LN2));\n    }, t.number = Se, t.ortho = function (t, e, r, n, i, s, a) {\n      var o = 1 / (e - r),\n          l = 1 / (n - i),\n          u = 1 / (s - a);\n      return t[0] = -2 * o, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = -2 * l, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[10] = 2 * u, t[11] = 0, t[12] = (e + r) * o, t[13] = (i + n) * l, t[14] = (a + s) * u, t[15] = 1, t;\n    }, t.parseCacheControl = x, t.parseGlyphPBF = function (t) {\n      return new el(t).readFields(kl, []);\n    }, t.pbf = el, t.performSymbolLayout = function (e, r, n, i, s, a, o) {\n      e.createArrays(), e.tilePixelRatio = Rs / (512 * e.overscaling), e.compareText = {}, e.iconsNeedLinear = !1;\n      var l = e.layers[0].layout,\n          u = e.layers[0]._unevaluatedLayout._values,\n          c = {\n        layoutIconSize: u[\"icon-size\"].possiblyEvaluate(new Yn(e.zoom + 1), o),\n        layoutTextSize: u[\"text-size\"].possiblyEvaluate(new Yn(e.zoom + 1), o),\n        textMaxSize: u[\"text-size\"].possiblyEvaluate(new Yn(18))\n      };\n\n      if (\"composite\" === e.textSizeData.kind) {\n        var _e$textSizeData = e.textSizeData,\n            _t151 = _e$textSizeData.minZoom,\n            _r150 = _e$textSizeData.maxZoom;\n        c.compositeTextSizes = [u[\"text-size\"].possiblyEvaluate(new Yn(_t151), o), u[\"text-size\"].possiblyEvaluate(new Yn(_r150), o)];\n      }\n\n      if (\"composite\" === e.iconSizeData.kind) {\n        var _e$iconSizeData = e.iconSizeData,\n            _t152 = _e$iconSizeData.minZoom,\n            _r151 = _e$iconSizeData.maxZoom;\n        c.compositeIconSizes = [u[\"icon-size\"].possiblyEvaluate(new Yn(_t152), o), u[\"icon-size\"].possiblyEvaluate(new Yn(_r151), o)];\n      }\n\n      var h = l.get(\"text-line-height\") * tl,\n          p = \"viewport\" !== l.get(\"text-rotation-alignment\") && \"point\" !== l.get(\"symbol-placement\"),\n          f = l.get(\"text-keep-upright\"),\n          y = l.get(\"text-size\");\n\n      var _iterator117 = _createForOfIteratorHelper(e.features),\n          _step117;\n\n      try {\n        var _loop2 = function _loop2() {\n          var a = _step117.value;\n          var u = l.get(\"text-font\").evaluate(a, {}, o).join(\",\"),\n              m = y.evaluate(a, {}, o),\n              g = c.layoutTextSize.evaluate(a, {}, o),\n              x = c.layoutIconSize.evaluate(a, {}, o),\n              v = {\n            horizontal: {},\n            vertical: void 0\n          },\n              b = a.text;\n          var w = void 0,\n              _ = [0, 0];\n\n          if (b) {\n            var _i103 = b.toString(),\n                _c16 = l.get(\"text-letter-spacing\").evaluate(a, {}, o) * tl,\n                _d6 = Pn(_i103) ? _c16 : 0,\n                _y7 = l.get(\"text-anchor\").evaluate(a, {}, o),\n                _x9 = l.get(\"text-variable-anchor\");\n\n            if (!_x9) {\n              var _t153 = l.get(\"text-radial-offset\").evaluate(a, {}, o);\n\n              _ = _t153 ? yu(_y7, [_t153 * tl, du]) : l.get(\"text-offset\").evaluate(a, {}, o).map(function (t) {\n                return t * tl;\n              });\n            }\n\n            var _w6 = p ? \"center\" : l.get(\"text-justify\").evaluate(a, {}, o);\n\n            var _A7 = l.get(\"symbol-placement\"),\n                _k6 = \"point\" === _A7 ? l.get(\"text-max-width\").evaluate(a, {}, o) * tl : 0,\n                _S4 = function _S4() {\n              e.allowVerticalPlacement && Cn(_i103) && (v.vertical = El(b, r, n, s, u, _k6, h, _y7, \"left\", _d6, _, t.WritingMode.vertical, !0, _A7, g, m));\n            };\n\n            if (!p && _x9) {\n              var _e160 = \"auto\" === _w6 ? _x9.map(function (t) {\n                return mu(t);\n              }) : [_w6];\n\n              var _i104 = !1;\n\n              for (var _a63 = 0; _a63 < _e160.length; _a63++) {\n                var _o32 = _e160[_a63];\n                if (!v.horizontal[_o32]) if (_i104) v.horizontal[_o32] = v.horizontal[0];else {\n                  var _e161 = El(b, r, n, s, u, _k6, h, \"center\", _o32, _d6, _, t.WritingMode.horizontal, !1, _A7, g, m);\n\n                  _e161 && (v.horizontal[_o32] = _e161, _i104 = 1 === _e161.positionedLines.length);\n                }\n              }\n\n              _S4();\n            } else {\n              \"auto\" === _w6 && (_w6 = mu(_y7));\n\n              var _e162 = El(b, r, n, s, u, _k6, h, _y7, _w6, _d6, _, t.WritingMode.horizontal, !1, _A7, g, m);\n\n              _e162 && (v.horizontal[_w6] = _e162), _S4(), Cn(_i103) && p && f && (v.vertical = El(b, r, n, s, u, _k6, h, _y7, _w6, _d6, _, t.WritingMode.vertical, !1, _A7, g, m));\n            }\n          }\n\n          var A = !1;\n\n          if (a.icon && a.icon.name) {\n            var _t154 = i[a.icon.name];\n            _t154 && (w = Nl(s[a.icon.name], l.get(\"icon-offset\").evaluate(a, {}, o), l.get(\"icon-anchor\").evaluate(a, {}, o)), A = !!_t154.sdf, void 0 === e.sdfIcons ? e.sdfIcons = A : e.sdfIcons !== A && d(\"Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer\"), (_t154.pixelRatio !== e.pixelRatio || 0 !== l.get(\"icon-rotate\").constantOr(1)) && (e.iconsNeedLinear = !0));\n          }\n\n          var k = bu(v.horizontal) || v.vertical;\n          e.iconsInText = !!k && k.iconsInText, (k || w) && gu(e, a, v, w, i, c, g, x, _, A, o);\n        };\n\n        for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {\n          _loop2();\n        }\n      } catch (err) {\n        _iterator117.e(err);\n      } finally {\n        _iterator117.f();\n      }\n\n      a && e.generateCollisionDebugBuffers();\n    }, t.perspective = function (t, e, r, n, i) {\n      var s,\n          a = 1 / Math.tan(e / 2);\n      return t[0] = a / r, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 0, t[5] = a, t[6] = 0, t[7] = 0, t[8] = 0, t[9] = 0, t[11] = -1, t[12] = 0, t[13] = 0, t[15] = 0, null != i && i !== 1 / 0 ? (t[10] = (i + n) * (s = 1 / (n - i)), t[14] = 2 * i * n * s) : (t[10] = -1, t[14] = -2 * n), t;\n    }, t.pick = function (t, e) {\n      var r = {};\n\n      for (var _n103 = 0; _n103 < e.length; _n103++) {\n        var _i105 = e[_n103];\n        _i105 in t && (r[_i105] = t[_i105]);\n      }\n\n      return r;\n    }, t.plugin = Xn, t.pointGeometry = S, t.polygonIntersectsPolygon = Zs, t.potpack = Il, t.refProperties = [\"type\", \"source\", \"source-layer\", \"minzoom\", \"maxzoom\", \"filter\", \"layout\"], t.register = kn, t.registerForPluginStateChange = function (t) {\n      return t({\n        pluginStatus: qn,\n        pluginURL: jn\n      }), Zn.on(\"pluginStateChange\", t), t;\n    }, t.renderColorRamp = _a, t.rotateX = function (t, e, r) {\n      var n = Math.sin(r),\n          i = Math.cos(r),\n          s = e[4],\n          a = e[5],\n          o = e[6],\n          l = e[7],\n          u = e[8],\n          c = e[9],\n          h = e[10],\n          p = e[11];\n      return e !== t && (t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[4] = s * i + u * n, t[5] = a * i + c * n, t[6] = o * i + h * n, t[7] = l * i + p * n, t[8] = u * i - s * n, t[9] = c * i - a * n, t[10] = h * i - o * n, t[11] = p * i - l * n, t;\n    }, t.rotateZ = function (t, e, r) {\n      var n = Math.sin(r),\n          i = Math.cos(r),\n          s = e[0],\n          a = e[1],\n          o = e[2],\n          l = e[3],\n          u = e[4],\n          c = e[5],\n          h = e[6],\n          p = e[7];\n      return e !== t && (t[8] = e[8], t[9] = e[9], t[10] = e[10], t[11] = e[11], t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15]), t[0] = s * i + u * n, t[1] = a * i + c * n, t[2] = o * i + h * n, t[3] = l * i + p * n, t[4] = u * i - s * n, t[5] = c * i - a * n, t[6] = h * i - o * n, t[7] = p * i - l * n, t;\n    }, t.scale = function (t, e, r) {\n      var n = r[0],\n          i = r[1],\n          s = r[2];\n      return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * i, t[5] = e[5] * i, t[6] = e[6] * i, t[7] = e[7] * i, t[8] = e[8] * s, t[9] = e[9] * s, t[10] = e[10] * s, t[11] = e[11] * s, t[12] = e[12], t[13] = e[13], t[14] = e[14], t[15] = e[15], t;\n    }, t.scale$1 = function (t, e, r) {\n      return t[0] = e[0] * r, t[1] = e[1] * r, t[2] = e[2] * r, t[3] = e[3] * r, t;\n    }, t.setCacheLimits = function (t, e) {\n      P = t, V = e;\n    }, t.setRTLTextPlugin = function (t, e) {\n      var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n      if (qn === $n || qn === Rn || qn === Un) throw new Error(\"setRTLTextPlugin cannot be called multiple times.\");\n      jn = k.resolveURL(t), qn = $n, On = e, Kn(), r || Jn();\n    }, t.spec = nt, t.sphericalToCartesian = function (_ref118) {\n      var _ref119 = _slicedToArray(_ref118, 3),\n          t = _ref119[0],\n          e = _ref119[1],\n          r = _ref119[2];\n\n      return e += 90, e *= Math.PI / 180, r *= Math.PI / 180, {\n        x: t * Math.cos(e) * Math.sin(r),\n        y: t * Math.sin(e) * Math.sin(r),\n        z: t * Math.cos(r)\n      };\n    }, t.toEvaluationFeature = js, t.transformMat4 = fa, t.translate = function (t, e, r) {\n      var n,\n          i,\n          s,\n          a,\n          o,\n          l,\n          u,\n          c,\n          h,\n          p,\n          f,\n          d,\n          y = r[0],\n          m = r[1],\n          g = r[2];\n      return e === t ? (t[12] = e[0] * y + e[4] * m + e[8] * g + e[12], t[13] = e[1] * y + e[5] * m + e[9] * g + e[13], t[14] = e[2] * y + e[6] * m + e[10] * g + e[14], t[15] = e[3] * y + e[7] * m + e[11] * g + e[15]) : (i = e[1], s = e[2], a = e[3], o = e[4], l = e[5], u = e[6], c = e[7], h = e[8], p = e[9], f = e[10], d = e[11], t[0] = n = e[0], t[1] = i, t[2] = s, t[3] = a, t[4] = o, t[5] = l, t[6] = u, t[7] = c, t[8] = h, t[9] = p, t[10] = f, t[11] = d, t[12] = n * y + o * m + h * g + e[12], t[13] = i * y + l * m + p * g + e[13], t[14] = s * y + u * m + f * g + e[14], t[15] = a * y + c * m + d * g + e[15]), t;\n    }, t.triggerPluginCompletionEvent = Nn, t.unicodeBlockLookup = Bn, t.uniqueId = function () {\n      return l++;\n    }, t.validateCustomStyleLayer = function (t) {\n      var e = [],\n          r = t.id;\n      return void 0 === r && e.push({\n        message: \"layers.\".concat(r, \": missing required property \\\"id\\\"\")\n      }), void 0 === t.render && e.push({\n        message: \"layers.\".concat(r, \": missing required method \\\"render\\\"\")\n      }), t.renderingMode && \"2d\" !== t.renderingMode && \"3d\" !== t.renderingMode && e.push({\n        message: \"layers.\".concat(r, \": property \\\"renderingMode\\\" must be either \\\"2d\\\" or \\\"3d\\\"\")\n      }), e;\n    }, t.validateLight = xn, t.validateStyle = gn, t.vectorTile = fo, t.warnOnce = d, t.wrap = a;\n  });\n  define([\"./shared\"], function (e) {\n    \"use strict\";\n\n    function t(e) {\n      var o = typeof e;\n      if (\"number\" === o || \"boolean\" === o || \"string\" === o || null == e) return JSON.stringify(e);\n\n      if (Array.isArray(e)) {\n        var _o33 = \"[\";\n\n        var _iterator118 = _createForOfIteratorHelper(e),\n            _step118;\n\n        try {\n          for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {\n            var _i106 = _step118.value;\n            _o33 += \"\".concat(t(_i106), \",\");\n          }\n        } catch (err) {\n          _iterator118.e(err);\n        } finally {\n          _iterator118.f();\n        }\n\n        return \"\".concat(_o33, \"]\");\n      }\n\n      var i = Object.keys(e).sort();\n      var r = \"{\";\n\n      for (var _o34 = 0; _o34 < i.length; _o34++) {\n        r += \"\".concat(JSON.stringify(i[_o34]), \":\").concat(t(e[i[_o34]]), \",\");\n      }\n\n      return \"\".concat(r, \"}\");\n    }\n\n    function o(o) {\n      var i = \"\";\n\n      var _iterator119 = _createForOfIteratorHelper(e.refProperties),\n          _step119;\n\n      try {\n        for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {\n          var _r152 = _step119.value;\n          i += \"/\".concat(t(o[_r152]));\n        }\n      } catch (err) {\n        _iterator119.e(err);\n      } finally {\n        _iterator119.f();\n      }\n\n      return i;\n    }\n\n    var i = /*#__PURE__*/function () {\n      function i(e) {\n        _classCallCheck(this, i);\n\n        this.keyCache = {}, e && this.replace(e);\n      }\n\n      _createClass(i, [{\n        key: \"replace\",\n        value: function replace(e) {\n          this._layerConfigs = {}, this._layers = {}, this.update(e, []);\n        }\n      }, {\n        key: \"update\",\n        value: function update(t, i) {\n          var _this24 = this;\n\n          var _iterator120 = _createForOfIteratorHelper(t),\n              _step120;\n\n          try {\n            for (_iterator120.s(); !(_step120 = _iterator120.n()).done;) {\n              var _o35 = _step120.value;\n              this._layerConfigs[_o35.id] = _o35;\n\n              var _t155 = this._layers[_o35.id] = e.createStyleLayer(_o35);\n\n              _t155._featureFilter = e.createFilter(_t155.filter), this.keyCache[_o35.id] && delete this.keyCache[_o35.id];\n            }\n          } catch (err) {\n            _iterator120.e(err);\n          } finally {\n            _iterator120.f();\n          }\n\n          var _iterator121 = _createForOfIteratorHelper(i),\n              _step121;\n\n          try {\n            for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {\n              var _e164 = _step121.value;\n              delete this.keyCache[_e164], delete this._layerConfigs[_e164], delete this._layers[_e164];\n            }\n          } catch (err) {\n            _iterator121.e(err);\n          } finally {\n            _iterator121.f();\n          }\n\n          this.familiesBySource = {};\n\n          var r = function (e, t) {\n            var i = {};\n\n            for (var _r153 = 0; _r153 < e.length; _r153++) {\n              var _n104 = t && t[e[_r153].id] || o(e[_r153]);\n\n              t && (t[e[_r153].id] = _n104);\n              var _s75 = i[_n104];\n              _s75 || (_s75 = i[_n104] = []), _s75.push(e[_r153]);\n            }\n\n            var r = [];\n\n            for (var _e163 in i) {\n              r.push(i[_e163]);\n            }\n\n            return r;\n          }(Object.values(this._layerConfigs), this.keyCache);\n\n          var _iterator122 = _createForOfIteratorHelper(r),\n              _step122;\n\n          try {\n            for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {\n              var _e165 = _step122.value;\n\n              var _t156 = _e165.map(function (e) {\n                return _this24._layers[e.id];\n              }),\n                  _o36 = _t156[0];\n\n              if (\"none\" === _o36.visibility) continue;\n\n              var _i107 = _o36.source || \"\";\n\n              var _r154 = this.familiesBySource[_i107];\n              _r154 || (_r154 = this.familiesBySource[_i107] = {});\n\n              var _n105 = _o36.sourceLayer || \"_geojsonTileLayer\";\n\n              var _s76 = _r154[_n105];\n              _s76 || (_s76 = _r154[_n105] = []), _s76.push(_t156);\n            }\n          } catch (err) {\n            _iterator122.e(err);\n          } finally {\n            _iterator122.f();\n          }\n        }\n      }]);\n\n      return i;\n    }();\n\n    var r = function r(t) {\n      _classCallCheck(this, r);\n\n      var o = {},\n          i = [];\n\n      for (var _e166 in t) {\n        var _r156 = t[_e166],\n            _n106 = o[_e166] = {};\n\n        for (var _e167 in _r156) {\n          var _t157 = _r156[+_e167];\n          if (!_t157 || 0 === _t157.bitmap.width || 0 === _t157.bitmap.height) continue;\n          var _o37 = {\n            x: 0,\n            y: 0,\n            w: _t157.bitmap.width + 2,\n            h: _t157.bitmap.height + 2\n          };\n          i.push(_o37), _n106[_e167] = {\n            rect: _o37,\n            metrics: _t157.metrics\n          };\n        }\n      }\n\n      var _e$potpack = e.potpack(i),\n          _r155 = _e$potpack.w,\n          n = _e$potpack.h,\n          s = new e.AlphaImage({\n        width: _r155 || 1,\n        height: n || 1\n      });\n\n      for (var _i108 in t) {\n        var _r157 = t[_i108];\n\n        for (var _t158 in _r157) {\n          var _n107 = _r157[+_t158];\n          if (!_n107 || 0 === _n107.bitmap.width || 0 === _n107.bitmap.height) continue;\n          var _a64 = o[_i108][_t158].rect;\n          e.AlphaImage.copy(_n107.bitmap, s, {\n            x: 0,\n            y: 0\n          }, {\n            x: _a64.x + 1,\n            y: _a64.y + 1\n          }, _n107.bitmap);\n        }\n      }\n\n      this.image = s, this.positions = o;\n    };\n\n    e.register(\"GlyphAtlas\", r);\n\n    var n = /*#__PURE__*/function () {\n      function n(t) {\n        _classCallCheck(this, n);\n\n        this.tileID = new e.OverscaledTileID(t.tileID.overscaledZ, t.tileID.wrap, t.tileID.canonical.z, t.tileID.canonical.x, t.tileID.canonical.y), this.uid = t.uid, this.zoom = t.zoom, this.pixelRatio = t.pixelRatio, this.tileSize = t.tileSize, this.source = t.source, this.overscaling = this.tileID.overscaleFactor(), this.showCollisionBoxes = t.showCollisionBoxes, this.collectResourceTiming = !!t.collectResourceTiming, this.returnDependencies = !!t.returnDependencies, this.promoteId = t.promoteId;\n      }\n\n      _createClass(n, [{\n        key: \"parse\",\n        value: function parse(t, o, i, n, a) {\n          var _this25 = this;\n\n          this.status = \"parsing\", this.data = t, this.collisionBoxArray = new e.CollisionBoxArray();\n          var l = new e.DictionaryCoder(Object.keys(t.layers).sort()),\n              c = new e.FeatureIndex(this.tileID, this.promoteId);\n          c.bucketLayerIDs = [];\n          var u = {},\n              h = {\n            featureIndex: c,\n            iconDependencies: {},\n            patternDependencies: {},\n            glyphDependencies: {},\n            availableImages: i\n          },\n              p = o.familiesBySource[this.source];\n\n          for (var _o38 in p) {\n            var _r158 = t.layers[_o38];\n            if (!_r158) continue;\n            1 === _r158.version && e.warnOnce(\"Vector tile source \\\"\".concat(this.source, \"\\\" layer \\\"\").concat(_o38, \"\\\" does not use vector tile spec v2 and therefore may have some rendering errors.\"));\n\n            var _n108 = l.encode(_o38),\n                _a65 = [];\n\n            for (var _e168 = 0; _e168 < _r158.length; _e168++) {\n              var _t159 = _r158.feature(_e168),\n                  _i109 = c.getId(_t159, _o38);\n\n              _a65.push({\n                feature: _t159,\n                id: _i109,\n                index: _e168,\n                sourceLayerIndex: _n108\n              });\n            }\n\n            var _iterator123 = _createForOfIteratorHelper(p[_o38]),\n                _step123;\n\n            try {\n              for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {\n                var _e169 = _step123.value;\n                var _t160 = _e169[0];\n                _t160.minzoom && this.zoom < Math.floor(_t160.minzoom) || _t160.maxzoom && this.zoom >= _t160.maxzoom || \"none\" !== _t160.visibility && (s(_e169, this.zoom, i), (u[_t160.id] = _t160.createBucket({\n                  index: c.bucketLayerIDs.length,\n                  layers: _e169,\n                  zoom: this.zoom,\n                  pixelRatio: this.pixelRatio,\n                  overscaling: this.overscaling,\n                  collisionBoxArray: this.collisionBoxArray,\n                  sourceLayerIndex: _n108,\n                  sourceID: this.source\n                })).populate(_a65, h, this.tileID.canonical), c.bucketLayerIDs.push(_e169.map(function (e) {\n                  return e.id;\n                })));\n              }\n            } catch (err) {\n              _iterator123.e(err);\n            } finally {\n              _iterator123.f();\n            }\n          }\n\n          var f, d, g, m;\n          var y = e.mapObject(h.glyphDependencies, function (e) {\n            return Object.keys(e).map(Number);\n          });\n          Object.keys(y).length ? n.send(\"getGlyphs\", {\n            uid: this.uid,\n            stacks: y\n          }, function (e, t) {\n            f || (f = e, d = t, w.call(_this25));\n          }) : d = {};\n          var v = Object.keys(h.iconDependencies);\n          v.length ? n.send(\"getImages\", {\n            icons: v,\n            source: this.source,\n            tileID: this.tileID,\n            type: \"icons\"\n          }, function (e, t) {\n            f || (f = e, g = t, w.call(_this25));\n          }) : g = {};\n          var x = Object.keys(h.patternDependencies);\n\n          function w() {\n            if (f) return a(f);\n\n            if (d && g && m) {\n              var _t161 = new r(d),\n                  _o39 = new e.ImageAtlas(g, m);\n\n              for (var _r159 in u) {\n                var _n109 = u[_r159];\n                _n109 instanceof e.SymbolBucket ? (s(_n109.layers, this.zoom, i), e.performSymbolLayout(_n109, d, _t161.positions, g, _o39.iconPositions, this.showCollisionBoxes, this.tileID.canonical)) : _n109.hasPattern && (_n109 instanceof e.LineBucket || _n109 instanceof e.FillBucket || _n109 instanceof e.FillExtrusionBucket) && (s(_n109.layers, this.zoom, i), _n109.addFeatures(h, this.tileID.canonical, _o39.patternPositions));\n              }\n\n              this.status = \"done\", a(null, {\n                buckets: Object.values(u).filter(function (e) {\n                  return !e.isEmpty();\n                }),\n                featureIndex: c,\n                collisionBoxArray: this.collisionBoxArray,\n                glyphAtlasImage: _t161.image,\n                imageAtlas: _o39,\n                glyphMap: this.returnDependencies ? d : null,\n                iconMap: this.returnDependencies ? g : null,\n                glyphPositions: this.returnDependencies ? _t161.positions : null\n              });\n            }\n          }\n\n          x.length ? n.send(\"getImages\", {\n            icons: x,\n            source: this.source,\n            tileID: this.tileID,\n            type: \"patterns\"\n          }, function (e, t) {\n            f || (f = e, m = t, w.call(_this25));\n          }) : m = {}, w.call(this);\n        }\n      }]);\n\n      return n;\n    }();\n\n    function s(t, o, i) {\n      var r = new e.EvaluationParameters(o);\n\n      var _iterator124 = _createForOfIteratorHelper(t),\n          _step124;\n\n      try {\n        for (_iterator124.s(); !(_step124 = _iterator124.n()).done;) {\n          var _e170 = _step124.value;\n\n          _e170.recalculate(r, i);\n        }\n      } catch (err) {\n        _iterator124.e(err);\n      } finally {\n        _iterator124.f();\n      }\n    }\n\n    function a(t, o) {\n      var i = e.getArrayBuffer(t.request, function (t, i, r, n) {\n        t ? o(t) : i && o(null, {\n          vectorTile: new e.vectorTile.VectorTile(new e.pbf(i)),\n          rawData: i,\n          cacheControl: r,\n          expires: n\n        });\n      });\n      return function () {\n        i.cancel(), o();\n      };\n    }\n\n    var l = /*#__PURE__*/function () {\n      function l(e, t, o, i) {\n        _classCallCheck(this, l);\n\n        this.actor = e, this.layerIndex = t, this.availableImages = o, this.loadVectorData = i || a, this.loading = {}, this.loaded = {};\n      }\n\n      _createClass(l, [{\n        key: \"loadTile\",\n        value: function loadTile(t, o) {\n          var _this26 = this;\n\n          var i = t.uid;\n          this.loading || (this.loading = {});\n          var r = !!(t && t.request && t.request.collectResourceTiming) && new e.RequestPerformance(t.request),\n              s = this.loading[i] = new n(t);\n          s.abort = this.loadVectorData(t, function (t, n) {\n            if (delete _this26.loading[i], t || !n) return s.status = \"done\", _this26.loaded[i] = s, o(t);\n            var a = n.rawData,\n                l = {};\n            n.expires && (l.expires = n.expires), n.cacheControl && (l.cacheControl = n.cacheControl);\n            var c = {};\n\n            if (r) {\n              var _e171 = r.finish();\n\n              _e171 && (c.resourceTiming = JSON.parse(JSON.stringify(_e171)));\n            }\n\n            s.vectorTile = n.vectorTile, s.parse(n.vectorTile, _this26.layerIndex, _this26.availableImages, _this26.actor, function (t, i) {\n              if (t || !i) return o(t);\n              o(null, e.extend({\n                rawTileData: a.slice(0)\n              }, i, l, c));\n            }), _this26.loaded = _this26.loaded || {}, _this26.loaded[i] = s;\n          });\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t) {\n          var _this27 = this;\n\n          var o = this.loaded,\n              i = e.uid,\n              r = this;\n\n          if (o && o[i]) {\n            var _n110 = o[i];\n            _n110.showCollisionBoxes = e.showCollisionBoxes;\n\n            var _s77 = function _s77(e, o) {\n              var i = _n110.reloadCallback;\n              i && (delete _n110.reloadCallback, _n110.parse(_n110.vectorTile, r.layerIndex, _this27.availableImages, r.actor, i)), t(e, o);\n            };\n\n            \"parsing\" === _n110.status ? _n110.reloadCallback = _s77 : \"done\" === _n110.status && (_n110.vectorTile ? _n110.parse(_n110.vectorTile, this.layerIndex, this.availableImages, this.actor, _s77) : _s77());\n          }\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(e, t) {\n          var o = this.loading,\n              i = e.uid;\n          o && o[i] && o[i].abort && (o[i].abort(), delete o[i]), t();\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e, t) {\n          var o = this.loaded,\n              i = e.uid;\n          o && o[i] && delete o[i], t();\n        }\n      }]);\n\n      return l;\n    }();\n\n    var c = /*#__PURE__*/function () {\n      function c() {\n        _classCallCheck(this, c);\n\n        this.loaded = {};\n      }\n\n      _createClass(c, [{\n        key: \"loadTile\",\n        value: function loadTile(t, o) {\n          var i = t.uid,\n              r = t.encoding,\n              n = t.rawImageData,\n              s = e.isImageBitmap(n) ? this.getImageData(n) : n,\n              a = new e.DEMData(i, s, r);\n          this.loaded = this.loaded || {}, this.loaded[i] = a, o(null, a);\n        }\n      }, {\n        key: \"getImageData\",\n        value: function getImageData(t) {\n          this.offscreenCanvas && this.offscreenCanvasContext || (this.offscreenCanvas = new OffscreenCanvas(t.width, t.height), this.offscreenCanvasContext = this.offscreenCanvas.getContext(\"2d\")), this.offscreenCanvas.width = t.width, this.offscreenCanvas.height = t.height, this.offscreenCanvasContext.drawImage(t, 0, 0, t.width, t.height);\n          var o = this.offscreenCanvasContext.getImageData(-1, -1, t.width + 2, t.height + 2);\n          return this.offscreenCanvasContext.clearRect(0, 0, this.offscreenCanvas.width, this.offscreenCanvas.height), new e.RGBAImage({\n            width: o.width,\n            height: o.height\n          }, o.data);\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e) {\n          var t = this.loaded,\n              o = e.uid;\n          t && t[o] && delete t[o];\n        }\n      }]);\n\n      return c;\n    }();\n\n    var u = function e(t, o) {\n      var i,\n          r = t && t.type;\n      if (\"FeatureCollection\" === r) for (i = 0; i < t.features.length; i++) {\n        e(t.features[i], o);\n      } else if (\"GeometryCollection\" === r) for (i = 0; i < t.geometries.length; i++) {\n        e(t.geometries[i], o);\n      } else if (\"Feature\" === r) e(t.geometry, o);else if (\"Polygon\" === r) h(t.coordinates, o);else if (\"MultiPolygon\" === r) for (i = 0; i < t.coordinates.length; i++) {\n        h(t.coordinates[i], o);\n      }\n      return t;\n    };\n\n    function h(e, t) {\n      if (0 !== e.length) {\n        p(e[0], t);\n\n        for (var o = 1; o < e.length; o++) {\n          p(e[o], !t);\n        }\n      }\n    }\n\n    function p(e, t) {\n      for (var o = 0, i = 0, r = 0, n = e.length, s = n - 1; r < n; s = r++) {\n        var a = (e[r][0] - e[s][0]) * (e[s][1] + e[r][1]),\n            l = o + a;\n        i += Math.abs(o) >= Math.abs(a) ? o - l + a : a - l + o, o = l;\n      }\n\n      o + i >= 0 != !!t && e.reverse();\n    }\n\n    var f = e.vectorTile.VectorTileFeature.prototype.toGeoJSON;\n\n    var d = /*#__PURE__*/function () {\n      function d(t) {\n        _classCallCheck(this, d);\n\n        this._feature = t, this.extent = e.EXTENT, this.type = t.type, this.properties = t.tags, \"id\" in t && !isNaN(t.id) && (this.id = parseInt(t.id, 10));\n      }\n\n      _createClass(d, [{\n        key: \"loadGeometry\",\n        value: function loadGeometry() {\n          if (1 === this._feature.type) {\n            var _t162 = [];\n\n            var _iterator125 = _createForOfIteratorHelper(this._feature.geometry),\n                _step125;\n\n            try {\n              for (_iterator125.s(); !(_step125 = _iterator125.n()).done;) {\n                var _o40 = _step125.value;\n\n                _t162.push([new e.pointGeometry(_o40[0], _o40[1])]);\n              }\n            } catch (err) {\n              _iterator125.e(err);\n            } finally {\n              _iterator125.f();\n            }\n\n            return _t162;\n          }\n\n          {\n            var _t163 = [];\n\n            var _iterator126 = _createForOfIteratorHelper(this._feature.geometry),\n                _step126;\n\n            try {\n              for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {\n                var _o41 = _step126.value;\n                var _i110 = [];\n\n                var _iterator127 = _createForOfIteratorHelper(_o41),\n                    _step127;\n\n                try {\n                  for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {\n                    var _t164 = _step127.value;\n\n                    _i110.push(new e.pointGeometry(_t164[0], _t164[1]));\n                  }\n                } catch (err) {\n                  _iterator127.e(err);\n                } finally {\n                  _iterator127.f();\n                }\n\n                _t163.push(_i110);\n              }\n            } catch (err) {\n              _iterator126.e(err);\n            } finally {\n              _iterator126.f();\n            }\n\n            return _t163;\n          }\n        }\n      }, {\n        key: \"toGeoJSON\",\n        value: function toGeoJSON(e, t, o) {\n          return f.call(this, e, t, o);\n        }\n      }]);\n\n      return d;\n    }();\n\n    var g = /*#__PURE__*/function () {\n      function g(t) {\n        _classCallCheck(this, g);\n\n        this.layers = {\n          _geojsonTileLayer: this\n        }, this.name = \"_geojsonTileLayer\", this.extent = e.EXTENT, this.length = t.length, this._features = t;\n      }\n\n      _createClass(g, [{\n        key: \"feature\",\n        value: function feature(e) {\n          return new d(this._features[e]);\n        }\n      }]);\n\n      return g;\n    }();\n\n    var m = {\n      exports: {}\n    },\n        y = e.pointGeometry,\n        v = e.vectorTile.VectorTileFeature,\n        x = w;\n\n    function w(e, t) {\n      this.options = t || {}, this.features = e, this.length = e.length;\n    }\n\n    function S(e, t) {\n      this.id = \"number\" == typeof e.id ? e.id : void 0, this.type = e.type, this.rawGeometry = 1 === e.type ? [e.geometry] : e.geometry, this.properties = e.tags, this.extent = t || 4096;\n    }\n\n    w.prototype.feature = function (e) {\n      return new S(this.features[e], this.options.extent);\n    }, S.prototype.loadGeometry = function () {\n      var e = this.rawGeometry;\n      this.geometry = [];\n\n      for (var t = 0; t < e.length; t++) {\n        for (var o = e[t], i = [], r = 0; r < o.length; r++) {\n          i.push(new y(o[r][0], o[r][1]));\n        }\n\n        this.geometry.push(i);\n      }\n\n      return this.geometry;\n    }, S.prototype.bbox = function () {\n      this.geometry || this.loadGeometry();\n\n      for (var e = this.geometry, t = 1 / 0, o = -1 / 0, i = 1 / 0, r = -1 / 0, n = 0; n < e.length; n++) {\n        for (var s = e[n], a = 0; a < s.length; a++) {\n          var l = s[a];\n          t = Math.min(t, l.x), o = Math.max(o, l.x), i = Math.min(i, l.y), r = Math.max(r, l.y);\n        }\n      }\n\n      return [t, i, o, r];\n    }, S.prototype.toGeoJSON = v.prototype.toGeoJSON;\n    var I = e.pbf,\n        M = x;\n\n    function b(e) {\n      var t = new I();\n      return function (e, t) {\n        for (var o in e.layers) {\n          t.writeMessage(3, k, e.layers[o]);\n        }\n      }(e, t), t.finish();\n    }\n\n    function k(e, t) {\n      var o;\n      t.writeVarintField(15, e.version || 1), t.writeStringField(1, e.name || \"\"), t.writeVarintField(5, e.extent || 4096);\n      var i = {\n        keys: [],\n        values: [],\n        keycache: {},\n        valuecache: {}\n      };\n\n      for (o = 0; o < e.length; o++) {\n        i.feature = e.feature(o), t.writeMessage(2, _, i);\n      }\n\n      var r = i.keys;\n\n      for (o = 0; o < r.length; o++) {\n        t.writeStringField(3, r[o]);\n      }\n\n      var n = i.values;\n\n      for (o = 0; o < n.length; o++) {\n        t.writeMessage(4, L, n[o]);\n      }\n    }\n\n    function _(e, t) {\n      var o = e.feature;\n      void 0 !== o.id && t.writeVarintField(1, o.id), t.writeMessage(2, P, e), t.writeVarintField(3, o.type), t.writeMessage(4, D, o);\n    }\n\n    function P(e, t) {\n      var o = e.feature,\n          i = e.keys,\n          r = e.values,\n          n = e.keycache,\n          s = e.valuecache;\n\n      for (var a in o.properties) {\n        var l = o.properties[a],\n            c = n[a];\n\n        if (null !== l) {\n          void 0 === c && (i.push(a), n[a] = c = i.length - 1), t.writeVarint(c);\n          var u = typeof l;\n          \"string\" !== u && \"boolean\" !== u && \"number\" !== u && (l = JSON.stringify(l));\n          var h = u + \":\" + l,\n              p = s[h];\n          void 0 === p && (r.push(l), s[h] = p = r.length - 1), t.writeVarint(p);\n        }\n      }\n    }\n\n    function T(e, t) {\n      return (t << 3) + (7 & e);\n    }\n\n    function C(e) {\n      return e << 1 ^ e >> 31;\n    }\n\n    function D(e, t) {\n      for (var o = e.loadGeometry(), i = e.type, r = 0, n = 0, s = o.length, a = 0; a < s; a++) {\n        var l = o[a],\n            c = 1;\n        1 === i && (c = l.length), t.writeVarint(T(1, c));\n\n        for (var u = 3 === i ? l.length - 1 : l.length, h = 0; h < u; h++) {\n          1 === h && 1 !== i && t.writeVarint(T(2, u - 1));\n          var p = l[h].x - r,\n              f = l[h].y - n;\n          t.writeVarint(C(p)), t.writeVarint(C(f)), r += p, n += f;\n        }\n\n        3 === i && t.writeVarint(T(7, 1));\n      }\n    }\n\n    function L(e, t) {\n      var o = typeof e;\n      \"string\" === o ? t.writeStringField(1, e) : \"boolean\" === o ? t.writeBooleanField(7, e) : \"number\" === o && (e % 1 != 0 ? t.writeDoubleField(3, e) : e < 0 ? t.writeSVarintField(6, e) : t.writeVarintField(5, e));\n    }\n\n    m.exports = b, m.exports.fromVectorTileJs = b, m.exports.fromGeojsonVt = function (e, t) {\n      t = t || {};\n      var o = {};\n\n      for (var i in e) {\n        o[i] = new M(e[i].features, t), o[i].name = i, o[i].version = t.version, o[i].extent = t.extent;\n      }\n\n      return b({\n        layers: o\n      });\n    }, m.exports.GeoJSONWrapper = M;\n    var z = m.exports;\n\n    function O(e, t, o, i, r, n) {\n      if (r - i <= o) return;\n      var s = i + r >> 1;\n      E(e, t, s, i, r, n % 2), O(e, t, o, i, s - 1, n + 1), O(e, t, o, s + 1, r, n + 1);\n    }\n\n    function E(e, t, o, i, r, n) {\n      for (; r > i;) {\n        if (r - i > 600) {\n          var _s79 = r - i + 1,\n              _a67 = o - i + 1,\n              _l30 = Math.log(_s79),\n              _c17 = .5 * Math.exp(2 * _l30 / 3),\n              _u22 = .5 * Math.sqrt(_l30 * _c17 * (_s79 - _c17) / _s79) * (_a67 - _s79 / 2 < 0 ? -1 : 1);\n\n          E(e, t, o, Math.max(i, Math.floor(o - _a67 * _c17 / _s79 + _u22)), Math.min(r, Math.floor(o + (_s79 - _a67) * _c17 / _s79 + _u22)), n);\n        }\n\n        var _s78 = t[2 * o + n];\n        var _a66 = i,\n            _l29 = r;\n\n        for (F(e, t, i, o), t[2 * r + n] > _s78 && F(e, t, i, r); _a66 < _l29;) {\n          for (F(e, t, _a66, _l29), _a66++, _l29--; t[2 * _a66 + n] < _s78;) {\n            _a66++;\n          }\n\n          for (; t[2 * _l29 + n] > _s78;) {\n            _l29--;\n          }\n        }\n\n        t[2 * i + n] === _s78 ? F(e, t, i, _l29) : (_l29++, F(e, t, _l29, r)), _l29 <= o && (i = _l29 + 1), o <= _l29 && (r = _l29 - 1);\n      }\n    }\n\n    function F(e, t, o, i) {\n      N(e, o, i), N(t, 2 * o, 2 * i), N(t, 2 * o + 1, 2 * i + 1);\n    }\n\n    function N(e, t, o) {\n      var i = e[t];\n      e[t] = e[o], e[o] = i;\n    }\n\n    function A(e, t, o, i) {\n      var r = e - o,\n          n = t - i;\n      return r * r + n * n;\n    }\n\n    var G = function G(e) {\n      return e[0];\n    },\n        J = function J(e) {\n      return e[1];\n    };\n\n    var Z = /*#__PURE__*/function () {\n      function Z(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : G;\n        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : J;\n        var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 64;\n        var r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : Float64Array;\n\n        _classCallCheck(this, Z);\n\n        this.nodeSize = i, this.points = e;\n        var n = e.length < 65536 ? Uint16Array : Uint32Array,\n            s = this.ids = new n(e.length),\n            a = this.coords = new r(2 * e.length);\n\n        for (var _i111 = 0; _i111 < e.length; _i111++) {\n          s[_i111] = _i111, a[2 * _i111] = t(e[_i111]), a[2 * _i111 + 1] = o(e[_i111]);\n        }\n\n        O(s, a, i, 0, s.length - 1, 0);\n      }\n\n      _createClass(Z, [{\n        key: \"range\",\n        value: function range(e, t, o, i) {\n          return function (e, t, o, i, r, n, s) {\n            var a = [0, e.length - 1, 0],\n                l = [];\n            var c, u;\n\n            for (; a.length;) {\n              var _h12 = a.pop(),\n                  _p9 = a.pop(),\n                  _f8 = a.pop();\n\n              if (_p9 - _f8 <= s) {\n                for (var _s80 = _f8; _s80 <= _p9; _s80++) {\n                  c = t[2 * _s80], u = t[2 * _s80 + 1], c >= o && c <= r && u >= i && u <= n && l.push(e[_s80]);\n                }\n\n                continue;\n              }\n\n              var _d7 = Math.floor((_f8 + _p9) / 2);\n\n              c = t[2 * _d7], u = t[2 * _d7 + 1], c >= o && c <= r && u >= i && u <= n && l.push(e[_d7]);\n\n              var _g10 = (_h12 + 1) % 2;\n\n              (0 === _h12 ? o <= c : i <= u) && (a.push(_f8), a.push(_d7 - 1), a.push(_g10)), (0 === _h12 ? r >= c : n >= u) && (a.push(_d7 + 1), a.push(_p9), a.push(_g10));\n            }\n\n            return l;\n          }(this.ids, this.coords, e, t, o, i, this.nodeSize);\n        }\n      }, {\n        key: \"within\",\n        value: function within(e, t, o) {\n          return function (e, t, o, i, r, n) {\n            var s = [0, e.length - 1, 0],\n                a = [],\n                l = r * r;\n\n            for (; s.length;) {\n              var _c18 = s.pop(),\n                  _u23 = s.pop(),\n                  _h13 = s.pop();\n\n              if (_u23 - _h13 <= n) {\n                for (var _r160 = _h13; _r160 <= _u23; _r160++) {\n                  A(t[2 * _r160], t[2 * _r160 + 1], o, i) <= l && a.push(e[_r160]);\n                }\n\n                continue;\n              }\n\n              var _p10 = Math.floor((_h13 + _u23) / 2),\n                  _f9 = t[2 * _p10],\n                  _d8 = t[2 * _p10 + 1];\n\n              A(_f9, _d8, o, i) <= l && a.push(e[_p10]);\n\n              var _g11 = (_c18 + 1) % 2;\n\n              (0 === _c18 ? o - r <= _f9 : i - r <= _d8) && (s.push(_h13), s.push(_p10 - 1), s.push(_g11)), (0 === _c18 ? o + r >= _f9 : i + r >= _d8) && (s.push(_p10 + 1), s.push(_u23), s.push(_g11));\n            }\n\n            return a;\n          }(this.ids, this.coords, e, t, o, this.nodeSize);\n        }\n      }]);\n\n      return Z;\n    }();\n\n    var B = {\n      minZoom: 0,\n      maxZoom: 16,\n      minPoints: 2,\n      radius: 40,\n      extent: 512,\n      nodeSize: 64,\n      log: !1,\n      generateId: !1,\n      reduce: null,\n      map: function map(e) {\n        return e;\n      }\n    },\n        j = Math.fround || (Y = new Float32Array(1), function (e) {\n      return Y[0] = +e, Y[0];\n    });\n    var Y;\n\n    var V = /*#__PURE__*/function () {\n      function V(e) {\n        _classCallCheck(this, V);\n\n        this.options = K(Object.create(B), e), this.trees = new Array(this.options.maxZoom + 1);\n      }\n\n      _createClass(V, [{\n        key: \"load\",\n        value: function load(e) {\n          var _this$options = this.options,\n              t = _this$options.log,\n              o = _this$options.minZoom,\n              i = _this$options.maxZoom,\n              r = _this$options.nodeSize;\n          t && console.time(\"total time\");\n          var n = \"prepare \".concat(e.length, \" points\");\n          t && console.time(n), this.points = e;\n          var s = [];\n\n          for (var _t165 = 0; _t165 < e.length; _t165++) {\n            e[_t165].geometry && s.push(W(e[_t165], _t165));\n          }\n\n          this.trees[i + 1] = new Z(s, Q, ee, r, Float32Array), t && console.timeEnd(n);\n\n          for (var _e172 = i; _e172 >= o; _e172--) {\n            var _o42 = +Date.now();\n\n            s = this._cluster(s, _e172), this.trees[_e172] = new Z(s, Q, ee, r, Float32Array), t && console.log(\"z%d: %d clusters in %dms\", _e172, s.length, +Date.now() - _o42);\n          }\n\n          return t && console.timeEnd(\"total time\"), this;\n        }\n      }, {\n        key: \"getClusters\",\n        value: function getClusters(e, t) {\n          var o = ((e[0] + 180) % 360 + 360) % 360 - 180;\n          var i = Math.max(-90, Math.min(90, e[1]));\n          var r = 180 === e[2] ? 180 : ((e[2] + 180) % 360 + 360) % 360 - 180;\n          var n = Math.max(-90, Math.min(90, e[3]));\n          if (e[2] - e[0] >= 360) o = -180, r = 180;else if (o > r) {\n            var _e173 = this.getClusters([o, i, 180, n], t),\n                _s81 = this.getClusters([-180, i, r, n], t);\n\n            return _e173.concat(_s81);\n          }\n\n          var s = this.trees[this._limitZoom(t)],\n              a = s.range(q(o), U(n), q(r), U(i)),\n              l = [];\n\n          var _iterator128 = _createForOfIteratorHelper(a),\n              _step128;\n\n          try {\n            for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {\n              var _e174 = _step128.value;\n              var _t166 = s.points[_e174];\n              l.push(_t166.numPoints ? R(_t166) : this.points[_t166.index]);\n            }\n          } catch (err) {\n            _iterator128.e(err);\n          } finally {\n            _iterator128.f();\n          }\n\n          return l;\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren(e) {\n          var t = this._getOriginId(e),\n              o = this._getOriginZoom(e),\n              i = \"No cluster with the specified id.\",\n              r = this.trees[o];\n\n          if (!r) throw new Error(i);\n          var n = r.points[t];\n          if (!n) throw new Error(i);\n          var s = this.options.radius / (this.options.extent * Math.pow(2, o - 1)),\n              a = r.within(n.x, n.y, s),\n              l = [];\n\n          var _iterator129 = _createForOfIteratorHelper(a),\n              _step129;\n\n          try {\n            for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {\n              var _t167 = _step129.value;\n              var _o43 = r.points[_t167];\n              _o43.parentId === e && l.push(_o43.numPoints ? R(_o43) : this.points[_o43.index]);\n            }\n          } catch (err) {\n            _iterator129.e(err);\n          } finally {\n            _iterator129.f();\n          }\n\n          if (0 === l.length) throw new Error(i);\n          return l;\n        }\n      }, {\n        key: \"getLeaves\",\n        value: function getLeaves(e, t, o) {\n          var i = [];\n          return this._appendLeaves(i, e, t = t || 10, o = o || 0, 0), i;\n        }\n      }, {\n        key: \"getTile\",\n        value: function getTile(e, t, o) {\n          var i = this.trees[this._limitZoom(e)],\n              r = Math.pow(2, e),\n              _this$options2 = this.options,\n              n = _this$options2.extent,\n              s = _this$options2.radius,\n              a = s / n,\n              l = (o - a) / r,\n              c = (o + 1 + a) / r,\n              u = {\n            features: []\n          };\n\n          return this._addTileFeatures(i.range((t - a) / r, l, (t + 1 + a) / r, c), i.points, t, o, r, u), 0 === t && this._addTileFeatures(i.range(1 - a / r, l, 1, c), i.points, r, o, r, u), t === r - 1 && this._addTileFeatures(i.range(0, l, a / r, c), i.points, -1, o, r, u), u.features.length ? u : null;\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(e) {\n          var t = this._getOriginZoom(e) - 1;\n\n          for (; t <= this.options.maxZoom;) {\n            var _o44 = this.getChildren(e);\n\n            if (t++, 1 !== _o44.length) break;\n            e = _o44[0].properties.cluster_id;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_appendLeaves\",\n        value: function _appendLeaves(e, t, o, i, r) {\n          var n = this.getChildren(t);\n\n          var _iterator130 = _createForOfIteratorHelper(n),\n              _step130;\n\n          try {\n            for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {\n              var _t168 = _step130.value;\n              var _n111 = _t168.properties;\n              if (_n111 && _n111.cluster ? r + _n111.point_count <= i ? r += _n111.point_count : r = this._appendLeaves(e, _n111.cluster_id, o, i, r) : r < i ? r++ : e.push(_t168), e.length === o) break;\n            }\n          } catch (err) {\n            _iterator130.e(err);\n          } finally {\n            _iterator130.f();\n          }\n\n          return r;\n        }\n      }, {\n        key: \"_addTileFeatures\",\n        value: function _addTileFeatures(e, t, o, i, r, n) {\n          var _iterator131 = _createForOfIteratorHelper(e),\n              _step131;\n\n          try {\n            for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {\n              var _s82 = _step131.value;\n              var _e175 = t[_s82],\n                  _a68 = _e175.numPoints;\n\n              var _l31 = void 0,\n                  _c19 = void 0,\n                  _u24 = void 0;\n\n              if (_a68) _l31 = $(_e175), _c19 = _e175.x, _u24 = _e175.y;else {\n                var _t169 = this.points[_e175.index];\n                _l31 = _t169.properties, _c19 = q(_t169.geometry.coordinates[0]), _u24 = U(_t169.geometry.coordinates[1]);\n              }\n              var _h14 = {\n                type: 1,\n                geometry: [[Math.round(this.options.extent * (_c19 * r - o)), Math.round(this.options.extent * (_u24 * r - i))]],\n                tags: _l31\n              };\n\n              var _p11 = void 0;\n\n              _a68 ? _p11 = _e175.id : this.options.generateId ? _p11 = _e175.index : this.points[_e175.index].id && (_p11 = this.points[_e175.index].id), void 0 !== _p11 && (_h14.id = _p11), n.features.push(_h14);\n            }\n          } catch (err) {\n            _iterator131.e(err);\n          } finally {\n            _iterator131.f();\n          }\n        }\n      }, {\n        key: \"_limitZoom\",\n        value: function _limitZoom(e) {\n          return Math.max(this.options.minZoom, Math.min(+e, this.options.maxZoom + 1));\n        }\n      }, {\n        key: \"_cluster\",\n        value: function _cluster(e, t) {\n          var o = [],\n              _this$options3 = this.options,\n              i = _this$options3.radius,\n              r = _this$options3.extent,\n              n = _this$options3.reduce,\n              s = _this$options3.minPoints,\n              a = i / (r * Math.pow(2, t));\n\n          for (var _i112 = 0; _i112 < e.length; _i112++) {\n            var _r161 = e[_i112];\n            if (_r161.zoom <= t) continue;\n            _r161.zoom = t;\n\n            var _l32 = this.trees[t + 1],\n                _c20 = _l32.within(_r161.x, _r161.y, a),\n                _u25 = _r161.numPoints || 1;\n\n            var _h15 = _u25;\n\n            var _iterator132 = _createForOfIteratorHelper(_c20),\n                _step132;\n\n            try {\n              for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {\n                var _e178 = _step132.value;\n                var _o46 = _l32.points[_e178];\n                _o46.zoom > t && (_h15 += _o46.numPoints || 1);\n              }\n            } catch (err) {\n              _iterator132.e(err);\n            } finally {\n              _iterator132.f();\n            }\n\n            if (_h15 > _u25 && _h15 >= s) {\n              var _e176 = _r161.x * _u25,\n                  _s83 = _r161.y * _u25,\n                  _a69 = n && _u25 > 1 ? this._map(_r161, !0) : null;\n\n              var _p12 = (_i112 << 5) + (t + 1) + this.points.length;\n\n              var _iterator133 = _createForOfIteratorHelper(_c20),\n                  _step133;\n\n              try {\n                for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {\n                  var _o45 = _step133.value;\n                  var _i113 = _l32.points[_o45];\n                  if (_i113.zoom <= t) continue;\n                  _i113.zoom = t;\n\n                  var _c21 = _i113.numPoints || 1;\n\n                  _e176 += _i113.x * _c21, _s83 += _i113.y * _c21, _i113.parentId = _p12, n && (_a69 || (_a69 = this._map(_r161, !0)), n(_a69, this._map(_i113)));\n                }\n              } catch (err) {\n                _iterator133.e(err);\n              } finally {\n                _iterator133.f();\n              }\n\n              _r161.parentId = _p12, o.push(X(_e176 / _h15, _s83 / _h15, _p12, _h15, _a69));\n            } else if (o.push(_r161), _h15 > 1) {\n              var _iterator134 = _createForOfIteratorHelper(_c20),\n                  _step134;\n\n              try {\n                for (_iterator134.s(); !(_step134 = _iterator134.n()).done;) {\n                  var _e177 = _step134.value;\n                  var _i114 = _l32.points[_e177];\n                  _i114.zoom <= t || (_i114.zoom = t, o.push(_i114));\n                }\n              } catch (err) {\n                _iterator134.e(err);\n              } finally {\n                _iterator134.f();\n              }\n            }\n          }\n\n          return o;\n        }\n      }, {\n        key: \"_getOriginId\",\n        value: function _getOriginId(e) {\n          return e - this.points.length >> 5;\n        }\n      }, {\n        key: \"_getOriginZoom\",\n        value: function _getOriginZoom(e) {\n          return (e - this.points.length) % 32;\n        }\n      }, {\n        key: \"_map\",\n        value: function _map(e, t) {\n          if (e.numPoints) return t ? K({}, e.properties) : e.properties;\n          var o = this.points[e.index].properties,\n              i = this.options.map(o);\n          return t && i === o ? K({}, i) : i;\n        }\n      }]);\n\n      return V;\n    }();\n\n    function X(e, t, o, i, r) {\n      return {\n        x: j(e),\n        y: j(t),\n        zoom: 1 / 0,\n        id: o,\n        parentId: -1,\n        numPoints: i,\n        properties: r\n      };\n    }\n\n    function W(e, t) {\n      var _e$geometry$coordinat = _slicedToArray(e.geometry.coordinates, 2),\n          o = _e$geometry$coordinat[0],\n          i = _e$geometry$coordinat[1];\n\n      return {\n        x: j(q(o)),\n        y: j(U(i)),\n        zoom: 1 / 0,\n        index: t,\n        parentId: -1\n      };\n    }\n\n    function R(e) {\n      return {\n        type: \"Feature\",\n        id: e.id,\n        properties: $(e),\n        geometry: {\n          type: \"Point\",\n          coordinates: [(t = e.x, 360 * (t - .5)), H(e.y)]\n        }\n      };\n      var t;\n    }\n\n    function $(e) {\n      var t = e.numPoints,\n          o = t >= 1e4 ? \"\".concat(Math.round(t / 1e3), \"k\") : t >= 1e3 ? Math.round(t / 100) / 10 + \"k\" : t;\n      return K(K({}, e.properties), {\n        cluster: !0,\n        cluster_id: e.id,\n        point_count: t,\n        point_count_abbreviated: o\n      });\n    }\n\n    function q(e) {\n      return e / 360 + .5;\n    }\n\n    function U(e) {\n      var t = Math.sin(e * Math.PI / 180),\n          o = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n      return o < 0 ? 0 : o > 1 ? 1 : o;\n    }\n\n    function H(e) {\n      var t = (180 - 360 * e) * Math.PI / 180;\n      return 360 * Math.atan(Math.exp(t)) / Math.PI - 90;\n    }\n\n    function K(e, t) {\n      for (var _o47 in t) {\n        e[_o47] = t[_o47];\n      }\n\n      return e;\n    }\n\n    function Q(e) {\n      return e.x;\n    }\n\n    function ee(e) {\n      return e.y;\n    }\n\n    function te(e, t, o, i) {\n      for (var r, n = i, s = o - t >> 1, a = o - t, l = e[t], c = e[t + 1], u = e[o], h = e[o + 1], p = t + 3; p < o; p += 3) {\n        var f = oe(e[p], e[p + 1], l, c, u, h);\n        if (f > n) r = p, n = f;else if (f === n) {\n          var d = Math.abs(p - s);\n          d < a && (r = p, a = d);\n        }\n      }\n\n      n > i && (r - t > 3 && te(e, t, r, i), e[r + 2] = n, o - r > 3 && te(e, r, o, i));\n    }\n\n    function oe(e, t, o, i, r, n) {\n      var s = r - o,\n          a = n - i;\n\n      if (0 !== s || 0 !== a) {\n        var l = ((e - o) * s + (t - i) * a) / (s * s + a * a);\n        l > 1 ? (o = r, i = n) : l > 0 && (o += s * l, i += a * l);\n      }\n\n      return (s = e - o) * s + (a = t - i) * a;\n    }\n\n    function ie(e, t, o, i) {\n      var r = {\n        id: void 0 === e ? null : e,\n        type: t,\n        geometry: o,\n        tags: i,\n        minX: 1 / 0,\n        minY: 1 / 0,\n        maxX: -1 / 0,\n        maxY: -1 / 0\n      };\n      return function (e) {\n        var t = e.geometry,\n            o = e.type;\n        if (\"Point\" === o || \"MultiPoint\" === o || \"LineString\" === o) re(e, t);else if (\"Polygon\" === o || \"MultiLineString\" === o) for (var i = 0; i < t.length; i++) {\n          re(e, t[i]);\n        } else if (\"MultiPolygon\" === o) for (i = 0; i < t.length; i++) {\n          for (var r = 0; r < t[i].length; r++) {\n            re(e, t[i][r]);\n          }\n        }\n      }(r), r;\n    }\n\n    function re(e, t) {\n      for (var o = 0; o < t.length; o += 3) {\n        e.minX = Math.min(e.minX, t[o]), e.minY = Math.min(e.minY, t[o + 1]), e.maxX = Math.max(e.maxX, t[o]), e.maxY = Math.max(e.maxY, t[o + 1]);\n      }\n    }\n\n    function ne(e, t, o, i) {\n      if (t.geometry) {\n        var r = t.geometry.coordinates,\n            n = t.geometry.type,\n            s = Math.pow(o.tolerance / ((1 << o.maxZoom) * o.extent), 2),\n            a = [],\n            l = t.id;\n        if (o.promoteId ? l = t.properties[o.promoteId] : o.generateId && (l = i || 0), \"Point\" === n) se(r, a);else if (\"MultiPoint\" === n) for (var c = 0; c < r.length; c++) {\n          se(r[c], a);\n        } else if (\"LineString\" === n) ae(r, a, s, !1);else if (\"MultiLineString\" === n) {\n          if (o.lineMetrics) {\n            for (c = 0; c < r.length; c++) {\n              ae(r[c], a = [], s, !1), e.push(ie(l, \"LineString\", a, t.properties));\n            }\n\n            return;\n          }\n\n          le(r, a, s, !1);\n        } else if (\"Polygon\" === n) le(r, a, s, !0);else {\n          if (\"MultiPolygon\" !== n) {\n            if (\"GeometryCollection\" === n) {\n              for (c = 0; c < t.geometry.geometries.length; c++) {\n                ne(e, {\n                  id: l,\n                  geometry: t.geometry.geometries[c],\n                  properties: t.properties\n                }, o, i);\n              }\n\n              return;\n            }\n\n            throw new Error(\"Input data is not a valid GeoJSON object.\");\n          }\n\n          for (c = 0; c < r.length; c++) {\n            var u = [];\n            le(r[c], u, s, !0), a.push(u);\n          }\n        }\n        e.push(ie(l, n, a, t.properties));\n      }\n    }\n\n    function se(e, t) {\n      t.push(ce(e[0])), t.push(ue(e[1])), t.push(0);\n    }\n\n    function ae(e, t, o, i) {\n      for (var r, n, s = 0, a = 0; a < e.length; a++) {\n        var l = ce(e[a][0]),\n            c = ue(e[a][1]);\n        t.push(l), t.push(c), t.push(0), a > 0 && (s += i ? (r * c - l * n) / 2 : Math.sqrt(Math.pow(l - r, 2) + Math.pow(c - n, 2))), r = l, n = c;\n      }\n\n      var u = t.length - 3;\n      t[2] = 1, te(t, 0, u, o), t[u + 2] = 1, t.size = Math.abs(s), t.start = 0, t.end = t.size;\n    }\n\n    function le(e, t, o, i) {\n      for (var r = 0; r < e.length; r++) {\n        var n = [];\n        ae(e[r], n, o, i), t.push(n);\n      }\n    }\n\n    function ce(e) {\n      return e / 360 + .5;\n    }\n\n    function ue(e) {\n      var t = Math.sin(e * Math.PI / 180),\n          o = .5 - .25 * Math.log((1 + t) / (1 - t)) / Math.PI;\n      return o < 0 ? 0 : o > 1 ? 1 : o;\n    }\n\n    function he(e, t, o, i, r, n, s, a) {\n      if (i /= t, n >= (o /= t) && s < i) return e;\n      if (s < o || n >= i) return null;\n\n      for (var l = [], c = 0; c < e.length; c++) {\n        var u = e[c],\n            h = u.geometry,\n            p = u.type,\n            f = 0 === r ? u.minX : u.minY,\n            d = 0 === r ? u.maxX : u.maxY;\n        if (f >= o && d < i) l.push(u);else if (!(d < o || f >= i)) {\n          var g = [];\n          if (\"Point\" === p || \"MultiPoint\" === p) pe(h, g, o, i, r);else if (\"LineString\" === p) fe(h, g, o, i, r, !1, a.lineMetrics);else if (\"MultiLineString\" === p) ge(h, g, o, i, r, !1);else if (\"Polygon\" === p) ge(h, g, o, i, r, !0);else if (\"MultiPolygon\" === p) for (var m = 0; m < h.length; m++) {\n            var y = [];\n            ge(h[m], y, o, i, r, !0), y.length && g.push(y);\n          }\n\n          if (g.length) {\n            if (a.lineMetrics && \"LineString\" === p) {\n              for (m = 0; m < g.length; m++) {\n                l.push(ie(u.id, p, g[m], u.tags));\n              }\n\n              continue;\n            }\n\n            \"LineString\" !== p && \"MultiLineString\" !== p || (1 === g.length ? (p = \"LineString\", g = g[0]) : p = \"MultiLineString\"), \"Point\" !== p && \"MultiPoint\" !== p || (p = 3 === g.length ? \"Point\" : \"MultiPoint\"), l.push(ie(u.id, p, g, u.tags));\n          }\n        }\n      }\n\n      return l.length ? l : null;\n    }\n\n    function pe(e, t, o, i, r) {\n      for (var n = 0; n < e.length; n += 3) {\n        var s = e[n + r];\n        s >= o && s <= i && (t.push(e[n]), t.push(e[n + 1]), t.push(e[n + 2]));\n      }\n    }\n\n    function fe(e, t, o, i, r, n, s) {\n      for (var a, l, c = de(e), u = 0 === r ? ye : ve, h = e.start, p = 0; p < e.length - 3; p += 3) {\n        var f = e[p],\n            d = e[p + 1],\n            g = e[p + 2],\n            m = e[p + 3],\n            y = e[p + 4],\n            v = 0 === r ? f : d,\n            x = 0 === r ? m : y,\n            w = !1;\n        s && (a = Math.sqrt(Math.pow(f - m, 2) + Math.pow(d - y, 2))), v < o ? x > o && (l = u(c, f, d, m, y, o), s && (c.start = h + a * l)) : v > i ? x < i && (l = u(c, f, d, m, y, i), s && (c.start = h + a * l)) : me(c, f, d, g), x < o && v >= o && (l = u(c, f, d, m, y, o), w = !0), x > i && v <= i && (l = u(c, f, d, m, y, i), w = !0), !n && w && (s && (c.end = h + a * l), t.push(c), c = de(e)), s && (h += a);\n      }\n\n      var S = e.length - 3;\n      f = e[S], d = e[S + 1], g = e[S + 2], (v = 0 === r ? f : d) >= o && v <= i && me(c, f, d, g), S = c.length - 3, n && S >= 3 && (c[S] !== c[0] || c[S + 1] !== c[1]) && me(c, c[0], c[1], c[2]), c.length && t.push(c);\n    }\n\n    function de(e) {\n      var t = [];\n      return t.size = e.size, t.start = e.start, t.end = e.end, t;\n    }\n\n    function ge(e, t, o, i, r, n) {\n      for (var s = 0; s < e.length; s++) {\n        fe(e[s], t, o, i, r, n, !1);\n      }\n    }\n\n    function me(e, t, o, i) {\n      e.push(t), e.push(o), e.push(i);\n    }\n\n    function ye(e, t, o, i, r, n) {\n      var s = (n - t) / (i - t);\n      return e.push(n), e.push(o + (r - o) * s), e.push(1), s;\n    }\n\n    function ve(e, t, o, i, r, n) {\n      var s = (n - o) / (r - o);\n      return e.push(t + (i - t) * s), e.push(n), e.push(1), s;\n    }\n\n    function xe(e, t) {\n      for (var o = [], i = 0; i < e.length; i++) {\n        var r,\n            n = e[i],\n            s = n.type;\n        if (\"Point\" === s || \"MultiPoint\" === s || \"LineString\" === s) r = we(n.geometry, t);else if (\"MultiLineString\" === s || \"Polygon\" === s) {\n          r = [];\n\n          for (var a = 0; a < n.geometry.length; a++) {\n            r.push(we(n.geometry[a], t));\n          }\n        } else if (\"MultiPolygon\" === s) for (r = [], a = 0; a < n.geometry.length; a++) {\n          for (var l = [], c = 0; c < n.geometry[a].length; c++) {\n            l.push(we(n.geometry[a][c], t));\n          }\n\n          r.push(l);\n        }\n        o.push(ie(n.id, s, r, n.tags));\n      }\n\n      return o;\n    }\n\n    function we(e, t) {\n      var o = [];\n      o.size = e.size, void 0 !== e.start && (o.start = e.start, o.end = e.end);\n\n      for (var i = 0; i < e.length; i += 3) {\n        o.push(e[i] + t, e[i + 1], e[i + 2]);\n      }\n\n      return o;\n    }\n\n    function Se(e, t) {\n      if (e.transformed) return e;\n      var o,\n          i,\n          r,\n          n = 1 << e.z,\n          s = e.x,\n          a = e.y;\n\n      for (o = 0; o < e.features.length; o++) {\n        var l = e.features[o],\n            c = l.geometry,\n            u = l.type;\n        if (l.geometry = [], 1 === u) for (i = 0; i < c.length; i += 2) {\n          l.geometry.push(Ie(c[i], c[i + 1], t, n, s, a));\n        } else for (i = 0; i < c.length; i++) {\n          var h = [];\n\n          for (r = 0; r < c[i].length; r += 2) {\n            h.push(Ie(c[i][r], c[i][r + 1], t, n, s, a));\n          }\n\n          l.geometry.push(h);\n        }\n      }\n\n      return e.transformed = !0, e;\n    }\n\n    function Ie(e, t, o, i, r, n) {\n      return [Math.round(o * (e * i - r)), Math.round(o * (t * i - n))];\n    }\n\n    function Me(e, t, o, i, r) {\n      for (var n = t === r.maxZoom ? 0 : r.tolerance / ((1 << t) * r.extent), s = {\n        features: [],\n        numPoints: 0,\n        numSimplified: 0,\n        numFeatures: 0,\n        source: null,\n        x: o,\n        y: i,\n        z: t,\n        transformed: !1,\n        minX: 2,\n        minY: 1,\n        maxX: -1,\n        maxY: 0\n      }, a = 0; a < e.length; a++) {\n        s.numFeatures++, be(s, e[a], n, r);\n        var l = e[a].minX,\n            c = e[a].minY,\n            u = e[a].maxX,\n            h = e[a].maxY;\n        l < s.minX && (s.minX = l), c < s.minY && (s.minY = c), u > s.maxX && (s.maxX = u), h > s.maxY && (s.maxY = h);\n      }\n\n      return s;\n    }\n\n    function be(e, t, o, i) {\n      var r = t.geometry,\n          n = t.type,\n          s = [];\n      if (\"Point\" === n || \"MultiPoint\" === n) for (var a = 0; a < r.length; a += 3) {\n        s.push(r[a]), s.push(r[a + 1]), e.numPoints++, e.numSimplified++;\n      } else if (\"LineString\" === n) ke(s, r, e, o, !1, !1);else if (\"MultiLineString\" === n || \"Polygon\" === n) for (a = 0; a < r.length; a++) {\n        ke(s, r[a], e, o, \"Polygon\" === n, 0 === a);\n      } else if (\"MultiPolygon\" === n) for (var l = 0; l < r.length; l++) {\n        var c = r[l];\n\n        for (a = 0; a < c.length; a++) {\n          ke(s, c[a], e, o, !0, 0 === a);\n        }\n      }\n\n      if (s.length) {\n        var u = t.tags || null;\n\n        if (\"LineString\" === n && i.lineMetrics) {\n          for (var h in u = {}, t.tags) {\n            u[h] = t.tags[h];\n          }\n\n          u.mapbox_clip_start = r.start / r.size, u.mapbox_clip_end = r.end / r.size;\n        }\n\n        var p = {\n          geometry: s,\n          type: \"Polygon\" === n || \"MultiPolygon\" === n ? 3 : \"LineString\" === n || \"MultiLineString\" === n ? 2 : 1,\n          tags: u\n        };\n        null !== t.id && (p.id = t.id), e.features.push(p);\n      }\n    }\n\n    function ke(e, t, o, i, r, n) {\n      var s = i * i;\n      if (i > 0 && t.size < (r ? s : i)) o.numPoints += t.length / 3;else {\n        for (var a = [], l = 0; l < t.length; l += 3) {\n          (0 === i || t[l + 2] > s) && (o.numSimplified++, a.push(t[l]), a.push(t[l + 1])), o.numPoints++;\n        }\n\n        r && function (e, t) {\n          for (var o = 0, i = 0, r = e.length, n = r - 2; i < r; n = i, i += 2) {\n            o += (e[i] - e[n]) * (e[i + 1] + e[n + 1]);\n          }\n\n          if (o > 0 === t) for (i = 0, r = e.length; i < r / 2; i += 2) {\n            var s = e[i],\n                a = e[i + 1];\n            e[i] = e[r - 2 - i], e[i + 1] = e[r - 1 - i], e[r - 2 - i] = s, e[r - 1 - i] = a;\n          }\n        }(a, n), e.push(a);\n      }\n    }\n\n    function _e(e, t) {\n      var o = (t = this.options = function (e, t) {\n        for (var o in t) {\n          e[o] = t[o];\n        }\n\n        return e;\n      }(Object.create(this.options), t)).debug;\n\n      if (o && console.time(\"preprocess data\"), t.maxZoom < 0 || t.maxZoom > 24) throw new Error(\"maxZoom should be in the 0-24 range\");\n      if (t.promoteId && t.generateId) throw new Error(\"promoteId and generateId cannot be used together.\");\n\n      var i = function (e, t) {\n        var o = [];\n        if (\"FeatureCollection\" === e.type) for (var i = 0; i < e.features.length; i++) {\n          ne(o, e.features[i], t, i);\n        } else ne(o, \"Feature\" === e.type ? e : {\n          geometry: e\n        }, t);\n        return o;\n      }(e, t);\n\n      this.tiles = {}, this.tileCoords = [], o && (console.timeEnd(\"preprocess data\"), console.log(\"index: maxZoom: %d, maxPoints: %d\", t.indexMaxZoom, t.indexMaxPoints), console.time(\"generate tiles\"), this.stats = {}, this.total = 0), i = function (e, t) {\n        var o = t.buffer / t.extent,\n            i = e,\n            r = he(e, 1, -1 - o, o, 0, -1, 2, t),\n            n = he(e, 1, 1 - o, 2 + o, 0, -1, 2, t);\n        return (r || n) && (i = he(e, 1, -o, 1 + o, 0, -1, 2, t) || [], r && (i = xe(r, 1).concat(i)), n && (i = i.concat(xe(n, -1)))), i;\n      }(i, t), i.length && this.splitTile(i, 0, 0, 0), o && (i.length && console.log(\"features: %d, points: %d\", this.tiles[0].numFeatures, this.tiles[0].numPoints), console.timeEnd(\"generate tiles\"), console.log(\"tiles generated:\", this.total, JSON.stringify(this.stats)));\n    }\n\n    function Pe(e, t, o) {\n      return 32 * ((1 << e) * o + t) + e;\n    }\n\n    function Te(e, t) {\n      var o = e.tileID.canonical;\n      if (!this._geoJSONIndex) return t(null, null);\n\n      var i = this._geoJSONIndex.getTile(o.z, o.x, o.y);\n\n      if (!i) return t(null, null);\n      var r = new g(i.features);\n      var n = z(r);\n      0 === n.byteOffset && n.byteLength === n.buffer.byteLength || (n = new Uint8Array(n)), t(null, {\n        vectorTile: r,\n        rawData: n.buffer\n      });\n    }\n\n    _e.prototype.options = {\n      maxZoom: 14,\n      indexMaxZoom: 5,\n      indexMaxPoints: 1e5,\n      tolerance: 3,\n      extent: 4096,\n      buffer: 64,\n      lineMetrics: !1,\n      promoteId: null,\n      generateId: !1,\n      debug: 0\n    }, _e.prototype.splitTile = function (e, t, o, i, r, n, s) {\n      for (var a = [e, t, o, i], l = this.options, c = l.debug; a.length;) {\n        i = a.pop(), o = a.pop(), t = a.pop(), e = a.pop();\n        var u = 1 << t,\n            h = Pe(t, o, i),\n            p = this.tiles[h];\n\n        if (!p && (c > 1 && console.time(\"creation\"), p = this.tiles[h] = Me(e, t, o, i, l), this.tileCoords.push({\n          z: t,\n          x: o,\n          y: i\n        }), c)) {\n          c > 1 && (console.log(\"tile z%d-%d-%d (features: %d, points: %d, simplified: %d)\", t, o, i, p.numFeatures, p.numPoints, p.numSimplified), console.timeEnd(\"creation\"));\n          var f = \"z\" + t;\n          this.stats[f] = (this.stats[f] || 0) + 1, this.total++;\n        }\n\n        if (p.source = e, r) {\n          if (t === l.maxZoom || t === r) continue;\n          var d = 1 << r - t;\n          if (o !== Math.floor(n / d) || i !== Math.floor(s / d)) continue;\n        } else if (t === l.indexMaxZoom || p.numPoints <= l.indexMaxPoints) continue;\n\n        if (p.source = null, 0 !== e.length) {\n          c > 1 && console.time(\"clipping\");\n          var g,\n              m,\n              y,\n              v,\n              x,\n              w,\n              S = .5 * l.buffer / l.extent,\n              I = .5 - S,\n              M = .5 + S,\n              b = 1 + S;\n          g = m = y = v = null, x = he(e, u, o - S, o + M, 0, p.minX, p.maxX, l), w = he(e, u, o + I, o + b, 0, p.minX, p.maxX, l), e = null, x && (g = he(x, u, i - S, i + M, 1, p.minY, p.maxY, l), m = he(x, u, i + I, i + b, 1, p.minY, p.maxY, l), x = null), w && (y = he(w, u, i - S, i + M, 1, p.minY, p.maxY, l), v = he(w, u, i + I, i + b, 1, p.minY, p.maxY, l), w = null), c > 1 && console.timeEnd(\"clipping\"), a.push(g || [], t + 1, 2 * o, 2 * i), a.push(m || [], t + 1, 2 * o, 2 * i + 1), a.push(y || [], t + 1, 2 * o + 1, 2 * i), a.push(v || [], t + 1, 2 * o + 1, 2 * i + 1);\n        }\n      }\n    }, _e.prototype.getTile = function (e, t, o) {\n      var i = this.options,\n          r = i.extent,\n          n = i.debug;\n      if (e < 0 || e > 24) return null;\n      var s = 1 << e,\n          a = Pe(e, t = (t % s + s) % s, o);\n      if (this.tiles[a]) return Se(this.tiles[a], r);\n      n > 1 && console.log(\"drilling down to z%d-%d-%d\", e, t, o);\n\n      for (var l, c = e, u = t, h = o; !l && c > 0;) {\n        c--, u = Math.floor(u / 2), h = Math.floor(h / 2), l = this.tiles[Pe(c, u, h)];\n      }\n\n      return l && l.source ? (n > 1 && console.log(\"found parent tile z%d-%d-%d\", c, u, h), n > 1 && console.time(\"drilling down\"), this.splitTile(l.source, c, u, h, e, t, o), n > 1 && console.timeEnd(\"drilling down\"), this.tiles[a] ? Se(this.tiles[a], r) : null) : null;\n    };\n\n    var Ce = /*#__PURE__*/function (_l33) {\n      _inherits(Ce, _l33);\n\n      function Ce(e, t, o, i) {\n        var _this28;\n\n        _classCallCheck(this, Ce);\n\n        _this28 = _possibleConstructorReturn(this, _getPrototypeOf(Ce).call(this, e, t, o, Te)), i && (_this28.loadGeoJSON = i);\n        return _this28;\n      }\n\n      _createClass(Ce, [{\n        key: \"loadData\",\n        value: function loadData(e, t) {\n          this._pendingCallback && this._pendingCallback(null, {\n            abandoned: !0\n          }), this._pendingCallback = t, this._pendingLoadDataParams = e, this._state && \"Idle\" !== this._state ? this._state = \"NeedsLoadData\" : (this._state = \"Coalescing\", this._loadData());\n        }\n      }, {\n        key: \"_loadData\",\n        value: function _loadData() {\n          var _this29 = this;\n\n          if (!this._pendingCallback || !this._pendingLoadDataParams) return;\n          var t = this._pendingCallback,\n              o = this._pendingLoadDataParams;\n          delete this._pendingCallback, delete this._pendingLoadDataParams;\n          var i = !!(o && o.request && o.request.collectResourceTiming) && new e.RequestPerformance(o.request);\n          this.loadGeoJSON(o, function (r, n) {\n            if (r || !n) return t(r);\n            if (\"object\" != typeof n) return t(new Error(\"Input data given to '\".concat(o.source, \"' is not a valid GeoJSON object.\")));\n            {\n              u(n, !0);\n\n              try {\n                if (o.filter) {\n                  var _t170 = e.createExpression(o.filter, {\n                    type: \"boolean\",\n                    \"property-type\": \"data-driven\",\n                    overridable: !1,\n                    transition: !1\n                  });\n\n                  if (\"error\" === _t170.result) throw new Error(_t170.value.map(function (e) {\n                    return \"\".concat(e.key, \": \").concat(e.message);\n                  }).join(\", \"));\n\n                  var _i115 = n.features.filter(function (e) {\n                    return _t170.value.evaluate({\n                      zoom: 0\n                    }, e);\n                  });\n\n                  n = {\n                    type: \"FeatureCollection\",\n                    features: _i115\n                  };\n                }\n\n                _this29._geoJSONIndex = o.cluster ? new V(function (_ref120) {\n                  var t = _ref120.superclusterOptions,\n                      o = _ref120.clusterProperties;\n                  if (!o || !t) return t;\n                  var i = {},\n                      r = {},\n                      n = {\n                    accumulated: null,\n                    zoom: 0\n                  },\n                      s = {\n                    properties: null\n                  },\n                      a = Object.keys(o);\n\n                  for (var _i116 = 0, _a70 = a; _i116 < _a70.length; _i116++) {\n                    var _t171 = _a70[_i116];\n\n                    var _o$_t = _slicedToArray(o[_t171], 2),\n                        _n112 = _o$_t[0],\n                        _s85 = _o$_t[1],\n                        _a71 = e.createExpression(_s85),\n                        _l34 = e.createExpression(\"string\" == typeof _n112 ? [_n112, [\"accumulated\"], [\"get\", _t171]] : _n112);\n\n                    i[_t171] = _a71.value, r[_t171] = _l34.value;\n                  }\n\n                  return t.map = function (e) {\n                    s.properties = e;\n                    var t = {};\n\n                    var _iterator135 = _createForOfIteratorHelper(a),\n                        _step135;\n\n                    try {\n                      for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {\n                        var _e179 = _step135.value;\n                        t[_e179] = i[_e179].evaluate(n, s);\n                      }\n                    } catch (err) {\n                      _iterator135.e(err);\n                    } finally {\n                      _iterator135.f();\n                    }\n\n                    return t;\n                  }, t.reduce = function (e, t) {\n                    s.properties = t;\n\n                    var _iterator136 = _createForOfIteratorHelper(a),\n                        _step136;\n\n                    try {\n                      for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {\n                        var _t172 = _step136.value;\n                        n.accumulated = e[_t172], e[_t172] = r[_t172].evaluate(n, s);\n                      }\n                    } catch (err) {\n                      _iterator136.e(err);\n                    } finally {\n                      _iterator136.f();\n                    }\n                  }, t;\n                }(o)).load(n.features) : function (e, t) {\n                  return new _e(e, t);\n                }(n, o.geojsonVtOptions);\n              } catch (r) {\n                return t(r);\n              }\n\n              _this29.loaded = {};\n              var _s84 = {};\n\n              if (i) {\n                var _e180 = i.finish();\n\n                _e180 && (_s84.resourceTiming = {}, _s84.resourceTiming[o.source] = JSON.parse(JSON.stringify(_e180)));\n              }\n\n              t(null, _s84);\n            }\n          });\n        }\n      }, {\n        key: \"coalesce\",\n        value: function coalesce() {\n          \"Coalescing\" === this._state ? this._state = \"Idle\" : \"NeedsLoadData\" === this._state && (this._state = \"Coalescing\", this._loadData());\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t) {\n          var o = this.loaded;\n          return o && o[e.uid] ? _get(_getPrototypeOf(Ce.prototype), \"reloadTile\", this).call(this, e, t) : this.loadTile(e, t);\n        }\n      }, {\n        key: \"loadGeoJSON\",\n        value: function loadGeoJSON(t, o) {\n          if (t.request) e.getJSON(t.request, o);else {\n            if (\"string\" != typeof t.data) return o(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n\n            try {\n              return o(null, JSON.parse(t.data));\n            } catch (e) {\n              return o(new Error(\"Input data given to '\".concat(t.source, \"' is not a valid GeoJSON object.\")));\n            }\n          }\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e, t) {\n          this._pendingCallback && this._pendingCallback(null, {\n            abandoned: !0\n          }), t();\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getClusterExpansionZoom(e.clusterId));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }, {\n        key: \"getClusterChildren\",\n        value: function getClusterChildren(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getChildren(e.clusterId));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }, {\n        key: \"getClusterLeaves\",\n        value: function getClusterLeaves(e, t) {\n          try {\n            t(null, this._geoJSONIndex.getLeaves(e.clusterId, e.limit, e.offset));\n          } catch (e) {\n            t(e);\n          }\n        }\n      }]);\n\n      return Ce;\n    }(l);\n\n    var De = /*#__PURE__*/function () {\n      function De(t) {\n        var _this30 = this;\n\n        _classCallCheck(this, De);\n\n        this.self = t, this.actor = new e.Actor(t, this), this.layerIndexes = {}, this.availableImages = {}, this.workerSourceTypes = {\n          vector: l,\n          geojson: Ce\n        }, this.workerSources = {}, this.demWorkerSources = {}, this.self.registerWorkerSource = function (e, t) {\n          if (_this30.workerSourceTypes[e]) throw new Error(\"Worker source with name \\\"\".concat(e, \"\\\" already registered.\"));\n          _this30.workerSourceTypes[e] = t;\n        }, this.self.registerRTLTextPlugin = function (t) {\n          if (e.plugin.isParsed()) throw new Error(\"RTL text plugin already registered.\");\n          e.plugin.applyArabicShaping = t.applyArabicShaping, e.plugin.processBidirectionalText = t.processBidirectionalText, e.plugin.processStyledBidirectionalText = t.processStyledBidirectionalText;\n        };\n      }\n\n      _createClass(De, [{\n        key: \"setReferrer\",\n        value: function setReferrer(e, t) {\n          this.referrer = t;\n        }\n      }, {\n        key: \"setImages\",\n        value: function setImages(e, t, o) {\n          this.availableImages[e] = t;\n\n          for (var _o48 in this.workerSources[e]) {\n            var _i117 = this.workerSources[e][_o48];\n\n            for (var _e181 in _i117) {\n              _i117[_e181].availableImages = t;\n            }\n          }\n\n          o();\n        }\n      }, {\n        key: \"setLayers\",\n        value: function setLayers(e, t, o) {\n          this.getLayerIndex(e).replace(t), o();\n        }\n      }, {\n        key: \"updateLayers\",\n        value: function updateLayers(e, t, o) {\n          this.getLayerIndex(e).update(t.layers, t.removedIds), o();\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).loadTile(t, o);\n        }\n      }, {\n        key: \"loadDEMTile\",\n        value: function loadDEMTile(e, t, o) {\n          this.getDEMWorkerSource(e, t.source).loadTile(t, o);\n        }\n      }, {\n        key: \"reloadTile\",\n        value: function reloadTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).reloadTile(t, o);\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).abortTile(t, o);\n        }\n      }, {\n        key: \"removeTile\",\n        value: function removeTile(e, t, o) {\n          this.getWorkerSource(e, t.type, t.source).removeTile(t, o);\n        }\n      }, {\n        key: \"removeDEMTile\",\n        value: function removeDEMTile(e, t) {\n          this.getDEMWorkerSource(e, t.source).removeTile(t);\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e, t, o) {\n          if (!this.workerSources[e] || !this.workerSources[e][t.type] || !this.workerSources[e][t.type][t.source]) return;\n          var i = this.workerSources[e][t.type][t.source];\n          delete this.workerSources[e][t.type][t.source], void 0 !== i.removeSource ? i.removeSource(t, o) : o();\n        }\n      }, {\n        key: \"loadWorkerSource\",\n        value: function loadWorkerSource(e, t, o) {\n          try {\n            this.self.importScripts(t.url), o();\n          } catch (e) {\n            o(e.toString());\n          }\n        }\n      }, {\n        key: \"syncRTLPluginState\",\n        value: function syncRTLPluginState(t, o, i) {\n          try {\n            e.plugin.setState(o);\n\n            var _t173 = e.plugin.getPluginURL();\n\n            if (e.plugin.isLoaded() && !e.plugin.isParsed() && null != _t173) {\n              this.self.importScripts(_t173);\n\n              var _o49 = e.plugin.isParsed();\n\n              i(_o49 ? void 0 : new Error(\"RTL Text Plugin failed to import scripts from \".concat(_t173)), _o49);\n            }\n          } catch (e) {\n            i(e.toString());\n          }\n        }\n      }, {\n        key: \"getAvailableImages\",\n        value: function getAvailableImages(e) {\n          var t = this.availableImages[e];\n          return t || (t = []), t;\n        }\n      }, {\n        key: \"getLayerIndex\",\n        value: function getLayerIndex(e) {\n          var t = this.layerIndexes[e];\n          return t || (t = this.layerIndexes[e] = new i()), t;\n        }\n      }, {\n        key: \"getWorkerSource\",\n        value: function getWorkerSource(e, t, o) {\n          var _this31 = this;\n\n          if (this.workerSources[e] || (this.workerSources[e] = {}), this.workerSources[e][t] || (this.workerSources[e][t] = {}), !this.workerSources[e][t][o]) {\n            var _i118 = {\n              send: function send(t, o, i) {\n                _this31.actor.send(t, o, i, e);\n              }\n            };\n            this.workerSources[e][t][o] = new this.workerSourceTypes[t](_i118, this.getLayerIndex(e), this.getAvailableImages(e));\n          }\n\n          return this.workerSources[e][t][o];\n        }\n      }, {\n        key: \"getDEMWorkerSource\",\n        value: function getDEMWorkerSource(e, t) {\n          return this.demWorkerSources[e] || (this.demWorkerSources[e] = {}), this.demWorkerSources[e][t] || (this.demWorkerSources[e][t] = new c()), this.demWorkerSources[e][t];\n        }\n      }, {\n        key: \"enforceCacheSizeLimit\",\n        value: function enforceCacheSizeLimit(t, o) {\n          e.enforceCacheSizeLimit(o);\n        }\n      }]);\n\n      return De;\n    }();\n\n    return \"undefined\" != typeof WorkerGlobalScope && \"undefined\" != typeof self && self instanceof WorkerGlobalScope && (self.worker = new De(self)), De;\n  });\n  define([\"./shared\"], function (t) {\n    \"use strict\";\n\n    var e = i;\n\n    function i(t) {\n      return !function (t) {\n        return \"undefined\" == typeof window || \"undefined\" == typeof document ? \"not a browser\" : Array.prototype && Array.prototype.every && Array.prototype.filter && Array.prototype.forEach && Array.prototype.indexOf && Array.prototype.lastIndexOf && Array.prototype.map && Array.prototype.some && Array.prototype.reduce && Array.prototype.reduceRight && Array.isArray ? Function.prototype && Function.prototype.bind ? Object.keys && Object.create && Object.getPrototypeOf && Object.getOwnPropertyNames && Object.isSealed && Object.isFrozen && Object.isExtensible && Object.getOwnPropertyDescriptor && Object.defineProperty && Object.defineProperties && Object.seal && Object.freeze && Object.preventExtensions ? \"JSON\" in window && \"parse\" in JSON && \"stringify\" in JSON ? function () {\n          if (!(\"Worker\" in window && \"Blob\" in window && \"URL\" in window)) return !1;\n          var t,\n              e,\n              i = new Blob([\"\"], {\n            type: \"text/javascript\"\n          }),\n              o = URL.createObjectURL(i);\n\n          try {\n            e = new Worker(o), t = !0;\n          } catch (e) {\n            t = !1;\n          }\n\n          return e && e.terminate(), URL.revokeObjectURL(o), t;\n        }() ? \"Uint8ClampedArray\" in window ? ArrayBuffer.isView ? function () {\n          var t = document.createElement(\"canvas\");\n          t.width = t.height = 1;\n          var e = t.getContext(\"2d\");\n          if (!e) return !1;\n          var i = e.getImageData(0, 0, 1, 1);\n          return i && i.width === t.width;\n        }() ? (void 0 === o[e = t && t.failIfMajorPerformanceCaveat] && (o[e] = function (t) {\n          var e,\n              o = function (t) {\n            var e = document.createElement(\"canvas\"),\n                o = Object.create(i.webGLContextAttributes);\n            return o.failIfMajorPerformanceCaveat = t, e.getContext(\"webgl\", o) || e.getContext(\"experimental-webgl\", o);\n          }(t);\n\n          if (!o) return !1;\n\n          try {\n            e = o.createShader(o.VERTEX_SHADER);\n          } catch (t) {\n            return !1;\n          }\n\n          return !(!e || o.isContextLost()) && (o.shaderSource(e, \"void main() {}\"), o.compileShader(e), !0 === o.getShaderParameter(e, o.COMPILE_STATUS));\n        }(e)), o[e] ? document.documentMode ? \"insufficient ECMAScript 6 support\" : void 0 : \"insufficient WebGL support\") : \"insufficient Canvas/getImageData support\" : \"insufficient ArrayBuffer support\" : \"insufficient Uint8ClampedArray support\" : \"insufficient worker support\" : \"insufficient JSON support\" : \"insufficient Object support\" : \"insufficient Function support\" : \"insufficent Array support\";\n        var e;\n      }(t);\n    }\n\n    var o = {};\n\n    function a(t, e) {\n      if (Array.isArray(t)) {\n        if (!Array.isArray(e) || t.length !== e.length) return !1;\n\n        for (var _i119 = 0; _i119 < t.length; _i119++) {\n          if (!a(t[_i119], e[_i119])) return !1;\n        }\n\n        return !0;\n      }\n\n      if (\"object\" == typeof t && null !== t && null !== e) {\n        if (\"object\" != typeof e) return !1;\n        if (Object.keys(t).length !== Object.keys(e).length) return !1;\n\n        for (var _i120 in t) {\n          if (!a(t[_i120], e[_i120])) return !1;\n        }\n\n        return !0;\n      }\n\n      return t === e;\n    }\n\n    i.webGLContextAttributes = {\n      antialias: !1,\n      alpha: !0,\n      stencil: !0,\n      depth: !0\n    };\n\n    var s = /*#__PURE__*/function () {\n      function s() {\n        _classCallCheck(this, s);\n      }\n\n      _createClass(s, null, [{\n        key: \"testProp\",\n        value: function testProp(t) {\n          if (!s.docStyle) return t[0];\n\n          for (var _e182 = 0; _e182 < t.length; _e182++) {\n            if (t[_e182] in s.docStyle) return t[_e182];\n          }\n\n          return t[0];\n        }\n      }, {\n        key: \"create\",\n        value: function create(t, e, i) {\n          var o = window.document.createElement(t);\n          return void 0 !== e && (o.className = e), i && i.appendChild(o), o;\n        }\n      }, {\n        key: \"createNS\",\n        value: function createNS(t, e) {\n          return window.document.createElementNS(t, e);\n        }\n      }, {\n        key: \"disableDrag\",\n        value: function disableDrag() {\n          s.docStyle && s.selectProp && (s.userSelect = s.docStyle[s.selectProp], s.docStyle[s.selectProp] = \"none\");\n        }\n      }, {\n        key: \"enableDrag\",\n        value: function enableDrag() {\n          s.docStyle && s.selectProp && (s.docStyle[s.selectProp] = s.userSelect);\n        }\n      }, {\n        key: \"setTransform\",\n        value: function setTransform(t, e) {\n          t.style[s.transformProp] = e;\n        }\n      }, {\n        key: \"addEventListener\",\n        value: function addEventListener(t, e, i) {\n          var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          t.addEventListener(e, i, \"passive\" in o ? o : o.capture);\n        }\n      }, {\n        key: \"removeEventListener\",\n        value: function removeEventListener(t, e, i) {\n          var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          t.removeEventListener(e, i, \"passive\" in o ? o : o.capture);\n        }\n      }, {\n        key: \"suppressClickInternal\",\n        value: function suppressClickInternal(t) {\n          t.preventDefault(), t.stopPropagation(), window.removeEventListener(\"click\", s.suppressClickInternal, !0);\n        }\n      }, {\n        key: \"suppressClick\",\n        value: function suppressClick() {\n          window.addEventListener(\"click\", s.suppressClickInternal, !0), window.setTimeout(function () {\n            window.removeEventListener(\"click\", s.suppressClickInternal, !0);\n          }, 0);\n        }\n      }, {\n        key: \"mousePos\",\n        value: function mousePos(e, i) {\n          var o = e.getBoundingClientRect();\n          return new t.pointGeometry(i.clientX - o.left - e.clientLeft, i.clientY - o.top - e.clientTop);\n        }\n      }, {\n        key: \"touchPos\",\n        value: function touchPos(e, i) {\n          var o = e.getBoundingClientRect(),\n              a = [];\n\n          for (var _s86 = 0; _s86 < i.length; _s86++) {\n            a.push(new t.pointGeometry(i[_s86].clientX - o.left - e.clientLeft, i[_s86].clientY - o.top - e.clientTop));\n          }\n\n          return a;\n        }\n      }, {\n        key: \"mouseButton\",\n        value: function mouseButton(t) {\n          return t.button;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t) {\n          t.parentNode && t.parentNode.removeChild(t);\n        }\n      }]);\n\n      return s;\n    }();\n\n    s.docStyle = \"undefined\" != typeof window && window.document && window.document.documentElement.style, s.selectProp = s.testProp([\"userSelect\", \"MozUserSelect\", \"WebkitUserSelect\", \"msUserSelect\"]), s.transformProp = s.testProp([\"transform\", \"WebkitTransform\"]);\n\n    var r = /*#__PURE__*/function () {\n      function r(t) {\n        _classCallCheck(this, r);\n\n        this._transformRequestFn = t;\n      }\n\n      _createClass(r, [{\n        key: \"transformRequest\",\n        value: function transformRequest(t, e) {\n          return this._transformRequestFn && this._transformRequestFn(t, e) || {\n            url: t\n          };\n        }\n      }, {\n        key: \"normalizeSpriteURL\",\n        value: function normalizeSpriteURL(t, e, i) {\n          var o = function (t) {\n            var e = t.match(n);\n            if (!e) throw new Error(\"Unable to parse URL \\\"\".concat(t, \"\\\"\"));\n            return {\n              protocol: e[1],\n              authority: e[2],\n              path: e[3] || \"/\",\n              params: e[4] ? e[4].split(\"&\") : []\n            };\n          }(t);\n\n          return o.path += \"\".concat(e).concat(i), function (t) {\n            var e = t.params.length ? \"?\".concat(t.params.join(\"&\")) : \"\";\n            return \"\".concat(t.protocol, \"://\").concat(t.authority).concat(t.path).concat(e);\n          }(o);\n        }\n      }, {\n        key: \"setTransformRequest\",\n        value: function setTransformRequest(t) {\n          this._transformRequestFn = t;\n        }\n      }]);\n\n      return r;\n    }();\n\n    var n = /^(\\w+):\\/\\/([^/?]*)(\\/[^?]+)?\\??(.+)?/;\n\n    function l(e) {\n      var i = new t.ARRAY_TYPE(3);\n      return i[0] = e[0], i[1] = e[1], i[2] = e[2], i;\n    }\n\n    var c,\n        h = function h(t, e, i) {\n      return t[0] = e[0] - i[0], t[1] = e[1] - i[1], t[2] = e[2] - i[2], t;\n    };\n\n    c = new t.ARRAY_TYPE(3), t.ARRAY_TYPE != Float32Array && (c[0] = 0, c[1] = 0, c[2] = 0);\n\n    var u = function u(t) {\n      var e = t[0],\n          i = t[1];\n      return e * e + i * i;\n    };\n\n    !function () {\n      var e = new t.ARRAY_TYPE(2);\n      t.ARRAY_TYPE != Float32Array && (e[0] = 0, e[1] = 0);\n    }();\n\n    var d = /*#__PURE__*/function () {\n      function d(t, e, i, o) {\n        _classCallCheck(this, d);\n\n        this.context = t, this.format = i, this.texture = t.gl.createTexture(), this.update(e, o);\n      }\n\n      _createClass(d, [{\n        key: \"update\",\n        value: function update(e, i, o) {\n          var a = e.width,\n              s = e.height,\n              r = !(this.size && this.size[0] === a && this.size[1] === s || o),\n              n = this.context,\n              l = n.gl;\n          if (this.useMipmap = Boolean(i && i.useMipmap), l.bindTexture(l.TEXTURE_2D, this.texture), n.pixelStoreUnpackFlipY.set(!1), n.pixelStoreUnpack.set(1), n.pixelStoreUnpackPremultiplyAlpha.set(this.format === l.RGBA && (!i || !1 !== i.premultiply)), r) this.size = [a, s], e instanceof HTMLImageElement || e instanceof HTMLCanvasElement || e instanceof HTMLVideoElement || e instanceof ImageData || t.isImageBitmap(e) ? l.texImage2D(l.TEXTURE_2D, 0, this.format, this.format, l.UNSIGNED_BYTE, e) : l.texImage2D(l.TEXTURE_2D, 0, this.format, a, s, 0, this.format, l.UNSIGNED_BYTE, e.data);else {\n            var _ref121 = o || {\n              x: 0,\n              y: 0\n            },\n                _i121 = _ref121.x,\n                _r162 = _ref121.y;\n\n            e instanceof HTMLImageElement || e instanceof HTMLCanvasElement || e instanceof HTMLVideoElement || e instanceof ImageData || t.isImageBitmap(e) ? l.texSubImage2D(l.TEXTURE_2D, 0, _i121, _r162, l.RGBA, l.UNSIGNED_BYTE, e) : l.texSubImage2D(l.TEXTURE_2D, 0, _i121, _r162, a, s, l.RGBA, l.UNSIGNED_BYTE, e.data);\n          }\n          this.useMipmap && this.isSizePowerOfTwo() && l.generateMipmap(l.TEXTURE_2D);\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t, e, i) {\n          var o = this.context,\n              a = o.gl;\n          a.bindTexture(a.TEXTURE_2D, this.texture), i !== a.LINEAR_MIPMAP_NEAREST || this.isSizePowerOfTwo() || (i = a.LINEAR), t !== this.filter && (a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, t), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, i || t), this.filter = t), e !== this.wrap && (a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, e), a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, e), this.wrap = e);\n        }\n      }, {\n        key: \"isSizePowerOfTwo\",\n        value: function isSizePowerOfTwo() {\n          return this.size[0] === this.size[1] && Math.log(this.size[0]) / Math.LN2 % 1 == 0;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var t = this.context.gl;\n          t.deleteTexture(this.texture), this.texture = null;\n        }\n      }]);\n\n      return d;\n    }();\n\n    function m(t) {\n      var e = t.userImage;\n      return !!(e && e.render && e.render()) && (t.data.replace(new Uint8Array(e.data.buffer)), !0);\n    }\n\n    var _ = /*#__PURE__*/function (_t$Evented) {\n      _inherits(_, _t$Evented);\n\n      function _() {\n        var _this32;\n\n        _classCallCheck(this, _);\n\n        _this32 = _possibleConstructorReturn(this, _getPrototypeOf(_).call(this)), _this32.images = {}, _this32.updatedImages = {}, _this32.callbackDispatchedThisFrame = {}, _this32.loaded = !1, _this32.requestors = [], _this32.patterns = {}, _this32.atlasImage = new t.RGBAImage({\n          width: 1,\n          height: 1\n        }), _this32.dirty = !0;\n        return _this32;\n      }\n\n      _createClass(_, [{\n        key: \"isLoaded\",\n        value: function isLoaded() {\n          return this.loaded;\n        }\n      }, {\n        key: \"setLoaded\",\n        value: function setLoaded(t) {\n          if (this.loaded !== t && (this.loaded = t, t)) {\n            var _iterator137 = _createForOfIteratorHelper(this.requestors),\n                _step137;\n\n            try {\n              for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {\n                var _step137$value = _step137.value,\n                    _t174 = _step137$value.ids,\n                    _e183 = _step137$value.callback;\n\n                this._notify(_t174, _e183);\n              }\n            } catch (err) {\n              _iterator137.e(err);\n            } finally {\n              _iterator137.f();\n            }\n\n            this.requestors = [];\n          }\n        }\n      }, {\n        key: \"getImage\",\n        value: function getImage(t) {\n          return this.images[t];\n        }\n      }, {\n        key: \"addImage\",\n        value: function addImage(t, e) {\n          this._validate(t, e) && (this.images[t] = e);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(e, i) {\n          var o = !0;\n          return this._validateStretch(i.stretchX, i.data && i.data.width) || (this.fire(new t.ErrorEvent(new Error(\"Image \\\"\".concat(e, \"\\\" has invalid \\\"stretchX\\\" value\")))), o = !1), this._validateStretch(i.stretchY, i.data && i.data.height) || (this.fire(new t.ErrorEvent(new Error(\"Image \\\"\".concat(e, \"\\\" has invalid \\\"stretchY\\\" value\")))), o = !1), this._validateContent(i.content, i) || (this.fire(new t.ErrorEvent(new Error(\"Image \\\"\".concat(e, \"\\\" has invalid \\\"content\\\" value\")))), o = !1), o;\n        }\n      }, {\n        key: \"_validateStretch\",\n        value: function _validateStretch(t, e) {\n          if (!t) return !0;\n          var i = 0;\n\n          var _iterator138 = _createForOfIteratorHelper(t),\n              _step138;\n\n          try {\n            for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {\n              var _o50 = _step138.value;\n              if (_o50[0] < i || _o50[1] < _o50[0] || e < _o50[1]) return !1;\n              i = _o50[1];\n            }\n          } catch (err) {\n            _iterator138.e(err);\n          } finally {\n            _iterator138.f();\n          }\n\n          return !0;\n        }\n      }, {\n        key: \"_validateContent\",\n        value: function _validateContent(t, e) {\n          return !(t && (4 !== t.length || t[0] < 0 || e.data.width < t[0] || t[1] < 0 || e.data.height < t[1] || t[2] < 0 || e.data.width < t[2] || t[3] < 0 || e.data.height < t[3] || t[2] < t[0] || t[3] < t[1]));\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(t, e) {\n          e.version = this.images[t].version + 1, this.images[t] = e, this.updatedImages[t] = !0;\n        }\n      }, {\n        key: \"removeImage\",\n        value: function removeImage(t) {\n          var e = this.images[t];\n          delete this.images[t], delete this.patterns[t], e.userImage && e.userImage.onRemove && e.userImage.onRemove();\n        }\n      }, {\n        key: \"listImages\",\n        value: function listImages() {\n          return Object.keys(this.images);\n        }\n      }, {\n        key: \"getImages\",\n        value: function getImages(t, e) {\n          var i = !0;\n\n          if (!this.isLoaded()) {\n            var _iterator139 = _createForOfIteratorHelper(t),\n                _step139;\n\n            try {\n              for (_iterator139.s(); !(_step139 = _iterator139.n()).done;) {\n                var _e184 = _step139.value;\n                this.images[_e184] || (i = !1);\n              }\n            } catch (err) {\n              _iterator139.e(err);\n            } finally {\n              _iterator139.f();\n            }\n          }\n\n          this.isLoaded() || i ? this._notify(t, e) : this.requestors.push({\n            ids: t,\n            callback: e\n          });\n        }\n      }, {\n        key: \"_notify\",\n        value: function _notify(e, i) {\n          var o = {};\n\n          var _iterator140 = _createForOfIteratorHelper(e),\n              _step140;\n\n          try {\n            for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {\n              var _i122 = _step140.value;\n              this.images[_i122] || this.fire(new t.Event(\"styleimagemissing\", {\n                id: _i122\n              }));\n              var _e185 = this.images[_i122];\n              _e185 ? o[_i122] = {\n                data: _e185.data.clone(),\n                pixelRatio: _e185.pixelRatio,\n                sdf: _e185.sdf,\n                version: _e185.version,\n                stretchX: _e185.stretchX,\n                stretchY: _e185.stretchY,\n                content: _e185.content,\n                hasRenderCallback: Boolean(_e185.userImage && _e185.userImage.render)\n              } : t.warnOnce(\"Image \\\"\".concat(_i122, \"\\\" could not be loaded. Please make sure you have added the image with map.addImage() or a \\\"sprite\\\" property in your style. You can provide missing images by listening for the \\\"styleimagemissing\\\" map event.\"));\n            }\n          } catch (err) {\n            _iterator140.e(err);\n          } finally {\n            _iterator140.f();\n          }\n\n          i(null, o);\n        }\n      }, {\n        key: \"getPixelSize\",\n        value: function getPixelSize() {\n          var _this$atlasImage = this.atlasImage,\n              t = _this$atlasImage.width,\n              e = _this$atlasImage.height;\n          return {\n            width: t,\n            height: e\n          };\n        }\n      }, {\n        key: \"getPattern\",\n        value: function getPattern(e) {\n          var i = this.patterns[e],\n              o = this.getImage(e);\n          if (!o) return null;\n          if (i && i.position.version === o.version) return i.position;\n          if (i) i.position.version = o.version;else {\n            var _i123 = {\n              w: o.data.width + 2,\n              h: o.data.height + 2,\n              x: 0,\n              y: 0\n            },\n                _a72 = new t.ImagePosition(_i123, o);\n\n            this.patterns[e] = {\n              bin: _i123,\n              position: _a72\n            };\n          }\n          return this._updatePatternAtlas(), this.patterns[e].position;\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t) {\n          var e = t.gl;\n          this.atlasTexture ? this.dirty && (this.atlasTexture.update(this.atlasImage), this.dirty = !1) : this.atlasTexture = new d(t, this.atlasImage, e.RGBA), this.atlasTexture.bind(e.LINEAR, e.CLAMP_TO_EDGE);\n        }\n      }, {\n        key: \"_updatePatternAtlas\",\n        value: function _updatePatternAtlas() {\n          var e = [];\n\n          for (var _t175 in this.patterns) {\n            e.push(this.patterns[_t175].bin);\n          }\n\n          var _t$potpack = t.potpack(e),\n              i = _t$potpack.w,\n              o = _t$potpack.h,\n              a = this.atlasImage;\n\n          a.resize({\n            width: i || 1,\n            height: o || 1\n          });\n\n          for (var _e186 in this.patterns) {\n            var _i124 = this.patterns[_e186].bin,\n                _o51 = _i124.x + 1,\n                _s87 = _i124.y + 1,\n                _r163 = this.images[_e186].data,\n                _n113 = _r163.width,\n                _l35 = _r163.height;\n\n            t.RGBAImage.copy(_r163, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o51,\n              y: _s87\n            }, {\n              width: _n113,\n              height: _l35\n            }), t.RGBAImage.copy(_r163, a, {\n              x: 0,\n              y: _l35 - 1\n            }, {\n              x: _o51,\n              y: _s87 - 1\n            }, {\n              width: _n113,\n              height: 1\n            }), t.RGBAImage.copy(_r163, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o51,\n              y: _s87 + _l35\n            }, {\n              width: _n113,\n              height: 1\n            }), t.RGBAImage.copy(_r163, a, {\n              x: _n113 - 1,\n              y: 0\n            }, {\n              x: _o51 - 1,\n              y: _s87\n            }, {\n              width: 1,\n              height: _l35\n            }), t.RGBAImage.copy(_r163, a, {\n              x: 0,\n              y: 0\n            }, {\n              x: _o51 + _n113,\n              y: _s87\n            }, {\n              width: 1,\n              height: _l35\n            });\n          }\n\n          this.dirty = !0;\n        }\n      }, {\n        key: \"beginFrame\",\n        value: function beginFrame() {\n          this.callbackDispatchedThisFrame = {};\n        }\n      }, {\n        key: \"dispatchRenderCallbacks\",\n        value: function dispatchRenderCallbacks(t) {\n          var _iterator141 = _createForOfIteratorHelper(t),\n              _step141;\n\n          try {\n            for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {\n              var _e187 = _step141.value;\n              if (this.callbackDispatchedThisFrame[_e187]) continue;\n              this.callbackDispatchedThisFrame[_e187] = !0;\n              var _t176 = this.images[_e187];\n              m(_t176) && this.updateImage(_e187, _t176);\n            }\n          } catch (err) {\n            _iterator141.e(err);\n          } finally {\n            _iterator141.f();\n          }\n        }\n      }]);\n\n      return _;\n    }(t.Evented);\n\n    var p = 1e20;\n\n    function f(t, e, i, o, a, s, r, n, l) {\n      for (var _c22 = e; _c22 < e + o; _c22++) {\n        g(t, i * s + _c22, s, a, r, n, l);\n      }\n\n      for (var _c23 = i; _c23 < i + a; _c23++) {\n        g(t, _c23 * s + e, 1, o, r, n, l);\n      }\n    }\n\n    function g(t, e, i, o, a, s, r) {\n      s[0] = 0, r[0] = -p, r[1] = p, a[0] = t[e];\n\n      for (var _n114 = 1, _l36 = 0, _c24 = 0; _n114 < o; _n114++) {\n        a[_n114] = t[e + _n114 * i];\n\n        var _o52 = _n114 * _n114;\n\n        do {\n          var _t177 = s[_l36];\n          _c24 = (a[_n114] - a[_t177] + _o52 - _t177 * _t177) / (_n114 - _t177) / 2;\n        } while (_c24 <= r[_l36] && --_l36 > -1);\n\n        _l36++, s[_l36] = _n114, r[_l36] = _c24, r[_l36 + 1] = p;\n      }\n\n      for (var _n115 = 0, _l37 = 0; _n115 < o; _n115++) {\n        for (; r[_l37 + 1] < _n115;) {\n          _l37++;\n        }\n\n        var _o53 = s[_l37],\n            _c25 = _n115 - _o53;\n\n        t[e + _n115 * i] = a[_o53] + _c25 * _c25;\n      }\n    }\n\n    var x = /*#__PURE__*/function () {\n      function x(t, e) {\n        _classCallCheck(this, x);\n\n        this.requestManager = t, this.localIdeographFontFamily = e, this.entries = {};\n      }\n\n      _createClass(x, [{\n        key: \"setURL\",\n        value: function setURL(t) {\n          this.url = t;\n        }\n      }, {\n        key: \"getGlyphs\",\n        value: function getGlyphs(e, i) {\n          var _this33 = this;\n\n          var o = [];\n\n          for (var _t178 in e) {\n            var _iterator142 = _createForOfIteratorHelper(e[_t178]),\n                _step142;\n\n            try {\n              for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {\n                var _i125 = _step142.value;\n                o.push({\n                  stack: _t178,\n                  id: _i125\n                });\n              }\n            } catch (err) {\n              _iterator142.e(err);\n            } finally {\n              _iterator142.f();\n            }\n          }\n\n          t.asyncAll(o, function (_ref122, i) {\n            var t = _ref122.stack,\n                e = _ref122.id;\n            var o = _this33.entries[t];\n            o || (o = _this33.entries[t] = {\n              glyphs: {},\n              requests: {},\n              ranges: {}\n            });\n            var a = o.glyphs[e];\n            if (void 0 !== a) return void i(null, {\n              stack: t,\n              id: e,\n              glyph: a\n            });\n            if (a = _this33._tinySDF(o, t, e), a) return o.glyphs[e] = a, void i(null, {\n              stack: t,\n              id: e,\n              glyph: a\n            });\n            var s = Math.floor(e / 256);\n            if (256 * s > 65535) return void i(new Error(\"glyphs > 65535 not supported\"));\n            if (o.ranges[s]) return void i(null, {\n              stack: t,\n              id: e,\n              glyph: a\n            });\n            var r = o.requests[s];\n            r || (r = o.requests[s] = [], x.loadGlyphRange(t, s, _this33.url, _this33.requestManager, function (t, e) {\n              if (e) {\n                for (var _t179 in e) {\n                  _this33._doesCharSupportLocalGlyph(+_t179) || (o.glyphs[+_t179] = e[+_t179]);\n                }\n\n                o.ranges[s] = !0;\n              }\n\n              var _iterator143 = _createForOfIteratorHelper(r),\n                  _step143;\n\n              try {\n                for (_iterator143.s(); !(_step143 = _iterator143.n()).done;) {\n                  var _i126 = _step143.value;\n\n                  _i126(t, e);\n                }\n              } catch (err) {\n                _iterator143.e(err);\n              } finally {\n                _iterator143.f();\n              }\n\n              delete o.requests[s];\n            })), r.push(function (o, a) {\n              o ? i(o) : a && i(null, {\n                stack: t,\n                id: e,\n                glyph: a[e] || null\n              });\n            });\n          }, function (t, e) {\n            if (t) i(t);else if (e) {\n              var _t180 = {};\n\n              var _iterator144 = _createForOfIteratorHelper(e),\n                  _step144;\n\n              try {\n                for (_iterator144.s(); !(_step144 = _iterator144.n()).done;) {\n                  var _step144$value = _step144.value,\n                      _i127 = _step144$value.stack,\n                      _o54 = _step144$value.id,\n                      _a73 = _step144$value.glyph;\n                  (_t180[_i127] || (_t180[_i127] = {}))[_o54] = _a73 && {\n                    id: _a73.id,\n                    bitmap: _a73.bitmap.clone(),\n                    metrics: _a73.metrics\n                  };\n                }\n              } catch (err) {\n                _iterator144.e(err);\n              } finally {\n                _iterator144.f();\n              }\n\n              i(null, _t180);\n            }\n          });\n        }\n      }, {\n        key: \"_doesCharSupportLocalGlyph\",\n        value: function _doesCharSupportLocalGlyph(e) {\n          return !!this.localIdeographFontFamily && (t.unicodeBlockLookup[\"CJK Unified Ideographs\"](e) || t.unicodeBlockLookup[\"Hangul Syllables\"](e) || t.unicodeBlockLookup.Hiragana(e) || t.unicodeBlockLookup.Katakana(e));\n        }\n      }, {\n        key: \"_tinySDF\",\n        value: function _tinySDF(e, i, o) {\n          var a = this.localIdeographFontFamily;\n          if (!a) return;\n          if (!this._doesCharSupportLocalGlyph(o)) return;\n          var s = e.tinySDF;\n\n          if (!s) {\n            var _t181 = \"400\";\n            /bold/i.test(i) ? _t181 = \"900\" : /medium/i.test(i) ? _t181 = \"500\" : /light/i.test(i) && (_t181 = \"200\"), s = e.tinySDF = new x.TinySDF({\n              fontSize: 24,\n              buffer: 3,\n              radius: 8,\n              cutoff: .25,\n              fontFamily: a,\n              fontWeight: _t181\n            });\n          }\n\n          var r = s.draw(String.fromCharCode(o));\n          return {\n            id: o,\n            bitmap: new t.AlphaImage({\n              width: r.width || 30,\n              height: r.height || 30\n            }, r.data),\n            metrics: {\n              width: r.glyphWidth || 24,\n              height: r.glyphHeight || 24,\n              left: r.glyphLeft || 0,\n              top: r.glyphTop - 27 || -8,\n              advance: r.glyphAdvance || 24\n            }\n          };\n        }\n      }]);\n\n      return x;\n    }();\n\n    x.loadGlyphRange = function (e, i, o, a, s) {\n      var r = 256 * i,\n          n = r + 255,\n          l = a.transformRequest(o.replace(\"{fontstack}\", e).replace(\"{range}\", \"\".concat(r, \"-\").concat(n)), t.ResourceType.Glyphs);\n      t.getArrayBuffer(l, function (e, i) {\n        if (e) s(e);else if (i) {\n          var _e188 = {};\n\n          var _iterator145 = _createForOfIteratorHelper(t.parseGlyphPBF(i)),\n              _step145;\n\n          try {\n            for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {\n              var _o55 = _step145.value;\n              _e188[_o55.id] = _o55;\n            }\n          } catch (err) {\n            _iterator145.e(err);\n          } finally {\n            _iterator145.f();\n          }\n\n          s(null, _e188);\n        }\n      });\n    }, x.TinySDF = /*#__PURE__*/function () {\n      function _class13() {\n        var _ref123 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            _ref123$fontSize = _ref123.fontSize,\n            t = _ref123$fontSize === void 0 ? 24 : _ref123$fontSize,\n            _ref123$buffer = _ref123.buffer,\n            e = _ref123$buffer === void 0 ? 3 : _ref123$buffer,\n            _ref123$radius = _ref123.radius,\n            i = _ref123$radius === void 0 ? 8 : _ref123$radius,\n            _ref123$cutoff = _ref123.cutoff,\n            o = _ref123$cutoff === void 0 ? .25 : _ref123$cutoff,\n            _ref123$fontFamily = _ref123.fontFamily,\n            a = _ref123$fontFamily === void 0 ? \"sans-serif\" : _ref123$fontFamily,\n            _ref123$fontWeight = _ref123.fontWeight,\n            s = _ref123$fontWeight === void 0 ? \"normal\" : _ref123$fontWeight,\n            _ref123$fontStyle = _ref123.fontStyle,\n            r = _ref123$fontStyle === void 0 ? \"normal\" : _ref123$fontStyle;\n\n        _classCallCheck(this, _class13);\n\n        this.buffer = e, this.cutoff = o, this.radius = i;\n\n        var n = this.size = t + 4 * e,\n            l = this._createCanvas(n),\n            c = this.ctx = l.getContext(\"2d\", {\n          willReadFrequently: !0\n        });\n\n        c.font = \"\".concat(r, \" \").concat(s, \" \").concat(t, \"px \").concat(a), c.textBaseline = \"alphabetic\", c.textAlign = \"left\", c.fillStyle = \"black\", this.gridOuter = new Float64Array(n * n), this.gridInner = new Float64Array(n * n), this.f = new Float64Array(n), this.z = new Float64Array(n + 1), this.v = new Uint16Array(n);\n      }\n\n      _createClass(_class13, [{\n        key: \"_createCanvas\",\n        value: function _createCanvas(t) {\n          var e = document.createElement(\"canvas\");\n          return e.width = e.height = t, e;\n        }\n      }, {\n        key: \"draw\",\n        value: function draw(t) {\n          var _this$ctx$measureText = this.ctx.measureText(t),\n              e = _this$ctx$measureText.width,\n              i = _this$ctx$measureText.actualBoundingBoxAscent,\n              o = _this$ctx$measureText.actualBoundingBoxDescent,\n              a = _this$ctx$measureText.actualBoundingBoxLeft,\n              s = _this$ctx$measureText.actualBoundingBoxRight,\n              r = Math.ceil(i),\n              n = Math.min(this.size - this.buffer, Math.ceil(s - a)),\n              l = Math.min(this.size - this.buffer, r + Math.ceil(o)),\n              c = n + 2 * this.buffer,\n              h = l + 2 * this.buffer,\n              u = Math.max(c * h, 0),\n              d = new Uint8ClampedArray(u),\n              m = {\n            data: d,\n            width: c,\n            height: h,\n            glyphWidth: n,\n            glyphHeight: l,\n            glyphTop: r,\n            glyphLeft: 0,\n            glyphAdvance: e\n          };\n\n          if (0 === n || 0 === l) return m;\n          var _ = this.ctx,\n              g = this.buffer,\n              x = this.gridInner,\n              v = this.gridOuter;\n          _.clearRect(g, g, n, l), _.fillText(t, g, g + r);\n\n          var y = _.getImageData(g, g, n, l);\n\n          v.fill(p, 0, u), x.fill(0, 0, u);\n\n          for (var _t182 = 0; _t182 < l; _t182++) {\n            for (var _e189 = 0; _e189 < n; _e189++) {\n              var _i128 = y.data[4 * (_t182 * n + _e189) + 3] / 255;\n\n              if (0 === _i128) continue;\n\n              var _o56 = (_t182 + g) * c + _e189 + g;\n\n              if (1 === _i128) v[_o56] = 0, x[_o56] = p;else {\n                var _t183 = .5 - _i128;\n\n                v[_o56] = _t183 > 0 ? _t183 * _t183 : 0, x[_o56] = _t183 < 0 ? _t183 * _t183 : 0;\n              }\n            }\n          }\n\n          f(v, 0, 0, c, h, c, this.f, this.v, this.z), f(x, g, g, n, l, c, this.f, this.v, this.z);\n\n          for (var _t184 = 0; _t184 < u; _t184++) {\n            var _e190 = Math.sqrt(v[_t184]) - Math.sqrt(x[_t184]);\n\n            d[_t184] = Math.round(255 - 255 * (_e190 / this.radius + this.cutoff));\n          }\n\n          return m;\n        }\n      }]);\n\n      return _class13;\n    }();\n    var v = new t.Properties({\n      anchor: new t.DataConstantProperty(t.spec.light.anchor),\n      position: new ( /*#__PURE__*/function () {\n        function _class14() {\n          _classCallCheck(this, _class14);\n\n          this.specification = t.spec.light.position;\n        }\n\n        _createClass(_class14, [{\n          key: \"possiblyEvaluate\",\n          value: function possiblyEvaluate(e, i) {\n            return t.sphericalToCartesian(e.expression.evaluate(i));\n          }\n        }, {\n          key: \"interpolate\",\n          value: function interpolate(e, i, o) {\n            return {\n              x: t.number(e.x, i.x, o),\n              y: t.number(e.y, i.y, o),\n              z: t.number(e.z, i.z, o)\n            };\n          }\n        }]);\n\n        return _class14;\n      }())(),\n      color: new t.DataConstantProperty(t.spec.light.color),\n      intensity: new t.DataConstantProperty(t.spec.light.intensity)\n    }),\n        y = \"-transition\";\n\n    var b = /*#__PURE__*/function (_t$Evented2) {\n      _inherits(b, _t$Evented2);\n\n      function b(e) {\n        var _this34;\n\n        _classCallCheck(this, b);\n\n        _this34 = _possibleConstructorReturn(this, _getPrototypeOf(b).call(this)), _this34._transitionable = new t.Transitionable(v), _this34.setLight(e), _this34._transitioning = _this34._transitionable.untransitioned();\n        return _this34;\n      }\n\n      _createClass(b, [{\n        key: \"getLight\",\n        value: function getLight() {\n          return this._transitionable.serialize();\n        }\n      }, {\n        key: \"setLight\",\n        value: function setLight(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          if (!this._validate(t.validateLight, e, i)) for (var _t185 in e) {\n            var _i129 = e[_t185];\n            _t185.endsWith(y) ? this._transitionable.setTransition(_t185.slice(0, -y.length), _i129) : this._transitionable.setValue(_t185, _i129);\n          }\n        }\n      }, {\n        key: \"updateTransitions\",\n        value: function updateTransitions(t) {\n          this._transitioning = this._transitionable.transitioned(t, this._transitioning);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._transitioning.hasTransition();\n        }\n      }, {\n        key: \"recalculate\",\n        value: function recalculate(t) {\n          this.properties = this._transitioning.possiblyEvaluate(t);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(e, i, o) {\n          return (!o || !1 !== o.validate) && t.emitValidationErrors(this, e.call(t.validateStyle, t.extend({\n            value: i,\n            style: {\n              glyphs: !0,\n              sprite: !0\n            },\n            styleSpec: t.spec\n          })));\n        }\n      }]);\n\n      return b;\n    }(t.Evented);\n\n    var w = /*#__PURE__*/function () {\n      function w(t, e) {\n        _classCallCheck(this, w);\n\n        this.width = t, this.height = e, this.nextRow = 0, this.data = new Uint8Array(this.width * this.height), this.dashEntry = {};\n      }\n\n      _createClass(w, [{\n        key: \"getDash\",\n        value: function getDash(t, e) {\n          var i = t.join(\",\") + String(e);\n          return this.dashEntry[i] || (this.dashEntry[i] = this.addDash(t, e)), this.dashEntry[i];\n        }\n      }, {\n        key: \"getDashRanges\",\n        value: function getDashRanges(t, e, i) {\n          var o = [];\n          var a = t.length % 2 == 1 ? -t[t.length - 1] * i : 0,\n              s = t[0] * i,\n              r = !0;\n          o.push({\n            left: a,\n            right: s,\n            isDash: r,\n            zeroLength: 0 === t[0]\n          });\n          var n = t[0];\n\n          for (var _e191 = 1; _e191 < t.length; _e191++) {\n            r = !r;\n            var _l38 = t[_e191];\n            a = n * i, n += _l38, s = n * i, o.push({\n              left: a,\n              right: s,\n              isDash: r,\n              zeroLength: 0 === _l38\n            });\n          }\n\n          return o;\n        }\n      }, {\n        key: \"addRoundDash\",\n        value: function addRoundDash(t, e, i) {\n          var o = e / 2;\n\n          for (var _e192 = -i; _e192 <= i; _e192++) {\n            var _a74 = this.width * (this.nextRow + i + _e192);\n\n            var _s88 = 0,\n                _r164 = t[_s88];\n\n            for (var _n116 = 0; _n116 < this.width; _n116++) {\n              _n116 / _r164.right > 1 && (_r164 = t[++_s88]);\n\n              var _l39 = Math.abs(_n116 - _r164.left),\n                  _c26 = Math.abs(_n116 - _r164.right),\n                  _h16 = Math.min(_l39, _c26);\n\n              var _u26 = void 0;\n\n              var _d9 = _e192 / i * (o + 1);\n\n              if (_r164.isDash) {\n                var _t186 = o - Math.abs(_d9);\n\n                _u26 = Math.sqrt(_h16 * _h16 + _t186 * _t186);\n              } else _u26 = o - Math.sqrt(_h16 * _h16 + _d9 * _d9);\n\n              this.data[_a74 + _n116] = Math.max(0, Math.min(255, _u26 + 128));\n            }\n          }\n        }\n      }, {\n        key: \"addRegularDash\",\n        value: function addRegularDash(t) {\n          for (var _e193 = t.length - 1; _e193 >= 0; --_e193) {\n            var _i130 = t[_e193],\n                _o57 = t[_e193 + 1];\n            _i130.zeroLength ? t.splice(_e193, 1) : _o57 && _o57.isDash === _i130.isDash && (_o57.left = _i130.left, t.splice(_e193, 1));\n          }\n\n          var e = t[0],\n              i = t[t.length - 1];\n          e.isDash === i.isDash && (e.left = i.left - this.width, i.right = e.right + this.width);\n          var o = this.width * this.nextRow;\n          var a = 0,\n              s = t[a];\n\n          for (var _e194 = 0; _e194 < this.width; _e194++) {\n            _e194 / s.right > 1 && (s = t[++a]);\n\n            var _i131 = Math.abs(_e194 - s.left),\n                _r165 = Math.abs(_e194 - s.right),\n                _n117 = Math.min(_i131, _r165);\n\n            this.data[o + _e194] = Math.max(0, Math.min(255, (s.isDash ? _n117 : -_n117) + 128));\n          }\n        }\n      }, {\n        key: \"addDash\",\n        value: function addDash(e, i) {\n          var o = i ? 7 : 0,\n              a = 2 * o + 1;\n          if (this.nextRow + a > this.height) return t.warnOnce(\"LineAtlas out of space\"), null;\n          var s = 0;\n\n          for (var _t187 = 0; _t187 < e.length; _t187++) {\n            s += e[_t187];\n          }\n\n          if (0 !== s) {\n            var _t188 = this.width / s,\n                _a75 = this.getDashRanges(e, this.width, _t188);\n\n            i ? this.addRoundDash(_a75, _t188, o) : this.addRegularDash(_a75);\n          }\n\n          var r = {\n            y: (this.nextRow + o + .5) / this.height,\n            height: 2 * o / this.height,\n            width: s\n          };\n          return this.nextRow += a, this.dirty = !0, r;\n        }\n      }, {\n        key: \"bind\",\n        value: function bind(t) {\n          var e = t.gl;\n          this.texture ? (e.bindTexture(e.TEXTURE_2D, this.texture), this.dirty && (this.dirty = !1, e.texSubImage2D(e.TEXTURE_2D, 0, 0, 0, this.width, this.height, e.ALPHA, e.UNSIGNED_BYTE, this.data))) : (this.texture = e.createTexture(), e.bindTexture(e.TEXTURE_2D, this.texture), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR), e.texImage2D(e.TEXTURE_2D, 0, e.ALPHA, this.width, this.height, 0, e.ALPHA, e.UNSIGNED_BYTE, this.data));\n        }\n      }]);\n\n      return w;\n    }();\n\n    var T = /*#__PURE__*/function () {\n      function T(e, i) {\n        _classCallCheck(this, T);\n\n        this.workerPool = e, this.actors = [], this.currentActor = 0, this.id = t.uniqueId();\n        var o = this.workerPool.acquire(this.id);\n\n        for (var _t189 = 0; _t189 < o.length; _t189++) {\n          var _e195 = new T.Actor(o[_t189], i, this.id);\n\n          _e195.name = \"Worker \".concat(_t189), this.actors.push(_e195);\n        }\n      }\n\n      _createClass(T, [{\n        key: \"broadcast\",\n        value: function broadcast(e, i, o) {\n          t.asyncAll(this.actors, function (t, o) {\n            t.send(e, i, o);\n          }, o = o || function () {});\n        }\n      }, {\n        key: \"getActor\",\n        value: function getActor() {\n          return this.currentActor = (this.currentActor + 1) % this.actors.length, this.actors[this.currentActor];\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          this.actors.forEach(function (t) {\n            t.remove();\n          }), this.actors = [], this.workerPool.release(this.id);\n        }\n      }]);\n\n      return T;\n    }();\n\n    function E(e, i, o) {\n      var a = function a(i, _a76) {\n        if (i) return o(i);\n\n        if (_a76) {\n          var _i132 = t.pick(t.extend(_a76, e), [\"tiles\", \"minzoom\", \"maxzoom\", \"attribution\", \"bounds\", \"scheme\", \"tileSize\", \"encoding\"]);\n\n          _a76.vector_layers && (_i132.vectorLayers = _a76.vector_layers, _i132.vectorLayerIds = _i132.vectorLayers.map(function (t) {\n            return t.id;\n          })), o(null, _i132);\n        }\n      };\n\n      return e.url ? t.getJSON(i.transformRequest(e.url, t.ResourceType.Source), a) : t.exported.frame(function () {\n        return a(null, e);\n      });\n    }\n\n    T.Actor = t.Actor;\n\n    var I = /*#__PURE__*/function () {\n      function I(e, i, o) {\n        _classCallCheck(this, I);\n\n        this.bounds = t.LngLatBounds.convert(this.validateBounds(e)), this.minzoom = i || 0, this.maxzoom = o || 24;\n      }\n\n      _createClass(I, [{\n        key: \"validateBounds\",\n        value: function validateBounds(t) {\n          return Array.isArray(t) && 4 === t.length ? [Math.max(-180, t[0]), Math.max(-90, t[1]), Math.min(180, t[2]), Math.min(90, t[3])] : [-180, -90, 180, 90];\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(e) {\n          var i = Math.pow(2, e.z),\n              o = Math.floor(t.mercatorXfromLng(this.bounds.getWest()) * i),\n              a = Math.floor(t.mercatorYfromLat(this.bounds.getNorth()) * i),\n              s = Math.ceil(t.mercatorXfromLng(this.bounds.getEast()) * i),\n              r = Math.ceil(t.mercatorYfromLat(this.bounds.getSouth()) * i);\n          return e.x >= o && e.x < s && e.y >= a && e.y < r;\n        }\n      }]);\n\n      return I;\n    }();\n\n    var S = /*#__PURE__*/function (_t$Evented3) {\n      _inherits(S, _t$Evented3);\n\n      function S(e, i, o, a) {\n        var _this35;\n\n        _classCallCheck(this, S);\n\n        if (_this35 = _possibleConstructorReturn(this, _getPrototypeOf(S).call(this)), _this35.id = e, _this35.dispatcher = o, _this35.type = \"vector\", _this35.minzoom = 0, _this35.maxzoom = 22, _this35.scheme = \"xyz\", _this35.tileSize = 512, _this35.reparseOverscaled = !0, _this35.isTileClipped = !0, _this35._loaded = !1, t.extend(_assertThisInitialized(_assertThisInitialized(_this35)), t.pick(i, [\"url\", \"scheme\", \"tileSize\", \"promoteId\"])), _this35._options = t.extend({\n          type: \"vector\"\n        }, i), _this35._collectResourceTiming = i.collectResourceTiming, 512 !== _this35.tileSize) throw new Error(\"vector tile sources must have a tileSize of 512\");\n\n        _this35.setEventedParent(a);\n\n        return _possibleConstructorReturn(_this35);\n      }\n\n      _createClass(S, [{\n        key: \"load\",\n        value: function load() {\n          var _this36 = this;\n\n          this._loaded = !1, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this._tileJSONRequest = E(this._options, this.map._requestManager, function (e, i) {\n            _this36._tileJSONRequest = null, _this36._loaded = !0, _this36.map.style.sourceCaches[_this36.id].clearTiles(), e ? _this36.fire(new t.ErrorEvent(e)) : i && (t.extend(_this36, i), i.bounds && (_this36.tileBounds = new I(i.bounds, _this36.minzoom, _this36.maxzoom)), _this36.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            })), _this36.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            })));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"hasTile\",\n        value: function hasTile(t) {\n          return !this.tileBounds || this.tileBounds.contains(t.canonical);\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"setSourceProperty\",\n        value: function setSourceProperty(t) {\n          this._tileJSONRequest && this._tileJSONRequest.cancel(), t(), this.load();\n        }\n      }, {\n        key: \"setTiles\",\n        value: function setTiles(t) {\n          var _this37 = this;\n\n          return this.setSourceProperty(function () {\n            _this37._options.tiles = t;\n          }), this;\n        }\n      }, {\n        key: \"setUrl\",\n        value: function setUrl(t) {\n          var _this38 = this;\n\n          return this.setSourceProperty(function () {\n            _this38.url = t, _this38._options.url = t;\n          }), this;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.extend({}, this._options);\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, i) {\n          var o = e.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme),\n              a = {\n            request: this.map._requestManager.transformRequest(o, t.ResourceType.Tile),\n            uid: e.uid,\n            tileID: e.tileID,\n            zoom: e.tileID.overscaledZ,\n            tileSize: this.tileSize * e.tileID.overscaleFactor(),\n            type: this.type,\n            source: this.id,\n            pixelRatio: this.map.getPixelRatio(),\n            showCollisionBoxes: this.map.showCollisionBoxes,\n            promoteId: this.promoteId\n          };\n\n          function s(o, a) {\n            return delete e.request, e.aborted ? i(null) : o && 404 !== o.status ? i(o) : (a && a.resourceTiming && (e.resourceTiming = a.resourceTiming), this.map._refreshExpiredTiles && a && e.setExpiryData(a), e.loadVectorData(a, this.map.painter), t.cacheEntryPossiblyAdded(this.dispatcher), i(null), void (e.reloadCallback && (this.loadTile(e, e.reloadCallback), e.reloadCallback = null)));\n          }\n\n          a.request.collectResourceTiming = this._collectResourceTiming, e.actor && \"expired\" !== e.state ? \"loading\" === e.state ? e.reloadCallback = i : e.request = e.actor.send(\"reloadTile\", a, s.bind(this)) : (e.actor = this.dispatcher.getActor(), e.request = e.actor.send(\"loadTile\", a, s.bind(this)));\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t) {\n          t.request && (t.request.cancel(), delete t.request), t.actor && t.actor.send(\"abortTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          }, void 0);\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t) {\n          t.unloadVectorData(), t.actor && t.actor.send(\"removeTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          }, void 0);\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n\n      return S;\n    }(t.Evented);\n\n    var C = /*#__PURE__*/function (_t$Evented4) {\n      _inherits(C, _t$Evented4);\n\n      function C(e, i, o, a) {\n        var _this39;\n\n        _classCallCheck(this, C);\n\n        _this39 = _possibleConstructorReturn(this, _getPrototypeOf(C).call(this)), _this39.id = e, _this39.dispatcher = o, _this39.setEventedParent(a), _this39.type = \"raster\", _this39.minzoom = 0, _this39.maxzoom = 22, _this39.roundZoom = !0, _this39.scheme = \"xyz\", _this39.tileSize = 512, _this39._loaded = !1, _this39._options = t.extend({\n          type: \"raster\"\n        }, i), t.extend(_assertThisInitialized(_assertThisInitialized(_this39)), t.pick(i, [\"url\", \"scheme\", \"tileSize\"]));\n        return _this39;\n      }\n\n      _createClass(C, [{\n        key: \"load\",\n        value: function load() {\n          var _this40 = this;\n\n          this._loaded = !1, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this._tileJSONRequest = E(this._options, this.map._requestManager, function (e, i) {\n            _this40._tileJSONRequest = null, _this40._loaded = !0, e ? _this40.fire(new t.ErrorEvent(e)) : i && (t.extend(_this40, i), i.bounds && (_this40.tileBounds = new I(i.bounds, _this40.minzoom, _this40.maxzoom)), _this40.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"metadata\"\n            })), _this40.fire(new t.Event(\"data\", {\n              dataType: \"source\",\n              sourceDataType: \"content\"\n            })));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._tileJSONRequest && (this._tileJSONRequest.cancel(), this._tileJSONRequest = null);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.extend({}, this._options);\n        }\n      }, {\n        key: \"hasTile\",\n        value: function hasTile(t) {\n          return !this.tileBounds || this.tileBounds.contains(t.canonical);\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, i) {\n          var _this41 = this;\n\n          var o = e.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme);\n          e.request = t.getImage(this.map._requestManager.transformRequest(o, t.ResourceType.Tile), function (o, a, s) {\n            if (delete e.request, e.aborted) e.state = \"unloaded\", i(null);else if (o) e.state = \"errored\", i(o);else if (a) {\n              _this41.map._refreshExpiredTiles && e.setExpiryData(s);\n              var _o58 = _this41.map.painter.context,\n                  _r166 = _o58.gl;\n              e.texture = _this41.map.painter.getTileTexture(a.width), e.texture ? e.texture.update(a, {\n                useMipmap: !0\n              }) : (e.texture = new d(_o58, a, _r166.RGBA, {\n                useMipmap: !0\n              }), e.texture.bind(_r166.LINEAR, _r166.CLAMP_TO_EDGE, _r166.LINEAR_MIPMAP_NEAREST), _o58.extTextureFilterAnisotropic && _r166.texParameterf(_r166.TEXTURE_2D, _o58.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT, _o58.extTextureFilterAnisotropicMax)), e.state = \"loaded\", t.cacheEntryPossiblyAdded(_this41.dispatcher), i(null);\n            }\n          });\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t, e) {\n          t.request && (t.request.cancel(), delete t.request), e();\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t, e) {\n          t.texture && this.map.painter.saveTileTexture(t.texture), e();\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n\n      return C;\n    }(t.Evented);\n\n    var P;\n\n    var z = /*#__PURE__*/function (_C) {\n      _inherits(z, _C);\n\n      function z(e, i, o, a) {\n        var _this42;\n\n        _classCallCheck(this, z);\n\n        _this42 = _possibleConstructorReturn(this, _getPrototypeOf(z).call(this, e, i, o, a)), _this42.type = \"raster-dem\", _this42.maxzoom = 22, _this42._options = t.extend({\n          type: \"raster-dem\"\n        }, i), _this42.encoding = i.encoding || \"mapbox\";\n        return _this42;\n      }\n\n      _createClass(z, [{\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"raster-dem\",\n            url: this.url,\n            tileSize: this.tileSize,\n            tiles: this.tiles,\n            bounds: this.bounds,\n            encoding: this.encoding\n          };\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(e, i) {\n          var o = e.tileID.canonical.url(this.tiles, this.map.getPixelRatio(), this.scheme);\n\n          function a(t, o) {\n            t && (e.state = \"errored\", i(t)), o && (e.dem = o, e.needsHillshadePrepare = !0, e.state = \"loaded\", i(null));\n          }\n\n          e.request = t.getImage(this.map._requestManager.transformRequest(o, t.ResourceType.Tile), function (o, s) {\n            if (delete e.request, e.aborted) e.state = \"unloaded\", i(null);else if (o) e.state = \"errored\", i(o);else if (s) {\n              this.map._refreshExpiredTiles && e.setExpiryData(s), delete s.cacheControl, delete s.expires;\n\n              var _i133 = t.isImageBitmap(s) && (null == P && (P = \"undefined\" != typeof OffscreenCanvas && new OffscreenCanvas(1, 1).getContext(\"2d\") && \"function\" == typeof createImageBitmap), P) ? s : t.exported.getImageData(s, 1),\n                  _o59 = {\n                uid: e.uid,\n                coord: e.tileID,\n                source: this.id,\n                rawImageData: _i133,\n                encoding: this.encoding\n              };\n\n              e.actor && \"expired\" !== e.state || (e.actor = this.dispatcher.getActor(), e.actor.send(\"loadDEMTile\", _o59, a.bind(this)));\n            }\n          }.bind(this)), e.neighboringTiles = this._getNeighboringTiles(e.tileID);\n        }\n      }, {\n        key: \"_getNeighboringTiles\",\n        value: function _getNeighboringTiles(e) {\n          var i = e.canonical,\n              o = Math.pow(2, i.z),\n              a = (i.x - 1 + o) % o,\n              s = 0 === i.x ? e.wrap - 1 : e.wrap,\n              r = (i.x + 1 + o) % o,\n              n = i.x + 1 === o ? e.wrap + 1 : e.wrap,\n              l = {};\n          return l[new t.OverscaledTileID(e.overscaledZ, s, i.z, a, i.y).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, n, i.z, r, i.y).key] = {\n            backfilled: !1\n          }, i.y > 0 && (l[new t.OverscaledTileID(e.overscaledZ, s, i.z, a, i.y - 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, e.wrap, i.z, i.x, i.y - 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, n, i.z, r, i.y - 1).key] = {\n            backfilled: !1\n          }), i.y + 1 < o && (l[new t.OverscaledTileID(e.overscaledZ, s, i.z, a, i.y + 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, e.wrap, i.z, i.x, i.y + 1).key] = {\n            backfilled: !1\n          }, l[new t.OverscaledTileID(e.overscaledZ, n, i.z, r, i.y + 1).key] = {\n            backfilled: !1\n          }), l;\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t) {\n          t.demTexture && this.map.painter.saveTileTexture(t.demTexture), t.fbo && (t.fbo.destroy(), delete t.fbo), t.dem && delete t.dem, delete t.neighboringTiles, t.state = \"unloaded\", t.actor && t.actor.send(\"removeDEMTile\", {\n            uid: t.uid,\n            source: this.id\n          });\n        }\n      }]);\n\n      return z;\n    }(C);\n\n    var D = /*#__PURE__*/function (_t$Evented5) {\n      _inherits(D, _t$Evented5);\n\n      function D(e, i, o, a) {\n        var _this43;\n\n        _classCallCheck(this, D);\n\n        _this43 = _possibleConstructorReturn(this, _getPrototypeOf(D).call(this)), _this43.id = e, _this43.type = \"geojson\", _this43.minzoom = 0, _this43.maxzoom = 18, _this43.tileSize = 512, _this43.isTileClipped = !0, _this43.reparseOverscaled = !0, _this43._removed = !1, _this43._pendingLoads = 0, _this43.actor = o.getActor(), _this43.setEventedParent(a), _this43._data = i.data, _this43._options = t.extend({}, i), _this43._collectResourceTiming = i.collectResourceTiming, void 0 !== i.maxzoom && (_this43.maxzoom = i.maxzoom), i.type && (_this43.type = i.type), i.attribution && (_this43.attribution = i.attribution), _this43.promoteId = i.promoteId;\n        var s = t.EXTENT / _this43.tileSize;\n        _this43.workerOptions = t.extend({\n          source: _this43.id,\n          cluster: i.cluster || !1,\n          geojsonVtOptions: {\n            buffer: (void 0 !== i.buffer ? i.buffer : 128) * s,\n            tolerance: (void 0 !== i.tolerance ? i.tolerance : .375) * s,\n            extent: t.EXTENT,\n            maxZoom: _this43.maxzoom,\n            lineMetrics: i.lineMetrics || !1,\n            generateId: i.generateId || !1\n          },\n          superclusterOptions: {\n            maxZoom: void 0 !== i.clusterMaxZoom ? i.clusterMaxZoom : _this43.maxzoom - 1,\n            minPoints: Math.max(2, i.clusterMinPoints || 2),\n            extent: t.EXTENT,\n            radius: (i.clusterRadius || 50) * s,\n            log: !1,\n            generateId: i.generateId || !1\n          },\n          clusterProperties: i.clusterProperties,\n          filter: i.filter\n        }, i.workerOptions);\n        return _this43;\n      }\n\n      _createClass(D, [{\n        key: \"load\",\n        value: function load() {\n          this._updateWorkerData(\"metadata\");\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"setData\",\n        value: function setData(t) {\n          return this._data = t, this._updateWorkerData(\"content\"), this;\n        }\n      }, {\n        key: \"getClusterExpansionZoom\",\n        value: function getClusterExpansionZoom(t, e) {\n          return this.actor.send(\"geojson.getClusterExpansionZoom\", {\n            clusterId: t,\n            source: this.id\n          }, e), this;\n        }\n      }, {\n        key: \"getClusterChildren\",\n        value: function getClusterChildren(t, e) {\n          return this.actor.send(\"geojson.getClusterChildren\", {\n            clusterId: t,\n            source: this.id\n          }, e), this;\n        }\n      }, {\n        key: \"getClusterLeaves\",\n        value: function getClusterLeaves(t, e, i, o) {\n          return this.actor.send(\"geojson.getClusterLeaves\", {\n            source: this.id,\n            clusterId: t,\n            limit: e,\n            offset: i\n          }, o), this;\n        }\n      }, {\n        key: \"_updateWorkerData\",\n        value: function _updateWorkerData(e) {\n          var _this44 = this;\n\n          var i = t.extend({}, this.workerOptions),\n              o = this._data;\n          \"string\" == typeof o ? (i.request = this.map._requestManager.transformRequest(t.exported.resolveURL(o), t.ResourceType.Source), i.request.collectResourceTiming = this._collectResourceTiming) : i.data = JSON.stringify(o), this._pendingLoads++, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this.actor.send(\"\".concat(this.type, \".loadData\"), i, function (o, a) {\n            if (_this44._pendingLoads--, _this44._removed || a && a.abandoned) return;\n            var s = null;\n            if (a && a.resourceTiming && a.resourceTiming[_this44.id] && (s = a.resourceTiming[_this44.id].slice(0)), _this44.actor.send(\"\".concat(_this44.type, \".coalesce\"), {\n              source: i.source\n            }, null), o) return void _this44.fire(new t.ErrorEvent(o));\n            var r = {\n              dataType: \"source\",\n              sourceDataType: e\n            };\n            _this44._collectResourceTiming && s && s.length > 0 && t.extend(r, {\n              resourceTiming: s\n            }), _this44.fire(new t.Event(\"data\", r));\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return 0 === this._pendingLoads;\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(t, e) {\n          var _this45 = this;\n\n          var i = t.actor ? \"reloadTile\" : \"loadTile\";\n          t.actor = this.actor;\n          var o = {\n            type: this.type,\n            uid: t.uid,\n            tileID: t.tileID,\n            zoom: t.tileID.overscaledZ,\n            maxZoom: this.maxzoom,\n            tileSize: this.tileSize,\n            source: this.id,\n            pixelRatio: this.map.getPixelRatio(),\n            showCollisionBoxes: this.map.showCollisionBoxes,\n            promoteId: this.promoteId\n          };\n          t.request = this.actor.send(i, o, function (o, a) {\n            return delete t.request, t.unloadVectorData(), t.aborted ? e(null) : o ? e(o) : (t.loadVectorData(a, _this45.map.painter, \"reloadTile\" === i), e(null));\n          });\n        }\n      }, {\n        key: \"abortTile\",\n        value: function abortTile(t) {\n          t.request && (t.request.cancel(), delete t.request), t.aborted = !0;\n        }\n      }, {\n        key: \"unloadTile\",\n        value: function unloadTile(t) {\n          t.unloadVectorData(), this.actor.send(\"removeTile\", {\n            uid: t.uid,\n            type: this.type,\n            source: this.id\n          });\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this._removed = !0, this.actor.send(\"removeSource\", {\n            type: this.type,\n            source: this.id\n          });\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.extend({}, this._options, {\n            type: this.type,\n            data: this._data\n          });\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n\n      return D;\n    }(t.Evented);\n\n    var A = t.createLayout([{\n      name: \"a_pos\",\n      type: \"Int16\",\n      components: 2\n    }, {\n      name: \"a_texture_pos\",\n      type: \"Int16\",\n      components: 2\n    }]);\n\n    var M = /*#__PURE__*/function (_t$Evented6) {\n      _inherits(M, _t$Evented6);\n\n      function M(t, e, i, o) {\n        var _this46;\n\n        _classCallCheck(this, M);\n\n        _this46 = _possibleConstructorReturn(this, _getPrototypeOf(M).call(this)), _this46.id = t, _this46.dispatcher = i, _this46.coordinates = e.coordinates, _this46.type = \"image\", _this46.minzoom = 0, _this46.maxzoom = 22, _this46.tileSize = 512, _this46.tiles = {}, _this46._loaded = !1, _this46.setEventedParent(o), _this46.options = e;\n        return _this46;\n      }\n\n      _createClass(M, [{\n        key: \"load\",\n        value: function load(e, i) {\n          var _this47 = this;\n\n          this._loaded = !1, this.fire(new t.Event(\"dataloading\", {\n            dataType: \"source\"\n          })), this.url = this.options.url, t.getImage(this.map._requestManager.transformRequest(this.url, t.ResourceType.Image), function (o, a) {\n            _this47._loaded = !0, o ? _this47.fire(new t.ErrorEvent(o)) : a && (_this47.image = a, e && (_this47.coordinates = e), i && i(), _this47._finishLoading());\n          });\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          return this._loaded;\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(t) {\n          var _this48 = this;\n\n          return this.image && t.url ? (this.options.url = t.url, this.load(t.coordinates, function () {\n            _this48.texture = null;\n          }), this) : this;\n        }\n      }, {\n        key: \"_finishLoading\",\n        value: function _finishLoading() {\n          this.map && (this.setCoordinates(this.coordinates), this.fire(new t.Event(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"metadata\"\n          })));\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load();\n        }\n      }, {\n        key: \"setCoordinates\",\n        value: function setCoordinates(e) {\n          var _this49 = this;\n\n          this.coordinates = e;\n          var i = e.map(t.MercatorCoordinate.fromLngLat);\n          this.tileID = function (e) {\n            var i = 1 / 0,\n                o = 1 / 0,\n                a = -1 / 0,\n                s = -1 / 0;\n\n            var _iterator146 = _createForOfIteratorHelper(e),\n                _step146;\n\n            try {\n              for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {\n                var _t190 = _step146.value;\n                i = Math.min(i, _t190.x), o = Math.min(o, _t190.y), a = Math.max(a, _t190.x), s = Math.max(s, _t190.y);\n              }\n            } catch (err) {\n              _iterator146.e(err);\n            } finally {\n              _iterator146.f();\n            }\n\n            var r = Math.max(a - i, s - o),\n                n = Math.max(0, Math.floor(-Math.log(r) / Math.LN2)),\n                l = Math.pow(2, n);\n            return new t.CanonicalTileID(n, Math.floor((i + a) / 2 * l), Math.floor((o + s) / 2 * l));\n          }(i), this.minzoom = this.maxzoom = this.tileID.z;\n          var o = i.map(function (t) {\n            return _this49.tileID.getTilePoint(t)._round();\n          });\n          return this._boundsArray = new t.RasterBoundsArray(), this._boundsArray.emplaceBack(o[0].x, o[0].y, 0, 0), this._boundsArray.emplaceBack(o[1].x, o[1].y, t.EXTENT, 0), this._boundsArray.emplaceBack(o[3].x, o[3].y, 0, t.EXTENT), this._boundsArray.emplaceBack(o[2].x, o[2].y, t.EXTENT, t.EXTENT), this.boundsBuffer && (this.boundsBuffer.destroy(), delete this.boundsBuffer), this.fire(new t.Event(\"data\", {\n            dataType: \"source\",\n            sourceDataType: \"content\"\n          })), this;\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          if (0 === Object.keys(this.tiles).length || !this.image) return;\n          var e = this.map.painter.context,\n              i = e.gl;\n          this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, A.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture || (this.texture = new d(e, this.image, i.RGBA), this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE));\n\n          for (var _t191 in this.tiles) {\n            var _e196 = this.tiles[_t191];\n            \"loaded\" !== _e196.state && (_e196.state = \"loaded\", _e196.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"loadTile\",\n        value: function loadTile(t, e) {\n          this.tileID && this.tileID.equals(t.tileID.canonical) ? (this.tiles[String(t.tileID.wrap)] = t, t.buckets = {}, e(null)) : (t.state = \"errored\", e(null));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"image\",\n            url: this.options.url,\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return !1;\n        }\n      }]);\n\n      return M;\n    }(t.Evented);\n\n    var L = /*#__PURE__*/function (_M2) {\n      _inherits(L, _M2);\n\n      function L(t, e, i, o) {\n        var _this50;\n\n        _classCallCheck(this, L);\n\n        _this50 = _possibleConstructorReturn(this, _getPrototypeOf(L).call(this, t, e, i, o)), _this50.roundZoom = !0, _this50.type = \"video\", _this50.options = e;\n        return _this50;\n      }\n\n      _createClass(L, [{\n        key: \"load\",\n        value: function load() {\n          var _this51 = this;\n\n          this._loaded = !1;\n          var e = this.options;\n          this.urls = [];\n\n          var _iterator147 = _createForOfIteratorHelper(e.urls),\n              _step147;\n\n          try {\n            for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {\n              var _i134 = _step147.value;\n              this.urls.push(this.map._requestManager.transformRequest(_i134, t.ResourceType.Source).url);\n            }\n          } catch (err) {\n            _iterator147.e(err);\n          } finally {\n            _iterator147.f();\n          }\n\n          t.getVideo(this.urls, function (e, i) {\n            _this51._loaded = !0, e ? _this51.fire(new t.ErrorEvent(e)) : i && (_this51.video = i, _this51.video.loop = !0, _this51.video.addEventListener(\"playing\", function () {\n              _this51.map.triggerRepaint();\n            }), _this51.map && _this51.video.play(), _this51._finishLoading());\n          });\n        }\n      }, {\n        key: \"pause\",\n        value: function pause() {\n          this.video && this.video.pause();\n        }\n      }, {\n        key: \"play\",\n        value: function play() {\n          this.video && this.video.play();\n        }\n      }, {\n        key: \"seek\",\n        value: function seek(e) {\n          if (this.video) {\n            var _i135 = this.video.seekable;\n            e < _i135.start(0) || e > _i135.end(0) ? this.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(this.id), null, \"Playback for this video can be set only between the \".concat(_i135.start(0), \" and \").concat(_i135.end(0), \"-second mark.\")))) : this.video.currentTime = e;\n          }\n        }\n      }, {\n        key: \"getVideo\",\n        value: function getVideo() {\n          return this.video;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map || (this.map = t, this.load(), this.video && (this.video.play(), this.setCoordinates(this.coordinates)));\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          if (0 === Object.keys(this.tiles).length || this.video.readyState < 2) return;\n          var e = this.map.painter.context,\n              i = e.gl;\n          this.boundsBuffer || (this.boundsBuffer = e.createVertexBuffer(this._boundsArray, A.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? this.video.paused || (this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE), i.texSubImage2D(i.TEXTURE_2D, 0, 0, 0, i.RGBA, i.UNSIGNED_BYTE, this.video)) : (this.texture = new d(e, this.video, i.RGBA), this.texture.bind(i.LINEAR, i.CLAMP_TO_EDGE));\n\n          for (var _t192 in this.tiles) {\n            var _e197 = this.tiles[_t192];\n            \"loaded\" !== _e197.state && (_e197.state = \"loaded\", _e197.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"video\",\n            urls: this.urls,\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this.video && !this.video.paused;\n        }\n      }]);\n\n      return L;\n    }(M);\n\n    var R = /*#__PURE__*/function (_M3) {\n      _inherits(R, _M3);\n\n      function R(e, i, o, a) {\n        var _this52;\n\n        _classCallCheck(this, R);\n\n        _this52 = _possibleConstructorReturn(this, _getPrototypeOf(R).call(this, e, i, o, a)), i.coordinates ? Array.isArray(i.coordinates) && 4 === i.coordinates.length && !i.coordinates.some(function (t) {\n          return !Array.isArray(t) || 2 !== t.length || t.some(function (t) {\n            return \"number\" != typeof t;\n          });\n        }) || _this52.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, '\"coordinates\" property must be an array of 4 longitude/latitude array pairs'))) : _this52.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, 'missing required property \"coordinates\"'))), i.animate && \"boolean\" != typeof i.animate && _this52.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, 'optional \"animate\" property must be a boolean value'))), i.canvas ? \"string\" == typeof i.canvas || i.canvas instanceof HTMLCanvasElement || _this52.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, '\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))) : _this52.fire(new t.ErrorEvent(new t.ValidationError(\"sources.\".concat(e), null, 'missing required property \"canvas\"'))), _this52.options = i, _this52.animate = void 0 === i.animate || i.animate;\n        return _this52;\n      }\n\n      _createClass(R, [{\n        key: \"load\",\n        value: function load() {\n          this._loaded = !0, this.canvas || (this.canvas = this.options.canvas instanceof HTMLCanvasElement ? this.options.canvas : document.getElementById(this.options.canvas)), this.width = this.canvas.width, this.height = this.canvas.height, this._hasInvalidDimensions() ? this.fire(new t.ErrorEvent(new Error(\"Canvas dimensions cannot be less than or equal to zero.\"))) : (this.play = function () {\n            this._playing = !0, this.map.triggerRepaint();\n          }, this.pause = function () {\n            this._playing && (this.prepare(), this._playing = !1);\n          }, this._finishLoading());\n        }\n      }, {\n        key: \"getCanvas\",\n        value: function getCanvas() {\n          return this.canvas;\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this.load(), this.canvas && this.animate && this.play();\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          this.pause();\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare() {\n          var e = !1;\n          if (this.canvas.width !== this.width && (this.width = this.canvas.width, e = !0), this.canvas.height !== this.height && (this.height = this.canvas.height, e = !0), this._hasInvalidDimensions()) return;\n          if (0 === Object.keys(this.tiles).length) return;\n          var i = this.map.painter.context,\n              o = i.gl;\n          this.boundsBuffer || (this.boundsBuffer = i.createVertexBuffer(this._boundsArray, A.members)), this.boundsSegments || (this.boundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2)), this.texture ? (e || this._playing) && this.texture.update(this.canvas, {\n            premultiply: !0\n          }) : this.texture = new d(i, this.canvas, o.RGBA, {\n            premultiply: !0\n          });\n\n          for (var _t193 in this.tiles) {\n            var _e198 = this.tiles[_t193];\n            \"loaded\" !== _e198.state && (_e198.state = \"loaded\", _e198.texture = this.texture);\n          }\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return {\n            type: \"canvas\",\n            coordinates: this.coordinates\n          };\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          return this._playing;\n        }\n      }, {\n        key: \"_hasInvalidDimensions\",\n        value: function _hasInvalidDimensions() {\n          for (var _i136 = 0, _arr = [this.canvas.width, this.canvas.height]; _i136 < _arr.length; _i136++) {\n            var _t194 = _arr[_i136];\n            if (isNaN(_t194) || _t194 <= 0) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return R;\n    }(M);\n\n    var k = {\n      vector: S,\n      raster: C,\n      \"raster-dem\": z,\n      geojson: D,\n      video: L,\n      image: M,\n      canvas: R\n    };\n\n    function B(e, i) {\n      var o = t.create();\n      return t.translate(o, o, [1, 1, 0]), t.scale(o, o, [.5 * e.width, .5 * e.height, 1]), t.multiply(o, o, e.calculatePosMatrix(i.toUnwrapped()));\n    }\n\n    function F(t, e, i, o, a, s) {\n      var r = function (t, e, i) {\n        if (t) {\n          var _iterator148 = _createForOfIteratorHelper(t),\n              _step148;\n\n          try {\n            for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {\n              var _o60 = _step148.value;\n              var _t195 = e[_o60];\n              if (_t195 && _t195.source === i && \"fill-extrusion\" === _t195.type) return !0;\n            }\n          } catch (err) {\n            _iterator148.e(err);\n          } finally {\n            _iterator148.f();\n          }\n        } else for (var _t196 in e) {\n          var _o61 = e[_t196];\n          if (_o61.source === i && \"fill-extrusion\" === _o61.type) return !0;\n        }\n\n        return !1;\n      }(a && a.layers, e, t.id),\n          n = s.maxPitchScaleFactor(),\n          l = t.tilesIn(o, n, r);\n\n      l.sort(O);\n      var c = [];\n\n      var _iterator149 = _createForOfIteratorHelper(l),\n          _step149;\n\n      try {\n        for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {\n          var _o64 = _step149.value;\n          c.push({\n            wrappedTileID: _o64.tileID.wrapped().key,\n            queryResults: _o64.tile.queryRenderedFeatures(e, i, t._state, _o64.queryGeometry, _o64.cameraQueryGeometry, _o64.scale, a, s, n, B(t.transform, _o64.tileID))\n          });\n        }\n      } catch (err) {\n        _iterator149.e(err);\n      } finally {\n        _iterator149.f();\n      }\n\n      var h = function (t) {\n        var e = {},\n            i = {};\n\n        var _iterator150 = _createForOfIteratorHelper(t),\n            _step150;\n\n        try {\n          for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {\n            var _o62 = _step150.value;\n\n            var _t197 = _o62.queryResults,\n                _a77 = _o62.wrappedTileID,\n                _s89 = i[_a77] = i[_a77] || {};\n\n            for (var _i137 in _t197) {\n              var _o63 = _t197[_i137],\n                  _a78 = _s89[_i137] = _s89[_i137] || {},\n                  _r167 = e[_i137] = e[_i137] || [];\n\n              var _iterator151 = _createForOfIteratorHelper(_o63),\n                  _step151;\n\n              try {\n                for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {\n                  var _t198 = _step151.value;\n                  _a78[_t198.featureIndex] || (_a78[_t198.featureIndex] = !0, _r167.push(_t198));\n                }\n              } catch (err) {\n                _iterator151.e(err);\n              } finally {\n                _iterator151.f();\n              }\n            }\n          }\n        } catch (err) {\n          _iterator150.e(err);\n        } finally {\n          _iterator150.f();\n        }\n\n        return e;\n      }(c);\n\n      for (var _e199 in h) {\n        h[_e199].forEach(function (e) {\n          var i = e.feature,\n              o = t.getFeatureState(i.layer[\"source-layer\"], i.id);\n          i.source = i.layer.source, i.layer[\"source-layer\"] && (i.sourceLayer = i.layer[\"source-layer\"]), i.state = o;\n        });\n      }\n\n      return h;\n    }\n\n    function O(t, e) {\n      var i = t.tileID,\n          o = e.tileID;\n      return i.overscaledZ - o.overscaledZ || i.canonical.y - o.canonical.y || i.wrap - o.wrap || i.canonical.x - o.canonical.x;\n    }\n\n    var U = /*#__PURE__*/function () {\n      function U(e, i) {\n        _classCallCheck(this, U);\n\n        this.tileID = e, this.uid = t.uniqueId(), this.uses = 0, this.tileSize = i, this.buckets = {}, this.expirationTime = null, this.queryPadding = 0, this.hasSymbolBuckets = !1, this.hasRTLText = !1, this.dependencies = {}, this.expiredRequestCount = 0, this.state = \"loading\";\n      }\n\n      _createClass(U, [{\n        key: \"registerFadeDuration\",\n        value: function registerFadeDuration(e) {\n          var i = e + this.timeAdded;\n          i < t.exported.now() || this.fadeEndTime && i < this.fadeEndTime || (this.fadeEndTime = i);\n        }\n      }, {\n        key: \"wasRequested\",\n        value: function wasRequested() {\n          return \"errored\" === this.state || \"loaded\" === this.state || \"reloading\" === this.state;\n        }\n      }, {\n        key: \"loadVectorData\",\n        value: function loadVectorData(e, i, o) {\n          if (this.hasData() && this.unloadVectorData(), this.state = \"loaded\", e) {\n            e.featureIndex && (this.latestFeatureIndex = e.featureIndex, e.rawTileData ? (this.latestRawTileData = e.rawTileData, this.latestFeatureIndex.rawTileData = e.rawTileData) : this.latestRawTileData && (this.latestFeatureIndex.rawTileData = this.latestRawTileData)), this.collisionBoxArray = e.collisionBoxArray, this.buckets = function (t, e) {\n              var i = {};\n              if (!e) return i;\n\n              var _iterator152 = _createForOfIteratorHelper(t),\n                  _step152;\n\n              try {\n                var _loop3 = function _loop3() {\n                  var o = _step152.value;\n                  var t = o.layerIds.map(function (t) {\n                    return e.getLayer(t);\n                  }).filter(Boolean);\n\n                  if (0 !== t.length) {\n                    o.layers = t, o.stateDependentLayerIds && (o.stateDependentLayers = o.stateDependentLayerIds.map(function (e) {\n                      return t.filter(function (t) {\n                        return t.id === e;\n                      })[0];\n                    }));\n\n                    var _iterator153 = _createForOfIteratorHelper(t),\n                        _step153;\n\n                    try {\n                      for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {\n                        var _e200 = _step153.value;\n                        i[_e200.id] = o;\n                      }\n                    } catch (err) {\n                      _iterator153.e(err);\n                    } finally {\n                      _iterator153.f();\n                    }\n                  }\n                };\n\n                for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {\n                  _loop3();\n                }\n              } catch (err) {\n                _iterator152.e(err);\n              } finally {\n                _iterator152.f();\n              }\n\n              return i;\n            }(e.buckets, i.style), this.hasSymbolBuckets = !1;\n\n            for (var _e201 in this.buckets) {\n              var _i138 = this.buckets[_e201];\n\n              if (_i138 instanceof t.SymbolBucket) {\n                if (this.hasSymbolBuckets = !0, !o) break;\n                _i138.justReloaded = !0;\n              }\n            }\n\n            if (this.hasRTLText = !1, this.hasSymbolBuckets) for (var _e202 in this.buckets) {\n              var _i139 = this.buckets[_e202];\n\n              if (_i139 instanceof t.SymbolBucket && _i139.hasRTLText) {\n                this.hasRTLText = !0, t.lazyLoadRTLTextPlugin();\n                break;\n              }\n            }\n            this.queryPadding = 0;\n\n            for (var _t199 in this.buckets) {\n              var _e203 = this.buckets[_t199];\n              this.queryPadding = Math.max(this.queryPadding, i.style.getLayer(_t199).queryRadius(_e203));\n            }\n\n            e.imageAtlas && (this.imageAtlas = e.imageAtlas), e.glyphAtlasImage && (this.glyphAtlasImage = e.glyphAtlasImage);\n          } else this.collisionBoxArray = new t.CollisionBoxArray();\n        }\n      }, {\n        key: \"unloadVectorData\",\n        value: function unloadVectorData() {\n          for (var _t200 in this.buckets) {\n            this.buckets[_t200].destroy();\n          }\n\n          this.buckets = {}, this.imageAtlasTexture && this.imageAtlasTexture.destroy(), this.imageAtlas && (this.imageAtlas = null), this.glyphAtlasTexture && this.glyphAtlasTexture.destroy(), this.latestFeatureIndex = null, this.state = \"unloaded\";\n        }\n      }, {\n        key: \"getBucket\",\n        value: function getBucket(t) {\n          return this.buckets[t.id];\n        }\n      }, {\n        key: \"upload\",\n        value: function upload(t) {\n          for (var _e204 in this.buckets) {\n            var _i140 = this.buckets[_e204];\n            _i140.uploadPending() && _i140.upload(t);\n          }\n\n          var e = t.gl;\n          this.imageAtlas && !this.imageAtlas.uploaded && (this.imageAtlasTexture = new d(t, this.imageAtlas.image, e.RGBA), this.imageAtlas.uploaded = !0), this.glyphAtlasImage && (this.glyphAtlasTexture = new d(t, this.glyphAtlasImage, e.ALPHA), this.glyphAtlasImage = null);\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare(t) {\n          this.imageAtlas && this.imageAtlas.patchUpdatedImages(t, this.imageAtlasTexture);\n        }\n      }, {\n        key: \"queryRenderedFeatures\",\n        value: function queryRenderedFeatures(t, e, i, o, a, s, r, n, l, c) {\n          return this.latestFeatureIndex && this.latestFeatureIndex.rawTileData ? this.latestFeatureIndex.query({\n            queryGeometry: o,\n            cameraQueryGeometry: a,\n            scale: s,\n            tileSize: this.tileSize,\n            pixelPosMatrix: c,\n            transform: n,\n            params: r,\n            queryPadding: this.queryPadding * l\n          }, t, e, i) : {};\n        }\n      }, {\n        key: \"querySourceFeatures\",\n        value: function querySourceFeatures(e, i) {\n          var o = this.latestFeatureIndex;\n          if (!o || !o.rawTileData) return;\n          var a = o.loadVTLayers(),\n              s = i ? i.sourceLayer : \"\",\n              r = a._geojsonTileLayer || a[s];\n          if (!r) return;\n          var n = t.createFilter(i && i.filter),\n              _this$tileID$canonica = this.tileID.canonical,\n              l = _this$tileID$canonica.z,\n              c = _this$tileID$canonica.x,\n              h = _this$tileID$canonica.y,\n              u = {\n            z: l,\n            x: c,\n            y: h\n          };\n\n          for (var _i141 = 0; _i141 < r.length; _i141++) {\n            var _a79 = r.feature(_i141);\n\n            if (n.needGeometry) {\n              var _e205 = t.toEvaluationFeature(_a79, !0);\n\n              if (!n.filter(new t.EvaluationParameters(this.tileID.overscaledZ), _e205, this.tileID.canonical)) continue;\n            } else if (!n.filter(new t.EvaluationParameters(this.tileID.overscaledZ), _a79)) continue;\n\n            var _d10 = o.getId(_a79, s),\n                _m11 = new t.GeoJSONFeature(_a79, l, c, h, _d10);\n\n            _m11.tile = u, e.push(_m11);\n          }\n        }\n      }, {\n        key: \"hasData\",\n        value: function hasData() {\n          return \"loaded\" === this.state || \"reloading\" === this.state || \"expired\" === this.state;\n        }\n      }, {\n        key: \"patternsLoaded\",\n        value: function patternsLoaded() {\n          return this.imageAtlas && !!Object.keys(this.imageAtlas.patternPositions).length;\n        }\n      }, {\n        key: \"setExpiryData\",\n        value: function setExpiryData(e) {\n          var i = this.expirationTime;\n\n          if (e.cacheControl) {\n            var _i142 = t.parseCacheControl(e.cacheControl);\n\n            _i142[\"max-age\"] && (this.expirationTime = Date.now() + 1e3 * _i142[\"max-age\"]);\n          } else e.expires && (this.expirationTime = new Date(e.expires).getTime());\n\n          if (this.expirationTime) {\n            var _t201 = Date.now();\n\n            var _e206 = !1;\n\n            if (this.expirationTime > _t201) _e206 = !1;else if (i) {\n              if (this.expirationTime < i) _e206 = !0;else {\n                var _o65 = this.expirationTime - i;\n\n                _o65 ? this.expirationTime = _t201 + Math.max(_o65, 3e4) : _e206 = !0;\n              }\n            } else _e206 = !0;\n            _e206 ? (this.expiredRequestCount++, this.state = \"expired\") : this.expiredRequestCount = 0;\n          }\n        }\n      }, {\n        key: \"getExpiryTimeout\",\n        value: function getExpiryTimeout() {\n          if (this.expirationTime) return this.expiredRequestCount ? 1e3 * (1 << Math.min(this.expiredRequestCount - 1, 31)) : Math.min(this.expirationTime - new Date().getTime(), Math.pow(2, 31) - 1);\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, e) {\n          if (!this.latestFeatureIndex || !this.latestFeatureIndex.rawTileData || 0 === Object.keys(t).length) return;\n          var i = this.latestFeatureIndex.loadVTLayers();\n\n          for (var _o66 in this.buckets) {\n            if (!e.style.hasLayer(_o66)) continue;\n\n            var _a80 = this.buckets[_o66],\n                _s90 = _a80.layers[0].sourceLayer || \"_geojsonTileLayer\",\n                _r168 = i[_s90],\n                _n118 = t[_s90];\n\n            if (!_r168 || !_n118 || 0 === Object.keys(_n118).length) continue;\n\n            _a80.update(_n118, _r168, this.imageAtlas && this.imageAtlas.patternPositions || {});\n\n            var _l40 = e && e.style && e.style.getLayer(_o66);\n\n            _l40 && (this.queryPadding = Math.max(this.queryPadding, _l40.queryRadius(_a80)));\n          }\n        }\n      }, {\n        key: \"holdingForFade\",\n        value: function holdingForFade() {\n          return void 0 !== this.symbolFadeHoldUntil;\n        }\n      }, {\n        key: \"symbolFadeFinished\",\n        value: function symbolFadeFinished() {\n          return !this.symbolFadeHoldUntil || this.symbolFadeHoldUntil < t.exported.now();\n        }\n      }, {\n        key: \"clearFadeHold\",\n        value: function clearFadeHold() {\n          this.symbolFadeHoldUntil = void 0;\n        }\n      }, {\n        key: \"setHoldDuration\",\n        value: function setHoldDuration(e) {\n          this.symbolFadeHoldUntil = t.exported.now() + e;\n        }\n      }, {\n        key: \"setDependencies\",\n        value: function setDependencies(t, e) {\n          var i = {};\n\n          var _iterator154 = _createForOfIteratorHelper(e),\n              _step154;\n\n          try {\n            for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {\n              var _t202 = _step154.value;\n              i[_t202] = !0;\n            }\n          } catch (err) {\n            _iterator154.e(err);\n          } finally {\n            _iterator154.f();\n          }\n\n          this.dependencies[t] = i;\n        }\n      }, {\n        key: \"hasDependency\",\n        value: function hasDependency(t, e) {\n          var _iterator155 = _createForOfIteratorHelper(t),\n              _step155;\n\n          try {\n            for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {\n              var _i143 = _step155.value;\n              var _t203 = this.dependencies[_i143];\n\n              if (_t203) {\n                var _iterator156 = _createForOfIteratorHelper(e),\n                    _step156;\n\n                try {\n                  for (_iterator156.s(); !(_step156 = _iterator156.n()).done;) {\n                    var _i144 = _step156.value;\n                    if (_t203[_i144]) return !0;\n                  }\n                } catch (err) {\n                  _iterator156.e(err);\n                } finally {\n                  _iterator156.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator155.e(err);\n          } finally {\n            _iterator155.f();\n          }\n\n          return !1;\n        }\n      }]);\n\n      return U;\n    }();\n\n    var N = /*#__PURE__*/function () {\n      function N(t, e) {\n        _classCallCheck(this, N);\n\n        this.max = t, this.onRemove = e, this.reset();\n      }\n\n      _createClass(N, [{\n        key: \"reset\",\n        value: function reset() {\n          for (var _t204 in this.data) {\n            var _iterator157 = _createForOfIteratorHelper(this.data[_t204]),\n                _step157;\n\n            try {\n              for (_iterator157.s(); !(_step157 = _iterator157.n()).done;) {\n                var _e207 = _step157.value;\n                _e207.timeout && clearTimeout(_e207.timeout), this.onRemove(_e207.value);\n              }\n            } catch (err) {\n              _iterator157.e(err);\n            } finally {\n              _iterator157.f();\n            }\n          }\n\n          return this.data = {}, this.order = [], this;\n        }\n      }, {\n        key: \"add\",\n        value: function add(t, e, i) {\n          var _this53 = this;\n\n          var o = t.wrapped().key;\n          void 0 === this.data[o] && (this.data[o] = []);\n          var a = {\n            value: e,\n            timeout: void 0\n          };\n\n          if (void 0 !== i && (a.timeout = setTimeout(function () {\n            _this53.remove(t, a);\n          }, i)), this.data[o].push(a), this.order.push(o), this.order.length > this.max) {\n            var _t205 = this._getAndRemoveByKey(this.order[0]);\n\n            _t205 && this.onRemove(_t205);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"has\",\n        value: function has(t) {\n          return t.wrapped().key in this.data;\n        }\n      }, {\n        key: \"getAndRemove\",\n        value: function getAndRemove(t) {\n          return this.has(t) ? this._getAndRemoveByKey(t.wrapped().key) : null;\n        }\n      }, {\n        key: \"_getAndRemoveByKey\",\n        value: function _getAndRemoveByKey(t) {\n          var e = this.data[t].shift();\n          return e.timeout && clearTimeout(e.timeout), 0 === this.data[t].length && delete this.data[t], this.order.splice(this.order.indexOf(t), 1), e.value;\n        }\n      }, {\n        key: \"getByKey\",\n        value: function getByKey(t) {\n          var e = this.data[t];\n          return e ? e[0].value : null;\n        }\n      }, {\n        key: \"get\",\n        value: function get(t) {\n          return this.has(t) ? this.data[t.wrapped().key][0].value : null;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t, e) {\n          if (!this.has(t)) return this;\n          var i = t.wrapped().key,\n              o = void 0 === e ? 0 : this.data[i].indexOf(e),\n              a = this.data[i][o];\n          return this.data[i].splice(o, 1), a.timeout && clearTimeout(a.timeout), 0 === this.data[i].length && delete this.data[i], this.onRemove(a.value), this.order.splice(this.order.indexOf(i), 1), this;\n        }\n      }, {\n        key: \"setMaxSize\",\n        value: function setMaxSize(t) {\n          for (this.max = t; this.order.length > this.max;) {\n            var _t206 = this._getAndRemoveByKey(this.order[0]);\n\n            _t206 && this.onRemove(_t206);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"filter\",\n        value: function filter(t) {\n          var e = [];\n\n          for (var _i145 in this.data) {\n            var _iterator158 = _createForOfIteratorHelper(this.data[_i145]),\n                _step158;\n\n            try {\n              for (_iterator158.s(); !(_step158 = _iterator158.n()).done;) {\n                var _o67 = _step158.value;\n                t(_o67.value) || e.push(_o67);\n              }\n            } catch (err) {\n              _iterator158.e(err);\n            } finally {\n              _iterator158.f();\n            }\n          }\n\n          for (var _i146 = 0, _e208 = e; _i146 < _e208.length; _i146++) {\n            var _t207 = _e208[_i146];\n            this.remove(_t207.value.tileID, _t207);\n          }\n        }\n      }]);\n\n      return N;\n    }();\n\n    var G = /*#__PURE__*/function () {\n      function G() {\n        _classCallCheck(this, G);\n\n        this.state = {}, this.stateChanges = {}, this.deletedStates = {};\n      }\n\n      _createClass(G, [{\n        key: \"updateState\",\n        value: function updateState(e, i, o) {\n          var a = String(i);\n\n          if (this.stateChanges[e] = this.stateChanges[e] || {}, this.stateChanges[e][a] = this.stateChanges[e][a] || {}, t.extend(this.stateChanges[e][a], o), null === this.deletedStates[e]) {\n            this.deletedStates[e] = {};\n\n            for (var _t208 in this.state[e]) {\n              _t208 !== a && (this.deletedStates[e][_t208] = null);\n            }\n          } else if (this.deletedStates[e] && null === this.deletedStates[e][a]) {\n            this.deletedStates[e][a] = {};\n\n            for (var _t209 in this.state[e][a]) {\n              o[_t209] || (this.deletedStates[e][a][_t209] = null);\n            }\n          } else for (var _t210 in o) {\n            this.deletedStates[e] && this.deletedStates[e][a] && null === this.deletedStates[e][a][_t210] && delete this.deletedStates[e][a][_t210];\n          }\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, e, i) {\n          if (null === this.deletedStates[t]) return;\n          var o = String(e);\n          if (this.deletedStates[t] = this.deletedStates[t] || {}, i && void 0 !== e) null !== this.deletedStates[t][o] && (this.deletedStates[t][o] = this.deletedStates[t][o] || {}, this.deletedStates[t][o][i] = null);else if (void 0 !== e) {\n            if (this.stateChanges[t] && this.stateChanges[t][o]) for (i in this.deletedStates[t][o] = {}, this.stateChanges[t][o]) {\n              this.deletedStates[t][o][i] = null;\n            } else this.deletedStates[t][o] = null;\n          } else this.deletedStates[t] = null;\n        }\n      }, {\n        key: \"getState\",\n        value: function getState(e, i) {\n          var o = String(i),\n              a = t.extend({}, (this.state[e] || {})[o], (this.stateChanges[e] || {})[o]);\n          if (null === this.deletedStates[e]) return {};\n\n          if (this.deletedStates[e]) {\n            var _t211 = this.deletedStates[e][i];\n            if (null === _t211) return {};\n\n            for (var _e209 in _t211) {\n              delete a[_e209];\n            }\n          }\n\n          return a;\n        }\n      }, {\n        key: \"initializeTileState\",\n        value: function initializeTileState(t, e) {\n          t.setFeatureState(this.state, e);\n        }\n      }, {\n        key: \"coalesceChanges\",\n        value: function coalesceChanges(e, i) {\n          var o = {};\n\n          for (var _e210 in this.stateChanges) {\n            this.state[_e210] = this.state[_e210] || {};\n            var _i147 = {};\n\n            for (var _o68 in this.stateChanges[_e210]) {\n              this.state[_e210][_o68] || (this.state[_e210][_o68] = {}), t.extend(this.state[_e210][_o68], this.stateChanges[_e210][_o68]), _i147[_o68] = this.state[_e210][_o68];\n            }\n\n            o[_e210] = _i147;\n          }\n\n          for (var _e211 in this.deletedStates) {\n            this.state[_e211] = this.state[_e211] || {};\n            var _i148 = {};\n            if (null === this.deletedStates[_e211]) for (var _t212 in this.state[_e211]) {\n              _i148[_t212] = {}, this.state[_e211][_t212] = {};\n            } else for (var _t213 in this.deletedStates[_e211]) {\n              if (null === this.deletedStates[_e211][_t213]) this.state[_e211][_t213] = {};else for (var _i149 = 0, _Object$keys9 = Object.keys(this.deletedStates[_e211][_t213]); _i149 < _Object$keys9.length; _i149++) {\n                var _i150 = _Object$keys9[_i149];\n                delete this.state[_e211][_t213][_i150];\n              }\n              _i148[_t213] = this.state[_e211][_t213];\n            }\n            o[_e211] = o[_e211] || {}, t.extend(o[_e211], _i148);\n          }\n\n          if (this.stateChanges = {}, this.deletedStates = {}, 0 !== Object.keys(o).length) for (var _t214 in e) {\n            e[_t214].setFeatureState(o, i);\n          }\n        }\n      }]);\n\n      return G;\n    }();\n\n    var Z = /*#__PURE__*/function (_t$Evented7) {\n      _inherits(Z, _t$Evented7);\n\n      function Z(e, i, o) {\n        var _this54;\n\n        _classCallCheck(this, Z);\n\n        _this54 = _possibleConstructorReturn(this, _getPrototypeOf(Z).call(this)), _this54.id = e, _this54.dispatcher = o, _this54.on(\"data\", function (t) {\n          \"source\" === t.dataType && \"metadata\" === t.sourceDataType && (_this54._sourceLoaded = !0), _this54._sourceLoaded && !_this54._paused && \"source\" === t.dataType && \"content\" === t.sourceDataType && (_this54.reload(), _this54.transform && _this54.update(_this54.transform));\n        }), _this54.on(\"dataloading\", function () {\n          _this54._sourceErrored = !1;\n        }), _this54.on(\"error\", function () {\n          _this54._sourceErrored = _this54._source.loaded();\n        }), _this54._source = function (e, i, o, a) {\n          var s = new k[i.type](e, i, o, a);\n          if (s.id !== e) throw new Error(\"Expected Source id to be \".concat(e, \" instead of \").concat(s.id));\n          return t.bindAll([\"load\", \"abort\", \"unload\", \"serialize\", \"prepare\"], s), s;\n        }(e, i, o, _assertThisInitialized(_assertThisInitialized(_this54))), _this54._tiles = {}, _this54._cache = new N(0, _this54._unloadTile.bind(_assertThisInitialized(_assertThisInitialized(_this54)))), _this54._timers = {}, _this54._cacheTimers = {}, _this54._maxTileCacheSize = null, _this54._loadedParentTiles = {}, _this54._coveredTiles = {}, _this54._state = new G();\n        return _this54;\n      }\n\n      _createClass(Z, [{\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this.map = t, this._maxTileCacheSize = t ? t._maxTileCacheSize : null, this._source && this._source.onAdd && this._source.onAdd(t);\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove(t) {\n          this.clearTiles(), this._source && this._source.onRemove && this._source.onRemove(t);\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          if (this._sourceErrored) return !0;\n          if (!this._sourceLoaded) return !1;\n          if (!this._source.loaded()) return !1;\n\n          for (var _t215 in this._tiles) {\n            var _e212 = this._tiles[_t215];\n            if (\"loaded\" !== _e212.state && \"errored\" !== _e212.state) return !1;\n          }\n\n          return !0;\n        }\n      }, {\n        key: \"getSource\",\n        value: function getSource() {\n          return this._source;\n        }\n      }, {\n        key: \"pause\",\n        value: function pause() {\n          this._paused = !0;\n        }\n      }, {\n        key: \"resume\",\n        value: function resume() {\n          if (!this._paused) return;\n          var t = this._shouldReloadOnResume;\n          this._paused = !1, this._shouldReloadOnResume = !1, t && this.reload(), this.transform && this.update(this.transform);\n        }\n      }, {\n        key: \"_loadTile\",\n        value: function _loadTile(t, e) {\n          return this._source.loadTile(t, e);\n        }\n      }, {\n        key: \"_unloadTile\",\n        value: function _unloadTile(t) {\n          if (this._source.unloadTile) return this._source.unloadTile(t, function () {});\n        }\n      }, {\n        key: \"_abortTile\",\n        value: function _abortTile(e) {\n          this._source.abortTile && this._source.abortTile(e, function () {}), this._source.fire(new t.Event(\"dataabort\", {\n            tile: e,\n            coord: e.tileID,\n            dataType: \"source\"\n          }));\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return this._source.serialize();\n        }\n      }, {\n        key: \"prepare\",\n        value: function prepare(t) {\n          this._source.prepare && this._source.prepare(), this._state.coalesceChanges(this._tiles, this.map ? this.map.painter : null);\n\n          for (var _e213 in this._tiles) {\n            var _i151 = this._tiles[_e213];\n            _i151.upload(t), _i151.prepare(this.map.style.imageManager);\n          }\n        }\n      }, {\n        key: \"getIds\",\n        value: function getIds() {\n          return Object.values(this._tiles).map(function (t) {\n            return t.tileID;\n          }).sort(q).map(function (t) {\n            return t.key;\n          });\n        }\n      }, {\n        key: \"getRenderableIds\",\n        value: function getRenderableIds(e) {\n          var _this55 = this;\n\n          var i = [];\n\n          for (var _t216 in this._tiles) {\n            this._isIdRenderable(_t216, e) && i.push(this._tiles[_t216]);\n          }\n\n          return e ? i.sort(function (e, i) {\n            var o = e.tileID,\n                a = i.tileID,\n                s = new t.pointGeometry(o.canonical.x, o.canonical.y)._rotate(_this55.transform.angle),\n                r = new t.pointGeometry(a.canonical.x, a.canonical.y)._rotate(_this55.transform.angle);\n\n            return o.overscaledZ - a.overscaledZ || r.y - s.y || r.x - s.x;\n          }).map(function (t) {\n            return t.tileID.key;\n          }) : i.map(function (t) {\n            return t.tileID;\n          }).sort(q).map(function (t) {\n            return t.key;\n          });\n        }\n      }, {\n        key: \"hasRenderableParent\",\n        value: function hasRenderableParent(t) {\n          var e = this.findLoadedParent(t, 0);\n          return !!e && this._isIdRenderable(e.tileID.key);\n        }\n      }, {\n        key: \"_isIdRenderable\",\n        value: function _isIdRenderable(t, e) {\n          return this._tiles[t] && this._tiles[t].hasData() && !this._coveredTiles[t] && (e || !this._tiles[t].holdingForFade());\n        }\n      }, {\n        key: \"reload\",\n        value: function reload() {\n          if (this._paused) this._shouldReloadOnResume = !0;else {\n            this._cache.reset();\n\n            for (var _t217 in this._tiles) {\n              \"errored\" !== this._tiles[_t217].state && this._reloadTile(_t217, \"reloading\");\n            }\n          }\n        }\n      }, {\n        key: \"_reloadTile\",\n        value: function _reloadTile(t, e) {\n          var i = this._tiles[t];\n          i && (\"loading\" !== i.state && (i.state = e), this._loadTile(i, this._tileLoaded.bind(this, i, t, e)));\n        }\n      }, {\n        key: \"_tileLoaded\",\n        value: function _tileLoaded(e, i, o, a) {\n          if (a) return e.state = \"errored\", void (404 !== a.status ? this._source.fire(new t.ErrorEvent(a, {\n            tile: e\n          })) : this.update(this.transform));\n          e.timeAdded = t.exported.now(), \"expired\" === o && (e.refreshedUponExpiration = !0), this._setTileReloadTimer(i, e), \"raster-dem\" === this.getSource().type && e.dem && this._backfillDEM(e), this._state.initializeTileState(e, this.map ? this.map.painter : null), e.aborted || this._source.fire(new t.Event(\"data\", {\n            dataType: \"source\",\n            tile: e,\n            coord: e.tileID\n          }));\n        }\n      }, {\n        key: \"_backfillDEM\",\n        value: function _backfillDEM(t) {\n          var e = this.getRenderableIds();\n\n          for (var _o69 = 0; _o69 < e.length; _o69++) {\n            var _a81 = e[_o69];\n\n            if (t.neighboringTiles && t.neighboringTiles[_a81]) {\n              var _e214 = this.getTileByID(_a81);\n\n              i(t, _e214), i(_e214, t);\n            }\n          }\n\n          function i(t, e) {\n            t.needsHillshadePrepare = !0;\n            var i = e.tileID.canonical.x - t.tileID.canonical.x;\n            var o = e.tileID.canonical.y - t.tileID.canonical.y,\n                a = Math.pow(2, t.tileID.canonical.z),\n                s = e.tileID.key;\n            0 === i && 0 === o || Math.abs(o) > 1 || (Math.abs(i) > 1 && (1 === Math.abs(i + a) ? i += a : 1 === Math.abs(i - a) && (i -= a)), e.dem && t.dem && (t.dem.backfillBorder(e.dem, i, o), t.neighboringTiles && t.neighboringTiles[s] && (t.neighboringTiles[s].backfilled = !0)));\n          }\n        }\n      }, {\n        key: \"getTile\",\n        value: function getTile(t) {\n          return this.getTileByID(t.key);\n        }\n      }, {\n        key: \"getTileByID\",\n        value: function getTileByID(t) {\n          return this._tiles[t];\n        }\n      }, {\n        key: \"_retainLoadedChildren\",\n        value: function _retainLoadedChildren(t, e, i, o) {\n          for (var _a82 in this._tiles) {\n            var _s91 = this._tiles[_a82];\n            if (o[_a82] || !_s91.hasData() || _s91.tileID.overscaledZ <= e || _s91.tileID.overscaledZ > i) continue;\n            var _r169 = _s91.tileID;\n\n            for (; _s91 && _s91.tileID.overscaledZ > e + 1;) {\n              var _t218 = _s91.tileID.scaledTo(_s91.tileID.overscaledZ - 1);\n\n              _s91 = this._tiles[_t218.key], _s91 && _s91.hasData() && (_r169 = _t218);\n            }\n\n            var _n119 = _r169;\n\n            for (; _n119.overscaledZ > e;) {\n              if (_n119 = _n119.scaledTo(_n119.overscaledZ - 1), t[_n119.key]) {\n                o[_r169.key] = _r169;\n                break;\n              }\n            }\n          }\n        }\n      }, {\n        key: \"findLoadedParent\",\n        value: function findLoadedParent(t, e) {\n          if (t.key in this._loadedParentTiles) {\n            var _i152 = this._loadedParentTiles[t.key];\n            return _i152 && _i152.tileID.overscaledZ >= e ? _i152 : null;\n          }\n\n          for (var _i153 = t.overscaledZ - 1; _i153 >= e; _i153--) {\n            var _e215 = t.scaledTo(_i153),\n                _o70 = this._getLoadedTile(_e215);\n\n            if (_o70) return _o70;\n          }\n        }\n      }, {\n        key: \"_getLoadedTile\",\n        value: function _getLoadedTile(t) {\n          var e = this._tiles[t.key];\n          return e && e.hasData() ? e : this._cache.getByKey(t.wrapped().key);\n        }\n      }, {\n        key: \"updateCacheSize\",\n        value: function updateCacheSize(t) {\n          var e = Math.ceil(t.width / this._source.tileSize) + 1,\n              i = Math.ceil(t.height / this._source.tileSize) + 1,\n              o = Math.floor(e * i * 5),\n              a = \"number\" == typeof this._maxTileCacheSize ? Math.min(this._maxTileCacheSize, o) : o;\n\n          this._cache.setMaxSize(a);\n        }\n      }, {\n        key: \"handleWrapJump\",\n        value: function handleWrapJump(t) {\n          var e = Math.round((t - (void 0 === this._prevLng ? t : this._prevLng)) / 360);\n\n          if (this._prevLng = t, e) {\n            var _t219 = {};\n\n            for (var _i154 in this._tiles) {\n              var _o71 = this._tiles[_i154];\n              _o71.tileID = _o71.tileID.unwrapTo(_o71.tileID.wrap + e), _t219[_o71.tileID.key] = _o71;\n            }\n\n            this._tiles = _t219;\n\n            for (var _t220 in this._timers) {\n              clearTimeout(this._timers[_t220]), delete this._timers[_t220];\n            }\n\n            for (var _t221 in this._tiles) {\n              this._setTileReloadTimer(_t221, this._tiles[_t221]);\n            }\n          }\n        }\n      }, {\n        key: \"update\",\n        value: function update(e) {\n          var _this56 = this;\n\n          if (this.transform = e, !this._sourceLoaded || this._paused) return;\n          var i;\n          this.updateCacheSize(e), this.handleWrapJump(this.transform.center.lng), this._coveredTiles = {}, this.used ? this._source.tileID ? i = e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function (e) {\n            return new t.OverscaledTileID(e.canonical.z, e.wrap, e.canonical.z, e.canonical.x, e.canonical.y);\n          }) : (i = e.coveringTiles({\n            tileSize: this._source.tileSize,\n            minzoom: this._source.minzoom,\n            maxzoom: this._source.maxzoom,\n            roundZoom: this._source.roundZoom,\n            reparseOverscaled: this._source.reparseOverscaled\n          }), this._source.hasTile && (i = i.filter(function (t) {\n            return _this56._source.hasTile(t);\n          }))) : i = [];\n\n          var o = e.coveringZoomLevel(this._source),\n              a = Math.max(o - Z.maxOverzooming, this._source.minzoom),\n              s = Math.max(o + Z.maxUnderzooming, this._source.minzoom),\n              r = this._updateRetainedTiles(i, o);\n\n          if (V(this._source.type)) {\n            var _e216 = {},\n                _i155 = {},\n                _n120 = Object.keys(r);\n\n            for (var _i156 = 0, _n121 = _n120; _i156 < _n121.length; _i156++) {\n              var _o72 = _n121[_i156];\n              var _s92 = r[_o72],\n                  _n122 = this._tiles[_o72];\n              if (!_n122 || _n122.fadeEndTime && _n122.fadeEndTime <= t.exported.now()) continue;\n\n              var _l41 = this.findLoadedParent(_s92, a);\n\n              _l41 && (this._addTile(_l41.tileID), _e216[_l41.tileID.key] = _l41.tileID), _i155[_o72] = _s92;\n            }\n\n            this._retainLoadedChildren(_i155, o, s, r);\n\n            for (var _t222 in _e216) {\n              r[_t222] || (this._coveredTiles[_t222] = !0, r[_t222] = _e216[_t222]);\n            }\n          }\n\n          for (var _t223 in r) {\n            this._tiles[_t223].clearFadeHold();\n          }\n\n          var n = t.keysDifference(this._tiles, r);\n\n          var _iterator159 = _createForOfIteratorHelper(n),\n              _step159;\n\n          try {\n            for (_iterator159.s(); !(_step159 = _iterator159.n()).done;) {\n              var _t224 = _step159.value;\n              var _e217 = this._tiles[_t224];\n              _e217.hasSymbolBuckets && !_e217.holdingForFade() ? _e217.setHoldDuration(this.map._fadeDuration) : _e217.hasSymbolBuckets && !_e217.symbolFadeFinished() || this._removeTile(_t224);\n            }\n          } catch (err) {\n            _iterator159.e(err);\n          } finally {\n            _iterator159.f();\n          }\n\n          this._updateLoadedParentTileCache();\n        }\n      }, {\n        key: \"releaseSymbolFadeTiles\",\n        value: function releaseSymbolFadeTiles() {\n          for (var _t225 in this._tiles) {\n            this._tiles[_t225].holdingForFade() && this._removeTile(_t225);\n          }\n        }\n      }, {\n        key: \"_updateRetainedTiles\",\n        value: function _updateRetainedTiles(t, e) {\n          var i = {},\n              o = {},\n              a = Math.max(e - Z.maxOverzooming, this._source.minzoom),\n              s = Math.max(e + Z.maxUnderzooming, this._source.minzoom),\n              r = {};\n\n          var _iterator160 = _createForOfIteratorHelper(t),\n              _step160;\n\n          try {\n            for (_iterator160.s(); !(_step160 = _iterator160.n()).done;) {\n              var _o73 = _step160.value;\n\n              var _t226 = this._addTile(_o73);\n\n              i[_o73.key] = _o73, _t226.hasData() || e < this._source.maxzoom && (r[_o73.key] = _o73);\n            }\n          } catch (err) {\n            _iterator160.e(err);\n          } finally {\n            _iterator160.f();\n          }\n\n          this._retainLoadedChildren(r, e, s, i);\n\n          var _iterator161 = _createForOfIteratorHelper(t),\n              _step161;\n\n          try {\n            for (_iterator161.s(); !(_step161 = _iterator161.n()).done;) {\n              var _s93 = _step161.value;\n              var _t227 = this._tiles[_s93.key];\n              if (_t227.hasData()) continue;\n\n              if (e + 1 > this._source.maxzoom) {\n                var _t228 = _s93.children(this._source.maxzoom)[0],\n                    _e218 = this.getTile(_t228);\n\n                if (_e218 && _e218.hasData()) {\n                  i[_t228.key] = _t228;\n                  continue;\n                }\n              } else {\n                var _t229 = _s93.children(this._source.maxzoom);\n\n                if (i[_t229[0].key] && i[_t229[1].key] && i[_t229[2].key] && i[_t229[3].key]) continue;\n              }\n\n              var _r170 = _t227.wasRequested();\n\n              for (var _e219 = _s93.overscaledZ - 1; _e219 >= a; --_e219) {\n                var _a83 = _s93.scaledTo(_e219);\n\n                if (o[_a83.key]) break;\n                if (o[_a83.key] = !0, _t227 = this.getTile(_a83), !_t227 && _r170 && (_t227 = this._addTile(_a83)), _t227 && (i[_a83.key] = _a83, _r170 = _t227.wasRequested(), _t227.hasData())) break;\n              }\n            }\n          } catch (err) {\n            _iterator161.e(err);\n          } finally {\n            _iterator161.f();\n          }\n\n          return i;\n        }\n      }, {\n        key: \"_updateLoadedParentTileCache\",\n        value: function _updateLoadedParentTileCache() {\n          this._loadedParentTiles = {};\n\n          for (var _t230 in this._tiles) {\n            var _e220 = [];\n\n            var _i157 = void 0,\n                _o74 = this._tiles[_t230].tileID;\n\n            for (; _o74.overscaledZ > 0;) {\n              if (_o74.key in this._loadedParentTiles) {\n                _i157 = this._loadedParentTiles[_o74.key];\n                break;\n              }\n\n              _e220.push(_o74.key);\n\n              var _t231 = _o74.scaledTo(_o74.overscaledZ - 1);\n\n              if (_i157 = this._getLoadedTile(_t231), _i157) break;\n              _o74 = _t231;\n            }\n\n            for (var _i158 = 0, _e221 = _e220; _i158 < _e221.length; _i158++) {\n              var _t232 = _e221[_i158];\n              this._loadedParentTiles[_t232] = _i157;\n            }\n          }\n        }\n      }, {\n        key: \"_addTile\",\n        value: function _addTile(e) {\n          var i = this._tiles[e.key];\n          if (i) return i;\n          i = this._cache.getAndRemove(e), i && (this._setTileReloadTimer(e.key, i), i.tileID = e, this._state.initializeTileState(i, this.map ? this.map.painter : null), this._cacheTimers[e.key] && (clearTimeout(this._cacheTimers[e.key]), delete this._cacheTimers[e.key], this._setTileReloadTimer(e.key, i)));\n          var o = i;\n          return i || (i = new U(e, this._source.tileSize * e.overscaleFactor()), this._loadTile(i, this._tileLoaded.bind(this, i, e.key, i.state))), i.uses++, this._tiles[e.key] = i, o || this._source.fire(new t.Event(\"dataloading\", {\n            tile: i,\n            coord: i.tileID,\n            dataType: \"source\"\n          })), i;\n        }\n      }, {\n        key: \"_setTileReloadTimer\",\n        value: function _setTileReloadTimer(t, e) {\n          var _this57 = this;\n\n          t in this._timers && (clearTimeout(this._timers[t]), delete this._timers[t]);\n          var i = e.getExpiryTimeout();\n          i && (this._timers[t] = setTimeout(function () {\n            _this57._reloadTile(t, \"expired\"), delete _this57._timers[t];\n          }, i));\n        }\n      }, {\n        key: \"_removeTile\",\n        value: function _removeTile(t) {\n          var e = this._tiles[t];\n          e && (e.uses--, delete this._tiles[t], this._timers[t] && (clearTimeout(this._timers[t]), delete this._timers[t]), e.uses > 0 || (e.hasData() && \"reloading\" !== e.state ? this._cache.add(e.tileID, e, e.getExpiryTimeout()) : (e.aborted = !0, this._abortTile(e), this._unloadTile(e))));\n        }\n      }, {\n        key: \"clearTiles\",\n        value: function clearTiles() {\n          this._shouldReloadOnResume = !1, this._paused = !1;\n\n          for (var _t233 in this._tiles) {\n            this._removeTile(_t233);\n          }\n\n          this._cache.reset();\n        }\n      }, {\n        key: \"tilesIn\",\n        value: function tilesIn(e, i, o) {\n          var _this58 = this;\n\n          var a = [],\n              s = this.transform;\n          if (!s) return a;\n          var r = o ? s.getCameraQueryGeometry(e) : e,\n              n = e.map(function (t) {\n            return s.pointCoordinate(t);\n          }),\n              l = r.map(function (t) {\n            return s.pointCoordinate(t);\n          }),\n              c = this.getIds();\n          var h = 1 / 0,\n              u = 1 / 0,\n              d = -1 / 0,\n              m = -1 / 0;\n\n          var _iterator162 = _createForOfIteratorHelper(l),\n              _step162;\n\n          try {\n            for (_iterator162.s(); !(_step162 = _iterator162.n()).done;) {\n              var _t234 = _step162.value;\n              h = Math.min(h, _t234.x), u = Math.min(u, _t234.y), d = Math.max(d, _t234.x), m = Math.max(m, _t234.y);\n            }\n          } catch (err) {\n            _iterator162.e(err);\n          } finally {\n            _iterator162.f();\n          }\n\n          var _loop4 = function _loop4(_e222) {\n            var o = _this58._tiles[c[_e222]];\n            if (o.holdingForFade()) return \"continue\";\n\n            var r = o.tileID,\n                _ = Math.pow(2, s.zoom - o.tileID.overscaledZ),\n                p = i * o.queryPadding * t.EXTENT / o.tileSize / _,\n                f = [r.getTilePoint(new t.MercatorCoordinate(h, u)), r.getTilePoint(new t.MercatorCoordinate(d, m))];\n\n            if (f[0].x - p < t.EXTENT && f[0].y - p < t.EXTENT && f[1].x + p >= 0 && f[1].y + p >= 0) {\n              var _t235 = n.map(function (t) {\n                return r.getTilePoint(t);\n              }),\n                  _e223 = l.map(function (t) {\n                return r.getTilePoint(t);\n              });\n\n              a.push({\n                tile: o,\n                tileID: r,\n                queryGeometry: _t235,\n                cameraQueryGeometry: _e223,\n                scale: _\n              });\n            }\n          };\n\n          for (var _e222 = 0; _e222 < c.length; _e222++) {\n            var _ret2 = _loop4(_e222);\n\n            if (_ret2 === \"continue\") continue;\n          }\n\n          return a;\n        }\n      }, {\n        key: \"getVisibleCoordinates\",\n        value: function getVisibleCoordinates(t) {\n          var _this59 = this;\n\n          var e = this.getRenderableIds(t).map(function (t) {\n            return _this59._tiles[t].tileID;\n          });\n\n          var _iterator163 = _createForOfIteratorHelper(e),\n              _step163;\n\n          try {\n            for (_iterator163.s(); !(_step163 = _iterator163.n()).done;) {\n              var _t236 = _step163.value;\n              _t236.posMatrix = this.transform.calculatePosMatrix(_t236.toUnwrapped());\n            }\n          } catch (err) {\n            _iterator163.e(err);\n          } finally {\n            _iterator163.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"hasTransition\",\n        value: function hasTransition() {\n          if (this._source.hasTransition()) return !0;\n          if (V(this._source.type)) for (var _e224 in this._tiles) {\n            var _i159 = this._tiles[_e224];\n            if (void 0 !== _i159.fadeEndTime && _i159.fadeEndTime >= t.exported.now()) return !0;\n          }\n          return !1;\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(t, e, i) {\n          this._state.updateState(t = t || \"_geojsonTileLayer\", e, i);\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(t, e, i) {\n          this._state.removeFeatureState(t = t || \"_geojsonTileLayer\", e, i);\n        }\n      }, {\n        key: \"getFeatureState\",\n        value: function getFeatureState(t, e) {\n          return this._state.getState(t = t || \"_geojsonTileLayer\", e);\n        }\n      }, {\n        key: \"setDependencies\",\n        value: function setDependencies(t, e, i) {\n          var o = this._tiles[t];\n          o && o.setDependencies(e, i);\n        }\n      }, {\n        key: \"reloadTilesForDependencies\",\n        value: function reloadTilesForDependencies(t, e) {\n          for (var _i160 in this._tiles) {\n            this._tiles[_i160].hasDependency(t, e) && this._reloadTile(_i160, \"reloading\");\n          }\n\n          this._cache.filter(function (i) {\n            return !i.hasDependency(t, e);\n          });\n        }\n      }]);\n\n      return Z;\n    }(t.Evented);\n\n    function q(t, e) {\n      var i = Math.abs(2 * t.wrap) - +(t.wrap < 0),\n          o = Math.abs(2 * e.wrap) - +(e.wrap < 0);\n      return t.overscaledZ - e.overscaledZ || o - i || e.canonical.y - t.canonical.y || e.canonical.x - t.canonical.x;\n    }\n\n    function V(t) {\n      return \"raster\" === t || \"image\" === t || \"video\" === t;\n    }\n\n    Z.maxOverzooming = 10, Z.maxUnderzooming = 3;\n    var j = \"mapboxgl_preloaded_worker_pool\";\n\n    var $ = /*#__PURE__*/function () {\n      function $() {\n        _classCallCheck(this, $);\n\n        this.active = {};\n      }\n\n      _createClass($, [{\n        key: \"acquire\",\n        value: function acquire(t) {\n          if (!this.workers) for (this.workers = []; this.workers.length < $.workerCount;) {\n            this.workers.push(new Worker(va.workerUrl));\n          }\n          return this.active[t] = !0, this.workers.slice();\n        }\n      }, {\n        key: \"release\",\n        value: function release(t) {\n          delete this.active[t], 0 === this.numActive() && (this.workers.forEach(function (t) {\n            t.terminate();\n          }), this.workers = null);\n        }\n      }, {\n        key: \"isPreloaded\",\n        value: function isPreloaded() {\n          return !!this.active[j];\n        }\n      }, {\n        key: \"numActive\",\n        value: function numActive() {\n          return Object.keys(this.active).length;\n        }\n      }]);\n\n      return $;\n    }();\n\n    var W = Math.floor(t.exported.hardwareConcurrency / 2);\n    var X;\n\n    function H() {\n      return X || (X = new $()), X;\n    }\n\n    function K(e, i) {\n      var o = {};\n\n      for (var _t237 in e) {\n        \"ref\" !== _t237 && (o[_t237] = e[_t237]);\n      }\n\n      return t.refProperties.forEach(function (t) {\n        t in i && (o[t] = i[t]);\n      }), o;\n    }\n\n    function Y(t) {\n      t = t.slice();\n      var e = Object.create(null);\n\n      for (var _i161 = 0; _i161 < t.length; _i161++) {\n        e[t[_i161].id] = t[_i161];\n      }\n\n      for (var _i162 = 0; _i162 < t.length; _i162++) {\n        \"ref\" in t[_i162] && (t[_i162] = K(t[_i162], e[t[_i162].ref]));\n      }\n\n      return t;\n    }\n\n    $.workerCount = Math.max(Math.min(W, 6), 1);\n    var J = {\n      setStyle: \"setStyle\",\n      addLayer: \"addLayer\",\n      removeLayer: \"removeLayer\",\n      setPaintProperty: \"setPaintProperty\",\n      setLayoutProperty: \"setLayoutProperty\",\n      setFilter: \"setFilter\",\n      addSource: \"addSource\",\n      removeSource: \"removeSource\",\n      setGeoJSONSourceData: \"setGeoJSONSourceData\",\n      setLayerZoomRange: \"setLayerZoomRange\",\n      setLayerProperty: \"setLayerProperty\",\n      setCenter: \"setCenter\",\n      setZoom: \"setZoom\",\n      setBearing: \"setBearing\",\n      setPitch: \"setPitch\",\n      setSprite: \"setSprite\",\n      setGlyphs: \"setGlyphs\",\n      setTransition: \"setTransition\",\n      setLight: \"setLight\"\n    };\n\n    function Q(t, e, i) {\n      i.push({\n        command: J.addSource,\n        args: [t, e[t]]\n      });\n    }\n\n    function tt(t, e, i) {\n      e.push({\n        command: J.removeSource,\n        args: [t]\n      }), i[t] = !0;\n    }\n\n    function et(t, e, i, o) {\n      tt(t, i, o), Q(t, e, i);\n    }\n\n    function it(t, e, i) {\n      var o;\n\n      for (o in t[i]) {\n        if (Object.prototype.hasOwnProperty.call(t[i], o) && \"data\" !== o && !a(t[i][o], e[i][o])) return !1;\n      }\n\n      for (o in e[i]) {\n        if (Object.prototype.hasOwnProperty.call(e[i], o) && \"data\" !== o && !a(t[i][o], e[i][o])) return !1;\n      }\n\n      return !0;\n    }\n\n    function ot(t, e, i, o, s, r) {\n      var n;\n\n      for (n in e = e || {}, t = t || {}) {\n        Object.prototype.hasOwnProperty.call(t, n) && (a(t[n], e[n]) || i.push({\n          command: r,\n          args: [o, n, e[n], s]\n        }));\n      }\n\n      for (n in e) {\n        Object.prototype.hasOwnProperty.call(e, n) && !Object.prototype.hasOwnProperty.call(t, n) && (a(t[n], e[n]) || i.push({\n          command: r,\n          args: [o, n, e[n], s]\n        }));\n      }\n    }\n\n    function at(t) {\n      return t.id;\n    }\n\n    function st(t, e) {\n      return t[e.id] = e, t;\n    }\n\n    var rt = /*#__PURE__*/function () {\n      function rt(t, e) {\n        _classCallCheck(this, rt);\n\n        this.reset(t, e);\n      }\n\n      _createClass(rt, [{\n        key: \"reset\",\n        value: function reset(t, e) {\n          this.points = t || [], this._distances = [0];\n\n          for (var _t238 = 1; _t238 < this.points.length; _t238++) {\n            this._distances[_t238] = this._distances[_t238 - 1] + this.points[_t238].dist(this.points[_t238 - 1]);\n          }\n\n          this.length = this._distances[this._distances.length - 1], this.padding = Math.min(e || 0, .5 * this.length), this.paddedLength = this.length - 2 * this.padding;\n        }\n      }, {\n        key: \"lerp\",\n        value: function lerp(e) {\n          if (1 === this.points.length) return this.points[0];\n          e = t.clamp(e, 0, 1);\n          var i = 1,\n              o = this._distances[i];\n          var a = e * this.paddedLength + this.padding;\n\n          for (; o < a && i < this._distances.length;) {\n            o = this._distances[++i];\n          }\n\n          var s = i - 1,\n              r = this._distances[s],\n              n = o - r,\n              l = n > 0 ? (a - r) / n : 0;\n          return this.points[s].mult(1 - l).add(this.points[i].mult(l));\n        }\n      }]);\n\n      return rt;\n    }();\n\n    function nt(t, e) {\n      var i = !0;\n      return \"always\" === t || \"never\" !== t && \"never\" !== e || (i = !1), i;\n    }\n\n    var lt = /*#__PURE__*/function () {\n      function lt(t, e, i) {\n        _classCallCheck(this, lt);\n\n        var o = this.boxCells = [],\n            a = this.circleCells = [];\n        this.xCellCount = Math.ceil(t / i), this.yCellCount = Math.ceil(e / i);\n\n        for (var _t239 = 0; _t239 < this.xCellCount * this.yCellCount; _t239++) {\n          o.push([]), a.push([]);\n        }\n\n        this.circleKeys = [], this.boxKeys = [], this.bboxes = [], this.circles = [], this.width = t, this.height = e, this.xScale = this.xCellCount / t, this.yScale = this.yCellCount / e, this.boxUid = 0, this.circleUid = 0;\n      }\n\n      _createClass(lt, [{\n        key: \"keysLength\",\n        value: function keysLength() {\n          return this.boxKeys.length + this.circleKeys.length;\n        }\n      }, {\n        key: \"insert\",\n        value: function insert(t, e, i, o, a) {\n          this._forEachCell(e, i, o, a, this._insertBoxCell, this.boxUid++), this.boxKeys.push(t), this.bboxes.push(e), this.bboxes.push(i), this.bboxes.push(o), this.bboxes.push(a);\n        }\n      }, {\n        key: \"insertCircle\",\n        value: function insertCircle(t, e, i, o) {\n          this._forEachCell(e - o, i - o, e + o, i + o, this._insertCircleCell, this.circleUid++), this.circleKeys.push(t), this.circles.push(e), this.circles.push(i), this.circles.push(o);\n        }\n      }, {\n        key: \"_insertBoxCell\",\n        value: function _insertBoxCell(t, e, i, o, a, s) {\n          this.boxCells[a].push(s);\n        }\n      }, {\n        key: \"_insertCircleCell\",\n        value: function _insertCircleCell(t, e, i, o, a, s) {\n          this.circleCells[a].push(s);\n        }\n      }, {\n        key: \"_query\",\n        value: function _query(t, e, i, o, a, s, r) {\n          if (i < 0 || t > this.width || o < 0 || e > this.height) return [];\n          var n = [];\n\n          if (t <= 0 && e <= 0 && this.width <= i && this.height <= o) {\n            if (a) return [{\n              key: null,\n              x1: t,\n              y1: e,\n              x2: i,\n              y2: o\n            }];\n\n            for (var _t240 = 0; _t240 < this.boxKeys.length; _t240++) {\n              n.push({\n                key: this.boxKeys[_t240],\n                x1: this.bboxes[4 * _t240],\n                y1: this.bboxes[4 * _t240 + 1],\n                x2: this.bboxes[4 * _t240 + 2],\n                y2: this.bboxes[4 * _t240 + 3]\n              });\n            }\n\n            for (var _t241 = 0; _t241 < this.circleKeys.length; _t241++) {\n              var _e225 = this.circles[3 * _t241],\n                  _i163 = this.circles[3 * _t241 + 1],\n                  _o75 = this.circles[3 * _t241 + 2];\n              n.push({\n                key: this.circleKeys[_t241],\n                x1: _e225 - _o75,\n                y1: _i163 - _o75,\n                x2: _e225 + _o75,\n                y2: _i163 + _o75\n              });\n            }\n          } else this._forEachCell(t, e, i, o, this._queryCell, n, {\n            hitTest: a,\n            overlapMode: s,\n            seenUids: {\n              box: {},\n              circle: {}\n            }\n          }, r);\n\n          return n;\n        }\n      }, {\n        key: \"query\",\n        value: function query(t, e, i, o) {\n          return this._query(t, e, i, o, !1, null);\n        }\n      }, {\n        key: \"hitTest\",\n        value: function hitTest(t, e, i, o, a, s) {\n          return this._query(t, e, i, o, !0, a, s).length > 0;\n        }\n      }, {\n        key: \"hitTestCircle\",\n        value: function hitTestCircle(t, e, i, o, a) {\n          var s = t - i,\n              r = t + i,\n              n = e - i,\n              l = e + i;\n          if (r < 0 || s > this.width || l < 0 || n > this.height) return !1;\n          var c = [];\n          return this._forEachCell(s, n, r, l, this._queryCellCircle, c, {\n            hitTest: !0,\n            overlapMode: o,\n            circle: {\n              x: t,\n              y: e,\n              radius: i\n            },\n            seenUids: {\n              box: {},\n              circle: {}\n            }\n          }, a), c.length > 0;\n        }\n      }, {\n        key: \"_queryCell\",\n        value: function _queryCell(t, e, i, o, a, s, r, n) {\n          var l = r.seenUids,\n              c = r.hitTest,\n              h = r.overlapMode,\n              u = this.boxCells[a];\n\n          if (null !== u) {\n            var _a84 = this.bboxes;\n\n            var _iterator164 = _createForOfIteratorHelper(u),\n                _step164;\n\n            try {\n              for (_iterator164.s(); !(_step164 = _iterator164.n()).done;) {\n                var _r171 = _step164.value;\n\n                if (!l.box[_r171]) {\n                  l.box[_r171] = !0;\n\n                  var _u27 = 4 * _r171,\n                      _d11 = this.boxKeys[_r171];\n\n                  if (t <= _a84[_u27 + 2] && e <= _a84[_u27 + 3] && i >= _a84[_u27 + 0] && o >= _a84[_u27 + 1] && (!n || n(_d11)) && (!c || !nt(h, _d11.overlapMode)) && (s.push({\n                    key: _d11,\n                    x1: _a84[_u27],\n                    y1: _a84[_u27 + 1],\n                    x2: _a84[_u27 + 2],\n                    y2: _a84[_u27 + 3]\n                  }), c)) return !0;\n                }\n              }\n            } catch (err) {\n              _iterator164.e(err);\n            } finally {\n              _iterator164.f();\n            }\n          }\n\n          var d = this.circleCells[a];\n\n          if (null !== d) {\n            var _a85 = this.circles;\n\n            var _iterator165 = _createForOfIteratorHelper(d),\n                _step165;\n\n            try {\n              for (_iterator165.s(); !(_step165 = _iterator165.n()).done;) {\n                var _r172 = _step165.value;\n\n                if (!l.circle[_r172]) {\n                  l.circle[_r172] = !0;\n\n                  var _u28 = 3 * _r172,\n                      _d12 = this.circleKeys[_r172];\n\n                  if (this._circleAndRectCollide(_a85[_u28], _a85[_u28 + 1], _a85[_u28 + 2], t, e, i, o) && (!n || n(_d12)) && (!c || !nt(h, _d12.overlapMode))) {\n                    var _t242 = _a85[_u28],\n                        _e226 = _a85[_u28 + 1],\n                        _i164 = _a85[_u28 + 2];\n                    if (s.push({\n                      key: _d12,\n                      x1: _t242 - _i164,\n                      y1: _e226 - _i164,\n                      x2: _t242 + _i164,\n                      y2: _e226 + _i164\n                    }), c) return !0;\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator165.e(err);\n            } finally {\n              _iterator165.f();\n            }\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"_queryCellCircle\",\n        value: function _queryCellCircle(t, e, i, o, a, s, r, n) {\n          var l = r.circle,\n              c = r.seenUids,\n              h = r.overlapMode,\n              u = this.boxCells[a];\n\n          if (null !== u) {\n            var _t243 = this.bboxes;\n\n            var _iterator166 = _createForOfIteratorHelper(u),\n                _step166;\n\n            try {\n              for (_iterator166.s(); !(_step166 = _iterator166.n()).done;) {\n                var _e227 = _step166.value;\n\n                if (!c.box[_e227]) {\n                  c.box[_e227] = !0;\n\n                  var _i165 = 4 * _e227,\n                      _o76 = this.boxKeys[_e227];\n\n                  if (this._circleAndRectCollide(l.x, l.y, l.radius, _t243[_i165 + 0], _t243[_i165 + 1], _t243[_i165 + 2], _t243[_i165 + 3]) && (!n || n(_o76)) && !nt(h, _o76.overlapMode)) return s.push(!0), !0;\n                }\n              }\n            } catch (err) {\n              _iterator166.e(err);\n            } finally {\n              _iterator166.f();\n            }\n          }\n\n          var d = this.circleCells[a];\n\n          if (null !== d) {\n            var _t244 = this.circles;\n\n            var _iterator167 = _createForOfIteratorHelper(d),\n                _step167;\n\n            try {\n              for (_iterator167.s(); !(_step167 = _iterator167.n()).done;) {\n                var _e228 = _step167.value;\n\n                if (!c.circle[_e228]) {\n                  c.circle[_e228] = !0;\n\n                  var _i166 = 3 * _e228,\n                      _o77 = this.circleKeys[_e228];\n\n                  if (this._circlesCollide(_t244[_i166], _t244[_i166 + 1], _t244[_i166 + 2], l.x, l.y, l.radius) && (!n || n(_o77)) && !nt(h, _o77.overlapMode)) return s.push(!0), !0;\n                }\n              }\n            } catch (err) {\n              _iterator167.e(err);\n            } finally {\n              _iterator167.f();\n            }\n          }\n        }\n      }, {\n        key: \"_forEachCell\",\n        value: function _forEachCell(t, e, i, o, a, s, r, n) {\n          var l = this._convertToXCellCoord(t),\n              c = this._convertToYCellCoord(e),\n              h = this._convertToXCellCoord(i),\n              u = this._convertToYCellCoord(o);\n\n          for (var _d13 = l; _d13 <= h; _d13++) {\n            for (var _l42 = c; _l42 <= u; _l42++) {\n              if (a.call(this, t, e, i, o, this.xCellCount * _l42 + _d13, s, r, n)) return;\n            }\n          }\n        }\n      }, {\n        key: \"_convertToXCellCoord\",\n        value: function _convertToXCellCoord(t) {\n          return Math.max(0, Math.min(this.xCellCount - 1, Math.floor(t * this.xScale)));\n        }\n      }, {\n        key: \"_convertToYCellCoord\",\n        value: function _convertToYCellCoord(t) {\n          return Math.max(0, Math.min(this.yCellCount - 1, Math.floor(t * this.yScale)));\n        }\n      }, {\n        key: \"_circlesCollide\",\n        value: function _circlesCollide(t, e, i, o, a, s) {\n          var r = o - t,\n              n = a - e,\n              l = i + s;\n          return l * l > r * r + n * n;\n        }\n      }, {\n        key: \"_circleAndRectCollide\",\n        value: function _circleAndRectCollide(t, e, i, o, a, s, r) {\n          var n = (s - o) / 2,\n              l = Math.abs(t - (o + n));\n          if (l > n + i) return !1;\n          var c = (r - a) / 2,\n              h = Math.abs(e - (a + c));\n          if (h > c + i) return !1;\n          if (l <= n || h <= c) return !0;\n          var u = l - n,\n              d = h - c;\n          return u * u + d * d <= i * i;\n        }\n      }]);\n\n      return lt;\n    }();\n\n    function ct(e, i, o, a, s) {\n      var r = t.create();\n      return i ? (t.scale(r, r, [1 / s, 1 / s, 1]), o || t.rotateZ(r, r, a.angle)) : t.multiply(r, a.labelPlaneMatrix, e), r;\n    }\n\n    function ht(e, i, o, a, s) {\n      if (i) {\n        var _i167 = t.clone(e);\n\n        return t.scale(_i167, _i167, [s, s, 1]), o || t.rotateZ(_i167, _i167, -a.angle), _i167;\n      }\n\n      return a.glCoordMatrix;\n    }\n\n    function ut(e, i) {\n      var o = [e.x, e.y, 0, 1];\n      wt(o, o, i);\n      var a = o[3];\n      return {\n        point: new t.pointGeometry(o[0] / a, o[1] / a),\n        signedDistanceFromCamera: a\n      };\n    }\n\n    function dt(t, e) {\n      return .5 + t / e * .5;\n    }\n\n    function mt(t, e) {\n      var i = t[0] / t[3],\n          o = t[1] / t[3];\n      return i >= -e[0] && i <= e[0] && o >= -e[1] && o <= e[1];\n    }\n\n    function _t(e, i, o, a, s, r, n, l, c) {\n      var h = a ? e.textSizeData : e.iconSizeData,\n          u = t.evaluateSizeForZoom(h, o.transform.zoom),\n          d = [256 / o.width * 2 + 1, 256 / o.height * 2 + 1],\n          m = a ? e.text.dynamicLayoutVertexArray : e.icon.dynamicLayoutVertexArray;\n      m.clear();\n      var _ = e.lineVertexArray,\n          p = a ? e.text.placedSymbolArray : e.icon.placedSymbolArray,\n          f = o.transform.width / o.transform.height;\n      var g = !1;\n\n      for (var _a86 = 0; _a86 < p.length; _a86++) {\n        var _x10 = p.get(_a86);\n\n        if (_x10.hidden || _x10.writingMode === t.WritingMode.vertical && !g) {\n          bt(_x10.numGlyphs, m);\n          continue;\n        }\n\n        g = !1;\n        var _v6 = [_x10.anchorX, _x10.anchorY, 0, 1];\n\n        if (t.transformMat4(_v6, _v6, i), !mt(_v6, d)) {\n          bt(_x10.numGlyphs, m);\n          continue;\n        }\n\n        var _y8 = dt(o.transform.cameraToCenterDistance, _v6[3]),\n            _b8 = t.evaluateSizeForFeature(h, u, _x10),\n            _w7 = n ? _b8 / _y8 : _b8 * _y8,\n            _T = new t.pointGeometry(_x10.anchorX, _x10.anchorY),\n            _E = ut(_T, s).point,\n            _I2 = {},\n            _S5 = gt(_x10, _w7, !1, l, i, s, r, e.glyphOffsetArray, _, m, _E, _T, _I2, f, c);\n\n        g = _S5.useVertical, (_S5.notEnoughRoom || g || _S5.needsFlipping && gt(_x10, _w7, !0, l, i, s, r, e.glyphOffsetArray, _, m, _E, _T, _I2, f, c).notEnoughRoom) && bt(_x10.numGlyphs, m);\n      }\n\n      a ? e.text.dynamicLayoutVertexBuffer.updateData(m) : e.icon.dynamicLayoutVertexBuffer.updateData(m);\n    }\n\n    function pt(t, e, i, o, a, s, r, n, l, c, h, u) {\n      var d = n.glyphStartIndex + n.numGlyphs,\n          m = n.lineStartIndex,\n          _ = n.lineStartIndex + n.lineLength,\n          p = e.getoffsetX(n.glyphStartIndex),\n          f = e.getoffsetX(d - 1),\n          g = vt(t * p, i, o, a, s, r, n.segment, m, _, l, c, h, u);\n\n      if (!g) return null;\n      var x = vt(t * f, i, o, a, s, r, n.segment, m, _, l, c, h, u);\n      return x ? {\n        first: g,\n        last: x\n      } : null;\n    }\n\n    function ft(e, i, o, a) {\n      return e === t.WritingMode.horizontal && Math.abs(o.y - i.y) > Math.abs(o.x - i.x) * a ? {\n        useVertical: !0\n      } : (e === t.WritingMode.vertical ? i.y < o.y : i.x > o.x) ? {\n        needsFlipping: !0\n      } : null;\n    }\n\n    function gt(e, i, o, a, s, r, n, l, c, h, u, d, m, _, p) {\n      var f = i / 24,\n          g = e.lineOffsetX * f,\n          x = e.lineOffsetY * f;\n      var v;\n\n      if (e.numGlyphs > 1) {\n        var _t245 = e.glyphStartIndex + e.numGlyphs,\n            _i168 = e.lineStartIndex,\n            _s94 = e.lineStartIndex + e.lineLength,\n            _h17 = pt(f, l, g, x, o, u, d, e, c, r, m, p);\n\n        if (!_h17) return {\n          notEnoughRoom: !0\n        };\n        var _y9 = ut(_h17.first.point, n).point,\n            _b9 = ut(_h17.last.point, n).point;\n\n        if (a && !o) {\n          var _t246 = ft(e.writingMode, _y9, _b9, _);\n\n          if (_t246) return _t246;\n        }\n\n        v = [_h17.first];\n\n        for (var _a87 = e.glyphStartIndex + 1; _a87 < _t245 - 1; _a87++) {\n          v.push(vt(f * l.getoffsetX(_a87), g, x, o, u, d, e.segment, _i168, _s94, c, r, m, p));\n        }\n\n        v.push(_h17.last);\n      } else {\n        if (a && !o) {\n          var _i170 = ut(d, s).point,\n              _o78 = e.lineStartIndex + e.segment + 1,\n              _a88 = new t.pointGeometry(c.getx(_o78), c.gety(_o78)),\n              _r173 = ut(_a88, s),\n              _n123 = _r173.signedDistanceFromCamera > 0 ? _r173.point : xt(d, _a88, _i170, 1, s),\n              _l43 = ft(e.writingMode, _i170, _n123, _);\n\n          if (_l43) return _l43;\n        }\n\n        var _i169 = vt(f * l.getoffsetX(e.glyphStartIndex), g, x, o, u, d, e.segment, e.lineStartIndex, e.lineStartIndex + e.lineLength, c, r, m, p);\n\n        if (!_i169) return {\n          notEnoughRoom: !0\n        };\n        v = [_i169];\n      }\n\n      var _iterator168 = _createForOfIteratorHelper(v),\n          _step168;\n\n      try {\n        for (_iterator168.s(); !(_step168 = _iterator168.n()).done;) {\n          var _e229 = _step168.value;\n          t.addDynamicAttributes(h, _e229.point, _e229.angle);\n        }\n      } catch (err) {\n        _iterator168.e(err);\n      } finally {\n        _iterator168.f();\n      }\n\n      return {};\n    }\n\n    function xt(t, e, i, o, a) {\n      var s = ut(t.add(t.sub(e)._unit()), a).point,\n          r = i.sub(s);\n      return i.add(r._mult(o / r.mag()));\n    }\n\n    function vt(e, i, o, a, s, r, n, l, c, h, u, d, m) {\n      var _ = a ? e - i : e + i;\n\n      var p = _ > 0 ? 1 : -1,\n          f = 0;\n      a && (p *= -1, f = Math.PI), p < 0 && (f += Math.PI);\n      var g = p > 0 ? l + n : l + n + 1,\n          x = s,\n          v = s,\n          y = 0,\n          b = 0;\n      var w = Math.abs(_),\n          T = [];\n\n      for (; y + b <= w;) {\n        if (g += p, g < l || g >= c) return null;\n\n        if (v = x, T.push(x), x = d[g], void 0 === x) {\n          var _e230 = new t.pointGeometry(h.getx(g), h.gety(g)),\n              _i171 = ut(_e230, u);\n\n          if (_i171.signedDistanceFromCamera > 0) x = d[g] = _i171.point;else {\n            var _i172 = g - p;\n\n            x = xt(0 === y ? r : new t.pointGeometry(h.getx(_i172), h.gety(_i172)), _e230, v, w - y + 1, u);\n          }\n        }\n\n        y += b, b = v.dist(x);\n      }\n\n      var E = (w - y) / b,\n          I = x.sub(v),\n          S = I.mult(E)._add(v);\n\n      S._add(I._unit()._perp()._mult(o * p));\n\n      var C = f + Math.atan2(x.y - v.y, x.x - v.x);\n      return T.push(S), {\n        point: S,\n        angle: m ? C : 0,\n        path: T\n      };\n    }\n\n    var yt = new Float32Array([-1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0, -1 / 0, -1 / 0, 0]);\n\n    function bt(t, e) {\n      for (var _i173 = 0; _i173 < t; _i173++) {\n        var _t247 = e.length;\n        e.resize(_t247 + 4), e.float32.set(yt, 3 * _t247);\n      }\n    }\n\n    function wt(t, e, i) {\n      var o = e[0],\n          a = e[1];\n      return t[0] = i[0] * o + i[4] * a + i[12], t[1] = i[1] * o + i[5] * a + i[13], t[3] = i[3] * o + i[7] * a + i[15], t;\n    }\n\n    var Tt = 100;\n\n    var Et = /*#__PURE__*/function () {\n      function Et(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new lt(t.width + 200, t.height + 200, 25);\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new lt(t.width + 200, t.height + 200, 25);\n\n        _classCallCheck(this, Et);\n\n        this.transform = t, this.grid = e, this.ignoredGrid = i, this.pitchfactor = Math.cos(t._pitch) * t.cameraToCenterDistance, this.screenRightBoundary = t.width + Tt, this.screenBottomBoundary = t.height + Tt, this.gridRightBoundary = t.width + 200, this.gridBottomBoundary = t.height + 200;\n      }\n\n      _createClass(Et, [{\n        key: \"placeCollisionBox\",\n        value: function placeCollisionBox(t, e, i, o, a) {\n          var s = this.projectAndGetPerspectiveRatio(o, t.anchorPointX, t.anchorPointY),\n              r = i * s.perspectiveRatio,\n              n = t.x1 * r + s.point.x,\n              l = t.y1 * r + s.point.y,\n              c = t.x2 * r + s.point.x,\n              h = t.y2 * r + s.point.y;\n          return !this.isInsideGrid(n, l, c, h) || \"always\" !== e && this.grid.hitTest(n, l, c, h, e, a) ? {\n            box: [],\n            offscreen: !1\n          } : {\n            box: [n, l, c, h],\n            offscreen: this.isOffscreen(n, l, c, h)\n          };\n        }\n      }, {\n        key: \"placeCollisionCircles\",\n        value: function placeCollisionCircles(e, i, o, a, s, r, n, l, c, h, u, d, m) {\n          var _ = [],\n              p = new t.pointGeometry(i.anchorX, i.anchorY),\n              f = ut(p, r),\n              g = dt(this.transform.cameraToCenterDistance, f.signedDistanceFromCamera),\n              x = (h ? s / g : s * g) / t.ONE_EM,\n              v = ut(p, n).point,\n              y = pt(x, a, i.lineOffsetX * x, i.lineOffsetY * x, !1, v, p, i, o, n, {}, !1);\n          var b = !1,\n              w = !1,\n              T = !0;\n\n          if (y) {\n            var _i174 = .5 * d * g + m,\n                _o79 = new t.pointGeometry(-100, -100),\n                _a89 = new t.pointGeometry(this.screenRightBoundary, this.screenBottomBoundary),\n                _s95 = new rt(),\n                _r174 = y.first,\n                _n124 = y.last;\n\n            var _h18 = [];\n\n            for (var _t248 = _r174.path.length - 1; _t248 >= 1; _t248--) {\n              _h18.push(_r174.path[_t248]);\n            }\n\n            for (var _t249 = 1; _t249 < _n124.path.length; _t249++) {\n              _h18.push(_n124.path[_t249]);\n            }\n\n            var _p13 = 2.5 * _i174;\n\n            if (l) {\n              var _t250 = _h18.map(function (t) {\n                return ut(t, l);\n              });\n\n              _h18 = _t250.some(function (t) {\n                return t.signedDistanceFromCamera <= 0;\n              }) ? [] : _t250.map(function (t) {\n                return t.point;\n              });\n            }\n\n            var _f10 = [];\n\n            if (_h18.length > 0) {\n              var _e231 = _h18[0].clone(),\n                  _i175 = _h18[0].clone();\n\n              for (var _t251 = 1; _t251 < _h18.length; _t251++) {\n                _e231.x = Math.min(_e231.x, _h18[_t251].x), _e231.y = Math.min(_e231.y, _h18[_t251].y), _i175.x = Math.max(_i175.x, _h18[_t251].x), _i175.y = Math.max(_i175.y, _h18[_t251].y);\n              }\n\n              _f10 = _e231.x >= _o79.x && _i175.x <= _a89.x && _e231.y >= _o79.y && _i175.y <= _a89.y ? [_h18] : _i175.x < _o79.x || _e231.x > _a89.x || _i175.y < _o79.y || _e231.y > _a89.y ? [] : t.clipLine([_h18], _o79.x, _o79.y, _a89.x, _a89.y);\n            }\n\n            var _iterator169 = _createForOfIteratorHelper(_f10),\n                _step169;\n\n            try {\n              for (_iterator169.s(); !(_step169 = _iterator169.n()).done;) {\n                var _t252 = _step169.value;\n\n                _s95.reset(_t252, .25 * _i174);\n\n                var _o80 = 0;\n                _o80 = _s95.length <= .5 * _i174 ? 1 : Math.ceil(_s95.paddedLength / _p13) + 1;\n\n                for (var _t253 = 0; _t253 < _o80; _t253++) {\n                  var _a90 = _t253 / Math.max(_o80 - 1, 1),\n                      _r175 = _s95.lerp(_a90),\n                      _n125 = _r175.x + Tt,\n                      _l44 = _r175.y + Tt;\n\n                  _.push(_n125, _l44, _i174, 0);\n\n                  var _h19 = _n125 - _i174,\n                      _d14 = _l44 - _i174,\n                      _m12 = _n125 + _i174,\n                      _p14 = _l44 + _i174;\n\n                  if (T = T && this.isOffscreen(_h19, _d14, _m12, _p14), w = w || this.isInsideGrid(_h19, _d14, _m12, _p14), \"always\" !== e && this.grid.hitTestCircle(_n125, _l44, _i174, e, u) && (b = !0, !c)) return {\n                    circles: [],\n                    offscreen: !1,\n                    collisionDetected: b\n                  };\n                }\n              }\n            } catch (err) {\n              _iterator169.e(err);\n            } finally {\n              _iterator169.f();\n            }\n          }\n\n          return {\n            circles: !c && b || !w ? [] : _,\n            offscreen: T,\n            collisionDetected: b\n          };\n        }\n      }, {\n        key: \"queryRenderedSymbols\",\n        value: function queryRenderedSymbols(e) {\n          if (0 === e.length || 0 === this.grid.keysLength() && 0 === this.ignoredGrid.keysLength()) return {};\n          var i = [];\n          var o = 1 / 0,\n              a = 1 / 0,\n              s = -1 / 0,\n              r = -1 / 0;\n\n          var _iterator170 = _createForOfIteratorHelper(e),\n              _step170;\n\n          try {\n            for (_iterator170.s(); !(_step170 = _iterator170.n()).done;) {\n              var _n126 = _step170.value;\n\n              var _e232 = new t.pointGeometry(_n126.x + Tt, _n126.y + Tt);\n\n              o = Math.min(o, _e232.x), a = Math.min(a, _e232.y), s = Math.max(s, _e232.x), r = Math.max(r, _e232.y), i.push(_e232);\n            }\n          } catch (err) {\n            _iterator170.e(err);\n          } finally {\n            _iterator170.f();\n          }\n\n          var n = this.grid.query(o, a, s, r).concat(this.ignoredGrid.query(o, a, s, r)),\n              l = {},\n              c = {};\n\n          var _iterator171 = _createForOfIteratorHelper(n),\n              _step171;\n\n          try {\n            for (_iterator171.s(); !(_step171 = _iterator171.n()).done;) {\n              var _e233 = _step171.value;\n              var _o81 = _e233.key;\n              if (void 0 === l[_o81.bucketInstanceId] && (l[_o81.bucketInstanceId] = {}), l[_o81.bucketInstanceId][_o81.featureIndex]) continue;\n              var _a91 = [new t.pointGeometry(_e233.x1, _e233.y1), new t.pointGeometry(_e233.x2, _e233.y1), new t.pointGeometry(_e233.x2, _e233.y2), new t.pointGeometry(_e233.x1, _e233.y2)];\n              t.polygonIntersectsPolygon(i, _a91) && (l[_o81.bucketInstanceId][_o81.featureIndex] = !0, void 0 === c[_o81.bucketInstanceId] && (c[_o81.bucketInstanceId] = []), c[_o81.bucketInstanceId].push(_o81.featureIndex));\n            }\n          } catch (err) {\n            _iterator171.e(err);\n          } finally {\n            _iterator171.f();\n          }\n\n          return c;\n        }\n      }, {\n        key: \"insertCollisionBox\",\n        value: function insertCollisionBox(t, e, i, o, a, s) {\n          (i ? this.ignoredGrid : this.grid).insert({\n            bucketInstanceId: o,\n            featureIndex: a,\n            collisionGroupID: s,\n            overlapMode: e\n          }, t[0], t[1], t[2], t[3]);\n        }\n      }, {\n        key: \"insertCollisionCircles\",\n        value: function insertCollisionCircles(t, e, i, o, a, s) {\n          var r = i ? this.ignoredGrid : this.grid,\n              n = {\n            bucketInstanceId: o,\n            featureIndex: a,\n            collisionGroupID: s,\n            overlapMode: e\n          };\n\n          for (var _e234 = 0; _e234 < t.length; _e234 += 4) {\n            r.insertCircle(n, t[_e234], t[_e234 + 1], t[_e234 + 2]);\n          }\n        }\n      }, {\n        key: \"projectAndGetPerspectiveRatio\",\n        value: function projectAndGetPerspectiveRatio(e, i, o) {\n          var a = [i, o, 0, 1];\n          return wt(a, a, e), {\n            point: new t.pointGeometry((a[0] / a[3] + 1) / 2 * this.transform.width + Tt, (-a[1] / a[3] + 1) / 2 * this.transform.height + Tt),\n            perspectiveRatio: .5 + this.transform.cameraToCenterDistance / a[3] * .5\n          };\n        }\n      }, {\n        key: \"isOffscreen\",\n        value: function isOffscreen(t, e, i, o) {\n          return i < Tt || t >= this.screenRightBoundary || o < Tt || e > this.screenBottomBoundary;\n        }\n      }, {\n        key: \"isInsideGrid\",\n        value: function isInsideGrid(t, e, i, o) {\n          return i >= 0 && t < this.gridRightBoundary && o >= 0 && e < this.gridBottomBoundary;\n        }\n      }, {\n        key: \"getViewportMatrix\",\n        value: function getViewportMatrix() {\n          var e = t.identity([]);\n          return t.translate(e, e, [-100, -100, 0]), e;\n        }\n      }]);\n\n      return Et;\n    }();\n\n    function It(e, i, o) {\n      return i * (t.EXTENT / (e.tileSize * Math.pow(2, o - e.tileID.overscaledZ)));\n    }\n\n    var St = /*#__PURE__*/function () {\n      function St(t, e, i, o) {\n        _classCallCheck(this, St);\n\n        this.opacity = t ? Math.max(0, Math.min(1, t.opacity + (t.placed ? e : -e))) : o && i ? 1 : 0, this.placed = i;\n      }\n\n      _createClass(St, [{\n        key: \"isHidden\",\n        value: function isHidden() {\n          return 0 === this.opacity && !this.placed;\n        }\n      }]);\n\n      return St;\n    }();\n\n    var Ct = /*#__PURE__*/function () {\n      function Ct(t, e, i, o, a) {\n        _classCallCheck(this, Ct);\n\n        this.text = new St(t ? t.text : null, e, i, a), this.icon = new St(t ? t.icon : null, e, o, a);\n      }\n\n      _createClass(Ct, [{\n        key: \"isHidden\",\n        value: function isHidden() {\n          return this.text.isHidden() && this.icon.isHidden();\n        }\n      }]);\n\n      return Ct;\n    }();\n\n    var Pt = function Pt(t, e, i) {\n      _classCallCheck(this, Pt);\n\n      this.text = t, this.icon = e, this.skipFade = i;\n    };\n\n    var zt = function zt() {\n      _classCallCheck(this, zt);\n\n      this.invProjMatrix = t.create(), this.viewportMatrix = t.create(), this.circles = [];\n    };\n\n    var Dt = function Dt(t, e, i, o, a) {\n      _classCallCheck(this, Dt);\n\n      this.bucketInstanceId = t, this.featureIndex = e, this.sourceLayerIndex = i, this.bucketIndex = o, this.tileID = a;\n    };\n\n    var At = /*#__PURE__*/function () {\n      function At(t) {\n        _classCallCheck(this, At);\n\n        this.crossSourceCollisions = t, this.maxGroupID = 0, this.collisionGroups = {};\n      }\n\n      _createClass(At, [{\n        key: \"get\",\n        value: function get(t) {\n          if (this.crossSourceCollisions) return {\n            ID: 0,\n            predicate: null\n          };\n\n          if (!this.collisionGroups[t]) {\n            var _e235 = ++this.maxGroupID;\n\n            this.collisionGroups[t] = {\n              ID: _e235,\n              predicate: function predicate(t) {\n                return t.collisionGroupID === _e235;\n              }\n            };\n          }\n\n          return this.collisionGroups[t];\n        }\n      }]);\n\n      return At;\n    }();\n\n    function Mt(e, i, o, a, s) {\n      var _t$getAnchorAlignment = t.getAnchorAlignment(e),\n          r = _t$getAnchorAlignment.horizontalAlign,\n          n = _t$getAnchorAlignment.verticalAlign,\n          l = -(r - .5) * i,\n          c = -(n - .5) * o,\n          h = t.evaluateVariableOffset(e, a);\n\n      return new t.pointGeometry(l + h[0] * s, c + h[1] * s);\n    }\n\n    function Lt(e, i, o, a, s, r) {\n      var n = e.x1,\n          l = e.x2,\n          c = e.y1,\n          h = e.y2,\n          u = e.anchorPointX,\n          d = e.anchorPointY,\n          m = new t.pointGeometry(i, o);\n      return a && m._rotate(s ? r : -r), {\n        x1: n + m.x,\n        y1: c + m.y,\n        x2: l + m.x,\n        y2: h + m.y,\n        anchorPointX: u,\n        anchorPointY: d\n      };\n    }\n\n    var Rt = /*#__PURE__*/function () {\n      function Rt(t, e, i, o) {\n        _classCallCheck(this, Rt);\n\n        this.transform = t.clone(), this.collisionIndex = new Et(this.transform), this.placements = {}, this.opacities = {}, this.variableOffsets = {}, this.stale = !1, this.commitTime = 0, this.fadeDuration = e, this.retainedQueryData = {}, this.collisionGroups = new At(i), this.collisionCircleArrays = {}, this.prevPlacement = o, o && (o.prevPlacement = void 0), this.placedOrientations = {};\n      }\n\n      _createClass(Rt, [{\n        key: \"getBucketParts\",\n        value: function getBucketParts(e, i, o, a) {\n          var s = o.getBucket(i),\n              r = o.latestFeatureIndex;\n          if (!s || !r || i.id !== s.layerIds[0]) return;\n\n          var n = o.collisionBoxArray,\n              l = s.layers[0].layout,\n              c = Math.pow(2, this.transform.zoom - o.tileID.overscaledZ),\n              h = o.tileSize / t.EXTENT,\n              u = this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),\n              d = \"map\" === l.get(\"text-pitch-alignment\"),\n              m = \"map\" === l.get(\"text-rotation-alignment\"),\n              _ = It(o, 1, this.transform.zoom),\n              p = ct(u, d, m, this.transform, _);\n\n          var f = null;\n\n          if (d) {\n            var _e236 = ht(u, d, m, this.transform, _);\n\n            f = t.multiply([], this.transform.labelPlaneMatrix, _e236);\n          }\n\n          this.retainedQueryData[s.bucketInstanceId] = new Dt(s.bucketInstanceId, r, s.sourceLayerIndex, s.index, o.tileID);\n          var g = {\n            bucket: s,\n            layout: l,\n            posMatrix: u,\n            textLabelPlaneMatrix: p,\n            labelToScreenMatrix: f,\n            scale: c,\n            textPixelRatio: h,\n            holdingForFade: o.holdingForFade(),\n            collisionBoxArray: n,\n            partiallyEvaluatedTextSize: t.evaluateSizeForZoom(s.textSizeData, this.transform.zoom),\n            collisionGroup: this.collisionGroups.get(s.sourceID)\n          };\n\n          if (a) {\n            var _iterator172 = _createForOfIteratorHelper(s.sortKeyRanges),\n                _step172;\n\n            try {\n              for (_iterator172.s(); !(_step172 = _iterator172.n()).done;) {\n                var _t254 = _step172.value;\n                var _i176 = _t254.sortKey,\n                    _o82 = _t254.symbolInstanceStart,\n                    _a92 = _t254.symbolInstanceEnd;\n                e.push({\n                  sortKey: _i176,\n                  symbolInstanceStart: _o82,\n                  symbolInstanceEnd: _a92,\n                  parameters: g\n                });\n              }\n            } catch (err) {\n              _iterator172.e(err);\n            } finally {\n              _iterator172.f();\n            }\n          } else e.push({\n            symbolInstanceStart: 0,\n            symbolInstanceEnd: s.symbolInstances.length,\n            parameters: g\n          });\n        }\n      }, {\n        key: \"attemptAnchorPlacement\",\n        value: function attemptAnchorPlacement(t, e, i, o, a, s, r, n, l, c, h, u, d, m, _) {\n          var p = [u.textOffset0, u.textOffset1],\n              f = Mt(t, i, o, p, a),\n              g = this.collisionIndex.placeCollisionBox(Lt(e, f.x, f.y, s, r, this.transform.angle), h, n, l, c.predicate);\n\n          if ((!_ || 0 !== this.collisionIndex.placeCollisionBox(Lt(_, f.x, f.y, s, r, this.transform.angle), h, n, l, c.predicate).box.length) && g.box.length > 0) {\n            var _e237;\n\n            return this.prevPlacement && this.prevPlacement.variableOffsets[u.crossTileID] && this.prevPlacement.placements[u.crossTileID] && this.prevPlacement.placements[u.crossTileID].text && (_e237 = this.prevPlacement.variableOffsets[u.crossTileID].anchor), this.variableOffsets[u.crossTileID] = {\n              textOffset: p,\n              width: i,\n              height: o,\n              anchor: t,\n              textBoxScale: a,\n              prevAnchor: _e237\n            }, this.markUsedJustification(d, t, u, m), d.allowVerticalPlacement && (this.markUsedOrientation(d, m, u), this.placedOrientations[u.crossTileID] = m), {\n              shift: f,\n              placedGlyphBoxes: g\n            };\n          }\n        }\n      }, {\n        key: \"placeLayerBucketPart\",\n        value: function placeLayerBucketPart(e, i, o) {\n          var _this60 = this;\n\n          var _e$parameters = e.parameters,\n              a = _e$parameters.bucket,\n              s = _e$parameters.layout,\n              r = _e$parameters.posMatrix,\n              n = _e$parameters.textLabelPlaneMatrix,\n              l = _e$parameters.labelToScreenMatrix,\n              c = _e$parameters.textPixelRatio,\n              h = _e$parameters.holdingForFade,\n              u = _e$parameters.collisionBoxArray,\n              d = _e$parameters.partiallyEvaluatedTextSize,\n              m = _e$parameters.collisionGroup,\n              _ = s.get(\"text-optional\"),\n              p = s.get(\"icon-optional\"),\n              f = t.getOverlapMode(s, \"text-overlap\", \"text-allow-overlap\"),\n              g = \"always\" === f,\n              x = t.getOverlapMode(s, \"icon-overlap\", \"icon-allow-overlap\"),\n              v = \"always\" === x,\n              y = \"map\" === s.get(\"text-rotation-alignment\"),\n              b = \"map\" === s.get(\"text-pitch-alignment\"),\n              w = \"none\" !== s.get(\"icon-text-fit\"),\n              T = \"viewport-y\" === s.get(\"symbol-z-order\"),\n              E = g && (v || !a.hasIconData() || p),\n              I = v && (g || !a.hasTextData() || _);\n\n          !a.collisionArrays && u && a.deserializeCollisionBoxes(u);\n\n          var S = function S(e, u) {\n            if (i[e.crossTileID]) return;\n            if (h) return void (_this60.placements[e.crossTileID] = new Pt(!1, !1, !1));\n            var v = !1,\n                T = !1,\n                S = !0,\n                C = null,\n                P = {\n              box: null,\n              offscreen: null\n            },\n                z = {\n              box: null,\n              offscreen: null\n            },\n                D = null,\n                A = null,\n                M = null,\n                L = 0,\n                R = 0,\n                k = 0;\n            u.textFeatureIndex ? L = u.textFeatureIndex : e.useRuntimeCollisionCircles && (L = e.featureIndex), u.verticalTextFeatureIndex && (R = u.verticalTextFeatureIndex);\n            var B = u.textBox;\n\n            if (B) {\n              var _i177 = function _i177(i) {\n                var o = t.WritingMode.horizontal;\n\n                if (a.allowVerticalPlacement && !i && _this60.prevPlacement) {\n                  var _t255 = _this60.prevPlacement.placedOrientations[e.crossTileID];\n                  _t255 && (_this60.placedOrientations[e.crossTileID] = _t255, o = _t255, _this60.markUsedOrientation(a, o, e));\n                }\n\n                return o;\n              },\n                  _o83 = function _o83(i, o) {\n                if (a.allowVerticalPlacement && e.numVerticalGlyphVertices > 0 && u.verticalTextBox) {\n                  var _iterator173 = _createForOfIteratorHelper(a.writingModes),\n                      _step173;\n\n                  try {\n                    for (_iterator173.s(); !(_step173 = _iterator173.n()).done;) {\n                      var _e238 = _step173.value;\n                      if (_e238 === t.WritingMode.vertical ? (P = o(), z = P) : P = i(), P && P.box && P.box.length) break;\n                    }\n                  } catch (err) {\n                    _iterator173.e(err);\n                  } finally {\n                    _iterator173.f();\n                  }\n                } else P = i();\n              };\n\n              if (s.get(\"text-variable-anchor\")) {\n                var _n127 = s.get(\"text-variable-anchor\");\n\n                if (_this60.prevPlacement && _this60.prevPlacement.variableOffsets[e.crossTileID]) {\n                  var _t256 = _this60.prevPlacement.variableOffsets[e.crossTileID];\n                  _n127.indexOf(_t256.anchor) > 0 && (_n127 = _n127.filter(function (e) {\n                    return e !== _t256.anchor;\n                  }), _n127.unshift(_t256.anchor));\n                }\n\n                var _l45 = function _l45(t, i, o) {\n                  var s = t.x2 - t.x1,\n                      l = t.y2 - t.y1,\n                      h = e.textBoxScale,\n                      u = w && \"never\" === x ? i : null;\n                  var d = {\n                    box: [],\n                    offscreen: !1\n                  };\n\n                  var _ = \"never\" !== f ? 2 * _n127.length : _n127.length;\n\n                  for (var _i178 = 0; _i178 < _; ++_i178) {\n                    var _7 = _this60.attemptAnchorPlacement(_n127[_i178 % _n127.length], t, s, l, h, y, b, c, r, m, _i178 >= _n127.length ? f : \"never\", e, a, o, u);\n\n                    if (_7 && (d = _7.placedGlyphBoxes, d && d.box && d.box.length)) {\n                      v = !0, C = _7.shift;\n                      break;\n                    }\n                  }\n\n                  return d;\n                };\n\n                _o83(function () {\n                  return _l45(B, u.iconBox, t.WritingMode.horizontal);\n                }, function () {\n                  var i = u.verticalTextBox;\n                  return a.allowVerticalPlacement && !(P && P.box && P.box.length) && e.numVerticalGlyphVertices > 0 && i ? _l45(i, u.verticalIconBox, t.WritingMode.vertical) : {\n                    box: null,\n                    offscreen: null\n                  };\n                }), P && (v = P.box, S = P.offscreen);\n\n                var _h20 = _i177(P && P.box);\n\n                if (!v && _this60.prevPlacement) {\n                  var _t257 = _this60.prevPlacement.variableOffsets[e.crossTileID];\n                  _t257 && (_this60.variableOffsets[e.crossTileID] = _t257, _this60.markUsedJustification(a, _t257.anchor, e, _h20));\n                }\n              } else {\n                var _s96 = function _s96(t, i) {\n                  var o = _this60.collisionIndex.placeCollisionBox(t, f, c, r, m.predicate);\n\n                  return o && o.box && o.box.length && (_this60.markUsedOrientation(a, i, e), _this60.placedOrientations[e.crossTileID] = i), o;\n                };\n\n                _o83(function () {\n                  return _s96(B, t.WritingMode.horizontal);\n                }, function () {\n                  var i = u.verticalTextBox;\n                  return a.allowVerticalPlacement && e.numVerticalGlyphVertices > 0 && i ? _s96(i, t.WritingMode.vertical) : {\n                    box: null,\n                    offscreen: null\n                  };\n                }), _i177(P && P.box && P.box.length);\n              }\n            }\n\n            if (D = P, v = D && D.box && D.box.length > 0, S = D && D.offscreen, e.useRuntimeCollisionCircles) {\n              var _i179 = a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),\n                  _c27 = t.evaluateSizeForFeature(a.textSizeData, d, _i179),\n                  _h21 = s.get(\"text-padding\");\n\n              A = _this60.collisionIndex.placeCollisionCircles(f, _i179, a.lineVertexArray, a.glyphOffsetArray, _c27, r, n, l, o, b, m.predicate, e.collisionCircleDiameter, _h21), v = g || A.circles.length > 0 && !A.collisionDetected, S = S && A.offscreen;\n            }\n\n            if (u.iconFeatureIndex && (k = u.iconFeatureIndex), u.iconBox) {\n              var _t258 = function _t258(t) {\n                var e = w && C ? Lt(t, C.x, C.y, y, b, _this60.transform.angle) : t;\n                return _this60.collisionIndex.placeCollisionBox(e, x, c, r, m.predicate);\n              };\n\n              z && z.box && z.box.length && u.verticalIconBox ? (M = _t258(u.verticalIconBox), T = M.box.length > 0) : (M = _t258(u.iconBox), T = M.box.length > 0), S = S && M.offscreen;\n            }\n\n            var F = _ || 0 === e.numHorizontalGlyphVertices && 0 === e.numVerticalGlyphVertices,\n                O = p || 0 === e.numIconVertices;\n\n            if (F || O ? O ? F || (T = T && v) : v = T && v : T = v = T && v, v && D && D.box && _this60.collisionIndex.insertCollisionBox(D.box, f, s.get(\"text-ignore-placement\"), a.bucketInstanceId, z && z.box && R ? R : L, m.ID), T && M && _this60.collisionIndex.insertCollisionBox(M.box, x, s.get(\"icon-ignore-placement\"), a.bucketInstanceId, k, m.ID), A && (v && _this60.collisionIndex.insertCollisionCircles(A.circles, f, s.get(\"text-ignore-placement\"), a.bucketInstanceId, L, m.ID), o)) {\n              var _t259 = a.bucketInstanceId;\n              var _e239 = _this60.collisionCircleArrays[_t259];\n              void 0 === _e239 && (_e239 = _this60.collisionCircleArrays[_t259] = new zt());\n\n              for (var _t260 = 0; _t260 < A.circles.length; _t260 += 4) {\n                _e239.circles.push(A.circles[_t260 + 0]), _e239.circles.push(A.circles[_t260 + 1]), _e239.circles.push(A.circles[_t260 + 2]), _e239.circles.push(A.collisionDetected ? 1 : 0);\n              }\n            }\n\n            _this60.placements[e.crossTileID] = new Pt(v || E, T || I, S || a.justReloaded), i[e.crossTileID] = !0;\n          };\n\n          if (T) {\n            var _t261 = a.getSortedSymbolIndexes(this.transform.angle);\n\n            for (var _e240 = _t261.length - 1; _e240 >= 0; --_e240) {\n              var _i180 = _t261[_e240];\n              S(a.symbolInstances.get(_i180), a.collisionArrays[_i180]);\n            }\n          } else for (var _t262 = e.symbolInstanceStart; _t262 < e.symbolInstanceEnd; _t262++) {\n            S(a.symbolInstances.get(_t262), a.collisionArrays[_t262]);\n          }\n\n          if (o && a.bucketInstanceId in this.collisionCircleArrays) {\n            var _e241 = this.collisionCircleArrays[a.bucketInstanceId];\n            t.invert(_e241.invProjMatrix, r), _e241.viewportMatrix = this.collisionIndex.getViewportMatrix();\n          }\n\n          a.justReloaded = !1;\n        }\n      }, {\n        key: \"markUsedJustification\",\n        value: function markUsedJustification(e, i, o, a) {\n          var s;\n          s = a === t.WritingMode.vertical ? o.verticalPlacedTextSymbolIndex : {\n            left: o.leftJustifiedTextSymbolIndex,\n            center: o.centerJustifiedTextSymbolIndex,\n            right: o.rightJustifiedTextSymbolIndex\n          }[t.getAnchorJustification(i)];\n          var r = [o.leftJustifiedTextSymbolIndex, o.centerJustifiedTextSymbolIndex, o.rightJustifiedTextSymbolIndex, o.verticalPlacedTextSymbolIndex];\n\n          for (var _i181 = 0, _r176 = r; _i181 < _r176.length; _i181++) {\n            var _t263 = _r176[_i181];\n            _t263 >= 0 && (e.text.placedSymbolArray.get(_t263).crossTileID = s >= 0 && _t263 !== s ? 0 : o.crossTileID);\n          }\n        }\n      }, {\n        key: \"markUsedOrientation\",\n        value: function markUsedOrientation(e, i, o) {\n          var a = i === t.WritingMode.horizontal || i === t.WritingMode.horizontalOnly ? i : 0,\n              s = i === t.WritingMode.vertical ? i : 0,\n              r = [o.leftJustifiedTextSymbolIndex, o.centerJustifiedTextSymbolIndex, o.rightJustifiedTextSymbolIndex];\n\n          for (var _i182 = 0, _r177 = r; _i182 < _r177.length; _i182++) {\n            var _t264 = _r177[_i182];\n            e.text.placedSymbolArray.get(_t264).placedOrientation = a;\n          }\n\n          o.verticalPlacedTextSymbolIndex && (e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation = s);\n        }\n      }, {\n        key: \"commit\",\n        value: function commit(t) {\n          this.commitTime = t, this.zoomAtLastRecencyCheck = this.transform.zoom;\n          var e = this.prevPlacement;\n          var i = !1;\n          this.prevZoomAdjustment = e ? e.zoomAdjustment(this.transform.zoom) : 0;\n          var o = e ? e.symbolFadeChange(t) : 1,\n              a = e ? e.opacities : {},\n              s = e ? e.variableOffsets : {},\n              r = e ? e.placedOrientations : {};\n\n          for (var _t265 in this.placements) {\n            var _e242 = this.placements[_t265],\n                _s97 = a[_t265];\n            _s97 ? (this.opacities[_t265] = new Ct(_s97, o, _e242.text, _e242.icon), i = i || _e242.text !== _s97.text.placed || _e242.icon !== _s97.icon.placed) : (this.opacities[_t265] = new Ct(null, o, _e242.text, _e242.icon, _e242.skipFade), i = i || _e242.text || _e242.icon);\n          }\n\n          for (var _t266 in a) {\n            var _e243 = a[_t266];\n\n            if (!this.opacities[_t266]) {\n              var _a93 = new Ct(_e243, o, !1, !1);\n\n              _a93.isHidden() || (this.opacities[_t266] = _a93, i = i || _e243.text.placed || _e243.icon.placed);\n            }\n          }\n\n          for (var _t267 in s) {\n            this.variableOffsets[_t267] || !this.opacities[_t267] || this.opacities[_t267].isHidden() || (this.variableOffsets[_t267] = s[_t267]);\n          }\n\n          for (var _t268 in r) {\n            this.placedOrientations[_t268] || !this.opacities[_t268] || this.opacities[_t268].isHidden() || (this.placedOrientations[_t268] = r[_t268]);\n          }\n\n          i ? this.lastPlacementChangeTime = t : \"number\" != typeof this.lastPlacementChangeTime && (this.lastPlacementChangeTime = e ? e.lastPlacementChangeTime : t);\n        }\n      }, {\n        key: \"updateLayerOpacities\",\n        value: function updateLayerOpacities(t, e) {\n          var i = {};\n\n          var _iterator174 = _createForOfIteratorHelper(e),\n              _step174;\n\n          try {\n            for (_iterator174.s(); !(_step174 = _iterator174.n()).done;) {\n              var _o84 = _step174.value;\n\n              var _e244 = _o84.getBucket(t);\n\n              _e244 && _o84.latestFeatureIndex && t.id === _e244.layerIds[0] && this.updateBucketOpacities(_e244, i, _o84.collisionBoxArray);\n            }\n          } catch (err) {\n            _iterator174.e(err);\n          } finally {\n            _iterator174.f();\n          }\n        }\n      }, {\n        key: \"updateBucketOpacities\",\n        value: function updateBucketOpacities(e, i, o) {\n          var _this61 = this;\n\n          e.hasTextData() && e.text.opacityVertexArray.clear(), e.hasIconData() && e.icon.opacityVertexArray.clear(), e.hasIconCollisionBoxData() && e.iconCollisionBox.collisionVertexArray.clear(), e.hasTextCollisionBoxData() && e.textCollisionBox.collisionVertexArray.clear();\n          var a = e.layers[0].layout,\n              s = new Ct(null, 0, !1, !1, !0),\n              r = a.get(\"text-allow-overlap\"),\n              n = a.get(\"icon-allow-overlap\"),\n              l = a.get(\"text-variable-anchor\"),\n              c = \"map\" === a.get(\"text-rotation-alignment\"),\n              h = \"map\" === a.get(\"text-pitch-alignment\"),\n              u = \"none\" !== a.get(\"icon-text-fit\"),\n              d = new Ct(null, 0, r && (n || !e.hasIconData() || a.get(\"icon-optional\")), n && (r || !e.hasTextData() || a.get(\"text-optional\")), !0);\n          !e.collisionArrays && o && (e.hasIconCollisionBoxData() || e.hasTextCollisionBoxData()) && e.deserializeCollisionBoxes(o);\n\n          var m = function m(t, e, i) {\n            for (var _o85 = 0; _o85 < e / 4; _o85++) {\n              t.opacityVertexArray.emplaceBack(i);\n            }\n          };\n\n          var _loop5 = function _loop5(_o86) {\n            var a = e.symbolInstances.get(_o86),\n                r = a.numHorizontalGlyphVertices,\n                n = a.numVerticalGlyphVertices,\n                _ = a.crossTileID;\n            var p = _this61.opacities[_];\n            i[_] ? p = s : p || (p = d, _this61.opacities[_] = p), i[_] = !0;\n            var f = a.numIconVertices > 0,\n                g = _this61.placedOrientations[a.crossTileID],\n                x = g === t.WritingMode.vertical,\n                v = g === t.WritingMode.horizontal || g === t.WritingMode.horizontalOnly;\n\n            if (r > 0 || n > 0) {\n              var _t270 = qt(p.text);\n\n              m(e.text, r, x ? Vt : _t270), m(e.text, n, v ? Vt : _t270);\n\n              var _i183 = p.text.isHidden();\n\n              [a.rightJustifiedTextSymbolIndex, a.centerJustifiedTextSymbolIndex, a.leftJustifiedTextSymbolIndex].forEach(function (t) {\n                t >= 0 && (e.text.placedSymbolArray.get(t).hidden = _i183 || x ? 1 : 0);\n              }), a.verticalPlacedTextSymbolIndex >= 0 && (e.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden = _i183 || v ? 1 : 0);\n              var _o87 = _this61.variableOffsets[a.crossTileID];\n              _o87 && _this61.markUsedJustification(e, _o87.anchor, a, g);\n              var _s98 = _this61.placedOrientations[a.crossTileID];\n              _s98 && (_this61.markUsedJustification(e, \"left\", a, _s98), _this61.markUsedOrientation(e, _s98, a));\n            }\n\n            if (f) {\n              var _t271 = qt(p.icon),\n                  _i184 = !(u && a.verticalPlacedIconSymbolIndex && x);\n\n              a.placedIconSymbolIndex >= 0 && (m(e.icon, a.numIconVertices, _i184 ? _t271 : Vt), e.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden = p.icon.isHidden()), a.verticalPlacedIconSymbolIndex >= 0 && (m(e.icon, a.numVerticalIconVertices, _i184 ? Vt : _t271), e.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden = p.icon.isHidden());\n            }\n\n            if (e.hasIconCollisionBoxData() || e.hasTextCollisionBoxData()) {\n              var _i185 = e.collisionArrays[_o86];\n\n              if (_i185) {\n                var _o88 = new t.pointGeometry(0, 0);\n\n                if (_i185.textBox || _i185.verticalTextBox) {\n                  var _t272 = !0;\n\n                  if (l) {\n                    var _e245 = _this61.variableOffsets[_];\n                    _e245 ? (_o88 = Mt(_e245.anchor, _e245.width, _e245.height, _e245.textOffset, _e245.textBoxScale), c && _o88._rotate(h ? _this61.transform.angle : -_this61.transform.angle)) : _t272 = !1;\n                  }\n\n                  _i185.textBox && kt(e.textCollisionBox.collisionVertexArray, p.text.placed, !_t272 || x, _o88.x, _o88.y), _i185.verticalTextBox && kt(e.textCollisionBox.collisionVertexArray, p.text.placed, !_t272 || v, _o88.x, _o88.y);\n                }\n\n                var _a94 = Boolean(!v && _i185.verticalIconBox);\n\n                _i185.iconBox && kt(e.iconCollisionBox.collisionVertexArray, p.icon.placed, _a94, u ? _o88.x : 0, u ? _o88.y : 0), _i185.verticalIconBox && kt(e.iconCollisionBox.collisionVertexArray, p.icon.placed, !_a94, u ? _o88.x : 0, u ? _o88.y : 0);\n              }\n            }\n          };\n\n          for (var _o86 = 0; _o86 < e.symbolInstances.length; _o86++) {\n            _loop5(_o86);\n          }\n\n          if (e.sortFeatures(this.transform.angle), this.retainedQueryData[e.bucketInstanceId] && (this.retainedQueryData[e.bucketInstanceId].featureSortOrder = e.featureSortOrder), e.hasTextData() && e.text.opacityVertexBuffer && e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray), e.hasIconData() && e.icon.opacityVertexBuffer && e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray), e.hasIconCollisionBoxData() && e.iconCollisionBox.collisionVertexBuffer && e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray), e.hasTextCollisionBoxData() && e.textCollisionBox.collisionVertexBuffer && e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray), e.bucketInstanceId in this.collisionCircleArrays) {\n            var _t269 = this.collisionCircleArrays[e.bucketInstanceId];\n            e.placementInvProjMatrix = _t269.invProjMatrix, e.placementViewportMatrix = _t269.viewportMatrix, e.collisionCircleArray = _t269.circles, delete this.collisionCircleArrays[e.bucketInstanceId];\n          }\n        }\n      }, {\n        key: \"symbolFadeChange\",\n        value: function symbolFadeChange(t) {\n          return 0 === this.fadeDuration ? 1 : (t - this.commitTime) / this.fadeDuration + this.prevZoomAdjustment;\n        }\n      }, {\n        key: \"zoomAdjustment\",\n        value: function zoomAdjustment(t) {\n          return Math.max(0, (this.transform.zoom - t) / 1.5);\n        }\n      }, {\n        key: \"hasTransitions\",\n        value: function hasTransitions(t) {\n          return this.stale || t - this.lastPlacementChangeTime < this.fadeDuration;\n        }\n      }, {\n        key: \"stillRecent\",\n        value: function stillRecent(t, e) {\n          var i = this.zoomAtLastRecencyCheck === e ? 1 - this.zoomAdjustment(e) : 1;\n          return this.zoomAtLastRecencyCheck = e, this.commitTime + this.fadeDuration * i > t;\n        }\n      }, {\n        key: \"setStale\",\n        value: function setStale() {\n          this.stale = !0;\n        }\n      }]);\n\n      return Rt;\n    }();\n\n    function kt(t, e, i, o, a) {\n      t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0), t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0), t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0), t.emplaceBack(e ? 1 : 0, i ? 1 : 0, o || 0, a || 0);\n    }\n\n    var Bt = Math.pow(2, 25),\n        Ft = Math.pow(2, 24),\n        Ot = Math.pow(2, 17),\n        Ut = Math.pow(2, 16),\n        Nt = Math.pow(2, 9),\n        Gt = Math.pow(2, 8),\n        Zt = Math.pow(2, 1);\n\n    function qt(t) {\n      if (0 === t.opacity && !t.placed) return 0;\n      if (1 === t.opacity && t.placed) return 4294967295;\n      var e = t.placed ? 1 : 0,\n          i = Math.floor(127 * t.opacity);\n      return i * Bt + e * Ft + i * Ot + e * Ut + i * Nt + e * Gt + i * Zt + e;\n    }\n\n    var Vt = 0;\n\n    var jt = /*#__PURE__*/function () {\n      function jt(t) {\n        _classCallCheck(this, jt);\n\n        this._sortAcrossTiles = \"viewport-y\" !== t.layout.get(\"symbol-z-order\") && !t.layout.get(\"symbol-sort-key\").isConstant(), this._currentTileIndex = 0, this._currentPartIndex = 0, this._seenCrossTileIDs = {}, this._bucketParts = [];\n      }\n\n      _createClass(jt, [{\n        key: \"continuePlacement\",\n        value: function continuePlacement(t, e, i, o, a) {\n          var s = this._bucketParts;\n\n          for (; this._currentTileIndex < t.length;) {\n            if (e.getBucketParts(s, o, t[this._currentTileIndex], this._sortAcrossTiles), this._currentTileIndex++, a()) return !0;\n          }\n\n          for (this._sortAcrossTiles && (this._sortAcrossTiles = !1, s.sort(function (t, e) {\n            return t.sortKey - e.sortKey;\n          })); this._currentPartIndex < s.length;) {\n            if (e.placeLayerBucketPart(s[this._currentPartIndex], this._seenCrossTileIDs, i), this._currentPartIndex++, a()) return !0;\n          }\n\n          return !1;\n        }\n      }]);\n\n      return jt;\n    }();\n\n    var $t = /*#__PURE__*/function () {\n      function $t(t, e, i, o, a, s, r) {\n        _classCallCheck(this, $t);\n\n        this.placement = new Rt(t, a, s, r), this._currentPlacementIndex = e.length - 1, this._forceFullPlacement = i, this._showCollisionBoxes = o, this._done = !1;\n      }\n\n      _createClass($t, [{\n        key: \"isDone\",\n        value: function isDone() {\n          return this._done;\n        }\n      }, {\n        key: \"continuePlacement\",\n        value: function continuePlacement(e, i, o) {\n          var _this62 = this;\n\n          var a = t.exported.now(),\n              s = function s() {\n            var e = t.exported.now() - a;\n            return !_this62._forceFullPlacement && e > 2;\n          };\n\n          for (; this._currentPlacementIndex >= 0;) {\n            var _t273 = i[e[this._currentPlacementIndex]],\n                _a95 = this.placement.collisionIndex.transform.zoom;\n\n            if (\"symbol\" === _t273.type && (!_t273.minzoom || _t273.minzoom <= _a95) && (!_t273.maxzoom || _t273.maxzoom > _a95)) {\n              if (this._inProgressLayer || (this._inProgressLayer = new jt(_t273)), this._inProgressLayer.continuePlacement(o[_t273.source], this.placement, this._showCollisionBoxes, _t273, s)) return;\n              delete this._inProgressLayer;\n            }\n\n            this._currentPlacementIndex--;\n          }\n\n          this._done = !0;\n        }\n      }, {\n        key: \"commit\",\n        value: function commit(t) {\n          return this.placement.commit(t), this.placement;\n        }\n      }]);\n\n      return $t;\n    }();\n\n    var Wt = 512 / t.EXTENT / 2;\n\n    var Xt = /*#__PURE__*/function () {\n      function Xt(t, e, i) {\n        _classCallCheck(this, Xt);\n\n        this.tileID = t, this.indexedSymbolInstances = {}, this.bucketInstanceId = i;\n\n        for (var _i186 = 0; _i186 < e.length; _i186++) {\n          var _o89 = e.get(_i186),\n              _a96 = _o89.key;\n\n          this.indexedSymbolInstances[_a96] || (this.indexedSymbolInstances[_a96] = []), this.indexedSymbolInstances[_a96].push({\n            crossTileID: _o89.crossTileID,\n            coord: this.getScaledCoordinates(_o89, t)\n          });\n        }\n      }\n\n      _createClass(Xt, [{\n        key: \"getScaledCoordinates\",\n        value: function getScaledCoordinates(e, i) {\n          var o = Wt / Math.pow(2, i.canonical.z - this.tileID.canonical.z);\n          return {\n            x: Math.floor((i.canonical.x * t.EXTENT + e.anchorX) * o),\n            y: Math.floor((i.canonical.y * t.EXTENT + e.anchorY) * o)\n          };\n        }\n      }, {\n        key: \"findMatches\",\n        value: function findMatches(t, e, i) {\n          var o = this.tileID.canonical.z < e.canonical.z ? 1 : Math.pow(2, this.tileID.canonical.z - e.canonical.z);\n\n          for (var _a97 = 0; _a97 < t.length; _a97++) {\n            var _s99 = t.get(_a97);\n\n            if (_s99.crossTileID) continue;\n            var _r178 = this.indexedSymbolInstances[_s99.key];\n            if (!_r178) continue;\n\n            var _n128 = this.getScaledCoordinates(_s99, e);\n\n            var _iterator175 = _createForOfIteratorHelper(_r178),\n                _step175;\n\n            try {\n              for (_iterator175.s(); !(_step175 = _iterator175.n()).done;) {\n                var _t274 = _step175.value;\n\n                if (Math.abs(_t274.coord.x - _n128.x) <= o && Math.abs(_t274.coord.y - _n128.y) <= o && !i[_t274.crossTileID]) {\n                  i[_t274.crossTileID] = !0, _s99.crossTileID = _t274.crossTileID;\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator175.e(err);\n            } finally {\n              _iterator175.f();\n            }\n          }\n        }\n      }]);\n\n      return Xt;\n    }();\n\n    var Ht = /*#__PURE__*/function () {\n      function Ht() {\n        _classCallCheck(this, Ht);\n\n        this.maxCrossTileID = 0;\n      }\n\n      _createClass(Ht, [{\n        key: \"generate\",\n        value: function generate() {\n          return ++this.maxCrossTileID;\n        }\n      }]);\n\n      return Ht;\n    }();\n\n    var Kt = /*#__PURE__*/function () {\n      function Kt() {\n        _classCallCheck(this, Kt);\n\n        this.indexes = {}, this.usedCrossTileIDs = {}, this.lng = 0;\n      }\n\n      _createClass(Kt, [{\n        key: \"handleWrapJump\",\n        value: function handleWrapJump(t) {\n          var e = Math.round((t - this.lng) / 360);\n          if (0 !== e) for (var _t275 in this.indexes) {\n            var _i187 = this.indexes[_t275],\n                _o90 = {};\n\n            for (var _t276 in _i187) {\n              var _a98 = _i187[_t276];\n              _a98.tileID = _a98.tileID.unwrapTo(_a98.tileID.wrap + e), _o90[_a98.tileID.key] = _a98;\n            }\n\n            this.indexes[_t275] = _o90;\n          }\n          this.lng = t;\n        }\n      }, {\n        key: \"addBucket\",\n        value: function addBucket(t, e, i) {\n          if (this.indexes[t.overscaledZ] && this.indexes[t.overscaledZ][t.key]) {\n            if (this.indexes[t.overscaledZ][t.key].bucketInstanceId === e.bucketInstanceId) return !1;\n            this.removeBucketCrossTileIDs(t.overscaledZ, this.indexes[t.overscaledZ][t.key]);\n          }\n\n          for (var _t277 = 0; _t277 < e.symbolInstances.length; _t277++) {\n            e.symbolInstances.get(_t277).crossTileID = 0;\n          }\n\n          this.usedCrossTileIDs[t.overscaledZ] || (this.usedCrossTileIDs[t.overscaledZ] = {});\n          var o = this.usedCrossTileIDs[t.overscaledZ];\n\n          for (var _i188 in this.indexes) {\n            var _a99 = this.indexes[_i188];\n            if (Number(_i188) > t.overscaledZ) for (var _i189 in _a99) {\n              var _s100 = _a99[_i189];\n              _s100.tileID.isChildOf(t) && _s100.findMatches(e.symbolInstances, t, o);\n            } else {\n              var _s101 = _a99[t.scaledTo(Number(_i188)).key];\n\n              _s101 && _s101.findMatches(e.symbolInstances, t, o);\n            }\n          }\n\n          for (var _t278 = 0; _t278 < e.symbolInstances.length; _t278++) {\n            var _a100 = e.symbolInstances.get(_t278);\n\n            _a100.crossTileID || (_a100.crossTileID = i.generate(), o[_a100.crossTileID] = !0);\n          }\n\n          return void 0 === this.indexes[t.overscaledZ] && (this.indexes[t.overscaledZ] = {}), this.indexes[t.overscaledZ][t.key] = new Xt(t, e.symbolInstances, e.bucketInstanceId), !0;\n        }\n      }, {\n        key: \"removeBucketCrossTileIDs\",\n        value: function removeBucketCrossTileIDs(t, e) {\n          for (var _i190 in e.indexedSymbolInstances) {\n            var _iterator176 = _createForOfIteratorHelper(e.indexedSymbolInstances[_i190]),\n                _step176;\n\n            try {\n              for (_iterator176.s(); !(_step176 = _iterator176.n()).done;) {\n                var _o91 = _step176.value;\n                delete this.usedCrossTileIDs[t][_o91.crossTileID];\n              }\n            } catch (err) {\n              _iterator176.e(err);\n            } finally {\n              _iterator176.f();\n            }\n          }\n        }\n      }, {\n        key: \"removeStaleBuckets\",\n        value: function removeStaleBuckets(t) {\n          var e = !1;\n\n          for (var _i191 in this.indexes) {\n            var _o92 = this.indexes[_i191];\n\n            for (var _a101 in _o92) {\n              t[_o92[_a101].bucketInstanceId] || (this.removeBucketCrossTileIDs(_i191, _o92[_a101]), delete _o92[_a101], e = !0);\n            }\n          }\n\n          return e;\n        }\n      }]);\n\n      return Kt;\n    }();\n\n    var Yt = /*#__PURE__*/function () {\n      function Yt() {\n        _classCallCheck(this, Yt);\n\n        this.layerIndexes = {}, this.crossTileIDs = new Ht(), this.maxBucketInstanceId = 0, this.bucketsInCurrentPlacement = {};\n      }\n\n      _createClass(Yt, [{\n        key: \"addLayer\",\n        value: function addLayer(t, e, i) {\n          var o = this.layerIndexes[t.id];\n          void 0 === o && (o = this.layerIndexes[t.id] = new Kt());\n          var a = !1;\n          var s = {};\n          o.handleWrapJump(i);\n\n          var _iterator177 = _createForOfIteratorHelper(e),\n              _step177;\n\n          try {\n            for (_iterator177.s(); !(_step177 = _iterator177.n()).done;) {\n              var _i192 = _step177.value;\n\n              var _e246 = _i192.getBucket(t);\n\n              _e246 && t.id === _e246.layerIds[0] && (_e246.bucketInstanceId || (_e246.bucketInstanceId = ++this.maxBucketInstanceId), o.addBucket(_i192.tileID, _e246, this.crossTileIDs) && (a = !0), s[_e246.bucketInstanceId] = !0);\n            }\n          } catch (err) {\n            _iterator177.e(err);\n          } finally {\n            _iterator177.f();\n          }\n\n          return o.removeStaleBuckets(s) && (a = !0), a;\n        }\n      }, {\n        key: \"pruneUnusedLayers\",\n        value: function pruneUnusedLayers(t) {\n          var e = {};\n          t.forEach(function (t) {\n            e[t] = !0;\n          });\n\n          for (var _t279 in this.layerIndexes) {\n            e[_t279] || delete this.layerIndexes[_t279];\n          }\n        }\n      }]);\n\n      return Yt;\n    }();\n\n    var Jt = function Jt(e, i) {\n      return t.emitValidationErrors(e, i && i.filter(function (t) {\n        return \"source.canvas\" !== t.identifier;\n      }));\n    },\n        Qt = t.pick(J, [\"addLayer\", \"removeLayer\", \"setPaintProperty\", \"setLayoutProperty\", \"setFilter\", \"addSource\", \"removeSource\", \"setLayerZoomRange\", \"setLight\", \"setTransition\", \"setGeoJSONSourceData\"]),\n        te = t.pick(J, [\"setCenter\", \"setZoom\", \"setBearing\", \"setPitch\"]),\n        ee = function () {\n      var e = {},\n          i = t.spec.$version;\n\n      for (var _o93 in t.spec.$root) {\n        var _a102 = t.spec.$root[_o93];\n\n        if (_a102.required) {\n          var _t280 = null;\n          _t280 = \"version\" === _o93 ? i : \"array\" === _a102.type ? [] : {}, null != _t280 && (e[_o93] = _t280);\n        }\n      }\n\n      return e;\n    }();\n\n    var ie = /*#__PURE__*/function (_t$Evented8) {\n      _inherits(ie, _t$Evented8);\n\n      function ie(e) {\n        var _this63;\n\n        var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, ie);\n\n        _this63 = _possibleConstructorReturn(this, _getPrototypeOf(ie).call(this)), _this63.map = e, _this63.dispatcher = new T(H(), _assertThisInitialized(_assertThisInitialized(_this63))), _this63.imageManager = new _(), _this63.imageManager.setEventedParent(_assertThisInitialized(_assertThisInitialized(_this63))), _this63.glyphManager = new x(e._requestManager, i.localIdeographFontFamily), _this63.lineAtlas = new w(256, 512), _this63.crossTileSymbolIndex = new Yt(), _this63._layers = {}, _this63._serializedLayers = {}, _this63._order = [], _this63.sourceCaches = {}, _this63.zoomHistory = new t.ZoomHistory(), _this63._loaded = !1, _this63._availableImages = [], _this63._resetUpdates(), _this63.dispatcher.broadcast(\"setReferrer\", t.getReferrer());\n\n        var o = _assertThisInitialized(_assertThisInitialized(_this63));\n\n        _this63._rtlTextPluginCallback = ie.registerForPluginStateChange(function (e) {\n          o.dispatcher.broadcast(\"syncRTLPluginState\", {\n            pluginStatus: e.pluginStatus,\n            pluginURL: e.pluginURL\n          }, function (e, i) {\n            if (t.triggerPluginCompletionEvent(e), i && i.every(function (t) {\n              return t;\n            })) for (var _t281 in o.sourceCaches) {\n              o.sourceCaches[_t281].reload();\n            }\n          });\n        }), _this63.on(\"data\", function (t) {\n          if (\"source\" !== t.dataType || \"metadata\" !== t.sourceDataType) return;\n          var e = _this63.sourceCaches[t.sourceId];\n          if (!e) return;\n          var i = e.getSource();\n          if (i && i.vectorLayerIds) for (var _t282 in _this63._layers) {\n            var _e247 = _this63._layers[_t282];\n            _e247.source === i.id && _this63._validateLayer(_e247);\n          }\n        });\n        return _this63;\n      }\n\n      _createClass(ie, [{\n        key: \"loadURL\",\n        value: function loadURL(e) {\n          var _this64 = this;\n\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this.fire(new t.Event(\"dataloading\", {\n            dataType: \"style\"\n          }));\n\n          var o = \"boolean\" != typeof i.validate || i.validate,\n              a = this.map._requestManager.transformRequest(e, t.ResourceType.Style);\n\n          this._request = t.getJSON(a, function (e, i) {\n            _this64._request = null, e ? _this64.fire(new t.ErrorEvent(e)) : i && _this64._load(i, o);\n          });\n        }\n      }, {\n        key: \"loadJSON\",\n        value: function loadJSON(e) {\n          var _this65 = this;\n\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          this.fire(new t.Event(\"dataloading\", {\n            dataType: \"style\"\n          })), this._request = t.exported.frame(function () {\n            _this65._request = null, _this65._load(e, !1 !== i.validate);\n          });\n        }\n      }, {\n        key: \"loadEmpty\",\n        value: function loadEmpty() {\n          this.fire(new t.Event(\"dataloading\", {\n            dataType: \"style\"\n          })), this._load(ee, !1);\n        }\n      }, {\n        key: \"_load\",\n        value: function _load(e, i) {\n          if (i && Jt(this, t.validateStyle(e))) return;\n          this._loaded = !0, this.stylesheet = e;\n\n          for (var _t283 in e.sources) {\n            this.addSource(_t283, e.sources[_t283], {\n              validate: !1\n            });\n          }\n\n          e.sprite ? this._loadSprite(e.sprite) : this.imageManager.setLoaded(!0), this.glyphManager.setURL(e.glyphs);\n          var o = Y(this.stylesheet.layers);\n          this._order = o.map(function (t) {\n            return t.id;\n          }), this._layers = {}, this._serializedLayers = {};\n\n          var _iterator178 = _createForOfIteratorHelper(o),\n              _step178;\n\n          try {\n            for (_iterator178.s(); !(_step178 = _iterator178.n()).done;) {\n              var _e248 = _step178.value;\n              _e248 = t.createStyleLayer(_e248), _e248.setEventedParent(this, {\n                layer: {\n                  id: _e248.id\n                }\n              }), this._layers[_e248.id] = _e248, this._serializedLayers[_e248.id] = _e248.serialize();\n            }\n          } catch (err) {\n            _iterator178.e(err);\n          } finally {\n            _iterator178.f();\n          }\n\n          this.dispatcher.broadcast(\"setLayers\", this._serializeLayers(this._order)), this.light = new b(this.stylesheet.light), this.fire(new t.Event(\"data\", {\n            dataType: \"style\"\n          })), this.fire(new t.Event(\"style.load\"));\n        }\n      }, {\n        key: \"_loadSprite\",\n        value: function _loadSprite(e) {\n          var _this66 = this;\n\n          this._spriteRequest = function (e, i, o, a) {\n            var s, r, n;\n            var l = o > 1 ? \"@2x\" : \"\";\n            var c = t.getJSON(i.transformRequest(i.normalizeSpriteURL(e, l, \".json\"), t.ResourceType.SpriteJSON), function (t, e) {\n              c = null, n || (n = t, s = e, u());\n            }),\n                h = t.getImage(i.transformRequest(i.normalizeSpriteURL(e, l, \".png\"), t.ResourceType.SpriteImage), function (t, e) {\n              h = null, n || (n = t, r = e, u());\n            });\n\n            function u() {\n              if (n) a(n);else if (s && r) {\n                var _e249 = t.exported.getImageData(r),\n                    _i193 = {};\n\n                for (var _o94 in s) {\n                  var _s$_o = s[_o94],\n                      _a103 = _s$_o.width,\n                      _r179 = _s$_o.height,\n                      _n129 = _s$_o.x,\n                      _l46 = _s$_o.y,\n                      _c28 = _s$_o.sdf,\n                      _h22 = _s$_o.pixelRatio,\n                      _u29 = _s$_o.stretchX,\n                      _d15 = _s$_o.stretchY,\n                      _m13 = _s$_o.content,\n                      _8 = new t.RGBAImage({\n                    width: _a103,\n                    height: _r179\n                  });\n\n                  t.RGBAImage.copy(_e249, _8, {\n                    x: _n129,\n                    y: _l46\n                  }, {\n                    x: 0,\n                    y: 0\n                  }, {\n                    width: _a103,\n                    height: _r179\n                  }), _i193[_o94] = {\n                    data: _8,\n                    pixelRatio: _h22,\n                    sdf: _c28,\n                    stretchX: _u29,\n                    stretchY: _d15,\n                    content: _m13\n                  };\n                }\n\n                a(null, _i193);\n              }\n            }\n\n            return {\n              cancel: function cancel() {\n                c && (c.cancel(), c = null), h && (h.cancel(), h = null);\n              }\n            };\n          }(e, this.map._requestManager, this.map.getPixelRatio(), function (e, i) {\n            if (_this66._spriteRequest = null, e) _this66.fire(new t.ErrorEvent(e));else if (i) for (var _t284 in i) {\n              _this66.imageManager.addImage(_t284, i[_t284]);\n            }\n            _this66.imageManager.setLoaded(!0), _this66._availableImages = _this66.imageManager.listImages(), _this66.dispatcher.broadcast(\"setImages\", _this66._availableImages), _this66.fire(new t.Event(\"data\", {\n              dataType: \"style\"\n            }));\n          });\n        }\n      }, {\n        key: \"_validateLayer\",\n        value: function _validateLayer(e) {\n          var i = this.sourceCaches[e.source];\n          if (!i) return;\n          var o = e.sourceLayer;\n          if (!o) return;\n          var a = i.getSource();\n          (\"geojson\" === a.type || a.vectorLayerIds && -1 === a.vectorLayerIds.indexOf(o)) && this.fire(new t.ErrorEvent(new Error(\"Source layer \\\"\".concat(o, \"\\\" does not exist on source \\\"\").concat(a.id, \"\\\" as specified by style layer \\\"\").concat(e.id, \"\\\".\"))));\n        }\n      }, {\n        key: \"loaded\",\n        value: function loaded() {\n          if (!this._loaded) return !1;\n          if (Object.keys(this._updatedSources).length) return !1;\n\n          for (var _t285 in this.sourceCaches) {\n            if (!this.sourceCaches[_t285].loaded()) return !1;\n          }\n\n          return !!this.imageManager.isLoaded();\n        }\n      }, {\n        key: \"_serializeLayers\",\n        value: function _serializeLayers(t) {\n          var e = [];\n\n          var _iterator179 = _createForOfIteratorHelper(t),\n              _step179;\n\n          try {\n            for (_iterator179.s(); !(_step179 = _iterator179.n()).done;) {\n              var _i194 = _step179.value;\n              var _t286 = this._layers[_i194];\n              \"custom\" !== _t286.type && e.push(_t286.serialize());\n            }\n          } catch (err) {\n            _iterator179.e(err);\n          } finally {\n            _iterator179.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"hasTransitions\",\n        value: function hasTransitions() {\n          if (this.light && this.light.hasTransition()) return !0;\n\n          for (var _t287 in this.sourceCaches) {\n            if (this.sourceCaches[_t287].hasTransition()) return !0;\n          }\n\n          for (var _t288 in this._layers) {\n            if (this._layers[_t288].hasTransition()) return !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"_checkLoaded\",\n        value: function _checkLoaded() {\n          if (!this._loaded) throw new Error(\"Style is not done loading.\");\n        }\n      }, {\n        key: \"update\",\n        value: function update(e) {\n          if (!this._loaded) return;\n          var i = this._changed;\n\n          if (this._changed) {\n            var _t289 = Object.keys(this._updatedLayers),\n                _i195 = Object.keys(this._removedLayers);\n\n            (_t289.length || _i195.length) && this._updateWorkerLayers(_t289, _i195);\n\n            for (var _t290 in this._updatedSources) {\n              var _e250 = this._updatedSources[_t290];\n              \"reload\" === _e250 ? this._reloadSource(_t290) : \"clear\" === _e250 && this._clearSource(_t290);\n            }\n\n            this._updateTilesForChangedImages();\n\n            for (var _t291 in this._updatedPaintProps) {\n              this._layers[_t291].updateTransitions(e);\n            }\n\n            this.light.updateTransitions(e), this._resetUpdates();\n          }\n\n          var o = {};\n\n          for (var _t292 in this.sourceCaches) {\n            var _e251 = this.sourceCaches[_t292];\n            o[_t292] = _e251.used, _e251.used = !1;\n          }\n\n          var _iterator180 = _createForOfIteratorHelper(this._order),\n              _step180;\n\n          try {\n            for (_iterator180.s(); !(_step180 = _iterator180.n()).done;) {\n              var _t293 = _step180.value;\n              var _i197 = this._layers[_t293];\n              _i197.recalculate(e, this._availableImages), !_i197.isHidden(e.zoom) && _i197.source && (this.sourceCaches[_i197.source].used = !0);\n            }\n          } catch (err) {\n            _iterator180.e(err);\n          } finally {\n            _iterator180.f();\n          }\n\n          for (var _e252 in o) {\n            var _i196 = this.sourceCaches[_e252];\n            o[_e252] !== _i196.used && _i196.fire(new t.Event(\"data\", {\n              sourceDataType: \"visibility\",\n              dataType: \"source\",\n              sourceId: _e252\n            }));\n          }\n\n          this.light.recalculate(e), this.z = e.zoom, i && this.fire(new t.Event(\"data\", {\n            dataType: \"style\"\n          }));\n        }\n      }, {\n        key: \"_updateTilesForChangedImages\",\n        value: function _updateTilesForChangedImages() {\n          var t = Object.keys(this._changedImages);\n\n          if (t.length) {\n            for (var _e253 in this.sourceCaches) {\n              this.sourceCaches[_e253].reloadTilesForDependencies([\"icons\", \"patterns\"], t);\n            }\n\n            this._changedImages = {};\n          }\n        }\n      }, {\n        key: \"_updateWorkerLayers\",\n        value: function _updateWorkerLayers(t, e) {\n          this.dispatcher.broadcast(\"updateLayers\", {\n            layers: this._serializeLayers(t),\n            removedIds: e\n          });\n        }\n      }, {\n        key: \"_resetUpdates\",\n        value: function _resetUpdates() {\n          this._changed = !1, this._updatedLayers = {}, this._removedLayers = {}, this._updatedSources = {}, this._updatedPaintProps = {}, this._changedImages = {};\n        }\n      }, {\n        key: \"setState\",\n        value: function setState(e) {\n          var _this67 = this;\n\n          if (this._checkLoaded(), Jt(this, t.validateStyle(e))) return !1;\n          (e = t.clone$1(e)).layers = Y(e.layers);\n\n          var i = function (t, e) {\n            if (!t) return [{\n              command: J.setStyle,\n              args: [e]\n            }];\n            var i = [];\n\n            try {\n              if (!a(t.version, e.version)) return [{\n                command: J.setStyle,\n                args: [e]\n              }];\n              a(t.center, e.center) || i.push({\n                command: J.setCenter,\n                args: [e.center]\n              }), a(t.zoom, e.zoom) || i.push({\n                command: J.setZoom,\n                args: [e.zoom]\n              }), a(t.bearing, e.bearing) || i.push({\n                command: J.setBearing,\n                args: [e.bearing]\n              }), a(t.pitch, e.pitch) || i.push({\n                command: J.setPitch,\n                args: [e.pitch]\n              }), a(t.sprite, e.sprite) || i.push({\n                command: J.setSprite,\n                args: [e.sprite]\n              }), a(t.glyphs, e.glyphs) || i.push({\n                command: J.setGlyphs,\n                args: [e.glyphs]\n              }), a(t.transition, e.transition) || i.push({\n                command: J.setTransition,\n                args: [e.transition]\n              }), a(t.light, e.light) || i.push({\n                command: J.setLight,\n                args: [e.light]\n              });\n              var _o95 = {},\n                  _s102 = [];\n              !function (t, e, i, o) {\n                var s;\n\n                for (s in e = e || {}, t = t || {}) {\n                  Object.prototype.hasOwnProperty.call(t, s) && (Object.prototype.hasOwnProperty.call(e, s) || tt(s, i, o));\n                }\n\n                for (s in e) {\n                  Object.prototype.hasOwnProperty.call(e, s) && (Object.prototype.hasOwnProperty.call(t, s) ? a(t[s], e[s]) || (\"geojson\" === t[s].type && \"geojson\" === e[s].type && it(t, e, s) ? i.push({\n                    command: J.setGeoJSONSourceData,\n                    args: [s, e[s].data]\n                  }) : et(s, e, i, o)) : Q(s, e, i));\n                }\n              }(t.sources, e.sources, _s102, _o95);\n              var _r180 = [];\n              t.layers && t.layers.forEach(function (t) {\n                _o95[t.source] ? i.push({\n                  command: J.removeLayer,\n                  args: [t.id]\n                }) : _r180.push(t);\n              }), i = i.concat(_s102), function (t, e, i) {\n                e = e || [];\n                var o = (t = t || []).map(at),\n                    s = e.map(at),\n                    r = t.reduce(st, {}),\n                    n = e.reduce(st, {}),\n                    l = o.slice(),\n                    c = Object.create(null);\n\n                var h, u, d, m, _, p, f;\n\n                for (h = 0, u = 0; h < o.length; h++) {\n                  d = o[h], Object.prototype.hasOwnProperty.call(n, d) ? u++ : (i.push({\n                    command: J.removeLayer,\n                    args: [d]\n                  }), l.splice(l.indexOf(d, u), 1));\n                }\n\n                for (h = 0, u = 0; h < s.length; h++) {\n                  d = s[s.length - 1 - h], l[l.length - 1 - h] !== d && (Object.prototype.hasOwnProperty.call(r, d) ? (i.push({\n                    command: J.removeLayer,\n                    args: [d]\n                  }), l.splice(l.lastIndexOf(d, l.length - u), 1)) : u++, p = l[l.length - h], i.push({\n                    command: J.addLayer,\n                    args: [n[d], p]\n                  }), l.splice(l.length - h, 0, d), c[d] = !0);\n                }\n\n                for (h = 0; h < s.length; h++) {\n                  if (d = s[h], m = r[d], _ = n[d], !c[d] && !a(m, _)) if (a(m.source, _.source) && a(m[\"source-layer\"], _[\"source-layer\"]) && a(m.type, _.type)) {\n                    for (f in ot(m.layout, _.layout, i, d, null, J.setLayoutProperty), ot(m.paint, _.paint, i, d, null, J.setPaintProperty), a(m.filter, _.filter) || i.push({\n                      command: J.setFilter,\n                      args: [d, _.filter]\n                    }), a(m.minzoom, _.minzoom) && a(m.maxzoom, _.maxzoom) || i.push({\n                      command: J.setLayerZoomRange,\n                      args: [d, _.minzoom, _.maxzoom]\n                    }), m) {\n                      Object.prototype.hasOwnProperty.call(m, f) && \"layout\" !== f && \"paint\" !== f && \"filter\" !== f && \"metadata\" !== f && \"minzoom\" !== f && \"maxzoom\" !== f && (0 === f.indexOf(\"paint.\") ? ot(m[f], _[f], i, d, f.slice(6), J.setPaintProperty) : a(m[f], _[f]) || i.push({\n                        command: J.setLayerProperty,\n                        args: [d, f, _[f]]\n                      }));\n                    }\n\n                    for (f in _) {\n                      Object.prototype.hasOwnProperty.call(_, f) && !Object.prototype.hasOwnProperty.call(m, f) && \"layout\" !== f && \"paint\" !== f && \"filter\" !== f && \"metadata\" !== f && \"minzoom\" !== f && \"maxzoom\" !== f && (0 === f.indexOf(\"paint.\") ? ot(m[f], _[f], i, d, f.slice(6), J.setPaintProperty) : a(m[f], _[f]) || i.push({\n                        command: J.setLayerProperty,\n                        args: [d, f, _[f]]\n                      }));\n                    }\n                  } else i.push({\n                    command: J.removeLayer,\n                    args: [d]\n                  }), p = l[l.lastIndexOf(d) + 1], i.push({\n                    command: J.addLayer,\n                    args: [_, p]\n                  });\n                }\n              }(_r180, e.layers, i);\n            } catch (t) {\n              console.warn(\"Unable to compute style diff:\", t), i = [{\n                command: J.setStyle,\n                args: [e]\n              }];\n            }\n\n            return i;\n          }(this.serialize(), e).filter(function (t) {\n            return !(t.command in te);\n          });\n\n          if (0 === i.length) return !1;\n          var o = i.filter(function (t) {\n            return !(t.command in Qt);\n          });\n          if (o.length > 0) throw new Error(\"Unimplemented: \".concat(o.map(function (t) {\n            return t.command;\n          }).join(\", \"), \".\"));\n          return i.forEach(function (t) {\n            \"setTransition\" !== t.command && _this67[t.command].apply(_this67, t.args);\n          }), this.stylesheet = e, !0;\n        }\n      }, {\n        key: \"addImage\",\n        value: function addImage(e, i) {\n          if (this.getImage(e)) return this.fire(new t.ErrorEvent(new Error(\"An image named \\\"\".concat(e, \"\\\" already exists.\"))));\n          this.imageManager.addImage(e, i), this._afterImageUpdated(e);\n        }\n      }, {\n        key: \"updateImage\",\n        value: function updateImage(t, e) {\n          this.imageManager.updateImage(t, e);\n        }\n      }, {\n        key: \"getImage\",\n        value: function getImage(t) {\n          return this.imageManager.getImage(t);\n        }\n      }, {\n        key: \"removeImage\",\n        value: function removeImage(e) {\n          if (!this.getImage(e)) return this.fire(new t.ErrorEvent(new Error(\"An image named \\\"\".concat(e, \"\\\" does not exist.\"))));\n          this.imageManager.removeImage(e), this._afterImageUpdated(e);\n        }\n      }, {\n        key: \"_afterImageUpdated\",\n        value: function _afterImageUpdated(e) {\n          this._availableImages = this.imageManager.listImages(), this._changedImages[e] = !0, this._changed = !0, this.dispatcher.broadcast(\"setImages\", this._availableImages), this.fire(new t.Event(\"data\", {\n            dataType: \"style\"\n          }));\n        }\n      }, {\n        key: \"listImages\",\n        value: function listImages() {\n          return this._checkLoaded(), this.imageManager.listImages();\n        }\n      }, {\n        key: \"addSource\",\n        value: function addSource(e, i) {\n          var _this68 = this;\n\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          if (this._checkLoaded(), void 0 !== this.sourceCaches[e]) throw new Error(\"Source \\\"\".concat(e, \"\\\" already exists.\"));\n          if (!i.type) throw new Error(\"The type property must be defined, but only the following properties were given: \".concat(Object.keys(i).join(\", \"), \".\"));\n          if ([\"vector\", \"raster\", \"geojson\", \"video\", \"image\"].indexOf(i.type) >= 0 && this._validate(t.validateStyle.source, \"sources.\".concat(e), i, null, o)) return;\n          this.map && this.map._collectResourceTiming && (i.collectResourceTiming = !0);\n          var a = this.sourceCaches[e] = new Z(e, i, this.dispatcher);\n          a.style = this, a.setEventedParent(this, function () {\n            return {\n              isSourceLoaded: _this68.loaded(),\n              source: a.serialize(),\n              sourceId: e\n            };\n          }), a.onAdd(this.map), this._changed = !0;\n        }\n      }, {\n        key: \"removeSource\",\n        value: function removeSource(e) {\n          if (this._checkLoaded(), void 0 === this.sourceCaches[e]) throw new Error(\"There is no source with this ID\");\n\n          for (var _i198 in this._layers) {\n            if (this._layers[_i198].source === e) return this.fire(new t.ErrorEvent(new Error(\"Source \\\"\".concat(e, \"\\\" cannot be removed while layer \\\"\").concat(_i198, \"\\\" is using it.\"))));\n          }\n\n          var i = this.sourceCaches[e];\n          delete this.sourceCaches[e], delete this._updatedSources[e], i.fire(new t.Event(\"data\", {\n            sourceDataType: \"metadata\",\n            dataType: \"source\",\n            sourceId: e\n          })), i.setEventedParent(null), i.onRemove(this.map), this._changed = !0;\n        }\n      }, {\n        key: \"setGeoJSONSourceData\",\n        value: function setGeoJSONSourceData(t, e) {\n          this._checkLoaded(), this.sourceCaches[t].getSource().setData(e), this._changed = !0;\n        }\n      }, {\n        key: \"getSource\",\n        value: function getSource(t) {\n          return this.sourceCaches[t] && this.sourceCaches[t].getSource();\n        }\n      }, {\n        key: \"addLayer\",\n        value: function addLayer(e, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          this._checkLoaded();\n\n          var a = e.id;\n          if (this.getLayer(a)) return void this.fire(new t.ErrorEvent(new Error(\"Layer \\\"\".concat(a, \"\\\" already exists on this map.\"))));\n          var s;\n\n          if (\"custom\" === e.type) {\n            if (Jt(this, t.validateCustomStyleLayer(e))) return;\n            s = t.createStyleLayer(e);\n          } else {\n            if (\"object\" == typeof e.source && (this.addSource(a, e.source), e = t.clone$1(e), e = t.extend(e, {\n              source: a\n            })), this._validate(t.validateStyle.layer, \"layers.\".concat(a), e, {\n              arrayIndex: -1\n            }, o)) return;\n            s = t.createStyleLayer(e), this._validateLayer(s), s.setEventedParent(this, {\n              layer: {\n                id: a\n              }\n            }), this._serializedLayers[s.id] = s.serialize();\n          }\n\n          var r = i ? this._order.indexOf(i) : this._order.length;\n          if (i && -1 === r) this.fire(new t.ErrorEvent(new Error(\"Cannot add layer \\\"\".concat(a, \"\\\" before non-existing layer \\\"\").concat(i, \"\\\".\"))));else {\n            if (this._order.splice(r, 0, a), this._layerOrderChanged = !0, this._layers[a] = s, this._removedLayers[a] && s.source && \"custom\" !== s.type) {\n              var _t294 = this._removedLayers[a];\n              delete this._removedLayers[a], _t294.type !== s.type ? this._updatedSources[s.source] = \"clear\" : (this._updatedSources[s.source] = \"reload\", this.sourceCaches[s.source].pause());\n            }\n\n            this._updateLayer(s), s.onAdd && s.onAdd(this.map);\n          }\n        }\n      }, {\n        key: \"moveLayer\",\n        value: function moveLayer(e, i) {\n          if (this._checkLoaded(), this._changed = !0, !this._layers[e]) return void this.fire(new t.ErrorEvent(new Error(\"The layer '\".concat(e, \"' does not exist in the map's style and cannot be moved.\"))));\n          if (e === i) return;\n\n          var o = this._order.indexOf(e);\n\n          this._order.splice(o, 1);\n\n          var a = i ? this._order.indexOf(i) : this._order.length;\n          i && -1 === a ? this.fire(new t.ErrorEvent(new Error(\"Cannot move layer \\\"\".concat(e, \"\\\" before non-existing layer \\\"\").concat(i, \"\\\".\")))) : (this._order.splice(a, 0, e), this._layerOrderChanged = !0);\n        }\n      }, {\n        key: \"removeLayer\",\n        value: function removeLayer(e) {\n          this._checkLoaded();\n\n          var i = this._layers[e];\n          if (!i) return void this.fire(new t.ErrorEvent(new Error(\"Cannot remove non-existing layer \\\"\".concat(e, \"\\\".\"))));\n          i.setEventedParent(null);\n\n          var o = this._order.indexOf(e);\n\n          this._order.splice(o, 1), this._layerOrderChanged = !0, this._changed = !0, this._removedLayers[e] = i, delete this._layers[e], delete this._serializedLayers[e], delete this._updatedLayers[e], delete this._updatedPaintProps[e], i.onRemove && i.onRemove(this.map);\n        }\n      }, {\n        key: \"getLayer\",\n        value: function getLayer(t) {\n          return this._layers[t];\n        }\n      }, {\n        key: \"hasLayer\",\n        value: function hasLayer(t) {\n          return t in this._layers;\n        }\n      }, {\n        key: \"setLayerZoomRange\",\n        value: function setLayerZoomRange(e, i, o) {\n          this._checkLoaded();\n\n          var a = this.getLayer(e);\n          a ? a.minzoom === i && a.maxzoom === o || (null != i && (a.minzoom = i), null != o && (a.maxzoom = o), this._updateLayer(a)) : this.fire(new t.ErrorEvent(new Error(\"Cannot set the zoom range of non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"setFilter\",\n        value: function setFilter(e, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          this._checkLoaded();\n\n          var s = this.getLayer(e);\n\n          if (s) {\n            if (!a(s.filter, i)) return null == i ? (s.filter = void 0, void this._updateLayer(s)) : void (this._validate(t.validateStyle.filter, \"layers.\".concat(s.id, \".filter\"), i, null, o) || (s.filter = t.clone$1(i), this._updateLayer(s)));\n          } else this.fire(new t.ErrorEvent(new Error(\"Cannot filter non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"getFilter\",\n        value: function getFilter(e) {\n          return t.clone$1(this.getLayer(e).filter);\n        }\n      }, {\n        key: \"setLayoutProperty\",\n        value: function setLayoutProperty(e, i, o) {\n          var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n          this._checkLoaded();\n\n          var r = this.getLayer(e);\n          r ? a(r.getLayoutProperty(i), o) || (r.setLayoutProperty(i, o, s), this._updateLayer(r)) : this.fire(new t.ErrorEvent(new Error(\"Cannot style non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"getLayoutProperty\",\n        value: function getLayoutProperty(e, i) {\n          var o = this.getLayer(e);\n          if (o) return o.getLayoutProperty(i);\n          this.fire(new t.ErrorEvent(new Error(\"Cannot get style of non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"setPaintProperty\",\n        value: function setPaintProperty(e, i, o) {\n          var s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n          this._checkLoaded();\n\n          var r = this.getLayer(e);\n          r ? a(r.getPaintProperty(i), o) || (r.setPaintProperty(i, o, s) && this._updateLayer(r), this._changed = !0, this._updatedPaintProps[e] = !0) : this.fire(new t.ErrorEvent(new Error(\"Cannot style non-existing layer \\\"\".concat(e, \"\\\".\"))));\n        }\n      }, {\n        key: \"getPaintProperty\",\n        value: function getPaintProperty(t, e) {\n          return this.getLayer(t).getPaintProperty(e);\n        }\n      }, {\n        key: \"setFeatureState\",\n        value: function setFeatureState(e, i) {\n          this._checkLoaded();\n\n          var o = e.source,\n              a = e.sourceLayer,\n              s = this.sourceCaches[o];\n          if (void 0 === s) return void this.fire(new t.ErrorEvent(new Error(\"The source '\".concat(o, \"' does not exist in the map's style.\"))));\n          var r = s.getSource().type;\n          \"geojson\" === r && a ? this.fire(new t.ErrorEvent(new Error(\"GeoJSON sources cannot have a sourceLayer parameter.\"))) : \"vector\" !== r || a ? (void 0 === e.id && this.fire(new t.ErrorEvent(new Error(\"The feature id parameter must be provided.\"))), s.setFeatureState(a, e.id, i)) : this.fire(new t.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n        }\n      }, {\n        key: \"removeFeatureState\",\n        value: function removeFeatureState(e, i) {\n          this._checkLoaded();\n\n          var o = e.source,\n              a = this.sourceCaches[o];\n          if (void 0 === a) return void this.fire(new t.ErrorEvent(new Error(\"The source '\".concat(o, \"' does not exist in the map's style.\"))));\n          var s = a.getSource().type,\n              r = \"vector\" === s ? e.sourceLayer : void 0;\n          \"vector\" !== s || r ? i && \"string\" != typeof e.id && \"number\" != typeof e.id ? this.fire(new t.ErrorEvent(new Error(\"A feature id is required to remove its specific state property.\"))) : a.removeFeatureState(r, e.id, i) : this.fire(new t.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n        }\n      }, {\n        key: \"getFeatureState\",\n        value: function getFeatureState(e) {\n          this._checkLoaded();\n\n          var i = e.source,\n              o = e.sourceLayer,\n              a = this.sourceCaches[i];\n          if (void 0 !== a) return \"vector\" !== a.getSource().type || o ? (void 0 === e.id && this.fire(new t.ErrorEvent(new Error(\"The feature id parameter must be provided.\"))), a.getFeatureState(o, e.id)) : void this.fire(new t.ErrorEvent(new Error(\"The sourceLayer parameter must be provided for vector source types.\")));\n          this.fire(new t.ErrorEvent(new Error(\"The source '\".concat(i, \"' does not exist in the map's style.\"))));\n        }\n      }, {\n        key: \"getTransition\",\n        value: function getTransition() {\n          return t.extend({\n            duration: 300,\n            delay: 0\n          }, this.stylesheet && this.stylesheet.transition);\n        }\n      }, {\n        key: \"serialize\",\n        value: function serialize() {\n          return t.filterObject({\n            version: this.stylesheet.version,\n            name: this.stylesheet.name,\n            metadata: this.stylesheet.metadata,\n            light: this.stylesheet.light,\n            center: this.stylesheet.center,\n            zoom: this.stylesheet.zoom,\n            bearing: this.stylesheet.bearing,\n            pitch: this.stylesheet.pitch,\n            sprite: this.stylesheet.sprite,\n            glyphs: this.stylesheet.glyphs,\n            transition: this.stylesheet.transition,\n            sources: t.mapObject(this.sourceCaches, function (t) {\n              return t.serialize();\n            }),\n            layers: this._serializeLayers(this._order)\n          }, function (t) {\n            return void 0 !== t;\n          });\n        }\n      }, {\n        key: \"_updateLayer\",\n        value: function _updateLayer(t) {\n          this._updatedLayers[t.id] = !0, t.source && !this._updatedSources[t.source] && \"raster\" !== this.sourceCaches[t.source].getSource().type && (this._updatedSources[t.source] = \"reload\", this.sourceCaches[t.source].pause()), this._changed = !0;\n        }\n      }, {\n        key: \"_flattenAndSortRenderedFeatures\",\n        value: function _flattenAndSortRenderedFeatures(t) {\n          var _this69 = this;\n\n          var e = function e(t) {\n            return \"fill-extrusion\" === _this69._layers[t].type;\n          },\n              i = {},\n              o = [];\n\n          for (var _a104 = this._order.length - 1; _a104 >= 0; _a104--) {\n            var _s103 = this._order[_a104];\n\n            if (e(_s103)) {\n              i[_s103] = _a104;\n\n              var _iterator181 = _createForOfIteratorHelper(t),\n                  _step181;\n\n              try {\n                for (_iterator181.s(); !(_step181 = _iterator181.n()).done;) {\n                  var _e254 = _step181.value;\n                  var _t295 = _e254[_s103];\n\n                  if (_t295) {\n                    var _iterator182 = _createForOfIteratorHelper(_t295),\n                        _step182;\n\n                    try {\n                      for (_iterator182.s(); !(_step182 = _iterator182.n()).done;) {\n                        var _e255 = _step182.value;\n                        o.push(_e255);\n                      }\n                    } catch (err) {\n                      _iterator182.e(err);\n                    } finally {\n                      _iterator182.f();\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator181.e(err);\n              } finally {\n                _iterator181.f();\n              }\n            }\n          }\n\n          o.sort(function (t, e) {\n            return e.intersectionZ - t.intersectionZ;\n          });\n          var a = [];\n\n          for (var _s104 = this._order.length - 1; _s104 >= 0; _s104--) {\n            var _r181 = this._order[_s104];\n            if (e(_r181)) for (var _t296 = o.length - 1; _t296 >= 0; _t296--) {\n              var _e256 = o[_t296].feature;\n              if (i[_e256.layer.id] < _s104) break;\n              a.push(_e256), o.pop();\n            } else {\n              var _iterator183 = _createForOfIteratorHelper(t),\n                  _step183;\n\n              try {\n                for (_iterator183.s(); !(_step183 = _iterator183.n()).done;) {\n                  var _e257 = _step183.value;\n                  var _t297 = _e257[_r181];\n\n                  if (_t297) {\n                    var _iterator184 = _createForOfIteratorHelper(_t297),\n                        _step184;\n\n                    try {\n                      for (_iterator184.s(); !(_step184 = _iterator184.n()).done;) {\n                        var _e258 = _step184.value;\n                        a.push(_e258.feature);\n                      }\n                    } catch (err) {\n                      _iterator184.e(err);\n                    } finally {\n                      _iterator184.f();\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator183.e(err);\n              } finally {\n                _iterator183.f();\n              }\n            }\n          }\n\n          return a;\n        }\n      }, {\n        key: \"queryRenderedFeatures\",\n        value: function queryRenderedFeatures(e, i, o) {\n          i && i.filter && this._validate(t.validateStyle.filter, \"queryRenderedFeatures.filter\", i.filter, null, i);\n          var a = {};\n\n          if (i && i.layers) {\n            if (!Array.isArray(i.layers)) return this.fire(new t.ErrorEvent(new Error(\"parameters.layers must be an Array.\"))), [];\n\n            var _iterator185 = _createForOfIteratorHelper(i.layers),\n                _step185;\n\n            try {\n              for (_iterator185.s(); !(_step185 = _iterator185.n()).done;) {\n                var _e259 = _step185.value;\n                var _i199 = this._layers[_e259];\n                if (!_i199) return this.fire(new t.ErrorEvent(new Error(\"The layer '\".concat(_e259, \"' does not exist in the map's style and cannot be queried for features.\")))), [];\n                a[_i199.source] = !0;\n              }\n            } catch (err) {\n              _iterator185.e(err);\n            } finally {\n              _iterator185.f();\n            }\n          }\n\n          var s = [];\n          i.availableImages = this._availableImages;\n\n          for (var _t298 in this.sourceCaches) {\n            i.layers && !a[_t298] || s.push(F(this.sourceCaches[_t298], this._layers, this._serializedLayers, e, i, o));\n          }\n\n          return this.placement && s.push(function (t, e, i, o, a, s, r) {\n            var n = {},\n                l = s.queryRenderedSymbols(o),\n                c = [];\n\n            var _iterator186 = _createForOfIteratorHelper(Object.keys(l).map(Number)),\n                _step186;\n\n            try {\n              for (_iterator186.s(); !(_step186 = _iterator186.n()).done;) {\n                var _t301 = _step186.value;\n                c.push(r[_t301]);\n              }\n            } catch (err) {\n              _iterator186.e(err);\n            } finally {\n              _iterator186.f();\n            }\n\n            c.sort(O);\n\n            var _loop6 = function _loop6() {\n              var i = _c29[_i200];\n              var o = i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId], e, i.bucketIndex, i.sourceLayerIndex, a.filter, a.layers, a.availableImages, t);\n\n              for (var _t299 in o) {\n                var _e260 = n[_t299] = n[_t299] || [],\n                    _a105 = o[_t299];\n\n                _a105.sort(function (t, e) {\n                  var o = i.featureSortOrder;\n\n                  if (o) {\n                    var _i201 = o.indexOf(t.featureIndex);\n\n                    return o.indexOf(e.featureIndex) - _i201;\n                  }\n\n                  return e.featureIndex - t.featureIndex;\n                });\n\n                var _iterator187 = _createForOfIteratorHelper(_a105),\n                    _step187;\n\n                try {\n                  for (_iterator187.s(); !(_step187 = _iterator187.n()).done;) {\n                    var _t300 = _step187.value;\n\n                    _e260.push(_t300);\n                  }\n                } catch (err) {\n                  _iterator187.e(err);\n                } finally {\n                  _iterator187.f();\n                }\n              }\n            };\n\n            for (var _i200 = 0, _c29 = c; _i200 < _c29.length; _i200++) {\n              _loop6();\n            }\n\n            var _loop7 = function _loop7(_e261) {\n              n[_e261].forEach(function (o) {\n                var a = o.feature,\n                    s = i[t[_e261].source].getFeatureState(a.layer[\"source-layer\"], a.id);\n\n                a.source = a.layer.source, a.layer[\"source-layer\"] && (a.sourceLayer = a.layer[\"source-layer\"]), a.state = s;\n              });\n            };\n\n            for (var _e261 in n) {\n              _loop7(_e261);\n            }\n\n            return n;\n          }(this._layers, this._serializedLayers, this.sourceCaches, e, i, this.placement.collisionIndex, this.placement.retainedQueryData)), this._flattenAndSortRenderedFeatures(s);\n        }\n      }, {\n        key: \"querySourceFeatures\",\n        value: function querySourceFeatures(e, i) {\n          i && i.filter && this._validate(t.validateStyle.filter, \"querySourceFeatures.filter\", i.filter, null, i);\n          var o = this.sourceCaches[e];\n          return o ? function (t, e) {\n            var i = t.getRenderableIds().map(function (e) {\n              return t.getTileByID(e);\n            }),\n                o = [],\n                a = {};\n\n            for (var _t302 = 0; _t302 < i.length; _t302++) {\n              var _s105 = i[_t302],\n                  _r182 = _s105.tileID.canonical.key;\n              a[_r182] || (a[_r182] = !0, _s105.querySourceFeatures(o, e));\n            }\n\n            return o;\n          }(o, i) : [];\n        }\n      }, {\n        key: \"addSourceType\",\n        value: function addSourceType(t, e, i) {\n          return ie.getSourceType(t) ? i(new Error(\"A source type called \\\"\".concat(t, \"\\\" already exists.\"))) : (ie.setSourceType(t, e), e.workerSourceURL ? void this.dispatcher.broadcast(\"loadWorkerSource\", {\n            name: t,\n            url: e.workerSourceURL\n          }, i) : i(null, null));\n        }\n      }, {\n        key: \"getLight\",\n        value: function getLight() {\n          return this.light.getLight();\n        }\n      }, {\n        key: \"setLight\",\n        value: function setLight(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          this._checkLoaded();\n\n          var o = this.light.getLight();\n          var s = !1;\n\n          for (var _t303 in e) {\n            if (!a(e[_t303], o[_t303])) {\n              s = !0;\n              break;\n            }\n          }\n\n          if (!s) return;\n          var r = {\n            now: t.exported.now(),\n            transition: t.extend({\n              duration: 300,\n              delay: 0\n            }, this.stylesheet.transition)\n          };\n          this.light.setLight(e, i), this.light.updateTransitions(r);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate(e, i, o, a) {\n          var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n          return (!s || !1 !== s.validate) && Jt(this, e.call(t.validateStyle, t.extend({\n            key: i,\n            style: this.serialize(),\n            value: o,\n            styleSpec: t.spec\n          }, a)));\n        }\n      }, {\n        key: \"_remove\",\n        value: function _remove() {\n          this._request && (this._request.cancel(), this._request = null), this._spriteRequest && (this._spriteRequest.cancel(), this._spriteRequest = null), t.evented.off(\"pluginStateChange\", this._rtlTextPluginCallback);\n\n          for (var _t304 in this._layers) {\n            this._layers[_t304].setEventedParent(null);\n          }\n\n          for (var _t305 in this.sourceCaches) {\n            var _e262 = this.sourceCaches[_t305];\n            _e262.setEventedParent(null), _e262.onRemove(this.map);\n          }\n\n          this.imageManager.setEventedParent(null), this.setEventedParent(null), this.dispatcher.remove();\n        }\n      }, {\n        key: \"_clearSource\",\n        value: function _clearSource(t) {\n          this.sourceCaches[t].clearTiles();\n        }\n      }, {\n        key: \"_reloadSource\",\n        value: function _reloadSource(t) {\n          this.sourceCaches[t].resume(), this.sourceCaches[t].reload();\n        }\n      }, {\n        key: \"_updateSources\",\n        value: function _updateSources(t) {\n          for (var _e263 in this.sourceCaches) {\n            this.sourceCaches[_e263].update(t);\n          }\n        }\n      }, {\n        key: \"_generateCollisionBoxes\",\n        value: function _generateCollisionBoxes() {\n          for (var _t306 in this.sourceCaches) {\n            this._reloadSource(_t306);\n          }\n        }\n      }, {\n        key: \"_updatePlacement\",\n        value: function _updatePlacement(e, i, o, a) {\n          var _this70 = this;\n\n          var s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n          var r = !1,\n              n = !1;\n          var l = {};\n\n          var _iterator188 = _createForOfIteratorHelper(this._order),\n              _step188;\n\n          try {\n            for (_iterator188.s(); !(_step188 = _iterator188.n()).done;) {\n              var _t308 = _step188.value;\n              var _i202 = this._layers[_t308];\n              if (\"symbol\" !== _i202.type) continue;\n\n              if (!l[_i202.source]) {\n                (function () {\n                  var t = _this70.sourceCaches[_i202.source];\n                  l[_i202.source] = t.getRenderableIds(!0).map(function (e) {\n                    return t.getTileByID(e);\n                  }).sort(function (t, e) {\n                    return e.tileID.overscaledZ - t.tileID.overscaledZ || (t.tileID.isLessThan(e.tileID) ? -1 : 1);\n                  });\n                })();\n              }\n\n              var _o96 = this.crossTileSymbolIndex.addLayer(_i202, l[_i202.source], e.center.lng);\n\n              r = r || _o96;\n            }\n          } catch (err) {\n            _iterator188.e(err);\n          } finally {\n            _iterator188.f();\n          }\n\n          if (this.crossTileSymbolIndex.pruneUnusedLayers(this._order), ((s = s || this._layerOrderChanged || 0 === o) || !this.pauseablePlacement || this.pauseablePlacement.isDone() && !this.placement.stillRecent(t.exported.now(), e.zoom)) && (this.pauseablePlacement = new $t(e, this._order, s, i, o, a, this.placement), this._layerOrderChanged = !1), this.pauseablePlacement.isDone() ? this.placement.setStale() : (this.pauseablePlacement.continuePlacement(this._order, this._layers, l), this.pauseablePlacement.isDone() && (this.placement = this.pauseablePlacement.commit(t.exported.now()), n = !0), r && this.pauseablePlacement.placement.setStale()), n || r) {\n            var _iterator189 = _createForOfIteratorHelper(this._order),\n                _step189;\n\n            try {\n              for (_iterator189.s(); !(_step189 = _iterator189.n()).done;) {\n                var _t307 = _step189.value;\n                var _e264 = this._layers[_t307];\n                \"symbol\" === _e264.type && this.placement.updateLayerOpacities(_e264, l[_e264.source]);\n              }\n            } catch (err) {\n              _iterator189.e(err);\n            } finally {\n              _iterator189.f();\n            }\n          }\n\n          return !this.pauseablePlacement.isDone() || this.placement.hasTransitions(t.exported.now());\n        }\n      }, {\n        key: \"_releaseSymbolFadeTiles\",\n        value: function _releaseSymbolFadeTiles() {\n          for (var _t309 in this.sourceCaches) {\n            this.sourceCaches[_t309].releaseSymbolFadeTiles();\n          }\n        }\n      }, {\n        key: \"getImages\",\n        value: function getImages(t, e, i) {\n          this.imageManager.getImages(e.icons, i), this._updateTilesForChangedImages();\n          var o = this.sourceCaches[e.source];\n          o && o.setDependencies(e.tileID.key, e.type, e.icons);\n        }\n      }, {\n        key: \"getGlyphs\",\n        value: function getGlyphs(t, e, i) {\n          this.glyphManager.getGlyphs(e.stacks, i);\n        }\n      }, {\n        key: \"getResource\",\n        value: function getResource(e, i, o) {\n          return t.makeRequest(i, o);\n        }\n      }]);\n\n      return ie;\n    }(t.Evented);\n\n    ie.getSourceType = function (t) {\n      return k[t];\n    }, ie.setSourceType = function (t, e) {\n      k[t] = e;\n    }, ie.registerForPluginStateChange = t.registerForPluginStateChange;\n    var oe = t.createLayout([{\n      name: \"a_pos\",\n      type: \"Int16\",\n      components: 2\n    }]),\n        ae = {\n      prelude: se(\"#ifdef GL_ES\\nprecision mediump float;\\n#else\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n#if !defined(highp)\\n#define highp\\n#endif\\n#endif\", \"#ifdef GL_ES\\nprecision highp float;\\n#else\\n#if !defined(lowp)\\n#define lowp\\n#endif\\n#if !defined(mediump)\\n#define mediump\\n#endif\\n#if !defined(highp)\\n#define highp\\n#endif\\n#endif\\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\"),\n      background: se(\"uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n      backgroundPattern: se(\"uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}\"),\n      circle: se(\"varying vec3 v_data;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define mediump float radius\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define highp vec4 stroke_color\\n#pragma mapbox: define mediump float stroke_width\\n#pragma mapbox: define lowp float stroke_opacity\\nvoid main(void) {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize mediump float radius\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize highp vec4 stroke_color\\n#pragma mapbox: initialize mediump float stroke_width\\n#pragma mapbox: initialize lowp float stroke_opacity\\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}\"),\n      clippingMask: se(\"void main() {gl_FragColor=vec4(1.0);}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n      heatmap: se(\"uniform highp float u_intensity;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main() {\\n#pragma mapbox: initialize highp float weight\\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\\n#pragma mapbox: define highp float weight\\n#pragma mapbox: define mediump float radius\\nconst highp float ZERO=1.0/255.0/16.0;\\n#define GAUSS_COEF 0.3989422804014327\\nvoid main(void) {\\n#pragma mapbox: initialize highp float weight\\n#pragma mapbox: initialize mediump float radius\\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}\"),\n      heatmapTexture: se(\"uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(0.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}\"),\n      collisionBox: se(\"varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}\", \"attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}\"),\n      collisionCircle: se(\"varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}\", \"attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}\"),\n      debug: se(\"uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}\", \"attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}\"),\n      fill: se(\"#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_FragColor=color*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);}\"),\n      fillOutline: se(\"varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\\n#pragma mapbox: define highp vec4 outline_color\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 outline_color\\n#pragma mapbox: initialize lowp float opacity\\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}\"),\n      fillOutlinePattern: se(\"uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}\"),\n      fillPattern: se(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}\"),\n      fillExtrusion: se(\"varying vec4 v_color;void main() {gl_FragColor=v_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\\n#pragma mapbox: define highp float base\\n#pragma mapbox: define highp float height\\n#pragma mapbox: define highp vec4 color\\nvoid main() {\\n#pragma mapbox: initialize highp float base\\n#pragma mapbox: initialize highp float height\\n#pragma mapbox: initialize highp vec4 color\\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}\"),\n      fillExtrusionPattern: se(\"uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\\n#pragma mapbox: define lowp float base\\n#pragma mapbox: define lowp float height\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float base\\n#pragma mapbox: initialize lowp float height\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\\n? a_pos\\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}\"),\n      hillshadePrepare: se(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}\"),\n      hillshade: se(\"uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\\n#define PI 3.141592653589793\\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}\"),\n      line: se(\"uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}\"),\n      lineGradient: se(\"uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}\"),\n      linePattern: se(\"#ifdef GL_ES\\nprecision highp float;\\n#endif\\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\n#define LINE_DISTANCE_SCALE 2.0\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\n#pragma mapbox: define lowp vec4 pattern_from\\n#pragma mapbox: define lowp vec4 pattern_to\\n#pragma mapbox: define lowp float pixel_ratio_from\\n#pragma mapbox: define lowp float pixel_ratio_to\\nvoid main() {\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\n#pragma mapbox: initialize mediump vec4 pattern_from\\n#pragma mapbox: initialize mediump vec4 pattern_to\\n#pragma mapbox: initialize lowp float pixel_ratio_from\\n#pragma mapbox: initialize lowp float pixel_ratio_to\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}\"),\n      lineSDF: se(\"uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"\\n#define scale 0.015873016\\n#define LINE_DISTANCE_SCALE 2.0\\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\\n#pragma mapbox: define highp vec4 color\\n#pragma mapbox: define lowp float blur\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define mediump float gapwidth\\n#pragma mapbox: define lowp float offset\\n#pragma mapbox: define mediump float width\\n#pragma mapbox: define lowp float floorwidth\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 color\\n#pragma mapbox: initialize lowp float blur\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize mediump float gapwidth\\n#pragma mapbox: initialize lowp float offset\\n#pragma mapbox: initialize mediump float width\\n#pragma mapbox: initialize lowp float floorwidth\\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}\"),\n      raster: se(\"uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}\"),\n      symbolIcon: se(\"uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\\n#pragma mapbox: define lowp float opacity\\nvoid main() {\\n#pragma mapbox: initialize lowp float opacity\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}\"),\n      symbolSDF: se(\"#define SDF_PX 8.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}\"),\n      symbolTextAndIcon: se(\"#define SDF_PX 8.0\\n#define SDF 1.0\\n#define ICON 0.0\\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\\n#ifdef OVERDRAW_INSPECTOR\\ngl_FragColor=vec4(1.0);\\n#endif\\n}\", \"const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\\n#pragma mapbox: define highp vec4 fill_color\\n#pragma mapbox: define highp vec4 halo_color\\n#pragma mapbox: define lowp float opacity\\n#pragma mapbox: define lowp float halo_width\\n#pragma mapbox: define lowp float halo_blur\\nvoid main() {\\n#pragma mapbox: initialize highp vec4 fill_color\\n#pragma mapbox: initialize highp vec4 halo_color\\n#pragma mapbox: initialize lowp float opacity\\n#pragma mapbox: initialize lowp float halo_width\\n#pragma mapbox: initialize lowp float halo_blur\\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\\ncamera_to_anchor_distance/u_camera_to_center_distance :\\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}\")\n    };\n\n    function se(t, e) {\n      var i = /#pragma mapbox: ([\\w]+) ([\\w]+) ([\\w]+) ([\\w]+)/g,\n          o = e.match(/attribute ([\\w]+) ([\\w]+)/g),\n          a = t.match(/uniform ([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),\n          s = e.match(/uniform ([\\w]+) ([\\w]+)([\\s]*)([\\w]*)/g),\n          r = s ? s.concat(a) : a,\n          n = {};\n      return {\n        fragmentSource: t = t.replace(i, function (t, e, i, o, a) {\n          return n[a] = !0, \"define\" === e ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nvarying \").concat(i, \" \").concat(o, \" \").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifdef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\");\n        }),\n        vertexSource: e = e.replace(i, function (t, e, i, o, a) {\n          var s = \"float\" === o ? \"vec2\" : \"vec4\",\n              r = a.match(/color/) ? \"color\" : s;\n          return n[a] ? \"define\" === e ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nuniform lowp float u_\").concat(a, \"_t;\\nattribute \").concat(i, \" \").concat(s, \" a_\").concat(a, \";\\nvarying \").concat(i, \" \").concat(o, \" \").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"vec4\" === r ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(a, \" = a_\").concat(a, \";\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(a, \" = unpack_mix_\").concat(r, \"(a_\").concat(a, \", u_\").concat(a, \"_t);\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"define\" === e ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\nuniform lowp float u_\").concat(a, \"_t;\\nattribute \").concat(i, \" \").concat(s, \" a_\").concat(a, \";\\n#else\\nuniform \").concat(i, \" \").concat(o, \" u_\").concat(a, \";\\n#endif\\n\") : \"vec4\" === r ? \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = a_\").concat(a, \";\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\") : \"\\n#ifndef HAS_UNIFORM_u_\".concat(a, \"\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = unpack_mix_\").concat(r, \"(a_\").concat(a, \", u_\").concat(a, \"_t);\\n#else\\n    \").concat(i, \" \").concat(o, \" \").concat(a, \" = u_\").concat(a, \";\\n#endif\\n\");\n        }),\n        staticAttributes: o,\n        staticUniforms: r\n      };\n    }\n\n    var re = /*#__PURE__*/function () {\n      function re() {\n        _classCallCheck(this, re);\n\n        this.boundProgram = null, this.boundLayoutVertexBuffer = null, this.boundPaintVertexBuffers = [], this.boundIndexBuffer = null, this.boundVertexOffset = null, this.boundDynamicVertexBuffer = null, this.vao = null;\n      }\n\n      _createClass(re, [{\n        key: \"bind\",\n        value: function bind(t, e, i, o, a, s, r, n) {\n          this.context = t;\n          var l = this.boundPaintVertexBuffers.length !== o.length;\n\n          for (var _t310 = 0; !l && _t310 < o.length; _t310++) {\n            this.boundPaintVertexBuffers[_t310] !== o[_t310] && (l = !0);\n          }\n\n          t.extVertexArrayObject && this.vao && this.boundProgram === e && this.boundLayoutVertexBuffer === i && !l && this.boundIndexBuffer === a && this.boundVertexOffset === s && this.boundDynamicVertexBuffer === r && this.boundDynamicVertexBuffer2 === n ? (t.bindVertexArrayOES.set(this.vao), r && r.bind(), a && a.dynamicDraw && a.bind(), n && n.bind()) : this.freshBind(e, i, o, a, s, r, n);\n        }\n      }, {\n        key: \"freshBind\",\n        value: function freshBind(t, e, i, o, a, s, r) {\n          var n;\n          var l = t.numAttributes,\n              c = this.context,\n              h = c.gl;\n          if (c.extVertexArrayObject) this.vao && this.destroy(), this.vao = c.extVertexArrayObject.createVertexArrayOES(), c.bindVertexArrayOES.set(this.vao), n = 0, this.boundProgram = t, this.boundLayoutVertexBuffer = e, this.boundPaintVertexBuffers = i, this.boundIndexBuffer = o, this.boundVertexOffset = a, this.boundDynamicVertexBuffer = s, this.boundDynamicVertexBuffer2 = r;else {\n            n = c.currentNumAttributes || 0;\n\n            for (var _t311 = l; _t311 < n; _t311++) {\n              h.disableVertexAttribArray(_t311);\n            }\n          }\n          e.enableAttributes(h, t);\n\n          var _iterator190 = _createForOfIteratorHelper(i),\n              _step190;\n\n          try {\n            for (_iterator190.s(); !(_step190 = _iterator190.n()).done;) {\n              var _e265 = _step190.value;\n\n              _e265.enableAttributes(h, t);\n            }\n          } catch (err) {\n            _iterator190.e(err);\n          } finally {\n            _iterator190.f();\n          }\n\n          s && s.enableAttributes(h, t), r && r.enableAttributes(h, t), e.bind(), e.setVertexAttribPointers(h, t, a);\n\n          var _iterator191 = _createForOfIteratorHelper(i),\n              _step191;\n\n          try {\n            for (_iterator191.s(); !(_step191 = _iterator191.n()).done;) {\n              var _e266 = _step191.value;\n              _e266.bind(), _e266.setVertexAttribPointers(h, t, a);\n            }\n          } catch (err) {\n            _iterator191.e(err);\n          } finally {\n            _iterator191.f();\n          }\n\n          s && (s.bind(), s.setVertexAttribPointers(h, t, a)), o && o.bind(), r && (r.bind(), r.setVertexAttribPointers(h, t, a)), c.currentNumAttributes = l;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.vao && (this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao), this.vao = null);\n        }\n      }]);\n\n      return re;\n    }();\n\n    function ne(t) {\n      var e = [];\n\n      for (var _i203 = 0; _i203 < t.length; _i203++) {\n        if (null === t[_i203]) continue;\n\n        var _o97 = t[_i203].split(\" \");\n\n        e.push(_o97.pop());\n      }\n\n      return e;\n    }\n\n    var le = /*#__PURE__*/function () {\n      function le(t, e, i, o, a, s) {\n        _classCallCheck(this, le);\n\n        var r = t.gl;\n        this.program = r.createProgram();\n        var n = ne(i.staticAttributes),\n            l = o ? o.getBinderAttributes() : [],\n            c = n.concat(l),\n            h = i.staticUniforms ? ne(i.staticUniforms) : [],\n            u = o ? o.getBinderUniforms() : [],\n            d = h.concat(u),\n            m = [];\n\n        var _iterator192 = _createForOfIteratorHelper(d),\n            _step192;\n\n        try {\n          for (_iterator192.s(); !(_step192 = _iterator192.n()).done;) {\n            var _t315 = _step192.value;\n            m.indexOf(_t315) < 0 && m.push(_t315);\n          }\n        } catch (err) {\n          _iterator192.e(err);\n        } finally {\n          _iterator192.f();\n        }\n\n        var _ = o ? o.defines() : [];\n\n        s && _.push(\"#define OVERDRAW_INSPECTOR;\");\n\n        var p = _.concat(ae.prelude.fragmentSource, i.fragmentSource).join(\"\\n\"),\n            f = _.concat(ae.prelude.vertexSource, i.vertexSource).join(\"\\n\"),\n            g = r.createShader(r.FRAGMENT_SHADER);\n\n        if (r.isContextLost()) return void (this.failedToCreate = !0);\n        r.shaderSource(g, p), r.compileShader(g), r.attachShader(this.program, g);\n        var x = r.createShader(r.VERTEX_SHADER);\n        if (r.isContextLost()) return void (this.failedToCreate = !0);\n        r.shaderSource(x, f), r.compileShader(x), r.attachShader(this.program, x), this.attributes = {};\n        var v = {};\n        this.numAttributes = c.length;\n\n        for (var _t312 = 0; _t312 < this.numAttributes; _t312++) {\n          c[_t312] && (r.bindAttribLocation(this.program, _t312, c[_t312]), this.attributes[c[_t312]] = _t312);\n        }\n\n        r.linkProgram(this.program), r.deleteShader(x), r.deleteShader(g);\n\n        for (var _t313 = 0; _t313 < m.length; _t313++) {\n          var _e267 = m[_t313];\n\n          if (_e267 && !v[_e267]) {\n            var _t314 = r.getUniformLocation(this.program, _e267);\n\n            _t314 && (v[_e267] = _t314);\n          }\n        }\n\n        this.fixedUniforms = a(t, v), this.binderUniforms = o ? o.getUniforms(t, v) : [];\n      }\n\n      _createClass(le, [{\n        key: \"draw\",\n        value: function draw(t, e, i, o, a, s, r, n, l, c, h, u, d, m, _, p) {\n          var _f$LINES$f$TRIANGLES$;\n\n          var f = t.gl;\n          if (this.failedToCreate) return;\n          t.program.set(this.program), t.setDepthMode(i), t.setStencilMode(o), t.setColorMode(a), t.setCullFace(s);\n\n          for (var _t316 in this.fixedUniforms) {\n            this.fixedUniforms[_t316].set(r[_t316]);\n          }\n\n          m && m.setUniforms(t, this.binderUniforms, u, {\n            zoom: d\n          });\n          var g = (_f$LINES$f$TRIANGLES$ = {}, _defineProperty(_f$LINES$f$TRIANGLES$, f.LINES, 2), _defineProperty(_f$LINES$f$TRIANGLES$, f.TRIANGLES, 3), _defineProperty(_f$LINES$f$TRIANGLES$, f.LINE_STRIP, 1), _f$LINES$f$TRIANGLES$)[e];\n\n          var _iterator193 = _createForOfIteratorHelper(h.get()),\n              _step193;\n\n          try {\n            for (_iterator193.s(); !(_step193 = _iterator193.n()).done;) {\n              var _i204 = _step193.value;\n\n              var _o98 = _i204.vaos || (_i204.vaos = {});\n\n              (_o98[n] || (_o98[n] = new re())).bind(t, this, l, m ? m.getPaintVertexBuffers() : [], c, _i204.vertexOffset, _, p), f.drawElements(e, _i204.primitiveLength * g, f.UNSIGNED_SHORT, _i204.primitiveOffset * g * 2);\n            }\n          } catch (err) {\n            _iterator193.e(err);\n          } finally {\n            _iterator193.f();\n          }\n        }\n      }]);\n\n      return le;\n    }();\n\n    function ce(t, e, i) {\n      var o = 1 / It(i, 1, e.transform.tileZoom),\n          a = Math.pow(2, i.tileID.overscaledZ),\n          s = i.tileSize * Math.pow(2, e.transform.tileZoom) / a,\n          r = s * (i.tileID.canonical.x + i.tileID.wrap * a),\n          n = s * i.tileID.canonical.y;\n      return {\n        u_image: 0,\n        u_texsize: i.imageAtlasTexture.size,\n        u_scale: [o, t.fromScale, t.toScale],\n        u_fade: t.t,\n        u_pixel_coord_upper: [r >> 16, n >> 16],\n        u_pixel_coord_lower: [65535 & r, 65535 & n]\n      };\n    }\n\n    var he = function he(e, i, o, a) {\n      var s = i.style.light,\n          r = s.properties.get(\"position\"),\n          n = [r.x, r.y, r.z],\n          l = function () {\n        var e = new t.ARRAY_TYPE(9);\n        return t.ARRAY_TYPE != Float32Array && (e[1] = 0, e[2] = 0, e[3] = 0, e[5] = 0, e[6] = 0, e[7] = 0), e[0] = 1, e[4] = 1, e[8] = 1, e;\n      }();\n\n      \"viewport\" === s.properties.get(\"anchor\") && function (t, e) {\n        var i = Math.sin(e),\n            o = Math.cos(e);\n        t[0] = o, t[1] = i, t[2] = 0, t[3] = -i, t[4] = o, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1;\n      }(l, -i.transform.angle), function (t, e, i) {\n        var o = e[0],\n            a = e[1],\n            s = e[2];\n        t[0] = o * i[0] + a * i[3] + s * i[6], t[1] = o * i[1] + a * i[4] + s * i[7], t[2] = o * i[2] + a * i[5] + s * i[8];\n      }(n, n, l);\n      var c = s.properties.get(\"color\");\n      return {\n        u_matrix: e,\n        u_lightpos: n,\n        u_lightintensity: s.properties.get(\"intensity\"),\n        u_lightcolor: [c.r, c.g, c.b],\n        u_vertical_gradient: +o,\n        u_opacity: a\n      };\n    },\n        ue = function ue(e, i, o, a, s, r, n) {\n      return t.extend(he(e, i, o, a), ce(r, i, n), {\n        u_height_factor: -Math.pow(2, s.overscaledZ) / n.tileSize / 8\n      });\n    },\n        de = function de(t) {\n      return {\n        u_matrix: t\n      };\n    },\n        me = function me(e, i, o, a) {\n      return t.extend(de(e), ce(o, i, a));\n    },\n        _e = function _e(t, e) {\n      return {\n        u_matrix: t,\n        u_world: e\n      };\n    },\n        pe = function pe(e, i, o, a, s) {\n      return t.extend(me(e, i, o, a), {\n        u_world: s\n      });\n    },\n        fe = function fe(t, e, i, o) {\n      var a = t.transform;\n      var s, r;\n\n      if (\"map\" === o.paint.get(\"circle-pitch-alignment\")) {\n        var _t317 = It(i, 1, a.zoom);\n\n        s = !0, r = [_t317, _t317];\n      } else s = !1, r = a.pixelsToGLUnits;\n\n      return {\n        u_camera_to_center_distance: a.cameraToCenterDistance,\n        u_scale_with_map: +(\"map\" === o.paint.get(\"circle-pitch-scale\")),\n        u_matrix: t.translatePosMatrix(e.posMatrix, i, o.paint.get(\"circle-translate\"), o.paint.get(\"circle-translate-anchor\")),\n        u_pitch_with_map: +s,\n        u_device_pixel_ratio: t.pixelRatio,\n        u_extrude_scale: r\n      };\n    },\n        ge = function ge(t, e, i) {\n      var o = It(i, 1, e.zoom),\n          a = Math.pow(2, e.zoom - i.tileID.overscaledZ),\n          s = i.tileID.overscaleFactor();\n      return {\n        u_matrix: t,\n        u_camera_to_center_distance: e.cameraToCenterDistance,\n        u_pixels_to_tile_units: o,\n        u_extrude_scale: [e.pixelsToGLUnits[0] / (o * a), e.pixelsToGLUnits[1] / (o * a)],\n        u_overscale_factor: s\n      };\n    },\n        xe = function xe(t, e) {\n      var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      return {\n        u_matrix: t,\n        u_color: e,\n        u_overlay: 0,\n        u_overlay_scale: i\n      };\n    },\n        ve = function ve(t) {\n      return {\n        u_matrix: t\n      };\n    },\n        ye = function ye(t, e, i, o) {\n      return {\n        u_matrix: t,\n        u_extrude_scale: It(e, 1, i),\n        u_intensity: o\n      };\n    };\n\n    function be(e, i) {\n      var o = Math.pow(2, i.canonical.z),\n          a = i.canonical.y;\n      return [new t.MercatorCoordinate(0, a / o).toLngLat().lat, new t.MercatorCoordinate(0, (a + 1) / o).toLngLat().lat];\n    }\n\n    var we = function we(t, e, i) {\n      var o = t.transform;\n      return {\n        u_matrix: Ce(t, e, i),\n        u_ratio: 1 / It(e, 1, o.zoom),\n        u_device_pixel_ratio: t.pixelRatio,\n        u_units_to_pixels: [1 / o.pixelsToGLUnits[0], 1 / o.pixelsToGLUnits[1]]\n      };\n    },\n        Te = function Te(e, i, o, a) {\n      return t.extend(we(e, i, o), {\n        u_image: 0,\n        u_image_height: a\n      });\n    },\n        Ee = function Ee(t, e, i, o) {\n      var a = t.transform,\n          s = Se(e, a);\n      return {\n        u_matrix: Ce(t, e, i),\n        u_texsize: e.imageAtlasTexture.size,\n        u_ratio: 1 / It(e, 1, a.zoom),\n        u_device_pixel_ratio: t.pixelRatio,\n        u_image: 0,\n        u_scale: [s, o.fromScale, o.toScale],\n        u_fade: o.t,\n        u_units_to_pixels: [1 / a.pixelsToGLUnits[0], 1 / a.pixelsToGLUnits[1]]\n      };\n    },\n        Ie = function Ie(e, i, o, a, s) {\n      var r = e.lineAtlas,\n          n = Se(i, e.transform),\n          l = \"round\" === o.layout.get(\"line-cap\"),\n          c = r.getDash(a.from, l),\n          h = r.getDash(a.to, l),\n          u = c.width * s.fromScale,\n          d = h.width * s.toScale;\n      return t.extend(we(e, i, o), {\n        u_patternscale_a: [n / u, -c.height / 2],\n        u_patternscale_b: [n / d, -h.height / 2],\n        u_sdfgamma: r.width / (256 * Math.min(u, d) * e.pixelRatio) / 2,\n        u_image: 0,\n        u_tex_y_a: c.y,\n        u_tex_y_b: h.y,\n        u_mix: s.t\n      });\n    };\n\n    function Se(t, e) {\n      return 1 / It(t, 1, e.tileZoom);\n    }\n\n    function Ce(t, e, i) {\n      return t.translatePosMatrix(e.tileID.posMatrix, e, i.paint.get(\"line-translate\"), i.paint.get(\"line-translate-anchor\"));\n    }\n\n    var Pe = function Pe(t, e, i, o, a) {\n      return {\n        u_matrix: t,\n        u_tl_parent: e,\n        u_scale_parent: i,\n        u_buffer_scale: 1,\n        u_fade_t: o.mix,\n        u_opacity: o.opacity * a.paint.get(\"raster-opacity\"),\n        u_image0: 0,\n        u_image1: 1,\n        u_brightness_low: a.paint.get(\"raster-brightness-min\"),\n        u_brightness_high: a.paint.get(\"raster-brightness-max\"),\n        u_saturation_factor: (r = a.paint.get(\"raster-saturation\"), r > 0 ? 1 - 1 / (1.001 - r) : -r),\n        u_contrast_factor: (s = a.paint.get(\"raster-contrast\"), s > 0 ? 1 / (1 - s) : 1 + s),\n        u_spin_weights: ze(a.paint.get(\"raster-hue-rotate\"))\n      };\n      var s, r;\n    };\n\n    function ze(t) {\n      t *= Math.PI / 180;\n      var e = Math.sin(t),\n          i = Math.cos(t);\n      return [(2 * i + 1) / 3, (-Math.sqrt(3) * e - i + 1) / 3, (Math.sqrt(3) * e - i + 1) / 3];\n    }\n\n    var De = function De(t, e, i, o, a, s, r, n, l, c) {\n      var h = a.transform;\n      return {\n        u_is_size_zoom_constant: +(\"constant\" === t || \"source\" === t),\n        u_is_size_feature_constant: +(\"constant\" === t || \"camera\" === t),\n        u_size_t: e ? e.uSizeT : 0,\n        u_size: e ? e.uSize : 0,\n        u_camera_to_center_distance: h.cameraToCenterDistance,\n        u_pitch: h.pitch / 360 * 2 * Math.PI,\n        u_rotate_symbol: +i,\n        u_aspect_ratio: h.width / h.height,\n        u_fade_change: a.options.fadeDuration ? a.symbolFadeChange : 1,\n        u_matrix: s,\n        u_label_plane_matrix: r,\n        u_coord_matrix: n,\n        u_is_text: +l,\n        u_pitch_with_map: +o,\n        u_texsize: c,\n        u_texture: 0\n      };\n    },\n        Ae = function Ae(e, i, o, a, s, r, n, l, c, h, u) {\n      var d = s.transform;\n      return t.extend(De(e, i, o, a, s, r, n, l, c, h), {\n        u_gamma_scale: a ? Math.cos(d._pitch) * d.cameraToCenterDistance : 1,\n        u_device_pixel_ratio: s.pixelRatio,\n        u_is_halo: +u\n      });\n    },\n        Me = function Me(e, i, o, a, s, r, n, l, c, h) {\n      return t.extend(Ae(e, i, o, a, s, r, n, l, !0, c, !0), {\n        u_texsize_icon: h,\n        u_texture_icon: 1\n      });\n    },\n        Le = function Le(t, e, i) {\n      return {\n        u_matrix: t,\n        u_opacity: e,\n        u_color: i\n      };\n    },\n        Re = function Re(e, i, o, a, s, r) {\n      return t.extend(function (t, e, i, o) {\n        var a = i.imageManager.getPattern(t.from.toString()),\n            s = i.imageManager.getPattern(t.to.toString()),\n            _i$imageManager$getPi = i.imageManager.getPixelSize(),\n            r = _i$imageManager$getPi.width,\n            n = _i$imageManager$getPi.height,\n            l = Math.pow(2, o.tileID.overscaledZ),\n            c = o.tileSize * Math.pow(2, i.transform.tileZoom) / l,\n            h = c * (o.tileID.canonical.x + o.tileID.wrap * l),\n            u = c * o.tileID.canonical.y;\n\n        return {\n          u_image: 0,\n          u_pattern_tl_a: a.tl,\n          u_pattern_br_a: a.br,\n          u_pattern_tl_b: s.tl,\n          u_pattern_br_b: s.br,\n          u_texsize: [r, n],\n          u_mix: e.t,\n          u_pattern_size_a: a.displaySize,\n          u_pattern_size_b: s.displaySize,\n          u_scale_a: e.fromScale,\n          u_scale_b: e.toScale,\n          u_tile_units_to_pixels: 1 / It(o, 1, i.transform.tileZoom),\n          u_pixel_coord_upper: [h >> 16, u >> 16],\n          u_pixel_coord_lower: [65535 & h, 65535 & u]\n        };\n      }(a, r, o, s), {\n        u_matrix: e,\n        u_opacity: i\n      });\n    },\n        ke = {\n      fillExtrusion: function fillExtrusion(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_lightpos: new t.Uniform3f(e, i.u_lightpos),\n          u_lightintensity: new t.Uniform1f(e, i.u_lightintensity),\n          u_lightcolor: new t.Uniform3f(e, i.u_lightcolor),\n          u_vertical_gradient: new t.Uniform1f(e, i.u_vertical_gradient),\n          u_opacity: new t.Uniform1f(e, i.u_opacity)\n        };\n      },\n      fillExtrusionPattern: function fillExtrusionPattern(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_lightpos: new t.Uniform3f(e, i.u_lightpos),\n          u_lightintensity: new t.Uniform1f(e, i.u_lightintensity),\n          u_lightcolor: new t.Uniform3f(e, i.u_lightcolor),\n          u_vertical_gradient: new t.Uniform1f(e, i.u_vertical_gradient),\n          u_height_factor: new t.Uniform1f(e, i.u_height_factor),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n          u_scale: new t.Uniform3f(e, i.u_scale),\n          u_fade: new t.Uniform1f(e, i.u_fade),\n          u_opacity: new t.Uniform1f(e, i.u_opacity)\n        };\n      },\n      fill: function fill(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n        };\n      },\n      fillPattern: function fillPattern(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n          u_scale: new t.Uniform3f(e, i.u_scale),\n          u_fade: new t.Uniform1f(e, i.u_fade)\n        };\n      },\n      fillOutline: function fillOutline(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_world: new t.Uniform2f(e, i.u_world)\n        };\n      },\n      fillOutlinePattern: function fillOutlinePattern(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_world: new t.Uniform2f(e, i.u_world),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n          u_scale: new t.Uniform3f(e, i.u_scale),\n          u_fade: new t.Uniform1f(e, i.u_fade)\n        };\n      },\n      circle: function circle(e, i) {\n        return {\n          u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n          u_scale_with_map: new t.Uniform1i(e, i.u_scale_with_map),\n          u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n          u_extrude_scale: new t.Uniform2f(e, i.u_extrude_scale),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n        };\n      },\n      collisionBox: function collisionBox(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n          u_pixels_to_tile_units: new t.Uniform1f(e, i.u_pixels_to_tile_units),\n          u_extrude_scale: new t.Uniform2f(e, i.u_extrude_scale),\n          u_overscale_factor: new t.Uniform1f(e, i.u_overscale_factor)\n        };\n      },\n      collisionCircle: function collisionCircle(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_inv_matrix: new t.UniformMatrix4f(e, i.u_inv_matrix),\n          u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n          u_viewport_size: new t.Uniform2f(e, i.u_viewport_size)\n        };\n      },\n      debug: function debug(e, i) {\n        return {\n          u_color: new t.UniformColor(e, i.u_color),\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_overlay: new t.Uniform1i(e, i.u_overlay),\n          u_overlay_scale: new t.Uniform1f(e, i.u_overlay_scale)\n        };\n      },\n      clippingMask: function clippingMask(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n        };\n      },\n      heatmap: function heatmap(e, i) {\n        return {\n          u_extrude_scale: new t.Uniform1f(e, i.u_extrude_scale),\n          u_intensity: new t.Uniform1f(e, i.u_intensity),\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix)\n        };\n      },\n      heatmapTexture: function heatmapTexture(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_world: new t.Uniform2f(e, i.u_world),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_color_ramp: new t.Uniform1i(e, i.u_color_ramp),\n          u_opacity: new t.Uniform1f(e, i.u_opacity)\n        };\n      },\n      hillshade: function hillshade(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_latrange: new t.Uniform2f(e, i.u_latrange),\n          u_light: new t.Uniform2f(e, i.u_light),\n          u_shadow: new t.UniformColor(e, i.u_shadow),\n          u_highlight: new t.UniformColor(e, i.u_highlight),\n          u_accent: new t.UniformColor(e, i.u_accent)\n        };\n      },\n      hillshadePrepare: function hillshadePrepare(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_dimension: new t.Uniform2f(e, i.u_dimension),\n          u_zoom: new t.Uniform1f(e, i.u_zoom),\n          u_unpack: new t.Uniform4f(e, i.u_unpack)\n        };\n      },\n      line: function line(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_ratio: new t.Uniform1f(e, i.u_ratio),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels)\n        };\n      },\n      lineGradient: function lineGradient(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_ratio: new t.Uniform1f(e, i.u_ratio),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_image_height: new t.Uniform1f(e, i.u_image_height)\n        };\n      },\n      linePattern: function linePattern(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_ratio: new t.Uniform1f(e, i.u_ratio),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels),\n          u_scale: new t.Uniform3f(e, i.u_scale),\n          u_fade: new t.Uniform1f(e, i.u_fade)\n        };\n      },\n      lineSDF: function lineSDF(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_ratio: new t.Uniform1f(e, i.u_ratio),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_units_to_pixels: new t.Uniform2f(e, i.u_units_to_pixels),\n          u_patternscale_a: new t.Uniform2f(e, i.u_patternscale_a),\n          u_patternscale_b: new t.Uniform2f(e, i.u_patternscale_b),\n          u_sdfgamma: new t.Uniform1f(e, i.u_sdfgamma),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_tex_y_a: new t.Uniform1f(e, i.u_tex_y_a),\n          u_tex_y_b: new t.Uniform1f(e, i.u_tex_y_b),\n          u_mix: new t.Uniform1f(e, i.u_mix)\n        };\n      },\n      raster: function raster(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_tl_parent: new t.Uniform2f(e, i.u_tl_parent),\n          u_scale_parent: new t.Uniform1f(e, i.u_scale_parent),\n          u_buffer_scale: new t.Uniform1f(e, i.u_buffer_scale),\n          u_fade_t: new t.Uniform1f(e, i.u_fade_t),\n          u_opacity: new t.Uniform1f(e, i.u_opacity),\n          u_image0: new t.Uniform1i(e, i.u_image0),\n          u_image1: new t.Uniform1i(e, i.u_image1),\n          u_brightness_low: new t.Uniform1f(e, i.u_brightness_low),\n          u_brightness_high: new t.Uniform1f(e, i.u_brightness_high),\n          u_saturation_factor: new t.Uniform1f(e, i.u_saturation_factor),\n          u_contrast_factor: new t.Uniform1f(e, i.u_contrast_factor),\n          u_spin_weights: new t.Uniform3f(e, i.u_spin_weights)\n        };\n      },\n      symbolIcon: function symbolIcon(e, i) {\n        return {\n          u_is_size_zoom_constant: new t.Uniform1i(e, i.u_is_size_zoom_constant),\n          u_is_size_feature_constant: new t.Uniform1i(e, i.u_is_size_feature_constant),\n          u_size_t: new t.Uniform1f(e, i.u_size_t),\n          u_size: new t.Uniform1f(e, i.u_size),\n          u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n          u_pitch: new t.Uniform1f(e, i.u_pitch),\n          u_rotate_symbol: new t.Uniform1i(e, i.u_rotate_symbol),\n          u_aspect_ratio: new t.Uniform1f(e, i.u_aspect_ratio),\n          u_fade_change: new t.Uniform1f(e, i.u_fade_change),\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_label_plane_matrix: new t.UniformMatrix4f(e, i.u_label_plane_matrix),\n          u_coord_matrix: new t.UniformMatrix4f(e, i.u_coord_matrix),\n          u_is_text: new t.Uniform1i(e, i.u_is_text),\n          u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_texture: new t.Uniform1i(e, i.u_texture)\n        };\n      },\n      symbolSDF: function symbolSDF(e, i) {\n        return {\n          u_is_size_zoom_constant: new t.Uniform1i(e, i.u_is_size_zoom_constant),\n          u_is_size_feature_constant: new t.Uniform1i(e, i.u_is_size_feature_constant),\n          u_size_t: new t.Uniform1f(e, i.u_size_t),\n          u_size: new t.Uniform1f(e, i.u_size),\n          u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n          u_pitch: new t.Uniform1f(e, i.u_pitch),\n          u_rotate_symbol: new t.Uniform1i(e, i.u_rotate_symbol),\n          u_aspect_ratio: new t.Uniform1f(e, i.u_aspect_ratio),\n          u_fade_change: new t.Uniform1f(e, i.u_fade_change),\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_label_plane_matrix: new t.UniformMatrix4f(e, i.u_label_plane_matrix),\n          u_coord_matrix: new t.UniformMatrix4f(e, i.u_coord_matrix),\n          u_is_text: new t.Uniform1i(e, i.u_is_text),\n          u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_texture: new t.Uniform1i(e, i.u_texture),\n          u_gamma_scale: new t.Uniform1f(e, i.u_gamma_scale),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_is_halo: new t.Uniform1i(e, i.u_is_halo)\n        };\n      },\n      symbolTextAndIcon: function symbolTextAndIcon(e, i) {\n        return {\n          u_is_size_zoom_constant: new t.Uniform1i(e, i.u_is_size_zoom_constant),\n          u_is_size_feature_constant: new t.Uniform1i(e, i.u_is_size_feature_constant),\n          u_size_t: new t.Uniform1f(e, i.u_size_t),\n          u_size: new t.Uniform1f(e, i.u_size),\n          u_camera_to_center_distance: new t.Uniform1f(e, i.u_camera_to_center_distance),\n          u_pitch: new t.Uniform1f(e, i.u_pitch),\n          u_rotate_symbol: new t.Uniform1i(e, i.u_rotate_symbol),\n          u_aspect_ratio: new t.Uniform1f(e, i.u_aspect_ratio),\n          u_fade_change: new t.Uniform1f(e, i.u_fade_change),\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_label_plane_matrix: new t.UniformMatrix4f(e, i.u_label_plane_matrix),\n          u_coord_matrix: new t.UniformMatrix4f(e, i.u_coord_matrix),\n          u_is_text: new t.Uniform1i(e, i.u_is_text),\n          u_pitch_with_map: new t.Uniform1i(e, i.u_pitch_with_map),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_texsize_icon: new t.Uniform2f(e, i.u_texsize_icon),\n          u_texture: new t.Uniform1i(e, i.u_texture),\n          u_texture_icon: new t.Uniform1i(e, i.u_texture_icon),\n          u_gamma_scale: new t.Uniform1f(e, i.u_gamma_scale),\n          u_device_pixel_ratio: new t.Uniform1f(e, i.u_device_pixel_ratio),\n          u_is_halo: new t.Uniform1i(e, i.u_is_halo)\n        };\n      },\n      background: function background(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_opacity: new t.Uniform1f(e, i.u_opacity),\n          u_color: new t.UniformColor(e, i.u_color)\n        };\n      },\n      backgroundPattern: function backgroundPattern(e, i) {\n        return {\n          u_matrix: new t.UniformMatrix4f(e, i.u_matrix),\n          u_opacity: new t.Uniform1f(e, i.u_opacity),\n          u_image: new t.Uniform1i(e, i.u_image),\n          u_pattern_tl_a: new t.Uniform2f(e, i.u_pattern_tl_a),\n          u_pattern_br_a: new t.Uniform2f(e, i.u_pattern_br_a),\n          u_pattern_tl_b: new t.Uniform2f(e, i.u_pattern_tl_b),\n          u_pattern_br_b: new t.Uniform2f(e, i.u_pattern_br_b),\n          u_texsize: new t.Uniform2f(e, i.u_texsize),\n          u_mix: new t.Uniform1f(e, i.u_mix),\n          u_pattern_size_a: new t.Uniform2f(e, i.u_pattern_size_a),\n          u_pattern_size_b: new t.Uniform2f(e, i.u_pattern_size_b),\n          u_scale_a: new t.Uniform1f(e, i.u_scale_a),\n          u_scale_b: new t.Uniform1f(e, i.u_scale_b),\n          u_pixel_coord_upper: new t.Uniform2f(e, i.u_pixel_coord_upper),\n          u_pixel_coord_lower: new t.Uniform2f(e, i.u_pixel_coord_lower),\n          u_tile_units_to_pixels: new t.Uniform1f(e, i.u_tile_units_to_pixels)\n        };\n      }\n    };\n\n    var Be = /*#__PURE__*/function () {\n      function Be(t, e, i) {\n        _classCallCheck(this, Be);\n\n        this.context = t;\n        var o = t.gl;\n        this.buffer = o.createBuffer(), this.dynamicDraw = Boolean(i), this.context.unbindVAO(), t.bindElementBuffer.set(this.buffer), o.bufferData(o.ELEMENT_ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? o.DYNAMIC_DRAW : o.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;\n      }\n\n      _createClass(Be, [{\n        key: \"bind\",\n        value: function bind() {\n          this.context.bindElementBuffer.set(this.buffer);\n        }\n      }, {\n        key: \"updateData\",\n        value: function updateData(t) {\n          var e = this.context.gl;\n          this.context.unbindVAO(), this.bind(), e.bufferSubData(e.ELEMENT_ARRAY_BUFFER, 0, t.arrayBuffer);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);\n        }\n      }]);\n\n      return Be;\n    }();\n\n    var Fe = {\n      Int8: \"BYTE\",\n      Uint8: \"UNSIGNED_BYTE\",\n      Int16: \"SHORT\",\n      Uint16: \"UNSIGNED_SHORT\",\n      Int32: \"INT\",\n      Uint32: \"UNSIGNED_INT\",\n      Float32: \"FLOAT\"\n    };\n\n    var Oe = /*#__PURE__*/function () {\n      function Oe(t, e, i, o) {\n        _classCallCheck(this, Oe);\n\n        this.length = e.length, this.attributes = i, this.itemSize = e.bytesPerElement, this.dynamicDraw = o, this.context = t;\n        var a = t.gl;\n        this.buffer = a.createBuffer(), t.bindVertexBuffer.set(this.buffer), a.bufferData(a.ARRAY_BUFFER, e.arrayBuffer, this.dynamicDraw ? a.DYNAMIC_DRAW : a.STATIC_DRAW), this.dynamicDraw || delete e.arrayBuffer;\n      }\n\n      _createClass(Oe, [{\n        key: \"bind\",\n        value: function bind() {\n          this.context.bindVertexBuffer.set(this.buffer);\n        }\n      }, {\n        key: \"updateData\",\n        value: function updateData(t) {\n          var e = this.context.gl;\n          this.bind(), e.bufferSubData(e.ARRAY_BUFFER, 0, t.arrayBuffer);\n        }\n      }, {\n        key: \"enableAttributes\",\n        value: function enableAttributes(t, e) {\n          for (var _i205 = 0; _i205 < this.attributes.length; _i205++) {\n            var _o99 = e.attributes[this.attributes[_i205].name];\n            void 0 !== _o99 && t.enableVertexAttribArray(_o99);\n          }\n        }\n      }, {\n        key: \"setVertexAttribPointers\",\n        value: function setVertexAttribPointers(t, e, i) {\n          for (var _o100 = 0; _o100 < this.attributes.length; _o100++) {\n            var _a106 = this.attributes[_o100],\n                _s106 = e.attributes[_a106.name];\n            void 0 !== _s106 && t.vertexAttribPointer(_s106, _a106.components, t[Fe[_a106.type]], !1, this.itemSize, _a106.offset + this.itemSize * (i || 0));\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.buffer && (this.context.gl.deleteBuffer(this.buffer), delete this.buffer);\n        }\n      }]);\n\n      return Oe;\n    }();\n\n    var Ue = /*#__PURE__*/function () {\n      function Ue(t) {\n        _classCallCheck(this, Ue);\n\n        this.gl = t.gl, this.default = this.getDefault(), this.current = this.default, this.dirty = !1;\n      }\n\n      _createClass(Ue, [{\n        key: \"get\",\n        value: function get() {\n          return this.current;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {}\n      }, {\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.default;\n        }\n      }, {\n        key: \"setDefault\",\n        value: function setDefault() {\n          this.set(this.default);\n        }\n      }]);\n\n      return Ue;\n    }();\n\n    var Ne = /*#__PURE__*/function (_Ue) {\n      _inherits(Ne, _Ue);\n\n      function Ne() {\n        _classCallCheck(this, Ne);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ne).apply(this, arguments));\n      }\n\n      _createClass(Ne, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return t.Color.transparent;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.clearColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Ne;\n    }(Ue);\n\n    var Ge = /*#__PURE__*/function (_Ue2) {\n      _inherits(Ge, _Ue2);\n\n      function Ge() {\n        _classCallCheck(this, Ge);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ge).apply(this, arguments));\n      }\n\n      _createClass(Ge, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.clearDepth(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Ge;\n    }(Ue);\n\n    var Ze = /*#__PURE__*/function (_Ue3) {\n      _inherits(Ze, _Ue3);\n\n      function Ze() {\n        _classCallCheck(this, Ze);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ze).apply(this, arguments));\n      }\n\n      _createClass(Ze, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.clearStencil(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Ze;\n    }(Ue);\n\n    var qe = /*#__PURE__*/function (_Ue4) {\n      _inherits(qe, _Ue4);\n\n      function qe() {\n        _classCallCheck(this, qe);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(qe).apply(this, arguments));\n      }\n\n      _createClass(qe, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return [!0, !0, !0, !0];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.colorMask(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return qe;\n    }(Ue);\n\n    var Ve = /*#__PURE__*/function (_Ue5) {\n      _inherits(Ve, _Ue5);\n\n      function Ve() {\n        _classCallCheck(this, Ve);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ve).apply(this, arguments));\n      }\n\n      _createClass(Ve, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.depthMask(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Ve;\n    }(Ue);\n\n    var je = /*#__PURE__*/function (_Ue6) {\n      _inherits(je, _Ue6);\n\n      function je() {\n        _classCallCheck(this, je);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(je).apply(this, arguments));\n      }\n\n      _createClass(je, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 255;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.stencilMask(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return je;\n    }(Ue);\n\n    var $e = /*#__PURE__*/function (_Ue7) {\n      _inherits($e, _Ue7);\n\n      function $e() {\n        _classCallCheck(this, $e);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf($e).apply(this, arguments));\n      }\n\n      _createClass($e, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return {\n            func: this.gl.ALWAYS,\n            ref: 0,\n            mask: 255\n          };\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.func !== e.func || t.ref !== e.ref || t.mask !== e.mask || this.dirty) && (this.gl.stencilFunc(t.func, t.ref, t.mask), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return $e;\n    }(Ue);\n\n    var We = /*#__PURE__*/function (_Ue8) {\n      _inherits(We, _Ue8);\n\n      function We() {\n        _classCallCheck(this, We);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(We).apply(this, arguments));\n      }\n\n      _createClass(We, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [t.KEEP, t.KEEP, t.KEEP];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || this.dirty) && (this.gl.stencilOp(t[0], t[1], t[2]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return We;\n    }(Ue);\n\n    var Xe = /*#__PURE__*/function (_Ue9) {\n      _inherits(Xe, _Ue9);\n\n      function Xe() {\n        _classCallCheck(this, Xe);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Xe).apply(this, arguments));\n      }\n\n      _createClass(Xe, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.STENCIL_TEST) : e.disable(e.STENCIL_TEST), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return Xe;\n    }(Ue);\n\n    var He = /*#__PURE__*/function (_Ue10) {\n      _inherits(He, _Ue10);\n\n      function He() {\n        _classCallCheck(this, He);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(He).apply(this, arguments));\n      }\n\n      _createClass(He, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return [0, 1];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.depthRange(t[0], t[1]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return He;\n    }(Ue);\n\n    var Ke = /*#__PURE__*/function (_Ue11) {\n      _inherits(Ke, _Ue11);\n\n      function Ke() {\n        _classCallCheck(this, Ke);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ke).apply(this, arguments));\n      }\n\n      _createClass(Ke, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.DEPTH_TEST) : e.disable(e.DEPTH_TEST), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return Ke;\n    }(Ue);\n\n    var Ye = /*#__PURE__*/function (_Ue12) {\n      _inherits(Ye, _Ue12);\n\n      function Ye() {\n        _classCallCheck(this, Ye);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ye).apply(this, arguments));\n      }\n\n      _createClass(Ye, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.LESS;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.depthFunc(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Ye;\n    }(Ue);\n\n    var Je = /*#__PURE__*/function (_Ue13) {\n      _inherits(Je, _Ue13);\n\n      function Je() {\n        _classCallCheck(this, Je);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Je).apply(this, arguments));\n      }\n\n      _createClass(Je, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.BLEND) : e.disable(e.BLEND), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return Je;\n    }(Ue);\n\n    var Qe = /*#__PURE__*/function (_Ue14) {\n      _inherits(Qe, _Ue14);\n\n      function Qe() {\n        _classCallCheck(this, Qe);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Qe).apply(this, arguments));\n      }\n\n      _createClass(Qe, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [t.ONE, t.ZERO];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || this.dirty) && (this.gl.blendFunc(t[0], t[1]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return Qe;\n    }(Ue);\n\n    var ti = /*#__PURE__*/function (_Ue15) {\n      _inherits(ti, _Ue15);\n\n      function ti() {\n        _classCallCheck(this, ti);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ti).apply(this, arguments));\n      }\n\n      _createClass(ti, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return t.Color.transparent;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t.r !== e.r || t.g !== e.g || t.b !== e.b || t.a !== e.a || this.dirty) && (this.gl.blendColor(t.r, t.g, t.b, t.a), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ti;\n    }(Ue);\n\n    var ei = /*#__PURE__*/function (_Ue16) {\n      _inherits(ei, _Ue16);\n\n      function ei() {\n        _classCallCheck(this, ei);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ei).apply(this, arguments));\n      }\n\n      _createClass(ei, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.FUNC_ADD;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.blendEquation(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ei;\n    }(Ue);\n\n    var ii = /*#__PURE__*/function (_Ue17) {\n      _inherits(ii, _Ue17);\n\n      function ii() {\n        _classCallCheck(this, ii);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ii).apply(this, arguments));\n      }\n\n      _createClass(ii, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          t ? e.enable(e.CULL_FACE) : e.disable(e.CULL_FACE), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return ii;\n    }(Ue);\n\n    var oi = /*#__PURE__*/function (_Ue18) {\n      _inherits(oi, _Ue18);\n\n      function oi() {\n        _classCallCheck(this, oi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(oi).apply(this, arguments));\n      }\n\n      _createClass(oi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.BACK;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.cullFace(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return oi;\n    }(Ue);\n\n    var ai = /*#__PURE__*/function (_Ue19) {\n      _inherits(ai, _Ue19);\n\n      function ai() {\n        _classCallCheck(this, ai);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ai).apply(this, arguments));\n      }\n\n      _createClass(ai, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.CCW;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.frontFace(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ai;\n    }(Ue);\n\n    var si = /*#__PURE__*/function (_Ue20) {\n      _inherits(si, _Ue20);\n\n      function si() {\n        _classCallCheck(this, si);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(si).apply(this, arguments));\n      }\n\n      _createClass(si, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.useProgram(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return si;\n    }(Ue);\n\n    var ri = /*#__PURE__*/function (_Ue21) {\n      _inherits(ri, _Ue21);\n\n      function ri() {\n        _classCallCheck(this, ri);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ri).apply(this, arguments));\n      }\n\n      _createClass(ri, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return this.gl.TEXTURE0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          (t !== this.current || this.dirty) && (this.gl.activeTexture(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ri;\n    }(Ue);\n\n    var ni = /*#__PURE__*/function (_Ue22) {\n      _inherits(ni, _Ue22);\n\n      function ni() {\n        _classCallCheck(this, ni);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ni).apply(this, arguments));\n      }\n\n      _createClass(ni, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          var t = this.gl;\n          return [0, 0, t.drawingBufferWidth, t.drawingBufferHeight];\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.current;\n          (t[0] !== e[0] || t[1] !== e[1] || t[2] !== e[2] || t[3] !== e[3] || this.dirty) && (this.gl.viewport(t[0], t[1], t[2], t[3]), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return ni;\n    }(Ue);\n\n    var li = /*#__PURE__*/function (_Ue23) {\n      _inherits(li, _Ue23);\n\n      function li() {\n        _classCallCheck(this, li);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(li).apply(this, arguments));\n      }\n\n      _createClass(li, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindFramebuffer(e.FRAMEBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return li;\n    }(Ue);\n\n    var ci = /*#__PURE__*/function (_Ue24) {\n      _inherits(ci, _Ue24);\n\n      function ci() {\n        _classCallCheck(this, ci);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ci).apply(this, arguments));\n      }\n\n      _createClass(ci, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindRenderbuffer(e.RENDERBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return ci;\n    }(Ue);\n\n    var hi = /*#__PURE__*/function (_Ue25) {\n      _inherits(hi, _Ue25);\n\n      function hi() {\n        _classCallCheck(this, hi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(hi).apply(this, arguments));\n      }\n\n      _createClass(hi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindTexture(e.TEXTURE_2D, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return hi;\n    }(Ue);\n\n    var ui = /*#__PURE__*/function (_Ue26) {\n      _inherits(ui, _Ue26);\n\n      function ui() {\n        _classCallCheck(this, ui);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(ui).apply(this, arguments));\n      }\n\n      _createClass(ui, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.bindBuffer(e.ARRAY_BUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return ui;\n    }(Ue);\n\n    var di = /*#__PURE__*/function (_Ue27) {\n      _inherits(di, _Ue27);\n\n      function di() {\n        _classCallCheck(this, di);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(di).apply(this, arguments));\n      }\n\n      _createClass(di, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          var e = this.gl;\n          e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return di;\n    }(Ue);\n\n    var mi = /*#__PURE__*/function (_Ue28) {\n      _inherits(mi, _Ue28);\n\n      function mi(t) {\n        var _this71;\n\n        _classCallCheck(this, mi);\n\n        _this71 = _possibleConstructorReturn(this, _getPrototypeOf(mi).call(this, t)), _this71.vao = t.extVertexArrayObject;\n        return _this71;\n      }\n\n      _createClass(mi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          this.vao && (t !== this.current || this.dirty) && (this.vao.bindVertexArrayOES(t), this.current = t, this.dirty = !1);\n        }\n      }]);\n\n      return mi;\n    }(Ue);\n\n    var _i = /*#__PURE__*/function (_Ue29) {\n      _inherits(_i, _Ue29);\n\n      function _i() {\n        _classCallCheck(this, _i);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(_i).apply(this, arguments));\n      }\n\n      _createClass(_i, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return 4;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_ALIGNMENT, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return _i;\n    }(Ue);\n\n    var pi = /*#__PURE__*/function (_Ue30) {\n      _inherits(pi, _Ue30);\n\n      function pi() {\n        _classCallCheck(this, pi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(pi).apply(this, arguments));\n      }\n\n      _createClass(pi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return pi;\n    }(Ue);\n\n    var fi = /*#__PURE__*/function (_Ue31) {\n      _inherits(fi, _Ue31);\n\n      function fi() {\n        _classCallCheck(this, fi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(fi).apply(this, arguments));\n      }\n\n      _createClass(fi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return !1;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          var e = this.gl;\n          e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return fi;\n    }(Ue);\n\n    var gi = /*#__PURE__*/function (_Ue32) {\n      _inherits(gi, _Ue32);\n\n      function gi(t, e) {\n        var _this72;\n\n        _classCallCheck(this, gi);\n\n        _this72 = _possibleConstructorReturn(this, _getPrototypeOf(gi).call(this, t)), _this72.context = t, _this72.parent = e;\n        return _this72;\n      }\n\n      _createClass(gi, [{\n        key: \"getDefault\",\n        value: function getDefault() {\n          return null;\n        }\n      }]);\n\n      return gi;\n    }(Ue);\n\n    var xi = /*#__PURE__*/function (_gi) {\n      _inherits(xi, _gi);\n\n      function xi() {\n        _classCallCheck(this, xi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(xi).apply(this, arguments));\n      }\n\n      _createClass(xi, [{\n        key: \"setDirty\",\n        value: function setDirty() {\n          this.dirty = !0;\n        }\n      }, {\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          this.context.bindFramebuffer.set(this.parent);\n          var e = this.gl;\n          e.framebufferTexture2D(e.FRAMEBUFFER, e.COLOR_ATTACHMENT0, e.TEXTURE_2D, t, 0), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return xi;\n    }(gi);\n\n    var vi = /*#__PURE__*/function (_gi2) {\n      _inherits(vi, _gi2);\n\n      function vi() {\n        _classCallCheck(this, vi);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(vi).apply(this, arguments));\n      }\n\n      _createClass(vi, [{\n        key: \"set\",\n        value: function set(t) {\n          if (t === this.current && !this.dirty) return;\n          this.context.bindFramebuffer.set(this.parent);\n          var e = this.gl;\n          e.framebufferRenderbuffer(e.FRAMEBUFFER, e.DEPTH_ATTACHMENT, e.RENDERBUFFER, t), this.current = t, this.dirty = !1;\n        }\n      }]);\n\n      return vi;\n    }(gi);\n\n    var yi = /*#__PURE__*/function () {\n      function yi(t, e, i, o) {\n        _classCallCheck(this, yi);\n\n        this.context = t, this.width = e, this.height = i;\n        var a = this.framebuffer = t.gl.createFramebuffer();\n        this.colorAttachment = new xi(t, a), o && (this.depthAttachment = new vi(t, a));\n      }\n\n      _createClass(yi, [{\n        key: \"destroy\",\n        value: function destroy() {\n          var t = this.context.gl,\n              e = this.colorAttachment.get();\n\n          if (e && t.deleteTexture(e), this.depthAttachment) {\n            var _e268 = this.depthAttachment.get();\n\n            _e268 && t.deleteRenderbuffer(_e268);\n          }\n\n          t.deleteFramebuffer(this.framebuffer);\n        }\n      }]);\n\n      return yi;\n    }();\n\n    var bi = function bi(t, e, i) {\n      _classCallCheck(this, bi);\n\n      this.blendFunction = t, this.blendColor = e, this.mask = i;\n    };\n\n    bi.Replace = [1, 0], bi.disabled = new bi(bi.Replace, t.Color.transparent, [!1, !1, !1, !1]), bi.unblended = new bi(bi.Replace, t.Color.transparent, [!0, !0, !0, !0]), bi.alphaBlended = new bi([1, 771], t.Color.transparent, [!0, !0, !0, !0]);\n\n    var wi = /*#__PURE__*/function () {\n      function wi(t) {\n        _classCallCheck(this, wi);\n\n        this.gl = t, this.extVertexArrayObject = this.gl.getExtension(\"OES_vertex_array_object\"), this.clearColor = new Ne(this), this.clearDepth = new Ge(this), this.clearStencil = new Ze(this), this.colorMask = new qe(this), this.depthMask = new Ve(this), this.stencilMask = new je(this), this.stencilFunc = new $e(this), this.stencilOp = new We(this), this.stencilTest = new Xe(this), this.depthRange = new He(this), this.depthTest = new Ke(this), this.depthFunc = new Ye(this), this.blend = new Je(this), this.blendFunc = new Qe(this), this.blendColor = new ti(this), this.blendEquation = new ei(this), this.cullFace = new ii(this), this.cullFaceSide = new oi(this), this.frontFace = new ai(this), this.program = new si(this), this.activeTexture = new ri(this), this.viewport = new ni(this), this.bindFramebuffer = new li(this), this.bindRenderbuffer = new ci(this), this.bindTexture = new hi(this), this.bindVertexBuffer = new ui(this), this.bindElementBuffer = new di(this), this.bindVertexArrayOES = this.extVertexArrayObject && new mi(this), this.pixelStoreUnpack = new _i(this), this.pixelStoreUnpackPremultiplyAlpha = new pi(this), this.pixelStoreUnpackFlipY = new fi(this), this.extTextureFilterAnisotropic = t.getExtension(\"EXT_texture_filter_anisotropic\") || t.getExtension(\"MOZ_EXT_texture_filter_anisotropic\") || t.getExtension(\"WEBKIT_EXT_texture_filter_anisotropic\"), this.extTextureFilterAnisotropic && (this.extTextureFilterAnisotropicMax = t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)), this.extTextureHalfFloat = t.getExtension(\"OES_texture_half_float\"), this.extTextureHalfFloat && (t.getExtension(\"OES_texture_half_float_linear\"), this.extRenderToTextureHalfFloat = t.getExtension(\"EXT_color_buffer_half_float\")), this.extTimerQuery = t.getExtension(\"EXT_disjoint_timer_query\"), this.maxTextureSize = t.getParameter(t.MAX_TEXTURE_SIZE);\n      }\n\n      _createClass(wi, [{\n        key: \"setDefault\",\n        value: function setDefault() {\n          this.unbindVAO(), this.clearColor.setDefault(), this.clearDepth.setDefault(), this.clearStencil.setDefault(), this.colorMask.setDefault(), this.depthMask.setDefault(), this.stencilMask.setDefault(), this.stencilFunc.setDefault(), this.stencilOp.setDefault(), this.stencilTest.setDefault(), this.depthRange.setDefault(), this.depthTest.setDefault(), this.depthFunc.setDefault(), this.blend.setDefault(), this.blendFunc.setDefault(), this.blendColor.setDefault(), this.blendEquation.setDefault(), this.cullFace.setDefault(), this.cullFaceSide.setDefault(), this.frontFace.setDefault(), this.program.setDefault(), this.activeTexture.setDefault(), this.bindFramebuffer.setDefault(), this.pixelStoreUnpack.setDefault(), this.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.pixelStoreUnpackFlipY.setDefault();\n        }\n      }, {\n        key: \"setDirty\",\n        value: function setDirty() {\n          this.clearColor.dirty = !0, this.clearDepth.dirty = !0, this.clearStencil.dirty = !0, this.colorMask.dirty = !0, this.depthMask.dirty = !0, this.stencilMask.dirty = !0, this.stencilFunc.dirty = !0, this.stencilOp.dirty = !0, this.stencilTest.dirty = !0, this.depthRange.dirty = !0, this.depthTest.dirty = !0, this.depthFunc.dirty = !0, this.blend.dirty = !0, this.blendFunc.dirty = !0, this.blendColor.dirty = !0, this.blendEquation.dirty = !0, this.cullFace.dirty = !0, this.cullFaceSide.dirty = !0, this.frontFace.dirty = !0, this.program.dirty = !0, this.activeTexture.dirty = !0, this.viewport.dirty = !0, this.bindFramebuffer.dirty = !0, this.bindRenderbuffer.dirty = !0, this.bindTexture.dirty = !0, this.bindVertexBuffer.dirty = !0, this.bindElementBuffer.dirty = !0, this.extVertexArrayObject && (this.bindVertexArrayOES.dirty = !0), this.pixelStoreUnpack.dirty = !0, this.pixelStoreUnpackPremultiplyAlpha.dirty = !0, this.pixelStoreUnpackFlipY.dirty = !0;\n        }\n      }, {\n        key: \"createIndexBuffer\",\n        value: function createIndexBuffer(t, e) {\n          return new Be(this, t, e);\n        }\n      }, {\n        key: \"createVertexBuffer\",\n        value: function createVertexBuffer(t, e, i) {\n          return new Oe(this, t, e, i);\n        }\n      }, {\n        key: \"createRenderbuffer\",\n        value: function createRenderbuffer(t, e, i) {\n          var o = this.gl,\n              a = o.createRenderbuffer();\n          return this.bindRenderbuffer.set(a), o.renderbufferStorage(o.RENDERBUFFER, t, e, i), this.bindRenderbuffer.set(null), a;\n        }\n      }, {\n        key: \"createFramebuffer\",\n        value: function createFramebuffer(t, e, i) {\n          return new yi(this, t, e, i);\n        }\n      }, {\n        key: \"clear\",\n        value: function clear(_ref124) {\n          var t = _ref124.color,\n              e = _ref124.depth;\n          var i = this.gl;\n          var o = 0;\n          t && (o |= i.COLOR_BUFFER_BIT, this.clearColor.set(t), this.colorMask.set([!0, !0, !0, !0])), void 0 !== e && (o |= i.DEPTH_BUFFER_BIT, this.depthRange.set([0, 1]), this.clearDepth.set(e), this.depthMask.set(!0)), i.clear(o);\n        }\n      }, {\n        key: \"setCullFace\",\n        value: function setCullFace(t) {\n          !1 === t.enable ? this.cullFace.set(!1) : (this.cullFace.set(!0), this.cullFaceSide.set(t.mode), this.frontFace.set(t.frontFace));\n        }\n      }, {\n        key: \"setDepthMode\",\n        value: function setDepthMode(t) {\n          t.func !== this.gl.ALWAYS || t.mask ? (this.depthTest.set(!0), this.depthFunc.set(t.func), this.depthMask.set(t.mask), this.depthRange.set(t.range)) : this.depthTest.set(!1);\n        }\n      }, {\n        key: \"setStencilMode\",\n        value: function setStencilMode(t) {\n          t.test.func !== this.gl.ALWAYS || t.mask ? (this.stencilTest.set(!0), this.stencilMask.set(t.mask), this.stencilOp.set([t.fail, t.depthFail, t.pass]), this.stencilFunc.set({\n            func: t.test.func,\n            ref: t.ref,\n            mask: t.test.mask\n          })) : this.stencilTest.set(!1);\n        }\n      }, {\n        key: \"setColorMode\",\n        value: function setColorMode(t) {\n          a(t.blendFunction, bi.Replace) ? this.blend.set(!1) : (this.blend.set(!0), this.blendFunc.set(t.blendFunction), this.blendColor.set(t.blendColor)), this.colorMask.set(t.mask);\n        }\n      }, {\n        key: \"unbindVAO\",\n        value: function unbindVAO() {\n          this.extVertexArrayObject && this.bindVertexArrayOES.set(null);\n        }\n      }]);\n\n      return wi;\n    }();\n\n    var Ti = function Ti(t, e, i) {\n      _classCallCheck(this, Ti);\n\n      this.func = t, this.mask = e, this.range = i;\n    };\n\n    Ti.ReadOnly = !1, Ti.ReadWrite = !0, Ti.disabled = new Ti(519, Ti.ReadOnly, [0, 1]);\n    var Ei = 7680;\n\n    var Ii = function Ii(t, e, i, o, a, s) {\n      _classCallCheck(this, Ii);\n\n      this.test = t, this.ref = e, this.mask = i, this.fail = o, this.depthFail = a, this.pass = s;\n    };\n\n    Ii.disabled = new Ii({\n      func: 519,\n      mask: 0\n    }, 0, 0, Ei, Ei, Ei);\n\n    var Si = function Si(t, e, i) {\n      _classCallCheck(this, Si);\n\n      this.enable = t, this.mode = e, this.frontFace = i;\n    };\n\n    var Ci;\n\n    function Pi(e, i, o, a, s, r, n) {\n      var l = e.context,\n          c = l.gl,\n          h = e.useProgram(\"collisionBox\"),\n          u = [];\n      var d = 0,\n          m = 0;\n\n      for (var _9 = 0; _9 < a.length; _9++) {\n        var _p15 = a[_9],\n            _f11 = i.getTile(_p15),\n            _g12 = _f11.getBucket(o);\n\n        if (!_g12) continue;\n        var _x11 = _p15.posMatrix;\n        0 === s[0] && 0 === s[1] || (_x11 = e.translatePosMatrix(_p15.posMatrix, _f11, s, r));\n\n        var _v7 = n ? _g12.textCollisionBox : _g12.iconCollisionBox,\n            _y10 = _g12.collisionCircleArray;\n\n        if (_y10.length > 0) {\n          var _i206 = t.create(),\n              _o101 = _x11;\n\n          t.mul(_i206, _g12.placementInvProjMatrix, e.transform.glCoordMatrix), t.mul(_i206, _i206, _g12.placementViewportMatrix), u.push({\n            circleArray: _y10,\n            circleOffset: m,\n            transform: _o101,\n            invTransform: _i206\n          }), d += _y10.length / 4, m = d;\n        }\n\n        _v7 && h.draw(l, c.LINES, Ti.disabled, Ii.disabled, e.colorModeForRenderPass(), Si.disabled, ge(_x11, e.transform, _f11), o.id, _v7.layoutVertexBuffer, _v7.indexBuffer, _v7.segments, null, e.transform.zoom, null, null, _v7.collisionVertexBuffer);\n      }\n\n      if (!n || !u.length) return;\n\n      var _ = e.useProgram(\"collisionCircle\"),\n          p = new t.CollisionCircleLayoutArray();\n\n      p.resize(4 * d), p._trim();\n      var f = 0;\n\n      for (var _i207 = 0, _u30 = u; _i207 < _u30.length; _i207++) {\n        var _t318 = _u30[_i207];\n\n        for (var _e269 = 0; _e269 < _t318.circleArray.length / 4; _e269++) {\n          var _i208 = 4 * _e269,\n              _o102 = _t318.circleArray[_i208 + 0],\n              _a107 = _t318.circleArray[_i208 + 1],\n              _s107 = _t318.circleArray[_i208 + 2],\n              _r183 = _t318.circleArray[_i208 + 3];\n\n          p.emplace(f++, _o102, _a107, _s107, _r183, 0), p.emplace(f++, _o102, _a107, _s107, _r183, 1), p.emplace(f++, _o102, _a107, _s107, _r183, 2), p.emplace(f++, _o102, _a107, _s107, _r183, 3);\n        }\n      }\n\n      (!Ci || Ci.length < 2 * d) && (Ci = function (e) {\n        var i = 2 * e,\n            o = new t.QuadTriangleArray();\n        o.resize(i), o._trim();\n\n        for (var _t319 = 0; _t319 < i; _t319++) {\n          var _e270 = 6 * _t319;\n\n          o.uint16[_e270 + 0] = 4 * _t319 + 0, o.uint16[_e270 + 1] = 4 * _t319 + 1, o.uint16[_e270 + 2] = 4 * _t319 + 2, o.uint16[_e270 + 3] = 4 * _t319 + 2, o.uint16[_e270 + 4] = 4 * _t319 + 3, o.uint16[_e270 + 5] = 4 * _t319 + 0;\n        }\n\n        return o;\n      }(d));\n      var g = l.createIndexBuffer(Ci, !0),\n          x = l.createVertexBuffer(p, t.collisionCircleLayout.members, !0);\n\n      for (var _i209 = 0, _u31 = u; _i209 < _u31.length; _i209++) {\n        var _i210 = _u31[_i209];\n        var _a108 = {\n          u_matrix: _i210.transform,\n          u_inv_matrix: _i210.invTransform,\n          u_camera_to_center_distance: (v = e.transform).cameraToCenterDistance,\n          u_viewport_size: [v.width, v.height]\n        };\n\n        _.draw(l, c.TRIANGLES, Ti.disabled, Ii.disabled, e.colorModeForRenderPass(), Si.disabled, _a108, o.id, x, g, t.SegmentVector.simpleSegment(0, 2 * _i210.circleOffset, _i210.circleArray.length, _i210.circleArray.length / 2), null, e.transform.zoom, null, null, null);\n      }\n\n      var v;\n      x.destroy(), g.destroy();\n    }\n\n    Si.disabled = new Si(!1, 1029, 2305), Si.backCCW = new Si(!0, 1029, 2305);\n    var zi = t.identity(new Float32Array(16));\n\n    function Di(e, i, o, a, s, r) {\n      var _t$getAnchorAlignment2 = t.getAnchorAlignment(e),\n          n = _t$getAnchorAlignment2.horizontalAlign,\n          l = _t$getAnchorAlignment2.verticalAlign,\n          c = -(n - .5) * i,\n          h = -(l - .5) * o,\n          u = t.evaluateVariableOffset(e, a);\n\n      return new t.pointGeometry((c / s + u[0]) * r, (h / s + u[1]) * r);\n    }\n\n    function Ai(e, i, o, a, s, r, n, l, c, h) {\n      var u = e.text.placedSymbolArray,\n          d = e.text.dynamicLayoutVertexArray,\n          m = e.icon.dynamicLayoutVertexArray,\n          _ = {};\n      d.clear();\n\n      for (var _m14 = 0; _m14 < u.length; _m14++) {\n        var _p16 = u.get(_m14),\n            _f12 = e.allowVerticalPlacement && !_p16.placedOrientation,\n            _g13 = _p16.hidden || !_p16.crossTileID || _f12 ? null : a[_p16.crossTileID];\n\n        if (_g13) {\n          var _a109 = new t.pointGeometry(_p16.anchorX, _p16.anchorY),\n              _u32 = ut(_a109, o ? n : r),\n              _m15 = dt(s.cameraToCenterDistance, _u32.signedDistanceFromCamera);\n\n          var _f13 = t.evaluateSizeForFeature(e.textSizeData, c, _p16) * _m15 / t.ONE_EM;\n\n          o && (_f13 *= e.tilePixelRatio / l);\n\n          var _x12 = _g13.width,\n              _v8 = _g13.height,\n              _y11 = _g13.anchor,\n              _b10 = _g13.textOffset,\n              _w8 = _g13.textBoxScale,\n              _T2 = Di(_y11, _x12, _v8, _b10, _w8, _f13),\n              _E2 = o ? ut(_a109.add(_T2), r).point : _u32.point.add(i ? _T2.rotate(-s.angle) : _T2),\n              _I3 = e.allowVerticalPlacement && _p16.placedOrientation === t.WritingMode.vertical ? Math.PI / 2 : 0;\n\n          for (var _e271 = 0; _e271 < _p16.numGlyphs; _e271++) {\n            t.addDynamicAttributes(d, _E2, _I3);\n          }\n\n          h && _p16.associatedIconIndex >= 0 && (_[_p16.associatedIconIndex] = {\n            shiftedAnchor: _E2,\n            angle: _I3\n          });\n        } else bt(_p16.numGlyphs, d);\n      }\n\n      if (h) {\n        m.clear();\n        var _i211 = e.icon.placedSymbolArray;\n\n        for (var _e272 = 0; _e272 < _i211.length; _e272++) {\n          var _o103 = _i211.get(_e272);\n\n          if (_o103.hidden) bt(_o103.numGlyphs, m);else {\n            var _i212 = _[_e272];\n            if (_i212) for (var _e273 = 0; _e273 < _o103.numGlyphs; _e273++) {\n              t.addDynamicAttributes(m, _i212.shiftedAnchor, _i212.angle);\n            } else bt(_o103.numGlyphs, m);\n          }\n        }\n\n        e.icon.dynamicLayoutVertexBuffer.updateData(m);\n      }\n\n      e.text.dynamicLayoutVertexBuffer.updateData(d);\n    }\n\n    function Mi(t, e, i) {\n      return i.iconsInText && e ? \"symbolTextAndIcon\" : t ? \"symbolSDF\" : \"symbolIcon\";\n    }\n\n    function Li(e, i, o, a, s, r, n, l, c, h, u, d) {\n      var m = e.context,\n          _ = m.gl,\n          p = e.transform,\n          f = \"map\" === l,\n          g = \"map\" === c,\n          x = \"viewport\" !== l && \"point\" !== o.layout.get(\"symbol-placement\"),\n          v = f && !g && !x,\n          y = !o.layout.get(\"symbol-sort-key\").isConstant();\n      var b = !1;\n      var w = e.depthModeForSublayer(0, Ti.ReadOnly),\n          T = o.layout.get(\"text-variable-anchor\"),\n          E = [];\n\n      var _iterator194 = _createForOfIteratorHelper(a),\n          _step194;\n\n      try {\n        for (_iterator194.s(); !(_step194 = _iterator194.n()).done;) {\n          var _l47 = _step194.value;\n\n          var _a111 = i.getTile(_l47),\n              _c30 = _a111.getBucket(o);\n\n          if (!_c30) continue;\n\n          var _u33 = s ? _c30.text : _c30.icon;\n\n          if (!_u33 || !_u33.segments.get().length) continue;\n\n          var _d16 = _u33.programConfigurations.get(o.id),\n              _m16 = s || _c30.sdfIcons,\n              _w9 = s ? _c30.textSizeData : _c30.iconSizeData,\n              _I4 = g || 0 !== p.pitch,\n              _S6 = e.useProgram(Mi(_m16, s, _c30), _d16),\n              _C2 = t.evaluateSizeForZoom(_w9, p.zoom);\n\n          var _P = void 0,\n              _z4 = void 0,\n              _D = void 0,\n              _A8 = void 0,\n              _M4 = [0, 0],\n              _L = null;\n\n          if (s) {\n            if (_z4 = _a111.glyphAtlasTexture, _D = _.LINEAR, _P = _a111.glyphAtlasTexture.size, _c30.iconsInText) {\n              _M4 = _a111.imageAtlasTexture.size, _L = _a111.imageAtlasTexture;\n\n              var _t321 = \"composite\" === _w9.kind || \"camera\" === _w9.kind;\n\n              _A8 = _I4 || e.options.rotating || e.options.zooming || _t321 ? _.LINEAR : _.NEAREST;\n            }\n          } else {\n            var _t322 = 1 !== o.layout.get(\"icon-size\").constantOr(0) || _c30.iconsNeedLinear;\n\n            _z4 = _a111.imageAtlasTexture, _D = _m16 || e.options.rotating || e.options.zooming || _t322 || _I4 ? _.LINEAR : _.NEAREST, _P = _a111.imageAtlasTexture.size;\n          }\n\n          var _R = It(_a111, 1, e.transform.zoom),\n              _k7 = ct(_l47.posMatrix, g, f, e.transform, _R),\n              _B2 = ht(_l47.posMatrix, g, f, e.transform, _R),\n              _F = T && _c30.hasTextData(),\n              _O = \"none\" !== o.layout.get(\"icon-text-fit\") && _F && _c30.hasIconData();\n\n          if (x) {\n            var _t323 = \"map\" === o.layout.get(\"text-rotation-alignment\");\n\n            _t(_c30, _l47.posMatrix, e, s, _k7, _B2, g, h, _t323);\n          }\n\n          var _U = e.translatePosMatrix(_l47.posMatrix, _a111, r, n),\n              _N = x || s && T || _O ? zi : _k7,\n              _G = e.translatePosMatrix(_B2, _a111, r, n, !0),\n              _Z = _m16 && 0 !== o.paint.get(s ? \"text-halo-width\" : \"icon-halo-width\").constantOr(1);\n\n          var _q2 = void 0;\n\n          _q2 = _m16 ? _c30.iconsInText ? Me(_w9.kind, _C2, v, g, e, _U, _N, _G, _P, _M4) : Ae(_w9.kind, _C2, v, g, e, _U, _N, _G, s, _P, !0) : De(_w9.kind, _C2, v, g, e, _U, _N, _G, s, _P);\n          var _V = {\n            program: _S6,\n            buffers: _u33,\n            uniformValues: _q2,\n            atlasTexture: _z4,\n            atlasTextureIcon: _L,\n            atlasInterpolation: _D,\n            atlasInterpolationIcon: _A8,\n            isSDF: _m16,\n            hasHalo: _Z\n          };\n\n          if (y && _c30.canOverlap) {\n            b = !0;\n\n            var _e274 = _u33.segments.get();\n\n            var _iterator195 = _createForOfIteratorHelper(_e274),\n                _step195;\n\n            try {\n              for (_iterator195.s(); !(_step195 = _iterator195.n()).done;) {\n                var _i215 = _step195.value;\n                E.push({\n                  segments: new t.SegmentVector([_i215]),\n                  sortKey: _i215.sortKey,\n                  state: _V\n                });\n              }\n            } catch (err) {\n              _iterator195.e(err);\n            } finally {\n              _iterator195.f();\n            }\n          } else E.push({\n            segments: _u33.segments,\n            sortKey: 0,\n            state: _V\n          });\n        }\n      } catch (err) {\n        _iterator194.e(err);\n      } finally {\n        _iterator194.f();\n      }\n\n      b && E.sort(function (t, e) {\n        return t.sortKey - e.sortKey;\n      });\n\n      for (var _i213 = 0, _E3 = E; _i213 < _E3.length; _i213++) {\n        var _t320 = _E3[_i213];\n        var _i214 = _t320.state;\n\n        if (m.activeTexture.set(_.TEXTURE0), _i214.atlasTexture.bind(_i214.atlasInterpolation, _.CLAMP_TO_EDGE), _i214.atlasTextureIcon && (m.activeTexture.set(_.TEXTURE1), _i214.atlasTextureIcon && _i214.atlasTextureIcon.bind(_i214.atlasInterpolationIcon, _.CLAMP_TO_EDGE)), _i214.isSDF) {\n          var _a110 = _i214.uniformValues;\n          _i214.hasHalo && (_a110.u_is_halo = 1, Ri(_i214.buffers, _t320.segments, o, e, _i214.program, w, u, d, _a110)), _a110.u_is_halo = 0;\n        }\n\n        Ri(_i214.buffers, _t320.segments, o, e, _i214.program, w, u, d, _i214.uniformValues);\n      }\n    }\n\n    function Ri(t, e, i, o, a, s, r, n, l) {\n      var c = o.context;\n      a.draw(c, c.gl.TRIANGLES, s, r, n, Si.disabled, l, i.id, t.layoutVertexBuffer, t.indexBuffer, e, i.paint, o.transform.zoom, t.programConfigurations.get(i.id), t.dynamicLayoutVertexBuffer, t.opacityVertexBuffer);\n    }\n\n    function ki(t, e, i, o, a, s, r) {\n      var n = t.context.gl,\n          l = i.paint.get(\"fill-pattern\"),\n          c = l && l.constantOr(1),\n          h = i.getCrossfadeParameters();\n\n      var u, d, m, _, p;\n\n      r ? (d = c && !i.getPaintProperty(\"fill-outline-color\") ? \"fillOutlinePattern\" : \"fillOutline\", u = n.LINES) : (d = c ? \"fillPattern\" : \"fill\", u = n.TRIANGLES);\n\n      var _iterator196 = _createForOfIteratorHelper(o),\n          _step196;\n\n      try {\n        for (_iterator196.s(); !(_step196 = _iterator196.n()).done;) {\n          var _f14 = _step196.value;\n\n          var _o104 = e.getTile(_f14);\n\n          if (c && !_o104.patternsLoaded()) continue;\n\n          var _g14 = _o104.getBucket(i);\n\n          if (!_g14) continue;\n\n          var _x13 = _g14.programConfigurations.get(i.id),\n              _v9 = t.useProgram(d, _x13);\n\n          c && (t.context.activeTexture.set(n.TEXTURE0), _o104.imageAtlasTexture.bind(n.LINEAR, n.CLAMP_TO_EDGE), _x13.updatePaintBuffers(h));\n\n          var _y12 = l.constantOr(null);\n\n          if (_y12 && _o104.imageAtlas) {\n            var _t324 = _o104.imageAtlas,\n                _e275 = _t324.patternPositions[_y12.to.toString()],\n                _i216 = _t324.patternPositions[_y12.from.toString()];\n\n            _e275 && _i216 && _x13.setConstantPatternPositions(_e275, _i216);\n          }\n\n          var _b11 = t.translatePosMatrix(_f14.posMatrix, _o104, i.paint.get(\"fill-translate\"), i.paint.get(\"fill-translate-anchor\"));\n\n          if (r) {\n            _ = _g14.indexBuffer2, p = _g14.segments2;\n            var _e276 = [n.drawingBufferWidth, n.drawingBufferHeight];\n            m = \"fillOutlinePattern\" === d && c ? pe(_b11, t, h, _o104, _e276) : _e(_b11, _e276);\n          } else _ = _g14.indexBuffer, p = _g14.segments, m = c ? me(_b11, t, h, _o104) : de(_b11);\n\n          _v9.draw(t.context, u, a, t.stencilModeForClipping(_f14), s, Si.disabled, m, i.id, _g14.layoutVertexBuffer, _, p, i.paint, t.transform.zoom, _x13);\n        }\n      } catch (err) {\n        _iterator196.e(err);\n      } finally {\n        _iterator196.f();\n      }\n    }\n\n    function Bi(t, e, i, o, a, s, r) {\n      var n = t.context,\n          l = n.gl,\n          c = i.paint.get(\"fill-extrusion-pattern\"),\n          h = c.constantOr(1),\n          u = i.getCrossfadeParameters(),\n          d = i.paint.get(\"fill-extrusion-opacity\");\n\n      var _iterator197 = _createForOfIteratorHelper(o),\n          _step197;\n\n      try {\n        for (_iterator197.s(); !(_step197 = _iterator197.n()).done;) {\n          var _m17 = _step197.value;\n\n          var _o105 = e.getTile(_m17),\n              _10 = _o105.getBucket(i);\n\n          if (!_10) continue;\n\n          var _p17 = _10.programConfigurations.get(i.id),\n              _f15 = t.useProgram(h ? \"fillExtrusionPattern\" : \"fillExtrusion\", _p17);\n\n          h && (t.context.activeTexture.set(l.TEXTURE0), _o105.imageAtlasTexture.bind(l.LINEAR, l.CLAMP_TO_EDGE), _p17.updatePaintBuffers(u));\n\n          var _g15 = c.constantOr(null);\n\n          if (_g15 && _o105.imageAtlas) {\n            var _t325 = _o105.imageAtlas,\n                _e277 = _t325.patternPositions[_g15.to.toString()],\n                _i217 = _t325.patternPositions[_g15.from.toString()];\n\n            _e277 && _i217 && _p17.setConstantPatternPositions(_e277, _i217);\n          }\n\n          var _x14 = t.translatePosMatrix(_m17.posMatrix, _o105, i.paint.get(\"fill-extrusion-translate\"), i.paint.get(\"fill-extrusion-translate-anchor\")),\n              _v10 = i.paint.get(\"fill-extrusion-vertical-gradient\"),\n              _y13 = h ? ue(_x14, t, _v10, d, _m17, u, _o105) : he(_x14, t, _v10, d);\n\n          _f15.draw(n, n.gl.TRIANGLES, a, s, r, Si.backCCW, _y13, i.id, _10.layoutVertexBuffer, _10.indexBuffer, _10.segments, i.paint, t.transform.zoom, _p17);\n        }\n      } catch (err) {\n        _iterator197.e(err);\n      } finally {\n        _iterator197.f();\n      }\n    }\n\n    function Fi(t, e, i, o, a, s) {\n      var r = t.context,\n          n = r.gl,\n          l = e.fbo;\n      if (!l) return;\n      var c = t.useProgram(\"hillshade\");\n      r.activeTexture.set(n.TEXTURE0), n.bindTexture(n.TEXTURE_2D, l.colorAttachment.get());\n\n      var h = function (t, e, i) {\n        var o = i.paint.get(\"hillshade-shadow-color\"),\n            a = i.paint.get(\"hillshade-highlight-color\"),\n            s = i.paint.get(\"hillshade-accent-color\");\n        var r = i.paint.get(\"hillshade-illumination-direction\") * (Math.PI / 180);\n        \"viewport\" === i.paint.get(\"hillshade-illumination-anchor\") && (r -= t.transform.angle);\n        var n = !t.options.moving;\n        return {\n          u_matrix: t.transform.calculatePosMatrix(e.tileID.toUnwrapped(), n),\n          u_image: 0,\n          u_latrange: be(0, e.tileID),\n          u_light: [i.paint.get(\"hillshade-exaggeration\"), r],\n          u_shadow: o,\n          u_highlight: a,\n          u_accent: s\n        };\n      }(t, e, i);\n\n      c.draw(r, n.TRIANGLES, o, a, s, Si.disabled, h, i.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);\n    }\n\n    function Oi(e, i, o, a, s, r) {\n      var n = e.context,\n          l = n.gl,\n          c = i.dem;\n\n      if (c && c.data) {\n        var _h23 = c.dim,\n            _u34 = c.stride,\n            _m18 = c.getPixels();\n\n        if (n.activeTexture.set(l.TEXTURE1), n.pixelStoreUnpackPremultiplyAlpha.set(!1), i.demTexture = i.demTexture || e.getTileTexture(_u34), i.demTexture) {\n          var _t326 = i.demTexture;\n          _t326.update(_m18, {\n            premultiply: !1\n          }), _t326.bind(l.NEAREST, l.CLAMP_TO_EDGE);\n        } else i.demTexture = new d(n, _m18, l.RGBA, {\n          premultiply: !1\n        }), i.demTexture.bind(l.NEAREST, l.CLAMP_TO_EDGE);\n\n        n.activeTexture.set(l.TEXTURE0);\n        var _11 = i.fbo;\n\n        if (!_11) {\n          var _t327 = new d(n, {\n            width: _h23,\n            height: _h23,\n            data: null\n          }, l.RGBA);\n\n          _t327.bind(l.LINEAR, l.CLAMP_TO_EDGE), _11 = i.fbo = n.createFramebuffer(_h23, _h23, !0), _11.colorAttachment.set(_t327.texture);\n        }\n\n        n.bindFramebuffer.set(_11.framebuffer), n.viewport.set([0, 0, _h23, _h23]), e.useProgram(\"hillshadePrepare\").draw(n, l.TRIANGLES, a, s, r, Si.disabled, function (e, i) {\n          var o = i.stride,\n              a = t.create();\n          return t.ortho(a, 0, t.EXTENT, -t.EXTENT, 0, 0, 1), t.translate(a, a, [0, -t.EXTENT, 0]), {\n            u_matrix: a,\n            u_image: 1,\n            u_dimension: [o, o],\n            u_zoom: e.overscaledZ,\n            u_unpack: i.getUnpackVector()\n          };\n        }(i.tileID, c), o.id, e.rasterBoundsBuffer, e.quadTriangleIndexBuffer, e.rasterBoundsSegments), i.needsHillshadePrepare = !1;\n      }\n    }\n\n    function Ui(e, i, o, a, s) {\n      var r = a.paint.get(\"raster-fade-duration\");\n\n      if (r > 0) {\n        var _a112 = t.exported.now(),\n            _n130 = (_a112 - e.timeAdded) / r,\n            _l48 = i ? (_a112 - i.timeAdded) / r : -1,\n            _c31 = o.getSource(),\n            _h24 = s.coveringZoomLevel({\n          tileSize: _c31.tileSize,\n          roundZoom: _c31.roundZoom\n        }),\n            _u35 = !i || Math.abs(i.tileID.overscaledZ - _h24) > Math.abs(e.tileID.overscaledZ - _h24),\n            _d17 = _u35 && e.refreshedUponExpiration ? 1 : t.clamp(_u35 ? _n130 : 1 - _l48, 0, 1);\n\n        return e.refreshedUponExpiration && _n130 >= 1 && (e.refreshedUponExpiration = !1), i ? {\n          opacity: 1,\n          mix: 1 - _d17\n        } : {\n          opacity: _d17,\n          mix: 0\n        };\n      }\n\n      return {\n        opacity: 1,\n        mix: 0\n      };\n    }\n\n    var Ni = new t.Color(1, 0, 0, 1),\n        Gi = new t.Color(0, 1, 0, 1),\n        Zi = new t.Color(0, 0, 1, 1),\n        qi = new t.Color(1, 0, 1, 1),\n        Vi = new t.Color(0, 1, 1, 1);\n\n    function ji(t, e, i, o) {\n      Wi(t, 0, e + i / 2, t.transform.width, i, o);\n    }\n\n    function $i(t, e, i, o) {\n      Wi(t, e - i / 2, 0, i, t.transform.height, o);\n    }\n\n    function Wi(t, e, i, o, a, s) {\n      var r = t.context,\n          n = r.gl;\n      n.enable(n.SCISSOR_TEST), n.scissor(e * t.pixelRatio, i * t.pixelRatio, o * t.pixelRatio, a * t.pixelRatio), r.clear({\n        color: s\n      }), n.disable(n.SCISSOR_TEST);\n    }\n\n    function Xi(e, i, o) {\n      var a = e.context,\n          s = a.gl,\n          r = o.posMatrix,\n          n = e.useProgram(\"debug\"),\n          l = Ti.disabled,\n          c = Ii.disabled,\n          h = e.colorModeForRenderPass(),\n          u = \"$debug\";\n      a.activeTexture.set(s.TEXTURE0), e.emptyTexture.bind(s.LINEAR, s.CLAMP_TO_EDGE), n.draw(a, s.LINE_STRIP, l, c, h, Si.disabled, xe(r, t.Color.red), u, e.debugBuffer, e.tileBorderIndexBuffer, e.debugSegments);\n      var d = i.getTileByID(o.key).latestRawTileData,\n          m = Math.floor((d && d.byteLength || 0) / 1024),\n          _ = i.getTile(o).tileSize,\n          p = 512 / Math.min(_, 512) * (o.overscaledZ / e.transform.zoom) * .5;\n      var f = o.canonical.toString();\n      o.overscaledZ !== o.canonical.z && (f += \" => \".concat(o.overscaledZ)), function (t, e) {\n        t.initDebugOverlayCanvas();\n        var i = t.debugOverlayCanvas,\n            o = t.context.gl,\n            a = t.debugOverlayCanvas.getContext(\"2d\");\n        a.clearRect(0, 0, i.width, i.height), a.shadowColor = \"white\", a.shadowBlur = 2, a.lineWidth = 1.5, a.strokeStyle = \"white\", a.textBaseline = \"top\", a.font = \"bold 36px Open Sans, sans-serif\", a.fillText(e, 5, 5), a.strokeText(e, 5, 5), t.debugOverlayTexture.update(i), t.debugOverlayTexture.bind(o.LINEAR, o.CLAMP_TO_EDGE);\n      }(e, \"\".concat(f, \" \").concat(m, \"kb\")), n.draw(a, s.TRIANGLES, l, c, bi.alphaBlended, Si.disabled, xe(r, t.Color.transparent, p), u, e.debugBuffer, e.quadTriangleIndexBuffer, e.debugSegments);\n    }\n\n    var Hi = {\n      symbol: function symbol(e, i, o, a, s) {\n        if (\"translucent\" !== e.renderPass) return;\n        var r = Ii.disabled,\n            n = e.colorModeForRenderPass();\n        o.layout.get(\"text-variable-anchor\") && function (e, i, o, a, s, r, n) {\n          var l = i.transform,\n              c = \"map\" === s,\n              h = \"map\" === r;\n\n          var _iterator198 = _createForOfIteratorHelper(e),\n              _step198;\n\n          try {\n            for (_iterator198.s(); !(_step198 = _iterator198.n()).done;) {\n              var _s108 = _step198.value;\n\n              var _e278 = a.getTile(_s108),\n                  _r184 = _e278.getBucket(o);\n\n              if (!_r184 || !_r184.text || !_r184.text.segments.get().length) continue;\n\n              var _u36 = t.evaluateSizeForZoom(_r184.textSizeData, l.zoom),\n                  _d18 = It(_e278, 1, i.transform.zoom),\n                  _m19 = ct(_s108.posMatrix, h, c, i.transform, _d18),\n                  _12 = \"none\" !== o.layout.get(\"icon-text-fit\") && _r184.hasIconData();\n\n              if (_u36) {\n                var _t328 = Math.pow(2, l.zoom - _e278.tileID.overscaledZ);\n\n                Ai(_r184, c, h, n, l, _m19, _s108.posMatrix, _t328, _u36, _12);\n              }\n            }\n          } catch (err) {\n            _iterator198.e(err);\n          } finally {\n            _iterator198.f();\n          }\n        }(a, e, o, i, o.layout.get(\"text-rotation-alignment\"), o.layout.get(\"text-pitch-alignment\"), s), 0 !== o.paint.get(\"icon-opacity\").constantOr(1) && Li(e, i, o, a, !1, o.paint.get(\"icon-translate\"), o.paint.get(\"icon-translate-anchor\"), o.layout.get(\"icon-rotation-alignment\"), o.layout.get(\"icon-pitch-alignment\"), o.layout.get(\"icon-keep-upright\"), r, n), 0 !== o.paint.get(\"text-opacity\").constantOr(1) && Li(e, i, o, a, !0, o.paint.get(\"text-translate\"), o.paint.get(\"text-translate-anchor\"), o.layout.get(\"text-rotation-alignment\"), o.layout.get(\"text-pitch-alignment\"), o.layout.get(\"text-keep-upright\"), r, n), i.map.showCollisionBoxes && (Pi(e, i, o, a, o.paint.get(\"text-translate\"), o.paint.get(\"text-translate-anchor\"), !0), Pi(e, i, o, a, o.paint.get(\"icon-translate\"), o.paint.get(\"icon-translate-anchor\"), !1));\n      },\n      circle: function circle(e, i, o, a) {\n        if (\"translucent\" !== e.renderPass) return;\n        var s = o.paint.get(\"circle-opacity\"),\n            r = o.paint.get(\"circle-stroke-width\"),\n            n = o.paint.get(\"circle-stroke-opacity\"),\n            l = !o.layout.get(\"circle-sort-key\").isConstant();\n        if (0 === s.constantOr(1) && (0 === r.constantOr(1) || 0 === n.constantOr(1))) return;\n        var c = e.context,\n            h = c.gl,\n            u = e.depthModeForSublayer(0, Ti.ReadOnly),\n            d = Ii.disabled,\n            m = e.colorModeForRenderPass(),\n            _ = [];\n\n        for (var _s109 = 0; _s109 < a.length; _s109++) {\n          var _r185 = a[_s109],\n              _n131 = i.getTile(_r185),\n              _c32 = _n131.getBucket(o);\n\n          if (!_c32) continue;\n\n          var _h25 = _c32.programConfigurations.get(o.id),\n              _u37 = {\n            programConfiguration: _h25,\n            program: e.useProgram(\"circle\", _h25),\n            layoutVertexBuffer: _c32.layoutVertexBuffer,\n            indexBuffer: _c32.indexBuffer,\n            uniformValues: fe(e, _r185, _n131, o)\n          };\n\n          if (l) {\n            var _e279 = _c32.segments.get();\n\n            var _iterator199 = _createForOfIteratorHelper(_e279),\n                _step199;\n\n            try {\n              for (_iterator199.s(); !(_step199 = _iterator199.n()).done;) {\n                var _i218 = _step199.value;\n\n                _.push({\n                  segments: new t.SegmentVector([_i218]),\n                  sortKey: _i218.sortKey,\n                  state: _u37\n                });\n              }\n            } catch (err) {\n              _iterator199.e(err);\n            } finally {\n              _iterator199.f();\n            }\n          } else _.push({\n            segments: _c32.segments,\n            sortKey: 0,\n            state: _u37\n          });\n        }\n\n        l && _.sort(function (t, e) {\n          return t.sortKey - e.sortKey;\n        });\n\n        for (var _i219 = 0, _arr2 = _; _i219 < _arr2.length; _i219++) {\n          var _t329 = _arr2[_i219];\n          var _t329$state = _t329.state,\n              _i220 = _t329$state.programConfiguration,\n              _a113 = _t329$state.program,\n              _s110 = _t329$state.layoutVertexBuffer,\n              _r186 = _t329$state.indexBuffer,\n              _n132 = _t329$state.uniformValues;\n\n          _a113.draw(c, h.TRIANGLES, u, d, m, Si.disabled, _n132, o.id, _s110, _r186, _t329.segments, o.paint, e.transform.zoom, _i220);\n        }\n      },\n      heatmap: function heatmap(e, i, o, a) {\n        if (0 !== o.paint.get(\"heatmap-opacity\")) if (\"offscreen\" === e.renderPass) {\n          var _s111 = e.context,\n              _r187 = _s111.gl,\n              _n133 = Ii.disabled,\n              _l49 = new bi([_r187.ONE, _r187.ONE], t.Color.transparent, [!0, !0, !0, !0]);\n\n          !function (t, e, i) {\n            var o = t.gl;\n            t.activeTexture.set(o.TEXTURE1), t.viewport.set([0, 0, e.width / 4, e.height / 4]);\n            var a = i.heatmapFbo;\n            if (a) o.bindTexture(o.TEXTURE_2D, a.colorAttachment.get()), t.bindFramebuffer.set(a.framebuffer);else {\n              var _s112 = o.createTexture();\n\n              o.bindTexture(o.TEXTURE_2D, _s112), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_S, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_WRAP_T, o.CLAMP_TO_EDGE), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MIN_FILTER, o.LINEAR), o.texParameteri(o.TEXTURE_2D, o.TEXTURE_MAG_FILTER, o.LINEAR), a = i.heatmapFbo = t.createFramebuffer(e.width / 4, e.height / 4, !1), function (t, e, i, o) {\n                var a = t.gl;\n                a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, e.width / 4, e.height / 4, 0, a.RGBA, t.extRenderToTextureHalfFloat ? t.extTextureHalfFloat.HALF_FLOAT_OES : a.UNSIGNED_BYTE, null), o.colorAttachment.set(i);\n              }(t, e, _s112, a);\n            }\n          }(_s111, e, o), _s111.clear({\n            color: t.Color.transparent\n          });\n\n          for (var _t330 = 0; _t330 < a.length; _t330++) {\n            var _c33 = a[_t330];\n            if (i.hasRenderableParent(_c33)) continue;\n\n            var _h26 = i.getTile(_c33),\n                _u38 = _h26.getBucket(o);\n\n            if (!_u38) continue;\n\n            var _d19 = _u38.programConfigurations.get(o.id),\n                _m20 = e.useProgram(\"heatmap\", _d19),\n                _13 = e.transform.zoom;\n\n            _m20.draw(_s111, _r187.TRIANGLES, Ti.disabled, _n133, _l49, Si.disabled, ye(_c33.posMatrix, _h26, _13, o.paint.get(\"heatmap-intensity\")), o.id, _u38.layoutVertexBuffer, _u38.indexBuffer, _u38.segments, o.paint, e.transform.zoom, _d19);\n          }\n\n          _s111.viewport.set([0, 0, e.width, e.height]);\n        } else \"translucent\" === e.renderPass && (e.context.setColorMode(e.colorModeForRenderPass()), function (e, i) {\n          var o = e.context,\n              a = o.gl,\n              s = i.heatmapFbo;\n          if (!s) return;\n          o.activeTexture.set(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, s.colorAttachment.get()), o.activeTexture.set(a.TEXTURE1);\n          var r = i.colorRampTexture;\n          r || (r = i.colorRampTexture = new d(o, i.colorRamp, a.RGBA)), r.bind(a.LINEAR, a.CLAMP_TO_EDGE), e.useProgram(\"heatmapTexture\").draw(o, a.TRIANGLES, Ti.disabled, Ii.disabled, e.colorModeForRenderPass(), Si.disabled, function (e, i, o, a) {\n            var s = t.create();\n            t.ortho(s, 0, e.width, e.height, 0, 0, 1);\n            var r = e.context.gl;\n            return {\n              u_matrix: s,\n              u_world: [r.drawingBufferWidth, r.drawingBufferHeight],\n              u_image: 0,\n              u_color_ramp: 1,\n              u_opacity: i.paint.get(\"heatmap-opacity\")\n            };\n          }(e, i), i.id, e.viewportBuffer, e.quadTriangleIndexBuffer, e.viewportSegments, i.paint, e.transform.zoom);\n        }(e, o));\n      },\n      line: function line(e, i, o, a) {\n        if (\"translucent\" !== e.renderPass) return;\n        var s = o.paint.get(\"line-opacity\"),\n            r = o.paint.get(\"line-width\");\n        if (0 === s.constantOr(1) || 0 === r.constantOr(1)) return;\n\n        var n = e.depthModeForSublayer(0, Ti.ReadOnly),\n            l = e.colorModeForRenderPass(),\n            c = o.paint.get(\"line-dasharray\"),\n            h = o.paint.get(\"line-pattern\"),\n            u = h.constantOr(1),\n            m = o.paint.get(\"line-gradient\"),\n            _ = o.getCrossfadeParameters(),\n            p = u ? \"linePattern\" : c ? \"lineSDF\" : m ? \"lineGradient\" : \"line\",\n            f = e.context,\n            g = f.gl;\n\n        var x = !0;\n\n        var _iterator200 = _createForOfIteratorHelper(a),\n            _step200;\n\n        try {\n          for (_iterator200.s(); !(_step200 = _iterator200.n()).done;) {\n            var _s113 = _step200.value;\n\n            var _a114 = i.getTile(_s113);\n\n            if (u && !_a114.patternsLoaded()) continue;\n\n            var _r188 = _a114.getBucket(o);\n\n            if (!_r188) continue;\n\n            var _v11 = _r188.programConfigurations.get(o.id),\n                _y14 = e.context.program.get(),\n                _b12 = e.useProgram(p, _v11),\n                _w10 = x || _b12.program !== _y14,\n                _T3 = h.constantOr(null);\n\n            if (_T3 && _a114.imageAtlas) {\n              var _t331 = _a114.imageAtlas,\n                  _e280 = _t331.patternPositions[_T3.to.toString()],\n                  _i221 = _t331.patternPositions[_T3.from.toString()];\n\n              _e280 && _i221 && _v11.setConstantPatternPositions(_e280, _i221);\n            }\n\n            var _E4 = u ? Ee(e, _a114, o, _) : c ? Ie(e, _a114, o, c, _) : m ? Te(e, _a114, o, _r188.lineClipsArray.length) : we(e, _a114, o);\n\n            if (u) f.activeTexture.set(g.TEXTURE0), _a114.imageAtlasTexture.bind(g.LINEAR, g.CLAMP_TO_EDGE), _v11.updatePaintBuffers(_);else if (c && (_w10 || e.lineAtlas.dirty)) f.activeTexture.set(g.TEXTURE0), e.lineAtlas.bind(f);else if (m) {\n              var _a115 = _r188.gradients[o.id];\n              var _n134 = _a115.texture;\n\n              if (o.gradientVersion !== _a115.version) {\n                var _l50 = 256;\n\n                if (o.stepInterpolant) {\n                  var _o106 = i.getSource().maxzoom,\n                      _a116 = _s113.canonical.z === _o106 ? Math.ceil(1 << e.transform.maxZoom - _s113.canonical.z) : 1;\n\n                  _l50 = t.clamp(t.nextPowerOfTwo(_r188.maxLineLength / t.EXTENT * 1024 * _a116), 256, f.maxTextureSize);\n                }\n\n                _a115.gradient = t.renderColorRamp({\n                  expression: o.gradientExpression(),\n                  evaluationKey: \"lineProgress\",\n                  resolution: _l50,\n                  image: _a115.gradient || void 0,\n                  clips: _r188.lineClipsArray\n                }), _a115.texture ? _a115.texture.update(_a115.gradient) : _a115.texture = new d(f, _a115.gradient, g.RGBA), _a115.version = o.gradientVersion, _n134 = _a115.texture;\n              }\n\n              f.activeTexture.set(g.TEXTURE0), _n134.bind(o.stepInterpolant ? g.NEAREST : g.LINEAR, g.CLAMP_TO_EDGE);\n            }\n            _b12.draw(f, g.TRIANGLES, n, e.stencilModeForClipping(_s113), l, Si.disabled, _E4, o.id, _r188.layoutVertexBuffer, _r188.indexBuffer, _r188.segments, o.paint, e.transform.zoom, _v11, _r188.layoutVertexBuffer2), x = !1;\n          }\n        } catch (err) {\n          _iterator200.e(err);\n        } finally {\n          _iterator200.f();\n        }\n      },\n      fill: function fill(e, i, o, a) {\n        var s = o.paint.get(\"fill-color\"),\n            r = o.paint.get(\"fill-opacity\");\n        if (0 === r.constantOr(1)) return;\n        var n = e.colorModeForRenderPass(),\n            l = o.paint.get(\"fill-pattern\"),\n            c = e.opaquePassEnabledForLayer() && !l.constantOr(1) && 1 === s.constantOr(t.Color.transparent).a && 1 === r.constantOr(0) ? \"opaque\" : \"translucent\";\n\n        if (e.renderPass === c) {\n          var _t332 = e.depthModeForSublayer(1, \"opaque\" === e.renderPass ? Ti.ReadWrite : Ti.ReadOnly);\n\n          ki(e, i, o, a, _t332, n, !1);\n        }\n\n        if (\"translucent\" === e.renderPass && o.paint.get(\"fill-antialias\")) {\n          var _t333 = e.depthModeForSublayer(o.getPaintProperty(\"fill-outline-color\") ? 2 : 0, Ti.ReadOnly);\n\n          ki(e, i, o, a, _t333, n, !0);\n        }\n      },\n      \"fill-extrusion\": function fillExtrusion(t, e, i, o) {\n        var a = i.paint.get(\"fill-extrusion-opacity\");\n\n        if (0 !== a && \"translucent\" === t.renderPass) {\n          var _s114 = new Ti(t.context.gl.LEQUAL, Ti.ReadWrite, t.depthRangeFor3D);\n\n          if (1 !== a || i.paint.get(\"fill-extrusion-pattern\").constantOr(1)) Bi(t, e, i, o, _s114, Ii.disabled, bi.disabled), Bi(t, e, i, o, _s114, t.stencilModeFor3D(), t.colorModeForRenderPass());else {\n            var _a117 = t.colorModeForRenderPass();\n\n            Bi(t, e, i, o, _s114, Ii.disabled, _a117);\n          }\n        }\n      },\n      hillshade: function hillshade(t, e, i, o) {\n        if (\"offscreen\" !== t.renderPass && \"translucent\" !== t.renderPass) return;\n\n        var a = t.context,\n            s = t.depthModeForSublayer(0, Ti.ReadOnly),\n            r = t.colorModeForRenderPass(),\n            _ref125 = \"translucent\" === t.renderPass ? t.stencilConfigForOverlap(o) : [{}, o],\n            _ref126 = _slicedToArray(_ref125, 2),\n            n = _ref126[0],\n            l = _ref126[1];\n\n        var _iterator201 = _createForOfIteratorHelper(l),\n            _step201;\n\n        try {\n          for (_iterator201.s(); !(_step201 = _iterator201.n()).done;) {\n            var _o107 = _step201.value;\n\n            var _a118 = e.getTile(_o107);\n\n            _a118.needsHillshadePrepare && \"offscreen\" === t.renderPass ? Oi(t, _a118, i, s, Ii.disabled, r) : \"translucent\" === t.renderPass && Fi(t, _a118, i, s, n[_o107.overscaledZ], r);\n          }\n        } catch (err) {\n          _iterator201.e(err);\n        } finally {\n          _iterator201.f();\n        }\n\n        a.viewport.set([0, 0, t.width, t.height]);\n      },\n      raster: function raster(t, e, i, o) {\n        if (\"translucent\" !== t.renderPass) return;\n        if (0 === i.paint.get(\"raster-opacity\")) return;\n        if (!o.length) return;\n\n        var a = t.context,\n            s = a.gl,\n            r = e.getSource(),\n            n = t.useProgram(\"raster\"),\n            l = t.colorModeForRenderPass(),\n            _ref127 = r instanceof M ? [{}, o] : t.stencilConfigForOverlap(o),\n            _ref128 = _slicedToArray(_ref127, 2),\n            c = _ref128[0],\n            h = _ref128[1],\n            u = h[h.length - 1].overscaledZ,\n            d = !t.options.moving;\n\n        var _iterator202 = _createForOfIteratorHelper(h),\n            _step202;\n\n        try {\n          for (_iterator202.s(); !(_step202 = _iterator202.n()).done;) {\n            var _o108 = _step202.value;\n\n            var _h27 = t.depthModeForSublayer(_o108.overscaledZ - u, 1 === i.paint.get(\"raster-opacity\") ? Ti.ReadWrite : Ti.ReadOnly, s.LESS),\n                _m21 = e.getTile(_o108),\n                _14 = t.transform.calculatePosMatrix(_o108.toUnwrapped(), d);\n\n            _m21.registerFadeDuration(i.paint.get(\"raster-fade-duration\"));\n\n            var _p18 = e.findLoadedParent(_o108, 0),\n                _f16 = Ui(_m21, _p18, e, i, t.transform);\n\n            var _g16 = void 0,\n                _x15 = void 0;\n\n            var _v12 = \"nearest\" === i.paint.get(\"raster-resampling\") ? s.NEAREST : s.LINEAR;\n\n            a.activeTexture.set(s.TEXTURE0), _m21.texture.bind(_v12, s.CLAMP_TO_EDGE, s.LINEAR_MIPMAP_NEAREST), a.activeTexture.set(s.TEXTURE1), _p18 ? (_p18.texture.bind(_v12, s.CLAMP_TO_EDGE, s.LINEAR_MIPMAP_NEAREST), _g16 = Math.pow(2, _p18.tileID.overscaledZ - _m21.tileID.overscaledZ), _x15 = [_m21.tileID.canonical.x * _g16 % 1, _m21.tileID.canonical.y * _g16 % 1]) : _m21.texture.bind(_v12, s.CLAMP_TO_EDGE, s.LINEAR_MIPMAP_NEAREST);\n\n            var _y15 = Pe(_14, _x15 || [0, 0], _g16 || 1, _f16, i);\n\n            r instanceof M ? n.draw(a, s.TRIANGLES, _h27, Ii.disabled, l, Si.disabled, _y15, i.id, r.boundsBuffer, t.quadTriangleIndexBuffer, r.boundsSegments) : n.draw(a, s.TRIANGLES, _h27, c[_o108.overscaledZ], l, Si.disabled, _y15, i.id, t.rasterBoundsBuffer, t.quadTriangleIndexBuffer, t.rasterBoundsSegments);\n          }\n        } catch (err) {\n          _iterator202.e(err);\n        } finally {\n          _iterator202.f();\n        }\n      },\n      background: function background(t, e, i) {\n        var o = i.paint.get(\"background-color\"),\n            a = i.paint.get(\"background-opacity\");\n        if (0 === a) return;\n        var s = t.context,\n            r = s.gl,\n            n = t.transform,\n            l = n.tileSize,\n            c = i.paint.get(\"background-pattern\");\n        if (t.isPatternMissing(c)) return;\n        var h = !c && 1 === o.a && 1 === a && t.opaquePassEnabledForLayer() ? \"opaque\" : \"translucent\";\n        if (t.renderPass !== h) return;\n\n        var u = Ii.disabled,\n            d = t.depthModeForSublayer(0, \"opaque\" === h ? Ti.ReadWrite : Ti.ReadOnly),\n            m = t.colorModeForRenderPass(),\n            _ = t.useProgram(c ? \"backgroundPattern\" : \"background\"),\n            p = n.coveringTiles({\n          tileSize: l\n        });\n\n        c && (s.activeTexture.set(r.TEXTURE0), t.imageManager.bind(t.context));\n        var f = i.getCrossfadeParameters();\n\n        var _iterator203 = _createForOfIteratorHelper(p),\n            _step203;\n\n        try {\n          for (_iterator203.s(); !(_step203 = _iterator203.n()).done;) {\n            var _e281 = _step203.value;\n\n            var _n135 = t.transform.calculatePosMatrix(_e281.toUnwrapped()),\n                _h28 = c ? Re(_n135, a, t, c, {\n              tileID: _e281,\n              tileSize: l\n            }, f) : Le(_n135, a, o);\n\n            _.draw(s, r.TRIANGLES, d, u, m, Si.disabled, _h28, i.id, t.tileExtentBuffer, t.quadTriangleIndexBuffer, t.tileExtentSegments);\n          }\n        } catch (err) {\n          _iterator203.e(err);\n        } finally {\n          _iterator203.f();\n        }\n      },\n      debug: function debug(t, e, i) {\n        for (var _o109 = 0; _o109 < i.length; _o109++) {\n          Xi(t, e, i[_o109]);\n        }\n      },\n      custom: function custom(t, e, i) {\n        var o = t.context,\n            a = i.implementation;\n\n        if (\"offscreen\" === t.renderPass) {\n          var _e282 = a.prerender;\n          _e282 && (t.setCustomLayerDefaults(), o.setColorMode(t.colorModeForRenderPass()), _e282.call(a, o.gl, t.transform.customLayerMatrix()), o.setDirty(), t.setBaseState());\n        } else if (\"translucent\" === t.renderPass) {\n          t.setCustomLayerDefaults(), o.setColorMode(t.colorModeForRenderPass()), o.setStencilMode(Ii.disabled);\n\n          var _e283 = \"3d\" === a.renderingMode ? new Ti(t.context.gl.LEQUAL, Ti.ReadWrite, t.depthRangeFor3D) : t.depthModeForSublayer(0, Ti.ReadOnly);\n\n          o.setDepthMode(_e283), a.render(o.gl, t.transform.customLayerMatrix()), o.setDirty(), t.setBaseState(), o.bindFramebuffer.set(null);\n        }\n      }\n    };\n\n    var Ki = /*#__PURE__*/function () {\n      function Ki(t, e) {\n        _classCallCheck(this, Ki);\n\n        this.context = new wi(t), this.transform = e, this._tileTextures = {}, this.setup(), this.numSublayers = Z.maxUnderzooming + Z.maxOverzooming + 1, this.depthEpsilon = 1 / Math.pow(2, 16), this.crossTileSymbolIndex = new Yt(), this.gpuTimers = {};\n      }\n\n      _createClass(Ki, [{\n        key: \"resize\",\n        value: function resize(t, e, i) {\n          if (this.width = t * i, this.height = e * i, this.pixelRatio = i, this.context.viewport.set([0, 0, this.width, this.height]), this.style) {\n            var _iterator204 = _createForOfIteratorHelper(this.style._order),\n                _step204;\n\n            try {\n              for (_iterator204.s(); !(_step204 = _iterator204.n()).done;) {\n                var _t334 = _step204.value;\n\n                this.style._layers[_t334].resize();\n              }\n            } catch (err) {\n              _iterator204.e(err);\n            } finally {\n              _iterator204.f();\n            }\n          }\n        }\n      }, {\n        key: \"setup\",\n        value: function setup() {\n          var e = this.context,\n              i = new t.PosArray();\n          i.emplaceBack(0, 0), i.emplaceBack(t.EXTENT, 0), i.emplaceBack(0, t.EXTENT), i.emplaceBack(t.EXTENT, t.EXTENT), this.tileExtentBuffer = e.createVertexBuffer(i, oe.members), this.tileExtentSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var o = new t.PosArray();\n          o.emplaceBack(0, 0), o.emplaceBack(t.EXTENT, 0), o.emplaceBack(0, t.EXTENT), o.emplaceBack(t.EXTENT, t.EXTENT), this.debugBuffer = e.createVertexBuffer(o, oe.members), this.debugSegments = t.SegmentVector.simpleSegment(0, 0, 4, 5);\n          var a = new t.RasterBoundsArray();\n          a.emplaceBack(0, 0, 0, 0), a.emplaceBack(t.EXTENT, 0, t.EXTENT, 0), a.emplaceBack(0, t.EXTENT, 0, t.EXTENT), a.emplaceBack(t.EXTENT, t.EXTENT, t.EXTENT, t.EXTENT), this.rasterBoundsBuffer = e.createVertexBuffer(a, A.members), this.rasterBoundsSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var s = new t.PosArray();\n          s.emplaceBack(0, 0), s.emplaceBack(1, 0), s.emplaceBack(0, 1), s.emplaceBack(1, 1), this.viewportBuffer = e.createVertexBuffer(s, oe.members), this.viewportSegments = t.SegmentVector.simpleSegment(0, 0, 4, 2);\n          var r = new t.LineStripIndexArray();\n          r.emplaceBack(0), r.emplaceBack(1), r.emplaceBack(3), r.emplaceBack(2), r.emplaceBack(0), this.tileBorderIndexBuffer = e.createIndexBuffer(r);\n          var n = new t.TriangleIndexArray();\n          n.emplaceBack(0, 1, 2), n.emplaceBack(2, 1, 3), this.quadTriangleIndexBuffer = e.createIndexBuffer(n), this.emptyTexture = new d(e, {\n            width: 1,\n            height: 1,\n            data: new Uint8Array([0, 0, 0, 0])\n          }, e.gl.RGBA);\n          var l = this.context.gl;\n          this.stencilClearMode = new Ii({\n            func: l.ALWAYS,\n            mask: 0\n          }, 0, 255, l.ZERO, l.ZERO, l.ZERO);\n        }\n      }, {\n        key: \"clearStencil\",\n        value: function clearStencil() {\n          var e = this.context,\n              i = e.gl;\n          this.nextStencilID = 1, this.currentStencilSource = void 0;\n          var o = t.create();\n          t.ortho(o, 0, this.width, this.height, 0, 0, 1), t.scale(o, o, [i.drawingBufferWidth, i.drawingBufferHeight, 0]), this.useProgram(\"clippingMask\").draw(e, i.TRIANGLES, Ti.disabled, this.stencilClearMode, bi.disabled, Si.disabled, ve(o), \"$clipping\", this.viewportBuffer, this.quadTriangleIndexBuffer, this.viewportSegments);\n        }\n      }, {\n        key: \"_renderTileClippingMasks\",\n        value: function _renderTileClippingMasks(t, e) {\n          if (this.currentStencilSource === t.source || !t.isTileClipped() || !e || !e.length) return;\n          this.currentStencilSource = t.source;\n          var i = this.context,\n              o = i.gl;\n          this.nextStencilID + e.length > 256 && this.clearStencil(), i.setColorMode(bi.disabled), i.setDepthMode(Ti.disabled);\n          var a = this.useProgram(\"clippingMask\");\n          this._tileClippingMaskIDs = {};\n\n          var _iterator205 = _createForOfIteratorHelper(e),\n              _step205;\n\n          try {\n            for (_iterator205.s(); !(_step205 = _iterator205.n()).done;) {\n              var _t335 = _step205.value;\n\n              var _e284 = this._tileClippingMaskIDs[_t335.key] = this.nextStencilID++;\n\n              a.draw(i, o.TRIANGLES, Ti.disabled, new Ii({\n                func: o.ALWAYS,\n                mask: 0\n              }, _e284, 255, o.KEEP, o.KEEP, o.REPLACE), bi.disabled, Si.disabled, ve(_t335.posMatrix), \"$clipping\", this.tileExtentBuffer, this.quadTriangleIndexBuffer, this.tileExtentSegments);\n            }\n          } catch (err) {\n            _iterator205.e(err);\n          } finally {\n            _iterator205.f();\n          }\n        }\n      }, {\n        key: \"stencilModeFor3D\",\n        value: function stencilModeFor3D() {\n          this.currentStencilSource = void 0, this.nextStencilID + 1 > 256 && this.clearStencil();\n          var t = this.nextStencilID++,\n              e = this.context.gl;\n          return new Ii({\n            func: e.NOTEQUAL,\n            mask: 255\n          }, t, 255, e.KEEP, e.KEEP, e.REPLACE);\n        }\n      }, {\n        key: \"stencilModeForClipping\",\n        value: function stencilModeForClipping(t) {\n          var e = this.context.gl;\n          return new Ii({\n            func: e.EQUAL,\n            mask: 255\n          }, this._tileClippingMaskIDs[t.key], 0, e.KEEP, e.KEEP, e.REPLACE);\n        }\n      }, {\n        key: \"stencilConfigForOverlap\",\n        value: function stencilConfigForOverlap(t) {\n          var e = this.context.gl,\n              i = t.sort(function (t, e) {\n            return e.overscaledZ - t.overscaledZ;\n          }),\n              o = i[i.length - 1].overscaledZ,\n              a = i[0].overscaledZ - o + 1;\n\n          if (a > 1) {\n            this.currentStencilSource = void 0, this.nextStencilID + a > 256 && this.clearStencil();\n            var _t336 = {};\n\n            for (var _i222 = 0; _i222 < a; _i222++) {\n              _t336[_i222 + o] = new Ii({\n                func: e.GEQUAL,\n                mask: 255\n              }, _i222 + this.nextStencilID, 255, e.KEEP, e.KEEP, e.REPLACE);\n            }\n\n            return this.nextStencilID += a, [_t336, i];\n          }\n\n          return [_defineProperty({}, o, Ii.disabled), i];\n        }\n      }, {\n        key: \"colorModeForRenderPass\",\n        value: function colorModeForRenderPass() {\n          var e = this.context.gl;\n\n          if (this._showOverdrawInspector) {\n            var _i223 = 1 / 8;\n\n            return new bi([e.CONSTANT_COLOR, e.ONE], new t.Color(_i223, _i223, _i223, 0), [!0, !0, !0, !0]);\n          }\n\n          return \"opaque\" === this.renderPass ? bi.unblended : bi.alphaBlended;\n        }\n      }, {\n        key: \"depthModeForSublayer\",\n        value: function depthModeForSublayer(t, e, i) {\n          if (!this.opaquePassEnabledForLayer()) return Ti.disabled;\n          var o = 1 - ((1 + this.currentLayer) * this.numSublayers + t) * this.depthEpsilon;\n          return new Ti(i || this.context.gl.LEQUAL, e, [o, o]);\n        }\n      }, {\n        key: \"opaquePassEnabledForLayer\",\n        value: function opaquePassEnabledForLayer() {\n          return this.currentLayer < this.opaquePassCutoff;\n        }\n      }, {\n        key: \"render\",\n        value: function render(e, i) {\n          var _this73 = this;\n\n          this.style = e, this.options = i, this.lineAtlas = e.lineAtlas, this.imageManager = e.imageManager, this.glyphManager = e.glyphManager, this.symbolFadeChange = e.placement.symbolFadeChange(t.exported.now()), this.imageManager.beginFrame();\n          var o = this.style._order,\n              a = this.style.sourceCaches;\n\n          for (var _t337 in a) {\n            var _e285 = a[_t337];\n            _e285.used && _e285.prepare(this.context);\n          }\n\n          var s = {},\n              r = {},\n              n = {};\n\n          for (var _t338 in a) {\n            var _e286 = a[_t338];\n            s[_t338] = _e286.getVisibleCoordinates(), r[_t338] = s[_t338].slice().reverse(), n[_t338] = _e286.getVisibleCoordinates(!0).reverse();\n          }\n\n          this.opaquePassCutoff = 1 / 0;\n\n          for (var _t339 = 0; _t339 < o.length; _t339++) {\n            if (this.style._layers[o[_t339]].is3D()) {\n              this.opaquePassCutoff = _t339;\n              break;\n            }\n          }\n\n          this.renderPass = \"offscreen\";\n\n          var _iterator206 = _createForOfIteratorHelper(o),\n              _step206;\n\n          try {\n            for (_iterator206.s(); !(_step206 = _iterator206.n()).done;) {\n              var _t343 = _step206.value;\n              var _e290 = this.style._layers[_t343];\n              if (!_e290.hasOffscreenPass() || _e290.isHidden(this.transform.zoom)) continue;\n              var _i226 = r[_e290.source];\n              (\"custom\" === _e290.type || _i226.length) && this.renderLayer(this, a[_e290.source], _e290, _i226);\n            }\n          } catch (err) {\n            _iterator206.e(err);\n          } finally {\n            _iterator206.f();\n          }\n\n          for (this.context.bindFramebuffer.set(null), this.context.clear({\n            color: i.showOverdrawInspector ? t.Color.black : t.Color.transparent,\n            depth: 1\n          }), this.clearStencil(), this._showOverdrawInspector = i.showOverdrawInspector, this.depthRangeFor3D = [0, 1 - (e._order.length + 2) * this.numSublayers * this.depthEpsilon], this.renderPass = \"opaque\", this.currentLayer = o.length - 1; this.currentLayer >= 0; this.currentLayer--) {\n            var _t340 = this.style._layers[o[this.currentLayer]],\n                _e287 = a[_t340.source],\n                _i224 = s[_t340.source];\n            this._renderTileClippingMasks(_t340, _i224), this.renderLayer(this, _e287, _t340, _i224);\n          }\n\n          for (this.renderPass = \"translucent\", this.currentLayer = 0; this.currentLayer < o.length; this.currentLayer++) {\n            var _t341 = this.style._layers[o[this.currentLayer]],\n                _e288 = a[_t341.source],\n                _i225 = (\"symbol\" === _t341.type ? n : r)[_t341.source];\n            this._renderTileClippingMasks(_t341, s[_t341.source]), this.renderLayer(this, _e288, _t341, _i225);\n          }\n\n          if (this.options.showTileBoundaries) {\n            var _t342, _e289;\n\n            Object.values(this.style._layers).forEach(function (i) {\n              i.source && !i.isHidden(_this73.transform.zoom) && (i.source !== (_e289 && _e289.id) && (_e289 = _this73.style.sourceCaches[i.source]), (!_t342 || _t342.getSource().maxzoom < _e289.getSource().maxzoom) && (_t342 = _e289));\n            }), _t342 && Hi.debug(this, _t342, _t342.getVisibleCoordinates());\n          }\n\n          this.options.showPadding && function (t) {\n            var e = t.transform.padding;\n            ji(t, t.transform.height - (e.top || 0), 3, Ni), ji(t, e.bottom || 0, 3, Gi), $i(t, e.left || 0, 3, Zi), $i(t, t.transform.width - (e.right || 0), 3, qi);\n            var i = t.transform.centerPoint;\n            !function (t, e, i, o) {\n              Wi(t, e - 1, i - 10, 2, 20, o), Wi(t, e - 10, i - 1, 20, 2, o);\n            }(t, i.x, t.transform.height - i.y, Vi);\n          }(this), this.context.setDefault();\n        }\n      }, {\n        key: \"renderLayer\",\n        value: function renderLayer(t, e, i, o) {\n          i.isHidden(this.transform.zoom) || (\"background\" === i.type || \"custom\" === i.type || o.length) && (this.id = i.id, this.gpuTimingStart(i), Hi[i.type](t, e, i, o, this.style.placement.variableOffsets), this.gpuTimingEnd());\n        }\n      }, {\n        key: \"gpuTimingStart\",\n        value: function gpuTimingStart(t) {\n          if (!this.options.gpuTiming) return;\n          var e = this.context.extTimerQuery;\n          var i = this.gpuTimers[t.id];\n          i || (i = this.gpuTimers[t.id] = {\n            calls: 0,\n            cpuTime: 0,\n            query: e.createQueryEXT()\n          }), i.calls++, e.beginQueryEXT(e.TIME_ELAPSED_EXT, i.query);\n        }\n      }, {\n        key: \"gpuTimingEnd\",\n        value: function gpuTimingEnd() {\n          if (!this.options.gpuTiming) return;\n          var t = this.context.extTimerQuery;\n          t.endQueryEXT(t.TIME_ELAPSED_EXT);\n        }\n      }, {\n        key: \"collectGpuTimers\",\n        value: function collectGpuTimers() {\n          var t = this.gpuTimers;\n          return this.gpuTimers = {}, t;\n        }\n      }, {\n        key: \"queryGpuTimers\",\n        value: function queryGpuTimers(t) {\n          var e = {};\n\n          for (var _i227 in t) {\n            var _o110 = t[_i227],\n                _a119 = this.context.extTimerQuery,\n                _s115 = _a119.getQueryObjectEXT(_o110.query, _a119.QUERY_RESULT_EXT) / 1e6;\n\n            _a119.deleteQueryEXT(_o110.query), e[_i227] = _s115;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"translatePosMatrix\",\n        value: function translatePosMatrix(e, i, o, a, s) {\n          if (!o[0] && !o[1]) return e;\n          var r = s ? \"map\" === a ? this.transform.angle : 0 : \"viewport\" === a ? -this.transform.angle : 0;\n\n          if (r) {\n            var _t344 = Math.sin(r),\n                _e291 = Math.cos(r);\n\n            o = [o[0] * _e291 - o[1] * _t344, o[0] * _t344 + o[1] * _e291];\n          }\n\n          var n = [s ? o[0] : It(i, o[0], this.transform.zoom), s ? o[1] : It(i, o[1], this.transform.zoom), 0],\n              l = new Float32Array(16);\n          return t.translate(l, e, n), l;\n        }\n      }, {\n        key: \"saveTileTexture\",\n        value: function saveTileTexture(t) {\n          var e = this._tileTextures[t.size[0]];\n          e ? e.push(t) : this._tileTextures[t.size[0]] = [t];\n        }\n      }, {\n        key: \"getTileTexture\",\n        value: function getTileTexture(t) {\n          var e = this._tileTextures[t];\n          return e && e.length > 0 ? e.pop() : null;\n        }\n      }, {\n        key: \"isPatternMissing\",\n        value: function isPatternMissing(t) {\n          if (!t) return !1;\n          if (!t.from || !t.to) return !0;\n          var e = this.imageManager.getPattern(t.from.toString()),\n              i = this.imageManager.getPattern(t.to.toString());\n          return !e || !i;\n        }\n      }, {\n        key: \"useProgram\",\n        value: function useProgram(t, e) {\n          this.cache = this.cache || {};\n          var i = \"\".concat(t).concat(e ? e.cacheKey : \"\").concat(this._showOverdrawInspector ? \"/overdraw\" : \"\");\n          return this.cache[i] || (this.cache[i] = new le(this.context, t, ae[t], e, ke[t], this._showOverdrawInspector)), this.cache[i];\n        }\n      }, {\n        key: \"setCustomLayerDefaults\",\n        value: function setCustomLayerDefaults() {\n          this.context.unbindVAO(), this.context.cullFace.setDefault(), this.context.activeTexture.setDefault(), this.context.pixelStoreUnpack.setDefault(), this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(), this.context.pixelStoreUnpackFlipY.setDefault();\n        }\n      }, {\n        key: \"setBaseState\",\n        value: function setBaseState() {\n          var t = this.context.gl;\n          this.context.cullFace.set(!1), this.context.viewport.set([0, 0, this.width, this.height]), this.context.blendEquation.set(t.FUNC_ADD);\n        }\n      }, {\n        key: \"initDebugOverlayCanvas\",\n        value: function initDebugOverlayCanvas() {\n          null == this.debugOverlayCanvas && (this.debugOverlayCanvas = document.createElement(\"canvas\"), this.debugOverlayCanvas.width = 512, this.debugOverlayCanvas.height = 512, this.debugOverlayTexture = new d(this.context, this.debugOverlayCanvas, this.context.gl.RGBA));\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.emptyTexture.destroy(), this.debugOverlayTexture && this.debugOverlayTexture.destroy();\n        }\n      }]);\n\n      return Ki;\n    }();\n\n    var Yi = /*#__PURE__*/function () {\n      function Yi(t, e) {\n        _classCallCheck(this, Yi);\n\n        this.points = t, this.planes = e;\n      }\n\n      _createClass(Yi, null, [{\n        key: \"fromInvProjectionMatrix\",\n        value: function fromInvProjectionMatrix(e, i, o) {\n          var a = Math.pow(2, o),\n              s = [[-1, 1, -1, 1], [1, 1, -1, 1], [1, -1, -1, 1], [-1, -1, -1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, -1, 1, 1], [-1, -1, 1, 1]].map(function (i) {\n            return t.transformMat4([], i, e);\n          }).map(function (e) {\n            return t.scale$1([], e, 1 / e[3] / i * a);\n          }),\n              r = [[0, 1, 2], [6, 5, 4], [0, 3, 7], [2, 1, 5], [3, 2, 6], [0, 4, 5]].map(function (t) {\n            var e = function (t, e) {\n              var i = e[0],\n                  o = e[1],\n                  a = e[2],\n                  s = i * i + o * o + a * a;\n              return s > 0 && (s = 1 / Math.sqrt(s)), t[0] = e[0] * s, t[1] = e[1] * s, t[2] = e[2] * s, t;\n            }([], function (t, e, i) {\n              var o = e[0],\n                  a = e[1],\n                  s = e[2],\n                  r = i[0],\n                  n = i[1],\n                  l = i[2];\n              return t[0] = a * l - s * n, t[1] = s * r - o * l, t[2] = o * n - a * r, t;\n            }([], h([], s[t[0]], s[t[1]]), h([], s[t[2]], s[t[1]]))),\n                i = -((o = e)[0] * (a = s[t[1]])[0] + o[1] * a[1] + o[2] * a[2]);\n\n            var o, a;\n            return e.concat(i);\n          });\n          return new Yi(s, r);\n        }\n      }]);\n\n      return Yi;\n    }();\n\n    var Ji = /*#__PURE__*/function () {\n      function Ji(t, e) {\n        _classCallCheck(this, Ji);\n\n        this.min = t, this.max = e, this.center = function (t, e, i) {\n          return t[0] = .5 * e[0], t[1] = .5 * e[1], t[2] = .5 * e[2], t;\n        }([], function (t, e, i) {\n          return t[0] = e[0] + i[0], t[1] = e[1] + i[1], t[2] = e[2] + i[2], t;\n        }([], this.min, this.max));\n      }\n\n      _createClass(Ji, [{\n        key: \"quadrant\",\n        value: function quadrant(t) {\n          var e = [t % 2 == 0, t < 2],\n              i = l(this.min),\n              o = l(this.max);\n\n          for (var _t345 = 0; _t345 < e.length; _t345++) {\n            i[_t345] = e[_t345] ? this.min[_t345] : this.center[_t345], o[_t345] = e[_t345] ? this.center[_t345] : this.max[_t345];\n          }\n\n          return o[2] = this.max[2], new Ji(i, o);\n        }\n      }, {\n        key: \"distanceX\",\n        value: function distanceX(t) {\n          return Math.max(Math.min(this.max[0], t[0]), this.min[0]) - t[0];\n        }\n      }, {\n        key: \"distanceY\",\n        value: function distanceY(t) {\n          return Math.max(Math.min(this.max[1], t[1]), this.min[1]) - t[1];\n        }\n      }, {\n        key: \"intersects\",\n        value: function intersects(e) {\n          var i = [[this.min[0], this.min[1], 0, 1], [this.max[0], this.min[1], 0, 1], [this.max[0], this.max[1], 0, 1], [this.min[0], this.max[1], 0, 1]];\n          var o = !0;\n\n          for (var _a120 = 0; _a120 < e.planes.length; _a120++) {\n            var _s116 = e.planes[_a120];\n            var _r189 = 0;\n\n            for (var _e292 = 0; _e292 < i.length; _e292++) {\n              t.dot(_s116, i[_e292]) >= 0 && _r189++;\n            }\n\n            if (0 === _r189) return 0;\n            _r189 !== i.length && (o = !1);\n          }\n\n          if (o) return 2;\n\n          for (var _t346 = 0; _t346 < 3; _t346++) {\n            var _i228 = Number.MAX_VALUE,\n                _o111 = -Number.MAX_VALUE;\n\n            for (var _a121 = 0; _a121 < e.points.length; _a121++) {\n              var _s117 = e.points[_a121][_t346] - this.min[_t346];\n\n              _i228 = Math.min(_i228, _s117), _o111 = Math.max(_o111, _s117);\n            }\n\n            if (_o111 < 0 || _i228 > this.max[_t346] - this.min[_t346]) return 0;\n          }\n\n          return 1;\n        }\n      }]);\n\n      return Ji;\n    }();\n\n    var Qi = /*#__PURE__*/function () {\n      function Qi() {\n        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n        _classCallCheck(this, Qi);\n\n        if (isNaN(t) || t < 0 || isNaN(e) || e < 0 || isNaN(i) || i < 0 || isNaN(o) || o < 0) throw new Error(\"Invalid value for edge-insets, top, bottom, left and right must all be numbers\");\n        this.top = t, this.bottom = e, this.left = i, this.right = o;\n      }\n\n      _createClass(Qi, [{\n        key: \"interpolate\",\n        value: function interpolate(e, i, o) {\n          return null != i.top && null != e.top && (this.top = t.number(e.top, i.top, o)), null != i.bottom && null != e.bottom && (this.bottom = t.number(e.bottom, i.bottom, o)), null != i.left && null != e.left && (this.left = t.number(e.left, i.left, o)), null != i.right && null != e.right && (this.right = t.number(e.right, i.right, o)), this;\n        }\n      }, {\n        key: \"getCenter\",\n        value: function getCenter(e, i) {\n          var o = t.clamp((this.left + e - this.right) / 2, 0, e),\n              a = t.clamp((this.top + i - this.bottom) / 2, 0, i);\n          return new t.pointGeometry(o, a);\n        }\n      }, {\n        key: \"equals\",\n        value: function equals(t) {\n          return this.top === t.top && this.bottom === t.bottom && this.left === t.left && this.right === t.right;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new Qi(this.top, this.bottom, this.left, this.right);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return {\n            top: this.top,\n            bottom: this.bottom,\n            left: this.left,\n            right: this.right\n          };\n        }\n      }]);\n\n      return Qi;\n    }();\n\n    var to = /*#__PURE__*/function () {\n      function to(e, i, o, a, s) {\n        _classCallCheck(this, to);\n\n        this.tileSize = 512, this.maxValidLatitude = 85.051129, this._renderWorldCopies = void 0 === s || !!s, this._minZoom = e || 0, this._maxZoom = i || 22, this._minPitch = null == o ? 0 : o, this._maxPitch = null == a ? 60 : a, this.setMaxBounds(), this.width = 0, this.height = 0, this._center = new t.LngLat(0, 0), this.zoom = 0, this.angle = 0, this._fov = .6435011087932844, this._pitch = 0, this._unmodified = !0, this._edgeInsets = new Qi(), this._posMatrixCache = {}, this._alignedPosMatrixCache = {};\n      }\n\n      _createClass(to, [{\n        key: \"clone\",\n        value: function clone() {\n          var t = new to(this._minZoom, this._maxZoom, this._minPitch, this.maxPitch, this._renderWorldCopies);\n          return t.tileSize = this.tileSize, t.latRange = this.latRange, t.width = this.width, t.height = this.height, t._center = this._center, t.zoom = this.zoom, t.angle = this.angle, t._fov = this._fov, t._pitch = this._pitch, t._unmodified = this._unmodified, t._edgeInsets = this._edgeInsets.clone(), t._calcMatrices(), t;\n        }\n      }, {\n        key: \"isPaddingEqual\",\n        value: function isPaddingEqual(t) {\n          return this._edgeInsets.equals(t);\n        }\n      }, {\n        key: \"interpolatePadding\",\n        value: function interpolatePadding(t, e, i) {\n          this._unmodified = !1, this._edgeInsets.interpolate(t, e, i), this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"coveringZoomLevel\",\n        value: function coveringZoomLevel(t) {\n          var e = (t.roundZoom ? Math.round : Math.floor)(this.zoom + this.scaleZoom(this.tileSize / t.tileSize));\n          return Math.max(0, e);\n        }\n      }, {\n        key: \"getVisibleUnwrappedCoordinates\",\n        value: function getVisibleUnwrappedCoordinates(e) {\n          var i = [new t.UnwrappedTileID(0, e)];\n\n          if (this._renderWorldCopies) {\n            var _o112 = this.pointCoordinate(new t.pointGeometry(0, 0)),\n                _a122 = this.pointCoordinate(new t.pointGeometry(this.width, 0)),\n                _s118 = this.pointCoordinate(new t.pointGeometry(this.width, this.height)),\n                _r190 = this.pointCoordinate(new t.pointGeometry(0, this.height)),\n                _n136 = Math.floor(Math.min(_o112.x, _a122.x, _s118.x, _r190.x)),\n                _l51 = Math.floor(Math.max(_o112.x, _a122.x, _s118.x, _r190.x)),\n                _c34 = 1;\n\n            for (var _o113 = _n136 - _c34; _o113 <= _l51 + _c34; _o113++) {\n              0 !== _o113 && i.push(new t.UnwrappedTileID(_o113, e));\n            }\n          }\n\n          return i;\n        }\n      }, {\n        key: \"coveringTiles\",\n        value: function coveringTiles(e) {\n          var i = this.coveringZoomLevel(e);\n          var o = i;\n          if (void 0 !== e.minzoom && i < e.minzoom) return [];\n          void 0 !== e.maxzoom && i > e.maxzoom && (i = e.maxzoom);\n          var a = t.MercatorCoordinate.fromLngLat(this.center),\n              s = Math.pow(2, i),\n              r = [s * a.x, s * a.y, 0],\n              n = Yi.fromInvProjectionMatrix(this.invProjMatrix, this.worldSize, i);\n          var l = e.minzoom || 0;\n          this.pitch <= 60 && this._edgeInsets.top < .1 && (l = i);\n\n          var c = function c(t) {\n            return {\n              aabb: new Ji([t * s, 0, 0], [(t + 1) * s, s, 0]),\n              zoom: 0,\n              x: 0,\n              y: 0,\n              wrap: t,\n              fullyVisible: !1\n            };\n          },\n              h = [],\n              d = [],\n              m = i,\n              _ = e.reparseOverscaled ? o : i;\n\n          if (this._renderWorldCopies) for (var _t347 = 1; _t347 <= 3; _t347++) {\n            h.push(c(-_t347)), h.push(c(_t347));\n          }\n\n          for (h.push(c(0)); h.length > 0;) {\n            var _e293 = h.pop(),\n                _i229 = _e293.x,\n                _o114 = _e293.y;\n\n            var _a123 = _e293.fullyVisible;\n\n            if (!_a123) {\n              var _t348 = _e293.aabb.intersects(n);\n\n              if (0 === _t348) continue;\n              _a123 = 2 === _t348;\n            }\n\n            var _s119 = _e293.aabb.distanceX(r),\n                _c35 = _e293.aabb.distanceY(r),\n                _p19 = Math.max(Math.abs(_s119), Math.abs(_c35)),\n                _f17 = 3 + (1 << m - _e293.zoom) - 2;\n\n            if (_e293.zoom === m || _p19 > _f17 && _e293.zoom >= l) d.push({\n              tileID: new t.OverscaledTileID(_e293.zoom === m ? _ : _e293.zoom, _e293.wrap, _e293.zoom, _i229, _o114),\n              distanceSq: u([r[0] - .5 - _i229, r[1] - .5 - _o114])\n            });else for (var _t349 = 0; _t349 < 4; _t349++) {\n              var _s120 = (_i229 << 1) + _t349 % 2,\n                  _r191 = (_o114 << 1) + (_t349 >> 1);\n\n              h.push({\n                aabb: _e293.aabb.quadrant(_t349),\n                zoom: _e293.zoom + 1,\n                x: _s120,\n                y: _r191,\n                wrap: _e293.wrap,\n                fullyVisible: _a123\n              });\n            }\n          }\n\n          return d.sort(function (t, e) {\n            return t.distanceSq - e.distanceSq;\n          }).map(function (t) {\n            return t.tileID;\n          });\n        }\n      }, {\n        key: \"resize\",\n        value: function resize(t, e) {\n          this.width = t, this.height = e, this.pixelsToGLUnits = [2 / t, -2 / e], this._constrain(), this._calcMatrices();\n        }\n      }, {\n        key: \"zoomScale\",\n        value: function zoomScale(t) {\n          return Math.pow(2, t);\n        }\n      }, {\n        key: \"scaleZoom\",\n        value: function scaleZoom(t) {\n          return Math.log(t) / Math.LN2;\n        }\n      }, {\n        key: \"project\",\n        value: function project(e) {\n          var i = t.clamp(e.lat, -this.maxValidLatitude, this.maxValidLatitude);\n          return new t.pointGeometry(t.mercatorXfromLng(e.lng) * this.worldSize, t.mercatorYfromLat(i) * this.worldSize);\n        }\n      }, {\n        key: \"unproject\",\n        value: function unproject(e) {\n          return new t.MercatorCoordinate(e.x / this.worldSize, e.y / this.worldSize).toLngLat();\n        }\n      }, {\n        key: \"setLocationAtPoint\",\n        value: function setLocationAtPoint(e, i) {\n          var o = this.pointCoordinate(i),\n              a = this.pointCoordinate(this.centerPoint),\n              s = this.locationCoordinate(e),\n              r = new t.MercatorCoordinate(s.x - (o.x - a.x), s.y - (o.y - a.y));\n          this.center = this.coordinateLocation(r), this._renderWorldCopies && (this.center = this.center.wrap());\n        }\n      }, {\n        key: \"locationPoint\",\n        value: function locationPoint(t) {\n          return this.coordinatePoint(this.locationCoordinate(t));\n        }\n      }, {\n        key: \"pointLocation\",\n        value: function pointLocation(t) {\n          return this.coordinateLocation(this.pointCoordinate(t));\n        }\n      }, {\n        key: \"locationCoordinate\",\n        value: function locationCoordinate(e) {\n          return t.MercatorCoordinate.fromLngLat(e);\n        }\n      }, {\n        key: \"coordinateLocation\",\n        value: function coordinateLocation(t) {\n          return t.toLngLat();\n        }\n      }, {\n        key: \"pointCoordinate\",\n        value: function pointCoordinate(e) {\n          var i = [e.x, e.y, 0, 1],\n              o = [e.x, e.y, 1, 1];\n          t.transformMat4(i, i, this.pixelMatrixInverse), t.transformMat4(o, o, this.pixelMatrixInverse);\n          var a = i[3],\n              s = o[3],\n              r = i[1] / a,\n              n = o[1] / s,\n              l = i[2] / a,\n              c = o[2] / s,\n              h = l === c ? 0 : (0 - l) / (c - l);\n          return new t.MercatorCoordinate(t.number(i[0] / a, o[0] / s, h) / this.worldSize, t.number(r, n, h) / this.worldSize);\n        }\n      }, {\n        key: \"coordinatePoint\",\n        value: function coordinatePoint(e) {\n          var i = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];\n          return t.transformMat4(i, i, this.pixelMatrix), new t.pointGeometry(i[0] / i[3], i[1] / i[3]);\n        }\n      }, {\n        key: \"getBounds\",\n        value: function getBounds() {\n          return new t.LngLatBounds().extend(this.pointLocation(new t.pointGeometry(0, 0))).extend(this.pointLocation(new t.pointGeometry(this.width, 0))).extend(this.pointLocation(new t.pointGeometry(this.width, this.height))).extend(this.pointLocation(new t.pointGeometry(0, this.height)));\n        }\n      }, {\n        key: \"getMaxBounds\",\n        value: function getMaxBounds() {\n          return this.latRange && 2 === this.latRange.length && this.lngRange && 2 === this.lngRange.length ? new t.LngLatBounds([this.lngRange[0], this.latRange[0]], [this.lngRange[1], this.latRange[1]]) : null;\n        }\n      }, {\n        key: \"setMaxBounds\",\n        value: function setMaxBounds(t) {\n          t ? (this.lngRange = [t.getWest(), t.getEast()], this.latRange = [t.getSouth(), t.getNorth()], this._constrain()) : (this.lngRange = null, this.latRange = [-this.maxValidLatitude, this.maxValidLatitude]);\n        }\n      }, {\n        key: \"calculatePosMatrix\",\n        value: function calculatePosMatrix(e) {\n          var i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n          var o = e.key,\n              a = i ? this._alignedPosMatrixCache : this._posMatrixCache;\n          if (a[o]) return a[o];\n          var s = e.canonical,\n              r = this.worldSize / this.zoomScale(s.z),\n              n = s.x + Math.pow(2, s.z) * e.wrap,\n              l = t.identity(new Float64Array(16));\n          return t.translate(l, l, [n * r, s.y * r, 0]), t.scale(l, l, [r / t.EXTENT, r / t.EXTENT, 1]), t.multiply(l, i ? this.alignedProjMatrix : this.projMatrix, l), a[o] = new Float32Array(l), a[o];\n        }\n      }, {\n        key: \"customLayerMatrix\",\n        value: function customLayerMatrix() {\n          return this.mercatorMatrix.slice();\n        }\n      }, {\n        key: \"_constrain\",\n        value: function _constrain() {\n          if (!this.center || !this.width || !this.height || this._constraining) return;\n          this._constraining = !0;\n          var e,\n              i,\n              o,\n              a,\n              s = -90,\n              r = 90,\n              n = -180,\n              l = 180;\n          var c = this.size,\n              h = this._unmodified;\n\n          if (this.latRange) {\n            var _i230 = this.latRange;\n            s = t.mercatorYfromLat(_i230[1]) * this.worldSize, r = t.mercatorYfromLat(_i230[0]) * this.worldSize, e = r - s < c.y ? c.y / (r - s) : 0;\n          }\n\n          if (this.lngRange) {\n            var _e294 = this.lngRange;\n            n = t.mercatorXfromLng(_e294[0]) * this.worldSize, l = t.mercatorXfromLng(_e294[1]) * this.worldSize, i = l - n < c.x ? c.x / (l - n) : 0;\n          }\n\n          var u = this.point,\n              d = Math.max(i || 0, e || 0);\n          if (d) return this.center = this.unproject(new t.pointGeometry(i ? (l + n) / 2 : u.x, e ? (r + s) / 2 : u.y)), this.zoom += this.scaleZoom(d), this._unmodified = h, void (this._constraining = !1);\n\n          if (this.latRange) {\n            var _t350 = u.y,\n                _e295 = c.y / 2;\n\n            _t350 - _e295 < s && (a = s + _e295), _t350 + _e295 > r && (a = r - _e295);\n          }\n\n          if (this.lngRange) {\n            var _t351 = u.x,\n                _e296 = c.x / 2;\n\n            _t351 - _e296 < n && (o = n + _e296), _t351 + _e296 > l && (o = l - _e296);\n          }\n\n          void 0 === o && void 0 === a || (this.center = this.unproject(new t.pointGeometry(void 0 !== o ? o : u.x, void 0 !== a ? a : u.y))), this._unmodified = h, this._constraining = !1;\n        }\n      }, {\n        key: \"_calcMatrices\",\n        value: function _calcMatrices() {\n          if (!this.height) return;\n          var e = this.centerOffset;\n          this.cameraToCenterDistance = .5 / Math.tan(this._fov / 2) * this.height;\n          var i = Math.PI / 2 + this._pitch,\n              o = this._fov * (.5 + e.y / this.height),\n              a = Math.sin(o) * this.cameraToCenterDistance / Math.sin(t.clamp(Math.PI - i - o, .01, Math.PI - .01)),\n              s = this.point,\n              r = s.x,\n              n = s.y,\n              l = 1.01 * (Math.cos(Math.PI / 2 - this._pitch) * a + this.cameraToCenterDistance),\n              c = this.height / 50;\n          var h = new Float64Array(16);\n          t.perspective(h, this._fov, this.width / this.height, c, l), h[8] = 2 * -e.x / this.width, h[9] = 2 * e.y / this.height, t.scale(h, h, [1, -1, 1]), t.translate(h, h, [0, 0, -this.cameraToCenterDistance]), t.rotateX(h, h, this._pitch), t.rotateZ(h, h, this.angle), t.translate(h, h, [-r, -n, 0]), this.mercatorMatrix = t.scale([], h, [this.worldSize, this.worldSize, this.worldSize]), t.scale(h, h, [1, 1, t.mercatorZfromAltitude(1, this.center.lat) * this.worldSize]), this.projMatrix = h, this.invProjMatrix = t.invert([], this.projMatrix);\n\n          var u = this.width % 2 / 2,\n              d = this.height % 2 / 2,\n              m = Math.cos(this.angle),\n              _ = Math.sin(this.angle),\n              p = r - Math.round(r) + m * u + _ * d,\n              f = n - Math.round(n) + m * d + _ * u,\n              g = new Float64Array(h);\n\n          if (t.translate(g, g, [p > .5 ? p - 1 : p, f > .5 ? f - 1 : f, 0]), this.alignedProjMatrix = g, h = t.create(), t.scale(h, h, [this.width / 2, -this.height / 2, 1]), t.translate(h, h, [1, -1, 0]), this.labelPlaneMatrix = h, h = t.create(), t.scale(h, h, [1, -1, 1]), t.translate(h, h, [-1, -1, 0]), t.scale(h, h, [2 / this.width, 2 / this.height, 1]), this.glCoordMatrix = h, this.pixelMatrix = t.multiply(new Float64Array(16), this.labelPlaneMatrix, this.projMatrix), h = t.invert(new Float64Array(16), this.pixelMatrix), !h) throw new Error(\"failed to invert matrix\");\n          this.pixelMatrixInverse = h, this._posMatrixCache = {}, this._alignedPosMatrixCache = {};\n        }\n      }, {\n        key: \"maxPitchScaleFactor\",\n        value: function maxPitchScaleFactor() {\n          if (!this.pixelMatrixInverse) return 1;\n          var e = this.pointCoordinate(new t.pointGeometry(0, 0)),\n              i = [e.x * this.worldSize, e.y * this.worldSize, 0, 1];\n          return t.transformMat4(i, i, this.pixelMatrix)[3] / this.cameraToCenterDistance;\n        }\n      }, {\n        key: \"getCameraPoint\",\n        value: function getCameraPoint() {\n          var e = Math.tan(this._pitch) * (this.cameraToCenterDistance || 1);\n          return this.centerPoint.add(new t.pointGeometry(0, e));\n        }\n      }, {\n        key: \"getCameraQueryGeometry\",\n        value: function getCameraQueryGeometry(e) {\n          var i = this.getCameraPoint();\n          if (1 === e.length) return [e[0], i];\n          {\n            var _o115 = i.x,\n                _a124 = i.y,\n                _s121 = i.x,\n                _r192 = i.y;\n\n            var _iterator207 = _createForOfIteratorHelper(e),\n                _step207;\n\n            try {\n              for (_iterator207.s(); !(_step207 = _iterator207.n()).done;) {\n                var _t352 = _step207.value;\n                _o115 = Math.min(_o115, _t352.x), _a124 = Math.min(_a124, _t352.y), _s121 = Math.max(_s121, _t352.x), _r192 = Math.max(_r192, _t352.y);\n              }\n            } catch (err) {\n              _iterator207.e(err);\n            } finally {\n              _iterator207.f();\n            }\n\n            return [new t.pointGeometry(_o115, _a124), new t.pointGeometry(_s121, _a124), new t.pointGeometry(_s121, _r192), new t.pointGeometry(_o115, _r192), new t.pointGeometry(_o115, _a124)];\n          }\n        }\n      }, {\n        key: \"minZoom\",\n        get: function get() {\n          return this._minZoom;\n        },\n        set: function set(t) {\n          this._minZoom !== t && (this._minZoom = t, this.zoom = Math.max(this.zoom, t));\n        }\n      }, {\n        key: \"maxZoom\",\n        get: function get() {\n          return this._maxZoom;\n        },\n        set: function set(t) {\n          this._maxZoom !== t && (this._maxZoom = t, this.zoom = Math.min(this.zoom, t));\n        }\n      }, {\n        key: \"minPitch\",\n        get: function get() {\n          return this._minPitch;\n        },\n        set: function set(t) {\n          this._minPitch !== t && (this._minPitch = t, this.pitch = Math.max(this.pitch, t));\n        }\n      }, {\n        key: \"maxPitch\",\n        get: function get() {\n          return this._maxPitch;\n        },\n        set: function set(t) {\n          this._maxPitch !== t && (this._maxPitch = t, this.pitch = Math.min(this.pitch, t));\n        }\n      }, {\n        key: \"renderWorldCopies\",\n        get: function get() {\n          return this._renderWorldCopies;\n        },\n        set: function set(t) {\n          void 0 === t ? t = !0 : null === t && (t = !1), this._renderWorldCopies = t;\n        }\n      }, {\n        key: \"worldSize\",\n        get: function get() {\n          return this.tileSize * this.scale;\n        }\n      }, {\n        key: \"centerOffset\",\n        get: function get() {\n          return this.centerPoint._sub(this.size._div(2));\n        }\n      }, {\n        key: \"size\",\n        get: function get() {\n          return new t.pointGeometry(this.width, this.height);\n        }\n      }, {\n        key: \"bearing\",\n        get: function get() {\n          return -this.angle / Math.PI * 180;\n        },\n        set: function set(e) {\n          var i = -t.wrap(e, -180, 180) * Math.PI / 180;\n          this.angle !== i && (this._unmodified = !1, this.angle = i, this._calcMatrices(), this.rotationMatrix = function () {\n            var e = new t.ARRAY_TYPE(4);\n            return t.ARRAY_TYPE != Float32Array && (e[1] = 0, e[2] = 0), e[0] = 1, e[3] = 1, e;\n          }(), function (t, e, i) {\n            var o = e[0],\n                a = e[1],\n                s = e[2],\n                r = e[3],\n                n = Math.sin(i),\n                l = Math.cos(i);\n            t[0] = o * l + s * n, t[1] = a * l + r * n, t[2] = o * -n + s * l, t[3] = a * -n + r * l;\n          }(this.rotationMatrix, this.rotationMatrix, this.angle));\n        }\n      }, {\n        key: \"pitch\",\n        get: function get() {\n          return this._pitch / Math.PI * 180;\n        },\n        set: function set(e) {\n          var i = t.clamp(e, this.minPitch, this.maxPitch) / 180 * Math.PI;\n          this._pitch !== i && (this._unmodified = !1, this._pitch = i, this._calcMatrices());\n        }\n      }, {\n        key: \"fov\",\n        get: function get() {\n          return this._fov / Math.PI * 180;\n        },\n        set: function set(t) {\n          t = Math.max(.01, Math.min(60, t)), this._fov !== t && (this._unmodified = !1, this._fov = t / 180 * Math.PI, this._calcMatrices());\n        }\n      }, {\n        key: \"zoom\",\n        get: function get() {\n          return this._zoom;\n        },\n        set: function set(t) {\n          var e = Math.min(Math.max(t, this.minZoom), this.maxZoom);\n          this._zoom !== e && (this._unmodified = !1, this._zoom = e, this.scale = this.zoomScale(e), this.tileZoom = Math.floor(e), this.zoomFraction = e - this.tileZoom, this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"center\",\n        get: function get() {\n          return this._center;\n        },\n        set: function set(t) {\n          t.lat === this._center.lat && t.lng === this._center.lng || (this._unmodified = !1, this._center = t, this._constrain(), this._calcMatrices());\n        }\n      }, {\n        key: \"padding\",\n        get: function get() {\n          return this._edgeInsets.toJSON();\n        },\n        set: function set(t) {\n          this._edgeInsets.equals(t) || (this._unmodified = !1, this._edgeInsets.interpolate(this._edgeInsets, t, 1), this._calcMatrices());\n        }\n      }, {\n        key: \"centerPoint\",\n        get: function get() {\n          return this._edgeInsets.getCenter(this.width, this.height);\n        }\n      }, {\n        key: \"unmodified\",\n        get: function get() {\n          return this._unmodified;\n        }\n      }, {\n        key: \"point\",\n        get: function get() {\n          return this.project(this.center);\n        }\n      }]);\n\n      return to;\n    }();\n\n    var eo = /*#__PURE__*/function () {\n      function eo(e) {\n        _classCallCheck(this, eo);\n\n        this._hashName = e && encodeURIComponent(e), t.bindAll([\"_getCurrentHash\", \"_onHashChange\", \"_updateHash\"], this), this._updateHash = function (t, e) {\n          var i = !1,\n              o = null;\n\n          var a = function a() {\n            o = null, i && (t(), o = setTimeout(a, 300), i = !1);\n          };\n\n          return function () {\n            return i = !0, o || a(), o;\n          };\n        }(this._updateHashUnthrottled.bind(this));\n      }\n\n      _createClass(eo, [{\n        key: \"addTo\",\n        value: function addTo(t) {\n          return this._map = t, addEventListener(\"hashchange\", this._onHashChange, !1), this._map.on(\"moveend\", this._updateHash), this;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          return removeEventListener(\"hashchange\", this._onHashChange, !1), this._map.off(\"moveend\", this._updateHash), clearTimeout(this._updateHash()), delete this._map, this;\n        }\n      }, {\n        key: \"getHashString\",\n        value: function getHashString(t) {\n          var e = this._map.getCenter(),\n              i = Math.round(100 * this._map.getZoom()) / 100,\n              o = Math.ceil((i * Math.LN2 + Math.log(512 / 360 / .5)) / Math.LN10),\n              a = Math.pow(10, o),\n              s = Math.round(e.lng * a) / a,\n              r = Math.round(e.lat * a) / a,\n              n = this._map.getBearing(),\n              l = this._map.getPitch();\n\n          var c = \"\";\n\n          if (c += t ? \"/\".concat(s, \"/\").concat(r, \"/\").concat(i) : \"\".concat(i, \"/\").concat(r, \"/\").concat(s), (n || l) && (c += \"/\" + Math.round(10 * n) / 10), l && (c += \"/\".concat(Math.round(l))), this._hashName) {\n            var _t353 = this._hashName;\n\n            var _e297 = !1;\n\n            var _i231 = window.location.hash.slice(1).split(\"&\").map(function (i) {\n              var o = i.split(\"=\")[0];\n              return o === _t353 ? (_e297 = !0, \"\".concat(o, \"=\").concat(c)) : i;\n            }).filter(function (t) {\n              return t;\n            });\n\n            return _e297 || _i231.push(\"\".concat(_t353, \"=\").concat(c)), \"#\".concat(_i231.join(\"&\"));\n          }\n\n          return \"#\".concat(c);\n        }\n      }, {\n        key: \"_getCurrentHash\",\n        value: function _getCurrentHash() {\n          var _this74 = this;\n\n          var t = window.location.hash.replace(\"#\", \"\");\n\n          if (this._hashName) {\n            var _e298;\n\n            return t.split(\"&\").map(function (t) {\n              return t.split(\"=\");\n            }).forEach(function (t) {\n              t[0] === _this74._hashName && (_e298 = t);\n            }), (_e298 && _e298[1] || \"\").split(\"/\");\n          }\n\n          return t.split(\"/\");\n        }\n      }, {\n        key: \"_onHashChange\",\n        value: function _onHashChange() {\n          var t = this._getCurrentHash();\n\n          if (t.length >= 3 && !t.some(function (t) {\n            return isNaN(t);\n          })) {\n            var _e299 = this._map.dragRotate.isEnabled() && this._map.touchZoomRotate.isEnabled() ? +(t[3] || 0) : this._map.getBearing();\n\n            return this._map.jumpTo({\n              center: [+t[2], +t[1]],\n              zoom: +t[0],\n              bearing: _e299,\n              pitch: +(t[4] || 0)\n            }), !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"_updateHashUnthrottled\",\n        value: function _updateHashUnthrottled() {\n          var t = window.location.href.replace(/(#.+)?$/, this.getHashString());\n\n          try {\n            window.history.replaceState(window.history.state, null, t);\n          } catch (t) {}\n        }\n      }]);\n\n      return eo;\n    }();\n\n    var io = {\n      linearity: .3,\n      easing: t.bezier(0, 0, .3, 1)\n    },\n        oo = t.extend({\n      deceleration: 2500,\n      maxSpeed: 1400\n    }, io),\n        ao = t.extend({\n      deceleration: 20,\n      maxSpeed: 1400\n    }, io),\n        so = t.extend({\n      deceleration: 1e3,\n      maxSpeed: 360\n    }, io),\n        ro = t.extend({\n      deceleration: 1e3,\n      maxSpeed: 90\n    }, io);\n\n    var no = /*#__PURE__*/function () {\n      function no(t) {\n        _classCallCheck(this, no);\n\n        this._map = t, this.clear();\n      }\n\n      _createClass(no, [{\n        key: \"clear\",\n        value: function clear() {\n          this._inertiaBuffer = [];\n        }\n      }, {\n        key: \"record\",\n        value: function record(e) {\n          this._drainInertiaBuffer(), this._inertiaBuffer.push({\n            time: t.exported.now(),\n            settings: e\n          });\n        }\n      }, {\n        key: \"_drainInertiaBuffer\",\n        value: function _drainInertiaBuffer() {\n          var e = this._inertiaBuffer,\n              i = t.exported.now();\n\n          for (; e.length > 0 && i - e[0].time > 160;) {\n            e.shift();\n          }\n        }\n      }, {\n        key: \"_onMoveEnd\",\n        value: function _onMoveEnd(e) {\n          if (this._drainInertiaBuffer(), this._inertiaBuffer.length < 2) return;\n          var i = {\n            zoom: 0,\n            bearing: 0,\n            pitch: 0,\n            pan: new t.pointGeometry(0, 0),\n            pinchAround: void 0,\n            around: void 0\n          };\n\n          var _iterator208 = _createForOfIteratorHelper(this._inertiaBuffer),\n              _step208;\n\n          try {\n            for (_iterator208.s(); !(_step208 = _iterator208.n()).done;) {\n              var _t357 = _step208.value.settings;\n              i.zoom += _t357.zoomDelta || 0, i.bearing += _t357.bearingDelta || 0, i.pitch += _t357.pitchDelta || 0, _t357.panDelta && i.pan._add(_t357.panDelta), _t357.around && (i.around = _t357.around), _t357.pinchAround && (i.pinchAround = _t357.pinchAround);\n            }\n          } catch (err) {\n            _iterator208.e(err);\n          } finally {\n            _iterator208.f();\n          }\n\n          var o = this._inertiaBuffer[this._inertiaBuffer.length - 1].time - this._inertiaBuffer[0].time,\n              a = {};\n\n          if (i.pan.mag()) {\n            var _s122 = co(i.pan.mag(), o, t.extend({}, oo, e || {}));\n\n            a.offset = i.pan.mult(_s122.amount / i.pan.mag()), a.center = this._map.transform.center, lo(a, _s122);\n          }\n\n          if (i.zoom) {\n            var _t354 = co(i.zoom, o, ao);\n\n            a.zoom = this._map.transform.zoom + _t354.amount, lo(a, _t354);\n          }\n\n          if (i.bearing) {\n            var _e300 = co(i.bearing, o, so);\n\n            a.bearing = this._map.transform.bearing + t.clamp(_e300.amount, -179, 179), lo(a, _e300);\n          }\n\n          if (i.pitch) {\n            var _t355 = co(i.pitch, o, ro);\n\n            a.pitch = this._map.transform.pitch + _t355.amount, lo(a, _t355);\n          }\n\n          if (a.zoom || a.bearing) {\n            var _t356 = void 0 === i.pinchAround ? i.around : i.pinchAround;\n\n            a.around = _t356 ? this._map.unproject(_t356) : this._map.getCenter();\n          }\n\n          return this.clear(), t.extend(a, {\n            noMoveStart: !0\n          });\n        }\n      }]);\n\n      return no;\n    }();\n\n    function lo(t, e) {\n      (!t.duration || t.duration < e.duration) && (t.duration = e.duration, t.easing = e.easing);\n    }\n\n    function co(e, i, o) {\n      var a = o.maxSpeed,\n          s = o.linearity,\n          r = o.deceleration,\n          n = t.clamp(e * s / (i / 1e3), -a, a),\n          l = Math.abs(n) / (r * s);\n      return {\n        easing: o.easing,\n        duration: 1e3 * l,\n        amount: n * (l / 2)\n      };\n    }\n\n    var ho = /*#__PURE__*/function (_t$Event) {\n      _inherits(ho, _t$Event);\n\n      function ho(e, i, o) {\n        var _this75;\n\n        var a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        _classCallCheck(this, ho);\n\n        var r = s.mousePos(i.getCanvasContainer(), o),\n            n = i.unproject(r);\n        _this75 = _possibleConstructorReturn(this, _getPrototypeOf(ho).call(this, e, t.extend({\n          point: r,\n          lngLat: n,\n          originalEvent: o\n        }, a))), _this75._defaultPrevented = !1, _this75.target = i;\n        return _this75;\n      }\n\n      _createClass(ho, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n\n      return ho;\n    }(t.Event);\n\n    var uo = /*#__PURE__*/function (_t$Event2) {\n      _inherits(uo, _t$Event2);\n\n      function uo(e, i, o) {\n        var _this76;\n\n        _classCallCheck(this, uo);\n\n        var a = \"touchend\" === e ? o.changedTouches : o.touches,\n            r = s.touchPos(i.getCanvasContainer(), a),\n            n = r.map(function (t) {\n          return i.unproject(t);\n        }),\n            l = r.reduce(function (t, e, i, o) {\n          return t.add(e.div(o.length));\n        }, new t.pointGeometry(0, 0));\n        _this76 = _possibleConstructorReturn(this, _getPrototypeOf(uo).call(this, e, {\n          points: r,\n          point: l,\n          lngLats: n,\n          lngLat: i.unproject(l),\n          originalEvent: o\n        })), _this76._defaultPrevented = !1;\n        return _this76;\n      }\n\n      _createClass(uo, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n\n      return uo;\n    }(t.Event);\n\n    var mo = /*#__PURE__*/function (_t$Event3) {\n      _inherits(mo, _t$Event3);\n\n      function mo(t, e, i) {\n        var _this77;\n\n        _classCallCheck(this, mo);\n\n        _this77 = _possibleConstructorReturn(this, _getPrototypeOf(mo).call(this, t, {\n          originalEvent: i\n        })), _this77._defaultPrevented = !1;\n        return _this77;\n      }\n\n      _createClass(mo, [{\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this._defaultPrevented = !0;\n        }\n      }, {\n        key: \"defaultPrevented\",\n        get: function get() {\n          return this._defaultPrevented;\n        }\n      }]);\n\n      return mo;\n    }(t.Event);\n\n    var _o = /*#__PURE__*/function () {\n      function _o(t, e) {\n        _classCallCheck(this, _o);\n\n        this._map = t, this._clickTolerance = e.clickTolerance;\n      }\n\n      _createClass(_o, [{\n        key: \"reset\",\n        value: function reset() {\n          delete this._mousedownPos;\n        }\n      }, {\n        key: \"wheel\",\n        value: function wheel(t) {\n          return this._firePreventable(new mo(t.type, this._map, t));\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          return this._mousedownPos = e, this._firePreventable(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup(t) {\n          this._map.fire(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"click\",\n        value: function click(t, e) {\n          this._mousedownPos && this._mousedownPos.dist(e) >= this._clickTolerance || this._map.fire(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"dblclick\",\n        value: function dblclick(t) {\n          return this._firePreventable(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"mouseover\",\n        value: function mouseover(t) {\n          this._map.fire(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"mouseout\",\n        value: function mouseout(t) {\n          this._map.fire(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t) {\n          return this._firePreventable(new uo(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t) {\n          this._map.fire(new uo(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t) {\n          this._map.fire(new uo(t.type, this._map, t));\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel(t) {\n          this._map.fire(new uo(t.type, this._map, t));\n        }\n      }, {\n        key: \"_firePreventable\",\n        value: function _firePreventable(t) {\n          if (this._map.fire(t), t.defaultPrevented) return {};\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !0;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !1;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {}\n      }, {\n        key: \"disable\",\n        value: function disable() {}\n      }]);\n\n      return _o;\n    }();\n\n    var po = /*#__PURE__*/function () {\n      function po(t) {\n        _classCallCheck(this, po);\n\n        this._map = t;\n      }\n\n      _createClass(po, [{\n        key: \"reset\",\n        value: function reset() {\n          this._delayContextMenu = !1, delete this._contextMenuEvent;\n        }\n      }, {\n        key: \"mousemove\",\n        value: function mousemove(t) {\n          this._map.fire(new ho(t.type, this._map, t));\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown() {\n          this._delayContextMenu = !0;\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup() {\n          this._delayContextMenu = !1, this._contextMenuEvent && (this._map.fire(new ho(\"contextmenu\", this._map, this._contextMenuEvent)), delete this._contextMenuEvent);\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(t) {\n          this._delayContextMenu ? this._contextMenuEvent = t : this._map.fire(new ho(t.type, this._map, t)), this._map.listens(\"contextmenu\") && t.preventDefault();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !0;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !1;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {}\n      }, {\n        key: \"disable\",\n        value: function disable() {}\n      }]);\n\n      return po;\n    }();\n\n    var fo = /*#__PURE__*/function () {\n      function fo(t, e) {\n        _classCallCheck(this, fo);\n\n        this._map = t, this._el = t.getCanvasContainer(), this._container = t.getContainer(), this._clickTolerance = e.clickTolerance || 1;\n      }\n\n      _createClass(fo, [{\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !!this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !!this._active;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this.isEnabled() || (this._enabled = !0);\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled() && (this._enabled = !1);\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          this.isEnabled() && t.shiftKey && 0 === t.button && (s.disableDrag(), this._startPos = this._lastPos = e, this._active = !0);\n        }\n      }, {\n        key: \"mousemoveWindow\",\n        value: function mousemoveWindow(t, e) {\n          if (!this._active) return;\n          var i = e;\n          if (this._lastPos.equals(i) || !this._box && i.dist(this._startPos) < this._clickTolerance) return;\n          var o = this._startPos;\n          this._lastPos = i, this._box || (this._box = s.create(\"div\", \"maplibregl-boxzoom mapboxgl-boxzoom\", this._container), this._container.classList.add(\"maplibregl-crosshair\", \"mapboxgl-crosshair\"), this._fireEvent(\"boxzoomstart\", t));\n          var a = Math.min(o.x, i.x),\n              r = Math.max(o.x, i.x),\n              n = Math.min(o.y, i.y),\n              l = Math.max(o.y, i.y);\n          s.setTransform(this._box, \"translate(\".concat(a, \"px,\").concat(n, \"px)\")), this._box.style.width = r - a + \"px\", this._box.style.height = l - n + \"px\";\n        }\n      }, {\n        key: \"mouseupWindow\",\n        value: function mouseupWindow(e, i) {\n          var _this78 = this;\n\n          if (!this._active) return;\n          if (0 !== e.button) return;\n          var o = this._startPos,\n              a = i;\n          if (this.reset(), s.suppressClick(), o.x !== a.x || o.y !== a.y) return this._map.fire(new t.Event(\"boxzoomend\", {\n            originalEvent: e\n          })), {\n            cameraAnimation: function cameraAnimation(t) {\n              return t.fitScreenCoordinates(o, a, _this78._map.getBearing(), {\n                linear: !0\n              });\n            }\n          };\n\n          this._fireEvent(\"boxzoomcancel\", e);\n        }\n      }, {\n        key: \"keydown\",\n        value: function keydown(t) {\n          this._active && 27 === t.keyCode && (this.reset(), this._fireEvent(\"boxzoomcancel\", t));\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._container.classList.remove(\"maplibregl-crosshair\", \"mapboxgl-crosshair\"), this._box && (s.remove(this._box), this._box = null), s.enableDrag(), delete this._startPos, delete this._lastPos;\n        }\n      }, {\n        key: \"_fireEvent\",\n        value: function _fireEvent(e, i) {\n          return this._map.fire(new t.Event(e, {\n            originalEvent: i\n          }));\n        }\n      }]);\n\n      return fo;\n    }();\n\n    function go(t, e) {\n      var i = {};\n\n      for (var _o116 = 0; _o116 < t.length; _o116++) {\n        i[t[_o116].identifier] = e[_o116];\n      }\n\n      return i;\n    }\n\n    var xo = /*#__PURE__*/function () {\n      function xo(t) {\n        _classCallCheck(this, xo);\n\n        this.reset(), this.numTouches = t.numTouches;\n      }\n\n      _createClass(xo, [{\n        key: \"reset\",\n        value: function reset() {\n          delete this.centroid, delete this.startTime, delete this.touches, this.aborted = !1;\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(e, i, o) {\n          (this.centroid || o.length > this.numTouches) && (this.aborted = !0), this.aborted || (void 0 === this.startTime && (this.startTime = e.timeStamp), o.length === this.numTouches && (this.centroid = function (e) {\n            var i = new t.pointGeometry(0, 0);\n\n            var _iterator209 = _createForOfIteratorHelper(e),\n                _step209;\n\n            try {\n              for (_iterator209.s(); !(_step209 = _iterator209.n()).done;) {\n                var _t358 = _step209.value;\n\n                i._add(_t358);\n              }\n            } catch (err) {\n              _iterator209.e(err);\n            } finally {\n              _iterator209.f();\n            }\n\n            return i.div(e.length);\n          }(i), this.touches = go(o, i)));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (this.aborted || !this.centroid) return;\n          var o = go(i, e);\n\n          for (var _t359 in this.touches) {\n            var _e301 = this.touches[_t359],\n                _i232 = o[_t359];\n            (!_i232 || _i232.dist(_e301) > 30) && (this.aborted = !0);\n          }\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          if ((!this.centroid || t.timeStamp - this.startTime > 500) && (this.aborted = !0), 0 === i.length) {\n            var _t360 = !this.aborted && this.centroid;\n\n            if (this.reset(), _t360) return _t360;\n          }\n        }\n      }]);\n\n      return xo;\n    }();\n\n    var vo = /*#__PURE__*/function () {\n      function vo(t) {\n        _classCallCheck(this, vo);\n\n        this.singleTap = new xo(t), this.numTaps = t.numTaps, this.reset();\n      }\n\n      _createClass(vo, [{\n        key: \"reset\",\n        value: function reset() {\n          this.lastTime = 1 / 0, delete this.lastTap, this.count = 0, this.singleTap.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this.singleTap.touchstart(t, e, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          this.singleTap.touchmove(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          var o = this.singleTap.touchend(t, e, i);\n\n          if (o) {\n            var _e302 = t.timeStamp - this.lastTime < 500,\n                _i233 = !this.lastTap || this.lastTap.dist(o) < 30;\n\n            if (_e302 && _i233 || this.reset(), this.count++, this.lastTime = t.timeStamp, this.lastTap = o, this.count === this.numTaps) return this.reset(), o;\n          }\n        }\n      }]);\n\n      return vo;\n    }();\n\n    var yo = /*#__PURE__*/function () {\n      function yo() {\n        _classCallCheck(this, yo);\n\n        this._zoomIn = new vo({\n          numTouches: 1,\n          numTaps: 2\n        }), this._zoomOut = new vo({\n          numTouches: 2,\n          numTaps: 1\n        }), this.reset();\n      }\n\n      _createClass(yo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._zoomIn.reset(), this._zoomOut.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this._zoomIn.touchstart(t, e, i), this._zoomOut.touchstart(t, e, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          this._zoomIn.touchmove(t, e, i), this._zoomOut.touchmove(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          var _this79 = this;\n\n          var o = this._zoomIn.touchend(t, e, i),\n              a = this._zoomOut.touchend(t, e, i);\n\n          return o ? (this._active = !0, t.preventDefault(), setTimeout(function () {\n            return _this79.reset();\n          }, 0), {\n            cameraAnimation: function cameraAnimation(e) {\n              return e.easeTo({\n                duration: 300,\n                zoom: e.getZoom() + 1,\n                around: e.unproject(o)\n              }, {\n                originalEvent: t\n              });\n            }\n          }) : a ? (this._active = !0, t.preventDefault(), setTimeout(function () {\n            return _this79.reset();\n          }, 0), {\n            cameraAnimation: function cameraAnimation(e) {\n              return e.easeTo({\n                duration: 300,\n                zoom: e.getZoom() - 1,\n                around: e.unproject(a)\n              }, {\n                originalEvent: t\n              });\n            }\n          }) : void 0;\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return yo;\n    }();\n\n    var bo = {\n      0: 1,\n      2: 2\n    };\n\n    var wo = /*#__PURE__*/function () {\n      function wo(t) {\n        _classCallCheck(this, wo);\n\n        this.reset(), this._clickTolerance = t.clickTolerance || 1;\n      }\n\n      _createClass(wo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._moved = !1, delete this._lastPoint, delete this._eventButton;\n        }\n      }, {\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return !1;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          return {};\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          if (this._lastPoint) return;\n          var i = s.mouseButton(t);\n          this._correctButton(t, i) && (this._lastPoint = e, this._eventButton = i);\n        }\n      }, {\n        key: \"mousemoveWindow\",\n        value: function mousemoveWindow(t, e) {\n          var i = this._lastPoint;\n          if (i) if (t.preventDefault(), function (t, e) {\n            var i = bo[e];\n            return void 0 === t.buttons || (t.buttons & i) !== i;\n          }(t, this._eventButton)) this.reset();else if (this._moved || !(e.dist(i) < this._clickTolerance)) return this._moved = !0, this._lastPoint = e, this._move(i, e);\n        }\n      }, {\n        key: \"mouseupWindow\",\n        value: function mouseupWindow(t) {\n          this._lastPoint && s.mouseButton(t) === this._eventButton && (this._moved && s.suppressClick(), this.reset());\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return wo;\n    }();\n\n    var To = /*#__PURE__*/function (_wo) {\n      _inherits(To, _wo);\n\n      function To() {\n        _classCallCheck(this, To);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(To).apply(this, arguments));\n      }\n\n      _createClass(To, [{\n        key: \"mousedown\",\n        value: function mousedown(t, e) {\n          _get(_getPrototypeOf(To.prototype), \"mousedown\", this).call(this, t, e), this._lastPoint && (this._active = !0);\n        }\n      }, {\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return 0 === e && !t.ctrlKey;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          return {\n            around: e,\n            panDelta: e.sub(t)\n          };\n        }\n      }]);\n\n      return To;\n    }(wo);\n\n    var Eo = /*#__PURE__*/function (_wo2) {\n      _inherits(Eo, _wo2);\n\n      function Eo() {\n        _classCallCheck(this, Eo);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Eo).apply(this, arguments));\n      }\n\n      _createClass(Eo, [{\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return 0 === e && t.ctrlKey || 2 === e;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = .8 * (e.x - t.x);\n          if (i) return this._active = !0, {\n            bearingDelta: i\n          };\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(t) {\n          t.preventDefault();\n        }\n      }]);\n\n      return Eo;\n    }(wo);\n\n    var Io = /*#__PURE__*/function (_wo3) {\n      _inherits(Io, _wo3);\n\n      function Io() {\n        _classCallCheck(this, Io);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Io).apply(this, arguments));\n      }\n\n      _createClass(Io, [{\n        key: \"_correctButton\",\n        value: function _correctButton(t, e) {\n          return 0 === e && t.ctrlKey || 2 === e;\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = -.5 * (e.y - t.y);\n          if (i) return this._active = !0, {\n            pitchDelta: i\n          };\n        }\n      }, {\n        key: \"contextmenu\",\n        value: function contextmenu(t) {\n          t.preventDefault();\n        }\n      }]);\n\n      return Io;\n    }(wo);\n\n    var So = /*#__PURE__*/function () {\n      function So(t) {\n        _classCallCheck(this, So);\n\n        this._minTouches = 1, this._clickTolerance = t.clickTolerance || 1, this.reset();\n      }\n\n      _createClass(So, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, this._touches = {}, this._sum = new t.pointGeometry(0, 0);\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          return this._calculateTransform(t, e, i);\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (this._active && !(i.length < this._minTouches)) return t.preventDefault(), this._calculateTransform(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          this._calculateTransform(t, e, i), this._active && i.length < this._minTouches && this.reset();\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"_calculateTransform\",\n        value: function _calculateTransform(e, i, o) {\n          o.length > 0 && (this._active = !0);\n          var a = go(o, i),\n              s = new t.pointGeometry(0, 0),\n              r = new t.pointGeometry(0, 0);\n          var n = 0;\n\n          for (var _t361 in a) {\n            var _e303 = a[_t361],\n                _i234 = this._touches[_t361];\n            _i234 && (s._add(_e303), r._add(_e303.sub(_i234)), n++, a[_t361] = _e303);\n          }\n\n          if (this._touches = a, n < this._minTouches || !r.mag()) return;\n          var l = r.div(n);\n          return this._sum._add(l), this._sum.mag() < this._clickTolerance ? void 0 : {\n            around: s.div(n),\n            panDelta: l\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return So;\n    }();\n\n    var Co = /*#__PURE__*/function () {\n      function Co() {\n        _classCallCheck(this, Co);\n\n        this.reset();\n      }\n\n      _createClass(Co, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, delete this._firstTwoTouches;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {}\n      }, {\n        key: \"_move\",\n        value: function _move(t, e, i) {\n          return {};\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this._firstTwoTouches || i.length < 2 || (this._firstTwoTouches = [i[0].identifier, i[1].identifier], this._start([e[0], e[1]]));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (!this._firstTwoTouches) return;\n          t.preventDefault();\n\n          var _this$_firstTwoTouche = _slicedToArray(this._firstTwoTouches, 2),\n              o = _this$_firstTwoTouche[0],\n              a = _this$_firstTwoTouche[1],\n              s = Po(i, e, o),\n              r = Po(i, e, a);\n\n          if (!s || !r) return;\n          var n = this._aroundCenter ? null : s.add(r).div(2);\n          return this._move([s, r], n, t);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          if (!this._firstTwoTouches) return;\n\n          var _this$_firstTwoTouche2 = _slicedToArray(this._firstTwoTouches, 2),\n              o = _this$_firstTwoTouche2[0],\n              a = _this$_firstTwoTouche2[1],\n              r = Po(i, e, o),\n              n = Po(i, e, a);\n\n          r && n || (this._active && s.suppressClick(), this.reset());\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(t) {\n          this._enabled = !0, this._aroundCenter = !!t && \"center\" === t.around;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return Co;\n    }();\n\n    function Po(t, e, i) {\n      for (var _o117 = 0; _o117 < t.length; _o117++) {\n        if (t[_o117].identifier === i) return e[_o117];\n      }\n    }\n\n    function zo(t, e) {\n      return Math.log(t / e) / Math.LN2;\n    }\n\n    var Do = /*#__PURE__*/function (_Co) {\n      _inherits(Do, _Co);\n\n      function Do() {\n        _classCallCheck(this, Do);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Do).apply(this, arguments));\n      }\n\n      _createClass(Do, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Do.prototype), \"reset\", this).call(this), delete this._distance, delete this._startDistance;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {\n          this._startDistance = this._distance = t[0].dist(t[1]);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = this._distance;\n          if (this._distance = t[0].dist(t[1]), this._active || !(Math.abs(zo(this._distance, this._startDistance)) < .1)) return this._active = !0, {\n            zoomDelta: zo(this._distance, i),\n            pinchAround: e\n          };\n        }\n      }]);\n\n      return Do;\n    }(Co);\n\n    function Ao(t, e) {\n      return 180 * t.angleWith(e) / Math.PI;\n    }\n\n    var Mo = /*#__PURE__*/function (_Co2) {\n      _inherits(Mo, _Co2);\n\n      function Mo() {\n        _classCallCheck(this, Mo);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Mo).apply(this, arguments));\n      }\n\n      _createClass(Mo, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Mo.prototype), \"reset\", this).call(this), delete this._minDiameter, delete this._startVector, delete this._vector;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {\n          this._startVector = this._vector = t[0].sub(t[1]), this._minDiameter = t[0].dist(t[1]);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e) {\n          var i = this._vector;\n          if (this._vector = t[0].sub(t[1]), this._active || !this._isBelowThreshold(this._vector)) return this._active = !0, {\n            bearingDelta: Ao(this._vector, i),\n            pinchAround: e\n          };\n        }\n      }, {\n        key: \"_isBelowThreshold\",\n        value: function _isBelowThreshold(t) {\n          this._minDiameter = Math.min(this._minDiameter, t.mag());\n          var e = 25 / (Math.PI * this._minDiameter) * 360,\n              i = Ao(t, this._startVector);\n          return Math.abs(i) < e;\n        }\n      }]);\n\n      return Mo;\n    }(Co);\n\n    function Lo(t) {\n      return Math.abs(t.y) > Math.abs(t.x);\n    }\n\n    var Ro = /*#__PURE__*/function (_Co3) {\n      _inherits(Ro, _Co3);\n\n      function Ro() {\n        _classCallCheck(this, Ro);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Ro).apply(this, arguments));\n      }\n\n      _createClass(Ro, [{\n        key: \"reset\",\n        value: function reset() {\n          _get(_getPrototypeOf(Ro.prototype), \"reset\", this).call(this), this._valid = void 0, delete this._firstMove, delete this._lastPoints;\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(t) {\n          this._lastPoints = t, Lo(t[0].sub(t[1])) && (this._valid = !1);\n        }\n      }, {\n        key: \"_move\",\n        value: function _move(t, e, i) {\n          var o = t[0].sub(this._lastPoints[0]),\n              a = t[1].sub(this._lastPoints[1]);\n          if (this._valid = this.gestureBeginsVertically(o, a, i.timeStamp), this._valid) return this._lastPoints = t, this._active = !0, {\n            pitchDelta: (o.y + a.y) / 2 * -.5\n          };\n        }\n      }, {\n        key: \"gestureBeginsVertically\",\n        value: function gestureBeginsVertically(t, e, i) {\n          if (void 0 !== this._valid) return this._valid;\n          var o = t.mag() >= 2,\n              a = e.mag() >= 2;\n          if (!o && !a) return;\n          if (!o || !a) return void 0 === this._firstMove && (this._firstMove = i), i - this._firstMove < 100 && void 0;\n          var s = t.y > 0 == e.y > 0;\n          return Lo(t) && Lo(e) && s;\n        }\n      }]);\n\n      return Ro;\n    }(Co);\n\n    var ko = {\n      panStep: 100,\n      bearingStep: 15,\n      pitchStep: 10\n    };\n\n    var Bo = /*#__PURE__*/function () {\n      function Bo() {\n        _classCallCheck(this, Bo);\n\n        var t = ko;\n        this._panStep = t.panStep, this._bearingStep = t.bearingStep, this._pitchStep = t.pitchStep, this._rotationDisabled = !1;\n      }\n\n      _createClass(Bo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }, {\n        key: \"keydown\",\n        value: function keydown(t) {\n          var _this80 = this;\n\n          if (t.altKey || t.ctrlKey || t.metaKey) return;\n          var e = 0,\n              i = 0,\n              o = 0,\n              a = 0,\n              s = 0;\n\n          switch (t.keyCode) {\n            case 61:\n            case 107:\n            case 171:\n            case 187:\n              e = 1;\n              break;\n\n            case 189:\n            case 109:\n            case 173:\n              e = -1;\n              break;\n\n            case 37:\n              t.shiftKey ? i = -1 : (t.preventDefault(), a = -1);\n              break;\n\n            case 39:\n              t.shiftKey ? i = 1 : (t.preventDefault(), a = 1);\n              break;\n\n            case 38:\n              t.shiftKey ? o = 1 : (t.preventDefault(), s = -1);\n              break;\n\n            case 40:\n              t.shiftKey ? o = -1 : (t.preventDefault(), s = 1);\n              break;\n\n            default:\n              return;\n          }\n\n          return this._rotationDisabled && (i = 0, o = 0), {\n            cameraAnimation: function cameraAnimation(r) {\n              var n = r.getZoom();\n              r.easeTo({\n                duration: 300,\n                easeId: \"keyboardHandler\",\n                easing: Fo,\n                zoom: e ? Math.round(n) + e * (t.shiftKey ? 2 : 1) : n,\n                bearing: r.getBearing() + i * _this80._bearingStep,\n                pitch: r.getPitch() + o * _this80._pitchStep,\n                offset: [-a * _this80._panStep, -s * _this80._panStep],\n                center: r.getCenter()\n              }, {\n                originalEvent: t\n              });\n            }\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }, {\n        key: \"disableRotation\",\n        value: function disableRotation() {\n          this._rotationDisabled = !0;\n        }\n      }, {\n        key: \"enableRotation\",\n        value: function enableRotation() {\n          this._rotationDisabled = !1;\n        }\n      }]);\n\n      return Bo;\n    }();\n\n    function Fo(t) {\n      return t * (2 - t);\n    }\n\n    var Oo = 4.000244140625;\n\n    var Uo = /*#__PURE__*/function () {\n      function Uo(e, i) {\n        _classCallCheck(this, Uo);\n\n        this._map = e, this._el = e.getCanvasContainer(), this._handler = i, this._delta = 0, this._defaultZoomRate = .01, this._wheelZoomRate = .0022222222222222222, t.bindAll([\"_onTimeout\"], this);\n      }\n\n      _createClass(Uo, [{\n        key: \"setZoomRate\",\n        value: function setZoomRate(t) {\n          this._defaultZoomRate = t;\n        }\n      }, {\n        key: \"setWheelZoomRate\",\n        value: function setWheelZoomRate(t) {\n          this._wheelZoomRate = t;\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return !!this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return !!this._active || void 0 !== this._finishTimeout;\n        }\n      }, {\n        key: \"isZooming\",\n        value: function isZooming() {\n          return !!this._zooming;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(t) {\n          this.isEnabled() || (this._enabled = !0, this._aroundCenter = t && \"center\" === t.around);\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled() && (this._enabled = !1);\n        }\n      }, {\n        key: \"wheel\",\n        value: function wheel(e) {\n          if (!this.isEnabled()) return;\n          var i = e.deltaMode === WheelEvent.DOM_DELTA_LINE ? 40 * e.deltaY : e.deltaY;\n          var o = t.exported.now(),\n              a = o - (this._lastWheelEventTime || 0);\n          this._lastWheelEventTime = o, 0 !== i && i % Oo == 0 ? this._type = \"wheel\" : 0 !== i && Math.abs(i) < 4 ? this._type = \"trackpad\" : a > 400 ? (this._type = null, this._lastValue = i, this._timeout = setTimeout(this._onTimeout, 40, e)) : this._type || (this._type = Math.abs(a * i) < 200 ? \"trackpad\" : \"wheel\", this._timeout && (clearTimeout(this._timeout), this._timeout = null, i += this._lastValue)), e.shiftKey && i && (i /= 4), this._type && (this._lastWheelEvent = e, this._delta -= i, this._active || this._start(e)), e.preventDefault();\n        }\n      }, {\n        key: \"_onTimeout\",\n        value: function _onTimeout(t) {\n          this._type = \"wheel\", this._delta -= this._lastValue, this._active || this._start(t);\n        }\n      }, {\n        key: \"_start\",\n        value: function _start(e) {\n          if (!this._delta) return;\n          this._frameId && (this._frameId = null), this._active = !0, this.isZooming() || (this._zooming = !0), this._finishTimeout && (clearTimeout(this._finishTimeout), delete this._finishTimeout);\n          var i = s.mousePos(this._el, e);\n          this._around = t.LngLat.convert(this._aroundCenter ? this._map.getCenter() : this._map.unproject(i)), this._aroundPoint = this._map.transform.locationPoint(this._around), this._frameId || (this._frameId = !0, this._handler._triggerRenderFrame());\n        }\n      }, {\n        key: \"renderFrame\",\n        value: function renderFrame() {\n          var _this81 = this;\n\n          if (!this._frameId) return;\n          if (this._frameId = null, !this.isActive()) return;\n          var e = this._map.transform;\n\n          if (0 !== this._delta) {\n            var _t362 = \"wheel\" === this._type && Math.abs(this._delta) > Oo ? this._wheelZoomRate : this._defaultZoomRate;\n\n            var _i235 = 2 / (1 + Math.exp(-Math.abs(this._delta * _t362)));\n\n            this._delta < 0 && 0 !== _i235 && (_i235 = 1 / _i235);\n\n            var _o118 = \"number\" == typeof this._targetZoom ? e.zoomScale(this._targetZoom) : e.scale;\n\n            this._targetZoom = Math.min(e.maxZoom, Math.max(e.minZoom, e.scaleZoom(_o118 * _i235))), \"wheel\" === this._type && (this._startZoom = e.zoom, this._easing = this._smoothOutEasing(200)), this._delta = 0;\n          }\n\n          var i = \"number\" == typeof this._targetZoom ? this._targetZoom : e.zoom,\n              o = this._startZoom,\n              a = this._easing;\n          var s,\n              r = !1;\n\n          if (\"wheel\" === this._type && o && a) {\n            var _e304 = Math.min((t.exported.now() - this._lastWheelEventTime) / 200, 1),\n                _n137 = a(_e304);\n\n            s = t.number(o, i, _n137), _e304 < 1 ? this._frameId || (this._frameId = !0) : r = !0;\n          } else s = i, r = !0;\n\n          return this._active = !0, r && (this._active = !1, this._finishTimeout = setTimeout(function () {\n            _this81._zooming = !1, _this81._handler._triggerRenderFrame(), delete _this81._targetZoom, delete _this81._finishTimeout;\n          }, 200)), {\n            noInertia: !0,\n            needsRenderFrame: !r,\n            zoomDelta: s - e.zoom,\n            around: this._aroundPoint,\n            originalEvent: this._lastWheelEvent\n          };\n        }\n      }, {\n        key: \"_smoothOutEasing\",\n        value: function _smoothOutEasing(e) {\n          var i = t.ease;\n\n          if (this._prevEase) {\n            var _e305 = this._prevEase,\n                _o119 = (t.exported.now() - _e305.start) / _e305.duration,\n                _a125 = _e305.easing(_o119 + .01) - _e305.easing(_o119),\n                _s123 = .27 / Math.sqrt(_a125 * _a125 + 1e-4) * .01,\n                _r193 = Math.sqrt(.0729 - _s123 * _s123);\n\n            i = t.bezier(_s123, _r193, .25, 1);\n          }\n\n          return this._prevEase = {\n            start: t.exported.now(),\n            duration: e,\n            easing: i\n          }, i;\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }]);\n\n      return Uo;\n    }();\n\n    var No = /*#__PURE__*/function () {\n      function No(t, e) {\n        _classCallCheck(this, No);\n\n        this._clickZoom = t, this._tapZoom = e;\n      }\n\n      _createClass(No, [{\n        key: \"enable\",\n        value: function enable() {\n          this._clickZoom.enable(), this._tapZoom.enable();\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._clickZoom.disable(), this._tapZoom.disable();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._clickZoom.isEnabled() && this._tapZoom.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._clickZoom.isActive() || this._tapZoom.isActive();\n        }\n      }]);\n\n      return No;\n    }();\n\n    var Go = /*#__PURE__*/function () {\n      function Go() {\n        _classCallCheck(this, Go);\n\n        this.reset();\n      }\n\n      _createClass(Go, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1;\n        }\n      }, {\n        key: \"dblclick\",\n        value: function dblclick(t, e) {\n          return t.preventDefault(), {\n            cameraAnimation: function cameraAnimation(i) {\n              i.easeTo({\n                duration: 300,\n                zoom: i.getZoom() + (t.shiftKey ? -1 : 1),\n                around: i.unproject(e)\n              }, {\n                originalEvent: t\n              });\n            }\n          };\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return Go;\n    }();\n\n    var Zo = /*#__PURE__*/function () {\n      function Zo() {\n        _classCallCheck(this, Zo);\n\n        this._tap = new vo({\n          numTouches: 1,\n          numTaps: 1\n        }), this.reset();\n      }\n\n      _createClass(Zo, [{\n        key: \"reset\",\n        value: function reset() {\n          this._active = !1, delete this._swipePoint, delete this._swipeTouch, delete this._tapTime, this._tap.reset();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t, e, i) {\n          this._swipePoint || (this._tapTime && t.timeStamp - this._tapTime > 500 && this.reset(), this._tapTime ? i.length > 0 && (this._swipePoint = e[0], this._swipeTouch = i[0].identifier) : this._tap.touchstart(t, e, i));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t, e, i) {\n          if (this._tapTime) {\n            if (this._swipePoint) {\n              if (i[0].identifier !== this._swipeTouch) return;\n\n              var _o120 = e[0],\n                  _a126 = _o120.y - this._swipePoint.y;\n\n              return this._swipePoint = _o120, t.preventDefault(), this._active = !0, {\n                zoomDelta: _a126 / 128\n              };\n            }\n          } else this._tap.touchmove(t, e, i);\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t, e, i) {\n          this._tapTime ? this._swipePoint && 0 === i.length && this.reset() : this._tap.touchend(t, e, i) && (this._tapTime = t.timeStamp);\n        }\n      }, {\n        key: \"touchcancel\",\n        value: function touchcancel() {\n          this.reset();\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          this._enabled = !0;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._enabled = !1, this.reset();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._enabled;\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._active;\n        }\n      }]);\n\n      return Zo;\n    }();\n\n    var qo = /*#__PURE__*/function () {\n      function qo(t, e, i) {\n        _classCallCheck(this, qo);\n\n        this._el = t, this._mousePan = e, this._touchPan = i;\n      }\n\n      _createClass(qo, [{\n        key: \"enable\",\n        value: function enable(t) {\n          this._inertiaOptions = t || {}, this._mousePan.enable(), this._touchPan.enable(), this._el.classList.add(\"maplibregl-touch-drag-pan\", \"mapboxgl-touch-drag-pan\");\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._mousePan.disable(), this._touchPan.disable(), this._el.classList.remove(\"maplibregl-touch-drag-pan\", \"mapboxgl-touch-drag-pan\");\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._mousePan.isEnabled() && this._touchPan.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._mousePan.isActive() || this._touchPan.isActive();\n        }\n      }]);\n\n      return qo;\n    }();\n\n    var Vo = /*#__PURE__*/function () {\n      function Vo(t, e, i) {\n        _classCallCheck(this, Vo);\n\n        this._pitchWithRotate = t.pitchWithRotate, this._mouseRotate = e, this._mousePitch = i;\n      }\n\n      _createClass(Vo, [{\n        key: \"enable\",\n        value: function enable() {\n          this._mouseRotate.enable(), this._pitchWithRotate && this._mousePitch.enable();\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._mouseRotate.disable(), this._mousePitch.disable();\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._mouseRotate.isEnabled() && (!this._pitchWithRotate || this._mousePitch.isEnabled());\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._mouseRotate.isActive() || this._mousePitch.isActive();\n        }\n      }]);\n\n      return Vo;\n    }();\n\n    var jo = /*#__PURE__*/function () {\n      function jo(t, e, i, o) {\n        _classCallCheck(this, jo);\n\n        this._el = t, this._touchZoom = e, this._touchRotate = i, this._tapDragZoom = o, this._rotationDisabled = !1, this._enabled = !0;\n      }\n\n      _createClass(jo, [{\n        key: \"enable\",\n        value: function enable(t) {\n          this._touchZoom.enable(t), this._rotationDisabled || this._touchRotate.enable(t), this._tapDragZoom.enable(), this._el.classList.add(\"maplibregl-touch-zoom-rotate\", \"mapboxgl-touch-zoom-rotate\");\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this._touchZoom.disable(), this._touchRotate.disable(), this._tapDragZoom.disable(), this._el.classList.remove(\"maplibregl-touch-zoom-rotate\", \"mapboxgl-touch-zoom-rotate\");\n        }\n      }, {\n        key: \"isEnabled\",\n        value: function isEnabled() {\n          return this._touchZoom.isEnabled() && (this._rotationDisabled || this._touchRotate.isEnabled()) && this._tapDragZoom.isEnabled();\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          return this._touchZoom.isActive() || this._touchRotate.isActive() || this._tapDragZoom.isActive();\n        }\n      }, {\n        key: \"disableRotation\",\n        value: function disableRotation() {\n          this._rotationDisabled = !0, this._touchRotate.disable();\n        }\n      }, {\n        key: \"enableRotation\",\n        value: function enableRotation() {\n          this._rotationDisabled = !1, this._touchZoom.isEnabled() && this._touchRotate.enable();\n        }\n      }]);\n\n      return jo;\n    }();\n\n    var $o = function $o(t) {\n      return t.zoom || t.drag || t.pitch || t.rotate;\n    };\n\n    var Wo = /*#__PURE__*/function (_t$Event4) {\n      _inherits(Wo, _t$Event4);\n\n      function Wo() {\n        _classCallCheck(this, Wo);\n\n        return _possibleConstructorReturn(this, _getPrototypeOf(Wo).apply(this, arguments));\n      }\n\n      return Wo;\n    }(t.Event);\n\n    function Xo(t) {\n      return t.panDelta && t.panDelta.mag() || t.zoomDelta || t.bearingDelta || t.pitchDelta;\n    }\n\n    var Ho = /*#__PURE__*/function () {\n      function Ho(e, i) {\n        _classCallCheck(this, Ho);\n\n        this._map = e, this._el = this._map.getCanvasContainer(), this._handlers = [], this._handlersById = {}, this._changes = [], this._inertia = new no(e), this._bearingSnap = i.bearingSnap, this._previousActiveHandlers = {}, this._eventsInProgress = {}, this._addDefaultHandlers(i), t.bindAll([\"handleEvent\", \"handleWindowEvent\"], this);\n        var o = this._el;\n        this._listeners = [[o, \"touchstart\", {\n          passive: !0\n        }], [o, \"touchmove\", {\n          passive: !1\n        }], [o, \"touchend\", void 0], [o, \"touchcancel\", void 0], [o, \"mousedown\", void 0], [o, \"mousemove\", void 0], [o, \"mouseup\", void 0], [document, \"mousemove\", {\n          capture: !0\n        }], [document, \"mouseup\", void 0], [o, \"mouseover\", void 0], [o, \"mouseout\", void 0], [o, \"dblclick\", void 0], [o, \"click\", void 0], [o, \"keydown\", {\n          capture: !1\n        }], [o, \"keyup\", void 0], [o, \"wheel\", {\n          passive: !1\n        }], [o, \"contextmenu\", void 0], [window, \"blur\", void 0]];\n\n        var _iterator210 = _createForOfIteratorHelper(this._listeners),\n            _step210;\n\n        try {\n          for (_iterator210.s(); !(_step210 = _iterator210.n()).done;) {\n            var _step210$value = _slicedToArray(_step210.value, 3),\n                _t363 = _step210$value[0],\n                _e306 = _step210$value[1],\n                _i236 = _step210$value[2];\n\n            s.addEventListener(_t363, _e306, _t363 === document ? this.handleWindowEvent : this.handleEvent, _i236);\n          }\n        } catch (err) {\n          _iterator210.e(err);\n        } finally {\n          _iterator210.f();\n        }\n      }\n\n      _createClass(Ho, [{\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator211 = _createForOfIteratorHelper(this._listeners),\n              _step211;\n\n          try {\n            for (_iterator211.s(); !(_step211 = _iterator211.n()).done;) {\n              var _step211$value = _slicedToArray(_step211.value, 3),\n                  _t364 = _step211$value[0],\n                  _e307 = _step211$value[1],\n                  _i237 = _step211$value[2];\n\n              s.removeEventListener(_t364, _e307, _t364 === document ? this.handleWindowEvent : this.handleEvent, _i237);\n            }\n          } catch (err) {\n            _iterator211.e(err);\n          } finally {\n            _iterator211.f();\n          }\n        }\n      }, {\n        key: \"_addDefaultHandlers\",\n        value: function _addDefaultHandlers(t) {\n          var e = this._map,\n              i = e.getCanvasContainer();\n\n          this._add(\"mapEvent\", new _o(e, t));\n\n          var o = e.boxZoom = new fo(e, t);\n\n          this._add(\"boxZoom\", o);\n\n          var a = new yo(),\n              s = new Go();\n          e.doubleClickZoom = new No(s, a), this._add(\"tapZoom\", a), this._add(\"clickZoom\", s);\n          var r = new Zo();\n\n          this._add(\"tapDragZoom\", r);\n\n          var n = e.touchPitch = new Ro();\n\n          this._add(\"touchPitch\", n);\n\n          var l = new Eo(t),\n              c = new Io(t);\n          e.dragRotate = new Vo(t, l, c), this._add(\"mouseRotate\", l, [\"mousePitch\"]), this._add(\"mousePitch\", c, [\"mouseRotate\"]);\n          var h = new To(t),\n              u = new So(t);\n          e.dragPan = new qo(i, h, u), this._add(\"mousePan\", h), this._add(\"touchPan\", u, [\"touchZoom\", \"touchRotate\"]);\n          var d = new Mo(),\n              m = new Do();\n          e.touchZoomRotate = new jo(i, m, d, r), this._add(\"touchRotate\", d, [\"touchPan\", \"touchZoom\"]), this._add(\"touchZoom\", m, [\"touchPan\", \"touchRotate\"]);\n\n          var _ = e.scrollZoom = new Uo(e, this);\n\n          this._add(\"scrollZoom\", _, [\"mousePan\"]);\n\n          var p = e.keyboard = new Bo();\n          this._add(\"keyboard\", p), this._add(\"blockableMapEvent\", new po(e));\n\n          for (var _i238 = 0, _arr3 = [\"boxZoom\", \"doubleClickZoom\", \"tapDragZoom\", \"touchPitch\", \"dragRotate\", \"dragPan\", \"touchZoomRotate\", \"scrollZoom\", \"keyboard\"]; _i238 < _arr3.length; _i238++) {\n            var _i239 = _arr3[_i238];\n            t.interactive && t[_i239] && e[_i239].enable(t[_i239]);\n          }\n        }\n      }, {\n        key: \"_add\",\n        value: function _add(t, e, i) {\n          this._handlers.push({\n            handlerName: t,\n            handler: e,\n            allowed: i\n          }), this._handlersById[t] = e;\n        }\n      }, {\n        key: \"stop\",\n        value: function stop(t) {\n          if (!this._updatingCamera) {\n            var _iterator212 = _createForOfIteratorHelper(this._handlers),\n                _step212;\n\n            try {\n              for (_iterator212.s(); !(_step212 = _iterator212.n()).done;) {\n                var _t365 = _step212.value.handler;\n\n                _t365.reset();\n              }\n            } catch (err) {\n              _iterator212.e(err);\n            } finally {\n              _iterator212.f();\n            }\n\n            this._inertia.clear(), this._fireEvents({}, {}, t), this._changes = [];\n          }\n        }\n      }, {\n        key: \"isActive\",\n        value: function isActive() {\n          var _iterator213 = _createForOfIteratorHelper(this._handlers),\n              _step213;\n\n          try {\n            for (_iterator213.s(); !(_step213 = _iterator213.n()).done;) {\n              var _t366 = _step213.value.handler;\n              if (_t366.isActive()) return !0;\n            }\n          } catch (err) {\n            _iterator213.e(err);\n          } finally {\n            _iterator213.f();\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"isZooming\",\n        value: function isZooming() {\n          return !!this._eventsInProgress.zoom || this._map.scrollZoom.isZooming();\n        }\n      }, {\n        key: \"isRotating\",\n        value: function isRotating() {\n          return !!this._eventsInProgress.rotate;\n        }\n      }, {\n        key: \"isMoving\",\n        value: function isMoving() {\n          return Boolean($o(this._eventsInProgress)) || this.isZooming();\n        }\n      }, {\n        key: \"_blockedByActive\",\n        value: function _blockedByActive(t, e, i) {\n          for (var _o121 in t) {\n            if (_o121 !== i && (!e || e.indexOf(_o121) < 0)) return !0;\n          }\n\n          return !1;\n        }\n      }, {\n        key: \"handleWindowEvent\",\n        value: function handleWindowEvent(t) {\n          this.handleEvent(t, \"\".concat(t.type, \"Window\"));\n        }\n      }, {\n        key: \"_getMapTouches\",\n        value: function _getMapTouches(t) {\n          var e = [];\n\n          var _iterator214 = _createForOfIteratorHelper(t),\n              _step214;\n\n          try {\n            for (_iterator214.s(); !(_step214 = _iterator214.n()).done;) {\n              var _i240 = _step214.value;\n              this._el.contains(_i240.target) && e.push(_i240);\n            }\n          } catch (err) {\n            _iterator214.e(err);\n          } finally {\n            _iterator214.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"handleEvent\",\n        value: function handleEvent(t, e) {\n          if (\"blur\" === t.type) return void this.stop(!0);\n          this._updatingCamera = !0;\n          var i = \"renderFrame\" === t.type ? void 0 : t,\n              o = {\n            needsRenderFrame: !1\n          },\n              a = {},\n              r = {},\n              n = t.touches,\n              l = n ? this._getMapTouches(n) : void 0,\n              c = l ? s.touchPos(this._el, l) : s.mousePos(this._el, t);\n\n          var _iterator215 = _createForOfIteratorHelper(this._handlers),\n              _step215;\n\n          try {\n            for (_iterator215.s(); !(_step215 = _iterator215.n()).done;) {\n              var _step215$value = _step215.value,\n                  _s124 = _step215$value.handlerName,\n                  _n138 = _step215$value.handler,\n                  _h29 = _step215$value.allowed;\n              if (!_n138.isEnabled()) continue;\n\n              var _u39 = void 0;\n\n              this._blockedByActive(r, _h29, _s124) ? _n138.reset() : _n138[e || t.type] && (_u39 = _n138[e || t.type](t, c, l), this.mergeHandlerResult(o, a, _u39, _s124, i), _u39 && _u39.needsRenderFrame && this._triggerRenderFrame()), (_u39 || _n138.isActive()) && (r[_s124] = _n138);\n            }\n          } catch (err) {\n            _iterator215.e(err);\n          } finally {\n            _iterator215.f();\n          }\n\n          var h = {};\n\n          for (var _t367 in this._previousActiveHandlers) {\n            r[_t367] || (h[_t367] = i);\n          }\n\n          this._previousActiveHandlers = r, (Object.keys(h).length || Xo(o)) && (this._changes.push([o, a, h]), this._triggerRenderFrame()), (Object.keys(r).length || Xo(o)) && this._map._stop(!0), this._updatingCamera = !1;\n          var u = o.cameraAnimation;\n          u && (this._inertia.clear(), this._fireEvents({}, {}, !0), this._changes = [], u(this._map));\n        }\n      }, {\n        key: \"mergeHandlerResult\",\n        value: function mergeHandlerResult(e, i, o, a, s) {\n          if (!o) return;\n          t.extend(e, o);\n          var r = {\n            handlerName: a,\n            originalEvent: o.originalEvent || s\n          };\n          void 0 !== o.zoomDelta && (i.zoom = r), void 0 !== o.panDelta && (i.drag = r), void 0 !== o.pitchDelta && (i.pitch = r), void 0 !== o.bearingDelta && (i.rotate = r);\n        }\n      }, {\n        key: \"_applyChanges\",\n        value: function _applyChanges() {\n          var e = {},\n              i = {},\n              o = {};\n\n          var _iterator216 = _createForOfIteratorHelper(this._changes),\n              _step216;\n\n          try {\n            for (_iterator216.s(); !(_step216 = _iterator216.n()).done;) {\n              var _step216$value = _slicedToArray(_step216.value, 3),\n                  _a127 = _step216$value[0],\n                  _s125 = _step216$value[1],\n                  _r194 = _step216$value[2];\n\n              _a127.panDelta && (e.panDelta = (e.panDelta || new t.pointGeometry(0, 0))._add(_a127.panDelta)), _a127.zoomDelta && (e.zoomDelta = (e.zoomDelta || 0) + _a127.zoomDelta), _a127.bearingDelta && (e.bearingDelta = (e.bearingDelta || 0) + _a127.bearingDelta), _a127.pitchDelta && (e.pitchDelta = (e.pitchDelta || 0) + _a127.pitchDelta), void 0 !== _a127.around && (e.around = _a127.around), void 0 !== _a127.pinchAround && (e.pinchAround = _a127.pinchAround), _a127.noInertia && (e.noInertia = _a127.noInertia), t.extend(i, _s125), t.extend(o, _r194);\n            }\n          } catch (err) {\n            _iterator216.e(err);\n          } finally {\n            _iterator216.f();\n          }\n\n          this._updateMapTransform(e, i, o), this._changes = [];\n        }\n      }, {\n        key: \"_updateMapTransform\",\n        value: function _updateMapTransform(t, e, i) {\n          var o = this._map,\n              a = o.transform;\n          if (!Xo(t)) return this._fireEvents(e, i, !0);\n          var s = t.panDelta,\n              r = t.zoomDelta,\n              n = t.bearingDelta,\n              l = t.pitchDelta,\n              c = t.around,\n              h = t.pinchAround;\n          void 0 !== h && (c = h), o._stop(!0), c = c || o.transform.centerPoint;\n          var u = a.pointLocation(s ? c.sub(s) : c);\n          n && (a.bearing += n), l && (a.pitch += l), r && (a.zoom += r), a.setLocationAtPoint(u, c), this._map._update(), t.noInertia || this._inertia.record(t), this._fireEvents(e, i, !0);\n        }\n      }, {\n        key: \"_fireEvents\",\n        value: function _fireEvents(e, i, o) {\n          var _this82 = this;\n\n          var a = $o(this._eventsInProgress),\n              s = $o(e),\n              r = {};\n\n          for (var _t368 in e) {\n            var _i241 = e[_t368].originalEvent;\n            this._eventsInProgress[_t368] || (r[\"\".concat(_t368, \"start\")] = _i241), this._eventsInProgress[_t368] = e[_t368];\n          }\n\n          !a && s && this._fireEvent(\"movestart\", s.originalEvent);\n\n          for (var _t369 in r) {\n            this._fireEvent(_t369, r[_t369]);\n          }\n\n          s && this._fireEvent(\"move\", s.originalEvent);\n\n          for (var _t370 in e) {\n            var _i242 = e[_t370].originalEvent;\n\n            this._fireEvent(_t370, _i242);\n          }\n\n          var n = {};\n          var l;\n\n          for (var _t371 in this._eventsInProgress) {\n            var _this$_eventsInProgre = this._eventsInProgress[_t371],\n                _e308 = _this$_eventsInProgre.handlerName,\n                _o122 = _this$_eventsInProgre.originalEvent;\n            this._handlersById[_e308].isActive() || (delete this._eventsInProgress[_t371], l = i[_e308] || _o122, n[\"\".concat(_t371, \"end\")] = l);\n          }\n\n          for (var _t372 in n) {\n            this._fireEvent(_t372, n[_t372]);\n          }\n\n          var c = $o(this._eventsInProgress);\n\n          if (o && (a || s) && !c) {\n            this._updatingCamera = !0;\n\n            var _e309 = this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),\n                _i243 = function _i243(t) {\n              return 0 !== t && -_this82._bearingSnap < t && t < _this82._bearingSnap;\n            };\n\n            _e309 ? (_i243(_e309.bearing || this._map.getBearing()) && (_e309.bearing = 0), this._map.easeTo(_e309, {\n              originalEvent: l\n            })) : (this._map.fire(new t.Event(\"moveend\", {\n              originalEvent: l\n            })), _i243(this._map.getBearing()) && this._map.resetNorth()), this._updatingCamera = !1;\n          }\n        }\n      }, {\n        key: \"_fireEvent\",\n        value: function _fireEvent(e, i) {\n          this._map.fire(new t.Event(e, i ? {\n            originalEvent: i\n          } : {}));\n        }\n      }, {\n        key: \"_requestFrame\",\n        value: function _requestFrame() {\n          var _this83 = this;\n\n          return this._map.triggerRepaint(), this._map._renderTaskQueue.add(function (t) {\n            delete _this83._frameId, _this83.handleEvent(new Wo(\"renderFrame\", {\n              timeStamp: t\n            })), _this83._applyChanges();\n          });\n        }\n      }, {\n        key: \"_triggerRenderFrame\",\n        value: function _triggerRenderFrame() {\n          void 0 === this._frameId && (this._frameId = this._requestFrame());\n        }\n      }]);\n\n      return Ho;\n    }();\n\n    var Ko = {\n      extend: function extend(e) {\n        for (var _len6 = arguments.length, i = new Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {\n          i[_key6 - 1] = arguments[_key6];\n        }\n\n        return t.extend.apply(t, [e].concat(i));\n      },\n      run: function run(t) {\n        t();\n      },\n      logToElement: function logToElement(t) {\n        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n        var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"log\";\n        var o = window.document.getElementById(i);\n        o && (e && (o.innerHTML = \"\"), o.innerHTML += \"<br>\".concat(t));\n      }\n    };\n\n    var Yo = /*#__PURE__*/function (_t$Evented9) {\n      _inherits(Yo, _t$Evented9);\n\n      function Yo(e, i) {\n        var _this84;\n\n        _classCallCheck(this, Yo);\n\n        _this84 = _possibleConstructorReturn(this, _getPrototypeOf(Yo).call(this)), _this84._moving = !1, _this84._zooming = !1, _this84.transform = e, _this84._bearingSnap = i.bearingSnap, t.bindAll([\"_renderFrameCallback\"], _assertThisInitialized(_assertThisInitialized(_this84)));\n        return _this84;\n      }\n\n      _createClass(Yo, [{\n        key: \"getCenter\",\n        value: function getCenter() {\n          return new t.LngLat(this.transform.center.lng, this.transform.center.lat);\n        }\n      }, {\n        key: \"setCenter\",\n        value: function setCenter(t, e) {\n          return this.jumpTo({\n            center: t\n          }, e);\n        }\n      }, {\n        key: \"panBy\",\n        value: function panBy(e, i, o) {\n          return e = t.pointGeometry.convert(e).mult(-1), this.panTo(this.transform.center, t.extend({\n            offset: e\n          }, i), o);\n        }\n      }, {\n        key: \"panTo\",\n        value: function panTo(e, i, o) {\n          return this.easeTo(t.extend({\n            center: e\n          }, i), o);\n        }\n      }, {\n        key: \"getZoom\",\n        value: function getZoom() {\n          return this.transform.zoom;\n        }\n      }, {\n        key: \"setZoom\",\n        value: function setZoom(t, e) {\n          return this.jumpTo({\n            zoom: t\n          }, e), this;\n        }\n      }, {\n        key: \"zoomTo\",\n        value: function zoomTo(e, i, o) {\n          return this.easeTo(t.extend({\n            zoom: e\n          }, i), o);\n        }\n      }, {\n        key: \"zoomIn\",\n        value: function zoomIn(t, e) {\n          return this.zoomTo(this.getZoom() + 1, t, e), this;\n        }\n      }, {\n        key: \"zoomOut\",\n        value: function zoomOut(t, e) {\n          return this.zoomTo(this.getZoom() - 1, t, e), this;\n        }\n      }, {\n        key: \"getBearing\",\n        value: function getBearing() {\n          return this.transform.bearing;\n        }\n      }, {\n        key: \"setBearing\",\n        value: function setBearing(t, e) {\n          return this.jumpTo({\n            bearing: t\n          }, e), this;\n        }\n      }, {\n        key: \"getPadding\",\n        value: function getPadding() {\n          return this.transform.padding;\n        }\n      }, {\n        key: \"setPadding\",\n        value: function setPadding(t, e) {\n          return this.jumpTo({\n            padding: t\n          }, e), this;\n        }\n      }, {\n        key: \"rotateTo\",\n        value: function rotateTo(e, i, o) {\n          return this.easeTo(t.extend({\n            bearing: e\n          }, i), o);\n        }\n      }, {\n        key: \"resetNorth\",\n        value: function resetNorth(e, i) {\n          return this.rotateTo(0, t.extend({\n            duration: 1e3\n          }, e), i), this;\n        }\n      }, {\n        key: \"resetNorthPitch\",\n        value: function resetNorthPitch(e, i) {\n          return this.easeTo(t.extend({\n            bearing: 0,\n            pitch: 0,\n            duration: 1e3\n          }, e), i), this;\n        }\n      }, {\n        key: \"snapToNorth\",\n        value: function snapToNorth(t, e) {\n          return Math.abs(this.getBearing()) < this._bearingSnap ? this.resetNorth(t, e) : this;\n        }\n      }, {\n        key: \"getPitch\",\n        value: function getPitch() {\n          return this.transform.pitch;\n        }\n      }, {\n        key: \"setPitch\",\n        value: function setPitch(t, e) {\n          return this.jumpTo({\n            pitch: t\n          }, e), this;\n        }\n      }, {\n        key: \"cameraForBounds\",\n        value: function cameraForBounds(e, i) {\n          e = t.LngLatBounds.convert(e);\n          var o = i && i.bearing || 0;\n          return this._cameraForBoxAndBearing(e.getNorthWest(), e.getSouthEast(), o, i);\n        }\n      }, {\n        key: \"_cameraForBoxAndBearing\",\n        value: function _cameraForBoxAndBearing(e, i, o, a) {\n          var s = {\n            top: 0,\n            bottom: 0,\n            right: 0,\n            left: 0\n          };\n\n          if (\"number\" == typeof (a = t.extend({\n            padding: s,\n            offset: [0, 0],\n            maxZoom: this.transform.maxZoom\n          }, a)).padding) {\n            var _t373 = a.padding;\n            a.padding = {\n              top: _t373,\n              bottom: _t373,\n              right: _t373,\n              left: _t373\n            };\n          }\n\n          a.padding = t.extend(s, a.padding);\n\n          var r = this.transform,\n              n = r.padding,\n              l = r.project(t.LngLat.convert(e)),\n              c = r.project(t.LngLat.convert(i)),\n              h = l.rotate(-o * Math.PI / 180),\n              u = c.rotate(-o * Math.PI / 180),\n              d = new t.pointGeometry(Math.max(h.x, u.x), Math.max(h.y, u.y)),\n              m = new t.pointGeometry(Math.min(h.x, u.x), Math.min(h.y, u.y)),\n              _ = d.sub(m),\n              p = (r.width - (n.left + n.right + a.padding.left + a.padding.right)) / _.x,\n              f = (r.height - (n.top + n.bottom + a.padding.top + a.padding.bottom)) / _.y;\n\n          if (f < 0 || p < 0) return void t.warnOnce(\"Map cannot fit within canvas with the given bounds, padding, and/or offset.\");\n          var g = Math.min(r.scaleZoom(r.scale * Math.min(p, f)), a.maxZoom),\n              x = t.pointGeometry.convert(a.offset),\n              v = new t.pointGeometry((a.padding.left - a.padding.right) / 2, (a.padding.top - a.padding.bottom) / 2).rotate(o * Math.PI / 180),\n              y = x.add(v).mult(r.scale / r.zoomScale(g));\n          return {\n            center: r.unproject(l.add(c).div(2).sub(y)),\n            zoom: g,\n            bearing: o\n          };\n        }\n      }, {\n        key: \"fitBounds\",\n        value: function fitBounds(t, e, i) {\n          return this._fitInternal(this.cameraForBounds(t, e), e, i);\n        }\n      }, {\n        key: \"fitScreenCoordinates\",\n        value: function fitScreenCoordinates(e, i, o, a, s) {\n          return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.pointGeometry.convert(e)), this.transform.pointLocation(t.pointGeometry.convert(i)), o, a), a, s);\n        }\n      }, {\n        key: \"_fitInternal\",\n        value: function _fitInternal(e, i, o) {\n          return e ? (delete (i = t.extend(e, i)).padding, i.linear ? this.easeTo(i, o) : this.flyTo(i, o)) : this;\n        }\n      }, {\n        key: \"jumpTo\",\n        value: function jumpTo(e, i) {\n          this.stop();\n          var o = this.transform;\n          var a = !1,\n              s = !1,\n              r = !1;\n          return \"zoom\" in e && o.zoom !== +e.zoom && (a = !0, o.zoom = +e.zoom), void 0 !== e.center && (o.center = t.LngLat.convert(e.center)), \"bearing\" in e && o.bearing !== +e.bearing && (s = !0, o.bearing = +e.bearing), \"pitch\" in e && o.pitch !== +e.pitch && (r = !0, o.pitch = +e.pitch), null == e.padding || o.isPaddingEqual(e.padding) || (o.padding = e.padding), this.fire(new t.Event(\"movestart\", i)).fire(new t.Event(\"move\", i)), a && this.fire(new t.Event(\"zoomstart\", i)).fire(new t.Event(\"zoom\", i)).fire(new t.Event(\"zoomend\", i)), s && this.fire(new t.Event(\"rotatestart\", i)).fire(new t.Event(\"rotate\", i)).fire(new t.Event(\"rotateend\", i)), r && this.fire(new t.Event(\"pitchstart\", i)).fire(new t.Event(\"pitch\", i)).fire(new t.Event(\"pitchend\", i)), this.fire(new t.Event(\"moveend\", i));\n        }\n      }, {\n        key: \"easeTo\",\n        value: function easeTo(e, i) {\n          var _this85 = this;\n\n          this._stop(!1, e.easeId), (!1 === (e = t.extend({\n            offset: [0, 0],\n            duration: 500,\n            easing: t.ease\n          }, e)).animate || !e.essential && t.exported.prefersReducedMotion) && (e.duration = 0);\n          var o = this.transform,\n              a = this.getZoom(),\n              s = this.getBearing(),\n              r = this.getPitch(),\n              n = this.getPadding(),\n              l = \"zoom\" in e ? +e.zoom : a,\n              c = \"bearing\" in e ? this._normalizeBearing(e.bearing, s) : s,\n              h = \"pitch\" in e ? +e.pitch : r,\n              u = \"padding\" in e ? e.padding : o.padding,\n              d = t.pointGeometry.convert(e.offset);\n          var m = o.centerPoint.add(d);\n\n          var _ = o.pointLocation(m),\n              p = t.LngLat.convert(e.center || _);\n\n          this._normalizeCenter(p);\n\n          var f = o.project(_),\n              g = o.project(p).sub(f),\n              x = o.zoomScale(l - a);\n          var v, y;\n          e.around && (v = t.LngLat.convert(e.around), y = o.locationPoint(v));\n          var b = {\n            moving: this._moving,\n            zooming: this._zooming,\n            rotating: this._rotating,\n            pitching: this._pitching\n          };\n          return this._zooming = this._zooming || l !== a, this._rotating = this._rotating || s !== c, this._pitching = this._pitching || h !== r, this._padding = !o.isPaddingEqual(u), this._easeId = e.easeId, this._prepareEase(i, e.noMoveStart, b), this._ease(function (e) {\n            if (_this85._zooming && (o.zoom = t.number(a, l, e)), _this85._rotating && (o.bearing = t.number(s, c, e)), _this85._pitching && (o.pitch = t.number(r, h, e)), _this85._padding && (o.interpolatePadding(n, u, e), m = o.centerPoint.add(d)), v) o.setLocationAtPoint(v, y);else {\n              var _t374 = o.zoomScale(o.zoom - a),\n                  _i244 = l > a ? Math.min(2, x) : Math.max(.5, x),\n                  _s126 = Math.pow(_i244, 1 - e),\n                  _r195 = o.unproject(f.add(g.mult(e * _s126)).mult(_t374));\n\n              o.setLocationAtPoint(o.renderWorldCopies ? _r195.wrap() : _r195, m);\n            }\n\n            _this85._fireMoveEvents(i);\n          }, function (t) {\n            _this85._afterEase(i, t);\n          }, e), this;\n        }\n      }, {\n        key: \"_prepareEase\",\n        value: function _prepareEase(e, i) {\n          var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          this._moving = !0, i || o.moving || this.fire(new t.Event(\"movestart\", e)), this._zooming && !o.zooming && this.fire(new t.Event(\"zoomstart\", e)), this._rotating && !o.rotating && this.fire(new t.Event(\"rotatestart\", e)), this._pitching && !o.pitching && this.fire(new t.Event(\"pitchstart\", e));\n        }\n      }, {\n        key: \"_fireMoveEvents\",\n        value: function _fireMoveEvents(e) {\n          this.fire(new t.Event(\"move\", e)), this._zooming && this.fire(new t.Event(\"zoom\", e)), this._rotating && this.fire(new t.Event(\"rotate\", e)), this._pitching && this.fire(new t.Event(\"pitch\", e));\n        }\n      }, {\n        key: \"_afterEase\",\n        value: function _afterEase(e, i) {\n          if (this._easeId && i && this._easeId === i) return;\n          delete this._easeId;\n          var o = this._zooming,\n              a = this._rotating,\n              s = this._pitching;\n          this._moving = !1, this._zooming = !1, this._rotating = !1, this._pitching = !1, this._padding = !1, o && this.fire(new t.Event(\"zoomend\", e)), a && this.fire(new t.Event(\"rotateend\", e)), s && this.fire(new t.Event(\"pitchend\", e)), this.fire(new t.Event(\"moveend\", e));\n        }\n      }, {\n        key: \"flyTo\",\n        value: function flyTo(e, i) {\n          var _this86 = this;\n\n          if (!e.essential && t.exported.prefersReducedMotion) {\n            var _o123 = t.pick(e, [\"center\", \"zoom\", \"bearing\", \"pitch\", \"around\"]);\n\n            return this.jumpTo(_o123, i);\n          }\n\n          this.stop(), e = t.extend({\n            offset: [0, 0],\n            speed: 1.2,\n            curve: 1.42,\n            easing: t.ease\n          }, e);\n          var o = this.transform,\n              a = this.getZoom(),\n              s = this.getBearing(),\n              r = this.getPitch(),\n              n = this.getPadding(),\n              l = \"zoom\" in e ? t.clamp(+e.zoom, o.minZoom, o.maxZoom) : a,\n              c = \"bearing\" in e ? this._normalizeBearing(e.bearing, s) : s,\n              h = \"pitch\" in e ? +e.pitch : r,\n              u = \"padding\" in e ? e.padding : o.padding,\n              d = o.zoomScale(l - a),\n              m = t.pointGeometry.convert(e.offset);\n\n          var _ = o.centerPoint.add(m);\n\n          var p = o.pointLocation(_),\n              f = t.LngLat.convert(e.center || p);\n\n          this._normalizeCenter(f);\n\n          var g = o.project(p),\n              x = o.project(f).sub(g);\n          var v = e.curve;\n          var y = Math.max(o.width, o.height),\n              b = y / d,\n              w = x.mag();\n\n          if (\"minZoom\" in e) {\n            var _i245 = t.clamp(Math.min(e.minZoom, a, l), o.minZoom, o.maxZoom),\n                _s127 = y / o.zoomScale(_i245 - a);\n\n            v = Math.sqrt(_s127 / w * 2);\n          }\n\n          var T = v * v;\n\n          function E(t) {\n            var e = (b * b - y * y + (t ? -1 : 1) * T * T * w * w) / (2 * (t ? b : y) * T * w);\n            return Math.log(Math.sqrt(e * e + 1) - e);\n          }\n\n          function I(t) {\n            return (Math.exp(t) - Math.exp(-t)) / 2;\n          }\n\n          function S(t) {\n            return (Math.exp(t) + Math.exp(-t)) / 2;\n          }\n\n          var C = E(0);\n\n          var P = function P(t) {\n            return S(C) / S(C + v * t);\n          },\n              z = function z(t) {\n            return y * ((S(C) * (I(e = C + v * t) / S(e)) - I(C)) / T) / w;\n            var e;\n          },\n              D = (E(1) - C) / v;\n\n          if (Math.abs(w) < 1e-6 || !isFinite(D)) {\n            if (Math.abs(y - b) < 1e-6) return this.easeTo(e, i);\n\n            var _t375 = b < y ? -1 : 1;\n\n            D = Math.abs(Math.log(b / y)) / v, z = function z() {\n              return 0;\n            }, P = function P(e) {\n              return Math.exp(_t375 * v * e);\n            };\n          }\n\n          return e.duration = \"duration\" in e ? +e.duration : 1e3 * D / (\"screenSpeed\" in e ? +e.screenSpeed / v : +e.speed), e.maxDuration && e.duration > e.maxDuration && (e.duration = 0), this._zooming = !0, this._rotating = s !== c, this._pitching = h !== r, this._padding = !o.isPaddingEqual(u), this._prepareEase(i, !1), this._ease(function (e) {\n            var d = e * D,\n                p = 1 / P(d);\n            o.zoom = 1 === e ? l : a + o.scaleZoom(p), _this86._rotating && (o.bearing = t.number(s, c, e)), _this86._pitching && (o.pitch = t.number(r, h, e)), _this86._padding && (o.interpolatePadding(n, u, e), _ = o.centerPoint.add(m));\n            var v = 1 === e ? f : o.unproject(g.add(x.mult(z(d))).mult(p));\n            o.setLocationAtPoint(o.renderWorldCopies ? v.wrap() : v, _), _this86._fireMoveEvents(i);\n          }, function () {\n            return _this86._afterEase(i);\n          }, e), this;\n        }\n      }, {\n        key: \"isEasing\",\n        value: function isEasing() {\n          return !!this._easeFrameId;\n        }\n      }, {\n        key: \"stop\",\n        value: function stop() {\n          return this._stop();\n        }\n      }, {\n        key: \"_stop\",\n        value: function _stop(t, e) {\n          if (this._easeFrameId && (this._cancelRenderFrame(this._easeFrameId), delete this._easeFrameId, delete this._onEaseFrame), this._onEaseEnd) {\n            var _t376 = this._onEaseEnd;\n            delete this._onEaseEnd, _t376.call(this, e);\n          }\n\n          if (!t) {\n            var _t377 = this.handlers;\n            _t377 && _t377.stop(!1);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"_ease\",\n        value: function _ease(e, i, o) {\n          !1 === o.animate || 0 === o.duration ? (e(1), i()) : (this._easeStart = t.exported.now(), this._easeOptions = o, this._onEaseFrame = e, this._onEaseEnd = i, this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback));\n        }\n      }, {\n        key: \"_renderFrameCallback\",\n        value: function _renderFrameCallback() {\n          var e = Math.min((t.exported.now() - this._easeStart) / this._easeOptions.duration, 1);\n          this._onEaseFrame(this._easeOptions.easing(e)), e < 1 ? this._easeFrameId = this._requestRenderFrame(this._renderFrameCallback) : this.stop();\n        }\n      }, {\n        key: \"_normalizeBearing\",\n        value: function _normalizeBearing(e, i) {\n          e = t.wrap(e, -180, 180);\n          var o = Math.abs(e - i);\n          return Math.abs(e - 360 - i) < o && (e -= 360), Math.abs(e + 360 - i) < o && (e += 360), e;\n        }\n      }, {\n        key: \"_normalizeCenter\",\n        value: function _normalizeCenter(t) {\n          var e = this.transform;\n          if (!e.renderWorldCopies || e.lngRange) return;\n          var i = t.lng - e.center.lng;\n          t.lng += i > 180 ? -360 : i < -180 ? 360 : 0;\n        }\n      }]);\n\n      return Yo;\n    }(t.Evented);\n\n    var Jo = /*#__PURE__*/function () {\n      function Jo() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Jo);\n\n        this.options = e, t.bindAll([\"_toggleAttribution\", \"_updateData\", \"_updateCompact\", \"_updateCompactMinimize\"], this);\n      }\n\n      _createClass(Jo, [{\n        key: \"getDefaultPosition\",\n        value: function getDefaultPosition() {\n          return \"bottom-right\";\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          return this._map = t, this._compact = this.options && this.options.compact, this._container = s.create(\"details\", \"maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib\"), this._compactButton = s.create(\"summary\", \"maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button\", this._container), this._compactButton.addEventListener(\"click\", this._toggleAttribution), this._setElementTitle(this._compactButton, \"ToggleAttribution\"), this._innerContainer = s.create(\"div\", \"maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner\", this._container), this._updateAttributions(), this._updateCompact(), this._map.on(\"styledata\", this._updateData), this._map.on(\"sourcedata\", this._updateData), this._map.on(\"resize\", this._updateCompact), this._map.on(\"drag\", this._updateCompactMinimize), this._container;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          s.remove(this._container), this._map.off(\"styledata\", this._updateData), this._map.off(\"sourcedata\", this._updateData), this._map.off(\"resize\", this._updateCompact), this._map.off(\"drag\", this._updateCompactMinimize), this._map = void 0, this._compact = void 0, this._attribHTML = void 0;\n        }\n      }, {\n        key: \"_setElementTitle\",\n        value: function _setElementTitle(t, e) {\n          var i = this._map._getUIString(\"AttributionControl.\".concat(e));\n\n          t.title = i, t.setAttribute(\"aria-label\", i);\n        }\n      }, {\n        key: \"_toggleAttribution\",\n        value: function _toggleAttribution() {\n          this._container.classList.contains(\"maplibregl-compact\") && (this._container.classList.contains(\"maplibregl-compact-show\") ? (this._container.setAttribute(\"open\", \"\"), this._container.classList.remove(\"maplibregl-compact-show\", \"mapboxgl-compact-show\")) : (this._container.classList.add(\"maplibregl-compact-show\", \"mapboxgl-compact-show\"), this._container.removeAttribute(\"open\")));\n        }\n      }, {\n        key: \"_updateData\",\n        value: function _updateData(t) {\n          !t || \"metadata\" !== t.sourceDataType && \"visibility\" !== t.sourceDataType && \"style\" !== t.dataType || this._updateAttributions();\n        }\n      }, {\n        key: \"_updateAttributions\",\n        value: function _updateAttributions() {\n          if (!this._map.style) return;\n          var t = [];\n\n          if (this.options.customAttribution && (Array.isArray(this.options.customAttribution) ? t = t.concat(this.options.customAttribution.map(function (t) {\n            return \"string\" != typeof t ? \"\" : t;\n          })) : \"string\" == typeof this.options.customAttribution && t.push(this.options.customAttribution)), this._map.style.stylesheet) {\n            var _t378 = this._map.style.stylesheet;\n            this.styleOwner = _t378.owner, this.styleId = _t378.id;\n          }\n\n          var e = this._map.style.sourceCaches;\n\n          for (var _i246 in e) {\n            var _o124 = e[_i246];\n\n            if (_o124.used) {\n              var _e310 = _o124.getSource();\n\n              _e310.attribution && t.indexOf(_e310.attribution) < 0 && t.push(_e310.attribution);\n            }\n          }\n\n          t = t.filter(function (t) {\n            return String(t).trim();\n          }), t.sort(function (t, e) {\n            return t.length - e.length;\n          }), t = t.filter(function (e, i) {\n            for (var _o125 = i + 1; _o125 < t.length; _o125++) {\n              if (t[_o125].indexOf(e) >= 0) return !1;\n            }\n\n            return !0;\n          });\n          var i = t.join(\" | \");\n          i !== this._attribHTML && (this._attribHTML = i, t.length ? (this._innerContainer.innerHTML = i, this._container.classList.remove(\"maplibregl-attrib-empty\", \"mapboxgl-attrib-empty\")) : this._container.classList.add(\"maplibregl-attrib-empty\", \"mapboxgl-attrib-empty\"), this._updateCompact(), this._editLink = null);\n        }\n      }, {\n        key: \"_updateCompact\",\n        value: function _updateCompact() {\n          this._map.getCanvasContainer().offsetWidth <= 640 || this._compact ? !1 === this._compact ? this._container.setAttribute(\"open\", \"\") : this._container.classList.contains(\"maplibregl-compact\") || this._container.classList.contains(\"maplibregl-attrib-empty\") || (this._container.setAttribute(\"open\", \"\"), this._container.classList.add(\"maplibregl-compact\", \"mapboxgl-compact\", \"maplibregl-compact-show\", \"mapboxgl-compact-show\")) : (this._container.setAttribute(\"open\", \"\"), this._container.classList.contains(\"maplibregl-compact\") && this._container.classList.remove(\"maplibregl-compact\", \"maplibregl-compact-show\", \"mapboxgl-compact\", \"mapboxgl-compact-show\"));\n        }\n      }, {\n        key: \"_updateCompactMinimize\",\n        value: function _updateCompactMinimize() {\n          this._container.classList.contains(\"maplibregl-compact\") && this._container.classList.contains(\"maplibregl-compact-show\") && this._container.classList.remove(\"maplibregl-compact-show\", \"mapboxgl-compact-show\");\n        }\n      }]);\n\n      return Jo;\n    }();\n\n    var Qo = /*#__PURE__*/function () {\n      function Qo() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Qo);\n\n        this.options = e, t.bindAll([\"_updateCompact\"], this);\n      }\n\n      _createClass(Qo, [{\n        key: \"getDefaultPosition\",\n        value: function getDefaultPosition() {\n          return \"bottom-left\";\n        }\n      }, {\n        key: \"onAdd\",\n        value: function onAdd(t) {\n          this._map = t, this._compact = this.options && this.options.compact, this._container = s.create(\"div\", \"maplibregl-ctrl mapboxgl-ctrl\");\n          var e = s.create(\"a\", \"maplibregl-ctrl-logo mapboxgl-ctrl-logo\");\n          return e.target = \"_blank\", e.rel = \"noopener nofollow\", e.href = \"https://maplibre.org/\", e.setAttribute(\"aria-label\", this._map._getUIString(\"LogoControl.Title\")), e.setAttribute(\"rel\", \"noopener nofollow\"), this._container.appendChild(e), this._container.style.display = \"block\", this._map.on(\"resize\", this._updateCompact), this._updateCompact(), this._container;\n        }\n      }, {\n        key: \"onRemove\",\n        value: function onRemove() {\n          s.remove(this._container), this._map.off(\"resize\", this._updateCompact), this._map = void 0, this._compact = void 0;\n        }\n      }, {\n        key: \"_updateCompact\",\n        value: function _updateCompact() {\n          var t = this._container.children;\n\n          if (t.length) {\n            var _e311 = t[0];\n            this._map.getCanvasContainer().offsetWidth <= 640 || this._compact ? !1 !== this._compact && _e311.classList.add(\"maplibregl-compact\", \"mapboxgl-compact\") : _e311.classList.remove(\"maplibregl-compact\", \"mapboxgl-compact\");\n          }\n        }\n      }]);\n\n      return Qo;\n    }();\n\n    var ta = /*#__PURE__*/function () {\n      function ta() {\n        _classCallCheck(this, ta);\n\n        this._queue = [], this._id = 0, this._cleared = !1, this._currentlyRunning = !1;\n      }\n\n      _createClass(ta, [{\n        key: \"add\",\n        value: function add(t) {\n          var e = ++this._id;\n          return this._queue.push({\n            callback: t,\n            id: e,\n            cancelled: !1\n          }), e;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(t) {\n          var e = this._currentlyRunning,\n              i = e ? this._queue.concat(e) : this._queue;\n\n          var _iterator217 = _createForOfIteratorHelper(i),\n              _step217;\n\n          try {\n            for (_iterator217.s(); !(_step217 = _iterator217.n()).done;) {\n              var _e312 = _step217.value;\n              if (_e312.id === t) return void (_e312.cancelled = !0);\n            }\n          } catch (err) {\n            _iterator217.e(err);\n          } finally {\n            _iterator217.f();\n          }\n        }\n      }, {\n        key: \"run\",\n        value: function run() {\n          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var e = this._currentlyRunning = this._queue;\n          this._queue = [];\n\n          var _iterator218 = _createForOfIteratorHelper(e),\n              _step218;\n\n          try {\n            for (_iterator218.s(); !(_step218 = _iterator218.n()).done;) {\n              var _i247 = _step218.value;\n              if (!_i247.cancelled && (_i247.callback(t), this._cleared)) break;\n            }\n          } catch (err) {\n            _iterator218.e(err);\n          } finally {\n            _iterator218.f();\n          }\n\n          this._cleared = !1, this._currentlyRunning = !1;\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this._currentlyRunning && (this._cleared = !0), this._queue = [];\n        }\n      }]);\n\n      return ta;\n    }();\n\n    var ea = {\n      \"AttributionControl.ToggleAttribution\": \"Toggle attribution\",\n      \"AttributionControl.MapFeedback\": \"Map feedback\",\n      \"FullscreenControl.Enter\": \"Enter fullscreen\",\n      \"FullscreenControl.Exit\": \"Exit fullscreen\",\n      \"GeolocateControl.FindMyLocation\": \"Find my location\",\n      \"GeolocateControl.LocationNotAvailable\": \"Location not available\",\n      \"LogoControl.Title\": \"Mapbox logo\",\n      \"NavigationControl.ResetBearing\": \"Reset bearing to north\",\n      \"NavigationControl.ZoomIn\": \"Zoom in\",\n      \"NavigationControl.ZoomOut\": \"Zoom out\",\n      \"ScaleControl.Feet\": \"ft\",\n      \"ScaleControl.Meters\": \"m\",\n      \"ScaleControl.Kilometers\": \"km\",\n      \"ScaleControl.Miles\": \"mi\",\n      \"ScaleControl.NauticalMiles\": \"nm\"\n    },\n        ia = {\n      center: [0, 0],\n      zoom: 0,\n      bearing: 0,\n      pitch: 0,\n      minZoom: -2,\n      maxZoom: 22,\n      minPitch: 0,\n      maxPitch: 60,\n      interactive: !0,\n      scrollZoom: !0,\n      boxZoom: !0,\n      dragRotate: !0,\n      dragPan: !0,\n      keyboard: !0,\n      doubleClickZoom: !0,\n      touchZoomRotate: !0,\n      touchPitch: !0,\n      bearingSnap: 7,\n      clickTolerance: 3,\n      pitchWithRotate: !0,\n      hash: !1,\n      attributionControl: !0,\n      maplibreLogo: !1,\n      failIfMajorPerformanceCaveat: !1,\n      preserveDrawingBuffer: !1,\n      trackResize: !0,\n      renderWorldCopies: !0,\n      refreshExpiredTiles: !0,\n      maxTileCacheSize: null,\n      localIdeographFontFamily: \"sans-serif\",\n      transformRequest: null,\n      fadeDuration: 300,\n      crossSourceCollisions: !0\n    },\n        oa = {\n      showCompass: !0,\n      showZoom: !0,\n      visualizePitch: !1\n    };\n\n    var aa = /*#__PURE__*/function () {\n      function aa(e, i) {\n        var o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n\n        _classCallCheck(this, aa);\n\n        this._clickTolerance = 10, this.element = i, this.mouseRotate = new Eo({\n          clickTolerance: e.dragRotate._mouseRotate._clickTolerance\n        }), this.map = e, o && (this.mousePitch = new Io({\n          clickTolerance: e.dragRotate._mousePitch._clickTolerance\n        })), t.bindAll([\"mousedown\", \"mousemove\", \"mouseup\", \"touchstart\", \"touchmove\", \"touchend\", \"reset\"], this), s.addEventListener(i, \"mousedown\", this.mousedown), s.addEventListener(i, \"touchstart\", this.touchstart, {\n          passive: !1\n        }), s.addEventListener(i, \"touchmove\", this.touchmove), s.addEventListener(i, \"touchend\", this.touchend), s.addEventListener(i, \"touchcancel\", this.reset);\n      }\n\n      _createClass(aa, [{\n        key: \"down\",\n        value: function down(t, e) {\n          this.mouseRotate.mousedown(t, e), this.mousePitch && this.mousePitch.mousedown(t, e), s.disableDrag();\n        }\n      }, {\n        key: \"move\",\n        value: function move(t, e) {\n          var i = this.map,\n              o = this.mouseRotate.mousemoveWindow(t, e);\n\n          if (o && o.bearingDelta && i.setBearing(i.getBearing() + o.bearingDelta), this.mousePitch) {\n            var _o126 = this.mousePitch.mousemoveWindow(t, e);\n\n            _o126 && _o126.pitchDelta && i.setPitch(i.getPitch() + _o126.pitchDelta);\n          }\n        }\n      }, {\n        key: \"off\",\n        value: function off() {\n          var t = this.element;\n          s.removeEventListener(t, \"mousedown\", this.mousedown), s.removeEventListener(t, \"touchstart\", this.touchstart, {\n            passive: !1\n          }), s.removeEventListener(t, \"touchmove\", this.touchmove), s.removeEventListener(t, \"touchend\", this.touchend), s.removeEventListener(t, \"touchcancel\", this.reset), this.offTemp();\n        }\n      }, {\n        key: \"offTemp\",\n        value: function offTemp() {\n          s.enableDrag(), s.removeEventListener(window, \"mousemove\", this.mousemove), s.removeEventListener(window, \"mouseup\", this.mouseup);\n        }\n      }, {\n        key: \"mousedown\",\n        value: function mousedown(e) {\n          this.down(t.extend({}, e, {\n            ctrlKey: !0,\n            preventDefault: function preventDefault() {\n              return e.preventDefault();\n            }\n          }), s.mousePos(this.element, e)), s.addEventListener(window, \"mousemove\", this.mousemove), s.addEventListener(window, \"mouseup\", this.mouseup);\n        }\n      }, {\n        key: \"mousemove\",\n        value: function mousemove(t) {\n          this.move(t, s.mousePos(this.element, t));\n        }\n      }, {\n        key: \"mouseup\",\n        value: function mouseup(t) {\n          this.mouseRotate.mouseupWindow(t), this.mousePitch && this.mousePitch.mouseupWindow(t), this.offTemp();\n        }\n      }, {\n        key: \"touchstart\",\n        value: function touchstart(t) {\n          1 !== t.targetTouches.length ? this.reset() : (this._startPos = this._lastPos = s.touchPos(this.element, t.targetTouches)[0], this.down({\n            type: \"mousedown\",\n            button: 0,\n            ctrlKey: !0,\n            preventDefault: function preventDefault() {\n              return t.preventDefault();\n            }\n          }, this._startPos));\n        }\n      }, {\n        key: \"touchmove\",\n        value: function touchmove(t) {\n          1 !== t.targetTouches.length ? this.reset() : (this._lastPos = s.touchPos(this.element, t.targetTouches)[0], this.move({\n            preventDefault: function preventDefault() {\n              return t.preventDefault();\n            }\n          }, this._lastPos));\n        }\n      }, {\n        key: \"touchend\",\n        value: function touchend(t) {\n          0 === t.targetTouches.length && this._startPos && this._lastPos && this._startPos.dist(this._lastPos) < this._clickTolerance && this.element.click(), this.reset();\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this.mouseRotate.reset(), this.mousePitch && this.mousePitch.reset(), delete this._startPos, delete this._lastPos, this.offTemp();\n        }\n      }]);\n\n      return aa;\n    }();\n\n    function sa(e, i, o) {\n      if (e = new t.LngLat(e.lng, e.lat), i) {\n        var _a128 = new t.LngLat(e.lng - 360, e.lat),\n            _s128 = new t.LngLat(e.lng + 360, e.lat),\n            _r196 = o.locationPoint(e).distSqr(i);\n\n        o.locationPoint(_a128).distSqr(i) < _r196 ? e = _a128 : o.locationPoint(_s128).distSqr(i) < _r196 && (e = _s128);\n      }\n\n      for (; Math.abs(e.lng - o.center.lng) > 180;) {\n        var _t379 = o.locationPoint(e);\n\n        if (_t379.x >= 0 && _t379.y >= 0 && _t379.x <= o.width && _t379.y <= o.height) break;\n        e.lng > o.center.lng ? e.lng -= 360 : e.lng += 360;\n      }\n\n      return e;\n    }\n\n    var ra = {\n      center: \"translate(-50%,-50%)\",\n      top: \"translate(-50%,0)\",\n      \"top-left\": \"translate(0,0)\",\n      \"top-right\": \"translate(-100%,0)\",\n      bottom: \"translate(-50%,-100%)\",\n      \"bottom-left\": \"translate(0,-100%)\",\n      \"bottom-right\": \"translate(-100%,-100%)\",\n      left: \"translate(0,-50%)\",\n      right: \"translate(-100%,-50%)\"\n    };\n\n    function na(t, e, i) {\n      var o = t.classList;\n\n      for (var _t380 in ra) {\n        o.remove(\"maplibregl-\".concat(i, \"-anchor-\").concat(_t380), \"mapboxgl-\".concat(i, \"-anchor-\").concat(_t380));\n      }\n\n      o.add(\"maplibregl-\".concat(i, \"-anchor-\").concat(e), \"mapboxgl-\".concat(i, \"-anchor-\").concat(e));\n    }\n\n    var la = /*#__PURE__*/function (_t$Evented10) {\n      _inherits(la, _t$Evented10);\n\n      function la(e, i) {\n        var _this87;\n\n        _classCallCheck(this, la);\n\n        if (_this87 = _possibleConstructorReturn(this, _getPrototypeOf(la).call(this)), (e instanceof HTMLElement || i) && (e = t.extend({\n          element: e\n        }, i)), t.bindAll([\"_update\", \"_onMove\", \"_onUp\", \"_addDragHandler\", \"_onMapClick\", \"_onKeyPress\"], _assertThisInitialized(_assertThisInitialized(_this87))), _this87._anchor = e && e.anchor || \"center\", _this87._color = e && e.color || \"#3FB1CE\", _this87._scale = e && e.scale || 1, _this87._draggable = e && e.draggable || !1, _this87._clickTolerance = e && e.clickTolerance || 0, _this87._isDragging = !1, _this87._state = \"inactive\", _this87._rotation = e && e.rotation || 0, _this87._rotationAlignment = e && e.rotationAlignment || \"auto\", _this87._pitchAlignment = e && e.pitchAlignment && \"auto\" !== e.pitchAlignment ? e.pitchAlignment : _this87._rotationAlignment, e && e.element) _this87._element = e.element, _this87._offset = t.pointGeometry.convert(e && e.offset || [0, 0]);else {\n          _this87._defaultMarker = !0, _this87._element = s.create(\"div\"), _this87._element.setAttribute(\"aria-label\", \"Map marker\");\n\n          var _i248 = s.createNS(\"http://www.w3.org/2000/svg\", \"svg\"),\n              _o127 = 41,\n              _a129 = 27;\n\n          _i248.setAttributeNS(null, \"display\", \"block\"), _i248.setAttributeNS(null, \"height\", \"\".concat(_o127, \"px\")), _i248.setAttributeNS(null, \"width\", \"\".concat(_a129, \"px\")), _i248.setAttributeNS(null, \"viewBox\", \"0 0 \".concat(_a129, \" \").concat(_o127));\n\n          var _r197 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _r197.setAttributeNS(null, \"stroke\", \"none\"), _r197.setAttributeNS(null, \"stroke-width\", \"1\"), _r197.setAttributeNS(null, \"fill\", \"none\"), _r197.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n\n          var _n139 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _n139.setAttributeNS(null, \"fill-rule\", \"nonzero\");\n\n          var _l52 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _l52.setAttributeNS(null, \"transform\", \"translate(3.0, 29.0)\"), _l52.setAttributeNS(null, \"fill\", \"#000000\");\n          var _c36 = [{\n            rx: \"10.5\",\n            ry: \"5.25002273\"\n          }, {\n            rx: \"10.5\",\n            ry: \"5.25002273\"\n          }, {\n            rx: \"9.5\",\n            ry: \"4.77275007\"\n          }, {\n            rx: \"8.5\",\n            ry: \"4.29549936\"\n          }, {\n            rx: \"7.5\",\n            ry: \"3.81822308\"\n          }, {\n            rx: \"6.5\",\n            ry: \"3.34094679\"\n          }, {\n            rx: \"5.5\",\n            ry: \"2.86367051\"\n          }, {\n            rx: \"4.5\",\n            ry: \"2.38636864\"\n          }];\n\n          for (var _i249 = 0, _c37 = _c36; _i249 < _c37.length; _i249++) {\n            var _t381 = _c37[_i249];\n\n            var _e313 = s.createNS(\"http://www.w3.org/2000/svg\", \"ellipse\");\n\n            _e313.setAttributeNS(null, \"opacity\", \"0.04\"), _e313.setAttributeNS(null, \"cx\", \"10.5\"), _e313.setAttributeNS(null, \"cy\", \"5.80029008\"), _e313.setAttributeNS(null, \"rx\", _t381.rx), _e313.setAttributeNS(null, \"ry\", _t381.ry), _l52.appendChild(_e313);\n          }\n\n          var _h30 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _h30.setAttributeNS(null, \"fill\", _this87._color);\n\n          var _u40 = s.createNS(\"http://www.w3.org/2000/svg\", \"path\");\n\n          _u40.setAttributeNS(null, \"d\", \"M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z\"), _h30.appendChild(_u40);\n\n          var _d20 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _d20.setAttributeNS(null, \"opacity\", \"0.25\"), _d20.setAttributeNS(null, \"fill\", \"#000000\");\n\n          var _m22 = s.createNS(\"http://www.w3.org/2000/svg\", \"path\");\n\n          _m22.setAttributeNS(null, \"d\", \"M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z\"), _d20.appendChild(_m22);\n\n          var _15 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _15.setAttributeNS(null, \"transform\", \"translate(6.0, 7.0)\"), _15.setAttributeNS(null, \"fill\", \"#FFFFFF\");\n\n          var _p20 = s.createNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n          _p20.setAttributeNS(null, \"transform\", \"translate(8.0, 8.0)\");\n\n          var _f18 = s.createNS(\"http://www.w3.org/2000/svg\", \"circle\");\n\n          _f18.setAttributeNS(null, \"fill\", \"#000000\"), _f18.setAttributeNS(null, \"opacity\", \"0.25\"), _f18.setAttributeNS(null, \"cx\", \"5.5\"), _f18.setAttributeNS(null, \"cy\", \"5.5\"), _f18.setAttributeNS(null, \"r\", \"5.4999962\");\n\n          var _g17 = s.createNS(\"http://www.w3.org/2000/svg\", \"circle\");\n\n          _g17.setAttributeNS(null, \"fill\", \"#FFFFFF\"), _g17.setAttributeNS(null, \"cx\", \"5.5\"), _g17.setAttributeNS(null, \"cy\", \"5.5\"), _g17.setAttributeNS(null, \"r\", \"5.4999962\"), _p20.appendChild(_f18), _p20.appendChild(_g17), _n139.appendChild(_l52), _n139.appendChild(_h30), _n139.appendChild(_d20), _n139.appendChild(_15), _n139.appendChild(_p20), _i248.appendChild(_n139), _i248.setAttributeNS(null, \"height\", _o127 * _this87._scale + \"px\"), _i248.setAttributeNS(null, \"width\", _a129 * _this87._scale + \"px\"), _this87._element.appendChild(_i248), _this87._offset = t.pointGeometry.convert(e && e.offset || [0, -14]);\n        }\n        _this87._element.classList.add(\"maplibregl-marker\", \"mapboxgl-marker\"), _this87._element.addEventListener(\"dragstart\", function (t) {\n          t.preventDefault();\n        }), _this87._element.addEventListener(\"mousedown\", function (t) {\n          t.preventDefault();\n        }), na(_this87._element, _this87._anchor, \"marker\"), _this87._popup = null;\n        return _possibleConstructorReturn(_this87);\n      }\n\n      _createClass(la, [{\n        key: \"addTo\",\n        value: function addTo(t) {\n          return this.remove(), this._map = t, t.getCanvasContainer().appendChild(this._element), t.on(\"move\", this._update), t.on(\"moveend\", this._update), this.setDraggable(this._draggable), this._update(), this._map.on(\"click\", this._onMapClick), this;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove() {\n          return this._map && (this._map.off(\"click\", this._onMapClick), this._map.off(\"move\", this._update), this._map.off(\"moveend\", this._update), this._map.off(\"mousedown\", this._addDragHandler), this._map.off(\"touchstart\", this._addDragHandler), this._map.off(\"mouseup\", this._onUp), this._map.off(\"touchend\", this._onUp), this._map.off(\"mousemove\", this._onMove), this._map.off(\"touchmove\", this._onMove), delete this._map), s.remove(this._element), this._popup && this._popup.remove(), this;\n        }\n      }, {\n        key: \"getLngLat\",\n        value: function getLngLat() {\n          return this._lngLat;\n        }\n      }, {\n        key: \"setLngLat\",\n        value: function setLngLat(e) {\n          return this._lngLat = t.LngLat.convert(e), this._pos = null, this._popup && this._popup.setLngLat(this._lngLat), this._update(), this;\n        }\n      }, {\n        key: \"getElement\",\n        value: function getElement() {\n          return this._element;\n        }\n      }, {\n        key: \"setPopup\",\n        value: function setPopup(t) {\n          if (this._popup && (this._popup.remove(), this._popup = null, this._element.removeEventListener(\"keypress\", this._onKeyPress), this._originalTabIndex || this._element.removeAttribute(\"tabindex\")), t) {\n            if (!(\"offset\" in t.options)) {\n              var _e314 = 38.1,\n                  _i250 = 13.5,\n                  _o128 = Math.sqrt(Math.pow(_i250, 2) / 2);\n\n              t.options.offset = this._defaultMarker ? {\n                top: [0, 0],\n                \"top-left\": [0, 0],\n                \"top-right\": [0, 0],\n                bottom: [0, -_e314],\n                \"bottom-left\": [_o128, -1 * (_e314 - _i250 + _o128)],\n                \"bottom-right\": [-_o128, -1 * (_e314 - _i250 + _o128)],\n                left: [_i250, -1 * (_e314 - _i250)],\n                right: [-_i250, -1 * (_e314 - _i250)]\n              } : this._offset;\n            }\n\n            this._popup = t, this._lngLat && this._popup.setLngLat(this._lngLat), this._originalTabIndex = this._element.getAttribute(\"tabindex\"), this._originalTabIndex || this._element.setAttribute(\"tabindex\", \"0\"), this._element.addEventListener(\"keypress\", this._onKeyPress);\n          }\n\n          return this;\n        }\n      }, {\n        key: \"_onKeyPress\",\n        value: function _onKeyPress(t) {\n          var e = t.code,\n              i = t.charCode || t.keyCode;\n          \"Space\" !== e && \"Enter\" !== e && 32 !== i && 13 !== i || this.togglePopup();\n        }\n      }, {\n        key: \"_onMapClick\",\n        value: function _onMapClick(t) {\n          var e = t.originalEvent.target,\n              i = this._element;\n          this._popup && (e === i || i.contains(e)) && this.togglePopup();\n        }\n      }, {\n        key: \"getPopup\",\n        value: function getPopup() {\n          return this._popup;\n        }\n      }, {\n        key: \"togglePopup\",\n        value: function togglePopup() {\n          var t = this._popup;\n          return t ? (t.isOpen() ? t.remove() : t.addTo(this._map), this) : this;\n        }\n      }, {\n        key: \"_update\",\n        value: function _update(t) {\n          if (!this._map) return;\n          this._map.transform.renderWorldCopies && (this._lngLat = sa(this._lngLat, this._pos, this._map.transform)), this._pos = this._map.project(this._lngLat)._add(this._offset);\n          var e = \"\";\n          \"viewport\" === this._rotationAlignment || \"auto\" === this._rotationAlignment ? e = \"rotateZ(\".concat(this._rotation, \"deg)\") : \"map\" === this._rotationAlignment && (e = \"rotateZ(\".concat(this._rotation - this._map.getBearing(), \"deg)\"));\n          var i = \"\";\n          \"viewport\" === this._pitchAlignment || \"auto\" === this._pitchAlignment ? i = \"rotateX(0deg)\" : \"map\" === this._pitchAlignment && (i = \"rotateX(\".concat(this._map.getPitch(), \"deg)\")), t && \"moveend\" !== t.type || (this._pos = this._pos.round()), s.setTransform(this._element, \"\".concat(ra[this._anchor], \" translate(\").concat(this._pos.x, \"px, \").concat(this._pos.y, \"px) \").concat(i, \" \").concat(e));\n        }\n      }, {\n        key: \"getOffset\",\n        value: function getOffset() {\n          return this._offset;\n        }\n      }, {\n        key: \"setOffset\",\n        value: function setOffset(e) {\n          return this._offset = t.pointGeometry.convert(e), this._update(), this;\n        }\n      }, {\n        key: \"_onMove\",\n        value: function _onMove(e) {\n          if (!this._isDragging) {\n            var _t382 = this._clickTolerance || this._map._clickTolerance;\n\n            this._isDragging = e.point.dist(this._pointerdownPos) >= _t382;\n          }\n\n          this._isDragging && (this._pos = e.point.sub(this._positionDelta), this._lngLat = this._map.unproject(this._pos), this.setLngLat(this._lngLat), this._element.style.pointerEvents = \"none\", \"pending\" === this._state && (this._state = \"active\", this.fire(new t.Event(\"dragstart\"))), this.fire(new t.Event(\"drag\")));\n        }\n      }, {\n        key: \"_onUp\",\n        value: function _onUp() {\n          this._element.style.pointerEvents = \"auto\", this._positionDelta = null, this._pointerdownPos = null, this._isDragging = !1, this._map.off(\"mousemove\", this._onMove), this._map.off(\"touchmove\", this._onMove), \"active\" === this._state && this.fire(new t.Event(\"dragend\")), this._state = \"inactive\";\n        }\n      }, {\n        key: \"_addDragHandler\",\n        value: function _addDragHandler(t) {\n          this._element.contains(t.originalEvent.target) && (t.preventDefault(), this._positionDelta = t.point.sub(this._pos).add(this._offset), this._pointerdownPos = t.point, this._state = \"pending\", this._map.on(\"mousemove\", this._onMove), this._map.on(\"touchmove\", this._onMove), this._map.once(\"mouseup\", this._onUp), this._map.once(\"touchend\", this._onUp));\n        }\n      }, {\n        key: \"setDraggable\",\n        value: function setDraggable(t) {\n          return this._draggable = !!t, this._map && (t ? (this._map.on(\"mousedown\", this._addDragHandler), this._map.on(\"touchstart\", this._addDragHandler)) : (this._map.off(\"mousedown\", this._addDragHandler), this._map.off(\"touchstart\", this._addDragHandler))), this;\n        }\n      }, {\n        key: \"isDraggable\",\n        value: function isDraggable() {\n          return this._draggable;\n        }\n      }, {\n        key: \"setRotation\",\n        value: function setRotation(t) {\n          return this._rotation = t || 0, this._update(), this;\n        }\n      }, {\n        key: \"getRotation\",\n        value: function getRotation() {\n          return this._rotation;\n        }\n      }, {\n        key: \"setRotationAlignment\",\n        value: function setRotationAlignment(t) {\n          return this._rotationAlignment = t || \"auto\", this._update(), this;\n        }\n      }, {\n        key: \"getRotationAlignment\",\n        value: function getRotationAlignment() {\n          return this._rotationAlignment;\n        }\n      }, {\n        key: \"setPitchAlignment\",\n        value: function setPitchAlignment(t) {\n          return this._pitchAlignment = t && \"auto\" !== t ? t : this._rotationAlignment, this._update(), this;\n        }\n      }, {\n        key: \"getPitchAlignment\",\n        value: function getPitchAlignment() {\n          return this._pitchAlignment;\n        }\n      }]);\n\n      return la;\n    }(t.Evented);\n\n    var ca = {\n      positionOptions: {\n        enableHighAccuracy: !1,\n        maximumAge: 0,\n        timeout: 6e3\n      },\n      fitBoundsOptions: {\n        maxZoom: 15\n      },\n      trackUserLocation: !1,\n      showAccuracyCircle: !0,\n      showUserLocation: !0\n    };\n    var ha,\n        ua = 0,\n        da = !1;\n    var ma = {\n      maxWidth: 100,\n      unit: \"metric\"\n    };\n\n    function _a(t, e, i) {\n      var o = i && i.maxWidth || 100,\n          a = t._container.clientHeight / 2,\n          s = t.unproject([0, a]),\n          r = t.unproject([o, a]),\n          n = s.distanceTo(r);\n\n      if (i && \"imperial\" === i.unit) {\n        var _i251 = 3.2808 * n;\n\n        _i251 > 5280 ? pa(e, o, _i251 / 5280, t._getUIString(\"ScaleControl.Miles\")) : pa(e, o, _i251, t._getUIString(\"ScaleControl.Feet\"));\n      } else i && \"nautical\" === i.unit ? pa(e, o, n / 1852, t._getUIString(\"ScaleControl.NauticalMiles\")) : n >= 1e3 ? pa(e, o, n / 1e3, t._getUIString(\"ScaleControl.Kilometers\")) : pa(e, o, n, t._getUIString(\"ScaleControl.Meters\"));\n    }\n\n    function pa(t, e, i, o) {\n      var a = function (t) {\n        var e = Math.pow(10, \"\".concat(Math.floor(t)).length - 1);\n        var i = t / e;\n        return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : i >= 1 ? 1 : function (t) {\n          var e = Math.pow(10, Math.ceil(-Math.log(t) / Math.LN10));\n          return Math.round(t * e) / e;\n        }(i), e * i;\n      }(i);\n\n      t.style.width = e * (a / i) + \"px\", t.innerHTML = \"\".concat(a, \"&nbsp;\").concat(o);\n    }\n\n    var fa = {\n      closeButton: !0,\n      closeOnClick: !0,\n      focusAfterOpen: !0,\n      className: \"\",\n      maxWidth: \"240px\"\n    },\n        ga = [\"a[href]\", \"[tabindex]:not([tabindex='-1'])\", \"[contenteditable]:not([contenteditable='false'])\", \"button:not([disabled])\", \"input:not([disabled])\", \"select:not([disabled])\", \"textarea:not([disabled])\"].join(\", \");\n\n    function xa(e) {\n      if (e) {\n        if (\"number\" == typeof e) {\n          var _i252 = Math.round(Math.sqrt(.5 * Math.pow(e, 2)));\n\n          return {\n            center: new t.pointGeometry(0, 0),\n            top: new t.pointGeometry(0, e),\n            \"top-left\": new t.pointGeometry(_i252, _i252),\n            \"top-right\": new t.pointGeometry(-_i252, _i252),\n            bottom: new t.pointGeometry(0, -e),\n            \"bottom-left\": new t.pointGeometry(_i252, -_i252),\n            \"bottom-right\": new t.pointGeometry(-_i252, -_i252),\n            left: new t.pointGeometry(e, 0),\n            right: new t.pointGeometry(-e, 0)\n          };\n        }\n\n        if (e instanceof t.pointGeometry || Array.isArray(e)) {\n          var _i253 = t.pointGeometry.convert(e);\n\n          return {\n            center: _i253,\n            top: _i253,\n            \"top-left\": _i253,\n            \"top-right\": _i253,\n            bottom: _i253,\n            \"bottom-left\": _i253,\n            \"bottom-right\": _i253,\n            left: _i253,\n            right: _i253\n          };\n        }\n\n        return {\n          center: t.pointGeometry.convert(e.center || [0, 0]),\n          top: t.pointGeometry.convert(e.top || [0, 0]),\n          \"top-left\": t.pointGeometry.convert(e[\"top-left\"] || [0, 0]),\n          \"top-right\": t.pointGeometry.convert(e[\"top-right\"] || [0, 0]),\n          bottom: t.pointGeometry.convert(e.bottom || [0, 0]),\n          \"bottom-left\": t.pointGeometry.convert(e[\"bottom-left\"] || [0, 0]),\n          \"bottom-right\": t.pointGeometry.convert(e[\"bottom-right\"] || [0, 0]),\n          left: t.pointGeometry.convert(e.left || [0, 0]),\n          right: t.pointGeometry.convert(e.right || [0, 0])\n        };\n      }\n\n      return xa(new t.pointGeometry(0, 0));\n    }\n\n    var va = {\n      supported: e,\n      setRTLTextPlugin: t.setRTLTextPlugin,\n      getRTLTextPluginStatus: t.getRTLTextPluginStatus,\n      Map: /*#__PURE__*/function (_Yo) {\n        _inherits(Map, _Yo);\n\n        function Map(e) {\n          var _this88;\n\n          _classCallCheck(this, Map);\n\n          var i;\n          if (t.PerformanceUtils.mark(t.PerformanceMarkers.create), null != (e = t.extend({}, ia, e)).minZoom && null != e.maxZoom && e.minZoom > e.maxZoom) throw new Error(\"maxZoom must be greater than or equal to minZoom\");\n          if (null != e.minPitch && null != e.maxPitch && e.minPitch > e.maxPitch) throw new Error(\"maxPitch must be greater than or equal to minPitch\");\n          if (null != e.minPitch && e.minPitch < 0) throw new Error(\"minPitch must be greater than or equal to 0\");\n          if (null != e.maxPitch && e.maxPitch > 85) throw new Error(\"maxPitch must be less than or equal to 85\");\n\n          if (_this88 = _possibleConstructorReturn(this, _getPrototypeOf(Map).call(this, new to(e.minZoom, e.maxZoom, e.minPitch, e.maxPitch, e.renderWorldCopies), {\n            bearingSnap: e.bearingSnap\n          })), _this88._interactive = e.interactive, _this88._maxTileCacheSize = e.maxTileCacheSize, _this88._failIfMajorPerformanceCaveat = e.failIfMajorPerformanceCaveat, _this88._preserveDrawingBuffer = e.preserveDrawingBuffer, _this88._antialias = e.antialias, _this88._trackResize = e.trackResize, _this88._bearingSnap = e.bearingSnap, _this88._refreshExpiredTiles = e.refreshExpiredTiles, _this88._fadeDuration = e.fadeDuration, _this88._crossSourceCollisions = e.crossSourceCollisions, _this88._crossFadingFactor = 1, _this88._collectResourceTiming = e.collectResourceTiming, _this88._renderTaskQueue = new ta(), _this88._controls = [], _this88._mapId = t.uniqueId(), _this88._locale = t.extend({}, ea, e.locale), _this88._clickTolerance = e.clickTolerance, _this88._pixelRatio = null !== (i = e.pixelRatio) && void 0 !== i ? i : devicePixelRatio, _this88._requestManager = new r(e.transformRequest), \"string\" == typeof e.container) {\n            if (_this88._container = document.getElementById(e.container), !_this88._container) throw new Error(\"Container '\".concat(e.container, \"' not found.\"));\n          } else {\n            if (!(e.container instanceof HTMLElement)) throw new Error(\"Invalid type: 'container' must be a String or HTMLElement.\");\n            _this88._container = e.container;\n          }\n\n          if (e.maxBounds && _this88.setMaxBounds(e.maxBounds), t.bindAll([\"_onWindowOnline\", \"_onWindowResize\", \"_onMapScroll\", \"_contextLost\", \"_contextRestored\"], _assertThisInitialized(_assertThisInitialized(_this88))), _this88._setupContainer(), _this88._setupPainter(), void 0 === _this88.painter) throw new Error(\"Failed to initialize WebGL.\");\n          _this88.on(\"move\", function () {\n            return _this88._update(!1);\n          }), _this88.on(\"moveend\", function () {\n            return _this88._update(!1);\n          }), _this88.on(\"zoom\", function () {\n            return _this88._update(!0);\n          }), \"undefined\" != typeof window && (addEventListener(\"online\", _this88._onWindowOnline, !1), addEventListener(\"resize\", _this88._onWindowResize, !1), addEventListener(\"orientationchange\", _this88._onWindowResize, !1)), _this88.handlers = new Ho(_assertThisInitialized(_assertThisInitialized(_this88)), e), _this88._hash = e.hash && new eo(\"string\" == typeof e.hash && e.hash || void 0).addTo(_assertThisInitialized(_assertThisInitialized(_this88))), _this88._hash && _this88._hash._onHashChange() || (_this88.jumpTo({\n            center: e.center,\n            zoom: e.zoom,\n            bearing: e.bearing,\n            pitch: e.pitch\n          }), e.bounds && (_this88.resize(), _this88.fitBounds(e.bounds, t.extend({}, e.fitBoundsOptions, {\n            duration: 0\n          })))), _this88.resize(), _this88._localIdeographFontFamily = e.localIdeographFontFamily, e.style && _this88.setStyle(e.style, {\n            localIdeographFontFamily: e.localIdeographFontFamily\n          }), e.attributionControl && _this88.addControl(new Jo({\n            customAttribution: e.customAttribution\n          })), e.maplibreLogo && _this88.addControl(new Qo(), e.logoPosition), _this88.on(\"style.load\", function () {\n            _this88.transform.unmodified && _this88.jumpTo(_this88.style.stylesheet);\n          }), _this88.on(\"data\", function (e) {\n            _this88._update(\"style\" === e.dataType), _this88.fire(new t.Event(\"\".concat(e.dataType, \"data\"), e));\n          }), _this88.on(\"dataloading\", function (e) {\n            _this88.fire(new t.Event(\"\".concat(e.dataType, \"dataloading\"), e));\n          }), _this88.on(\"dataabort\", function (e) {\n            _this88.fire(new t.Event(\"sourcedataabort\", e));\n          });\n          return _possibleConstructorReturn(_this88);\n        }\n\n        _createClass(Map, [{\n          key: \"_getMapId\",\n          value: function _getMapId() {\n            return this._mapId;\n          }\n        }, {\n          key: \"addControl\",\n          value: function addControl(e, i) {\n            if (void 0 === i && (i = e.getDefaultPosition ? e.getDefaultPosition() : \"top-right\"), !e || !e.onAdd) return this.fire(new t.ErrorEvent(new Error(\"Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.\")));\n            var o = e.onAdd(this);\n\n            this._controls.push(e);\n\n            var a = this._controlPositions[i];\n            return -1 !== i.indexOf(\"bottom\") ? a.insertBefore(o, a.firstChild) : a.appendChild(o), this;\n          }\n        }, {\n          key: \"removeControl\",\n          value: function removeControl(e) {\n            if (!e || !e.onRemove) return this.fire(new t.ErrorEvent(new Error(\"Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.\")));\n\n            var i = this._controls.indexOf(e);\n\n            return i > -1 && this._controls.splice(i, 1), e.onRemove(this), this;\n          }\n        }, {\n          key: \"hasControl\",\n          value: function hasControl(t) {\n            return this._controls.indexOf(t) > -1;\n          }\n        }, {\n          key: \"resize\",\n          value: function resize(e) {\n            var i = this._containerDimensions(),\n                o = i[0],\n                a = i[1];\n\n            this._resizeCanvas(o, a, this.getPixelRatio()), this.transform.resize(o, a), this.painter.resize(o, a, this.getPixelRatio());\n            var s = !this._moving;\n            return s && (this.stop(), this.fire(new t.Event(\"movestart\", e)).fire(new t.Event(\"move\", e))), this.fire(new t.Event(\"resize\", e)), s && this.fire(new t.Event(\"moveend\", e)), this;\n          }\n        }, {\n          key: \"getPixelRatio\",\n          value: function getPixelRatio() {\n            return this._pixelRatio;\n          }\n        }, {\n          key: \"setPixelRatio\",\n          value: function setPixelRatio(t) {\n            var _this$_containerDimen = this._containerDimensions(),\n                _this$_containerDimen2 = _slicedToArray(_this$_containerDimen, 2),\n                e = _this$_containerDimen2[0],\n                i = _this$_containerDimen2[1];\n\n            this._pixelRatio = t, this._resizeCanvas(e, i, t), this.painter.resize(e, i, t);\n          }\n        }, {\n          key: \"getBounds\",\n          value: function getBounds() {\n            return this.transform.getBounds();\n          }\n        }, {\n          key: \"getMaxBounds\",\n          value: function getMaxBounds() {\n            return this.transform.getMaxBounds();\n          }\n        }, {\n          key: \"setMaxBounds\",\n          value: function setMaxBounds(e) {\n            return this.transform.setMaxBounds(t.LngLatBounds.convert(e)), this._update();\n          }\n        }, {\n          key: \"setMinZoom\",\n          value: function setMinZoom(t) {\n            if ((t = null == t ? -2 : t) >= -2 && t <= this.transform.maxZoom) return this.transform.minZoom = t, this._update(), this.getZoom() < t && this.setZoom(t), this;\n            throw new Error(\"minZoom must be between -2 and the current maxZoom, inclusive\");\n          }\n        }, {\n          key: \"getMinZoom\",\n          value: function getMinZoom() {\n            return this.transform.minZoom;\n          }\n        }, {\n          key: \"setMaxZoom\",\n          value: function setMaxZoom(t) {\n            if ((t = null == t ? 22 : t) >= this.transform.minZoom) return this.transform.maxZoom = t, this._update(), this.getZoom() > t && this.setZoom(t), this;\n            throw new Error(\"maxZoom must be greater than the current minZoom\");\n          }\n        }, {\n          key: \"getMaxZoom\",\n          value: function getMaxZoom() {\n            return this.transform.maxZoom;\n          }\n        }, {\n          key: \"setMinPitch\",\n          value: function setMinPitch(t) {\n            if ((t = null == t ? 0 : t) < 0) throw new Error(\"minPitch must be greater than or equal to 0\");\n            if (t >= 0 && t <= this.transform.maxPitch) return this.transform.minPitch = t, this._update(), this.getPitch() < t && this.setPitch(t), this;\n            throw new Error(\"minPitch must be between 0 and the current maxPitch, inclusive\");\n          }\n        }, {\n          key: \"getMinPitch\",\n          value: function getMinPitch() {\n            return this.transform.minPitch;\n          }\n        }, {\n          key: \"setMaxPitch\",\n          value: function setMaxPitch(t) {\n            if ((t = null == t ? 60 : t) > 85) throw new Error(\"maxPitch must be less than or equal to 85\");\n            if (t >= this.transform.minPitch) return this.transform.maxPitch = t, this._update(), this.getPitch() > t && this.setPitch(t), this;\n            throw new Error(\"maxPitch must be greater than the current minPitch\");\n          }\n        }, {\n          key: \"getMaxPitch\",\n          value: function getMaxPitch() {\n            return this.transform.maxPitch;\n          }\n        }, {\n          key: \"getRenderWorldCopies\",\n          value: function getRenderWorldCopies() {\n            return this.transform.renderWorldCopies;\n          }\n        }, {\n          key: \"setRenderWorldCopies\",\n          value: function setRenderWorldCopies(t) {\n            return this.transform.renderWorldCopies = t, this._update();\n          }\n        }, {\n          key: \"project\",\n          value: function project(e) {\n            return this.transform.locationPoint(t.LngLat.convert(e));\n          }\n        }, {\n          key: \"unproject\",\n          value: function unproject(e) {\n            return this.transform.pointLocation(t.pointGeometry.convert(e));\n          }\n        }, {\n          key: \"isMoving\",\n          value: function isMoving() {\n            return this._moving || this.handlers.isMoving();\n          }\n        }, {\n          key: \"isZooming\",\n          value: function isZooming() {\n            return this._zooming || this.handlers.isZooming();\n          }\n        }, {\n          key: \"isRotating\",\n          value: function isRotating() {\n            return this._rotating || this.handlers.isRotating();\n          }\n        }, {\n          key: \"_createDelegatedListener\",\n          value: function _createDelegatedListener(t, e, i) {\n            var _this89 = this;\n\n            if (\"mouseenter\" === t || \"mouseover\" === t) {\n              var _o129 = !1;\n\n              var _a130 = function _a130(a) {\n                var s = _this89.getLayer(e) ? _this89.queryRenderedFeatures(a.point, {\n                  layers: [e]\n                }) : [];\n                s.length ? _o129 || (_o129 = !0, i.call(_this89, new ho(t, _this89, a.originalEvent, {\n                  features: s\n                }))) : _o129 = !1;\n              };\n\n              return {\n                layer: e,\n                listener: i,\n                delegates: {\n                  mousemove: _a130,\n                  mouseout: function mouseout() {\n                    _o129 = !1;\n                  }\n                }\n              };\n            }\n\n            if (\"mouseleave\" === t || \"mouseout\" === t) {\n              var _o130 = !1;\n\n              var _a131 = function _a131(a) {\n                (_this89.getLayer(e) ? _this89.queryRenderedFeatures(a.point, {\n                  layers: [e]\n                }) : []).length ? _o130 = !0 : _o130 && (_o130 = !1, i.call(_this89, new ho(t, _this89, a.originalEvent)));\n              },\n                  _s129 = function _s129(e) {\n                _o130 && (_o130 = !1, i.call(_this89, new ho(t, _this89, e.originalEvent)));\n              };\n\n              return {\n                layer: e,\n                listener: i,\n                delegates: {\n                  mousemove: _a131,\n                  mouseout: _s129\n                }\n              };\n            }\n\n            {\n              var _o131 = function _o131(t) {\n                var o = _this89.getLayer(e) ? _this89.queryRenderedFeatures(t.point, {\n                  layers: [e]\n                }) : [];\n                o.length && (t.features = o, i.call(_this89, t), delete t.features);\n              };\n\n              return {\n                layer: e,\n                listener: i,\n                delegates: _defineProperty({}, t, _o131)\n              };\n            }\n          }\n        }, {\n          key: \"on\",\n          value: function on(t, e, i) {\n            if (void 0 === i) return _get(_getPrototypeOf(Map.prototype), \"on\", this).call(this, t, e);\n\n            var o = this._createDelegatedListener(t, e, i);\n\n            this._delegatedListeners = this._delegatedListeners || {}, this._delegatedListeners[t] = this._delegatedListeners[t] || [], this._delegatedListeners[t].push(o);\n\n            for (var _t383 in o.delegates) {\n              this.on(_t383, o.delegates[_t383]);\n            }\n\n            return this;\n          }\n        }, {\n          key: \"once\",\n          value: function once(t, e, i) {\n            if (void 0 === i) return _get(_getPrototypeOf(Map.prototype), \"once\", this).call(this, t, e);\n\n            var o = this._createDelegatedListener(t, e, i);\n\n            for (var _t384 in o.delegates) {\n              this.once(_t384, o.delegates[_t384]);\n            }\n\n            return this;\n          }\n        }, {\n          key: \"off\",\n          value: function off(t, e, i) {\n            var _this90 = this;\n\n            return void 0 === i ? _get(_getPrototypeOf(Map.prototype), \"off\", this).call(this, t, e) : (this._delegatedListeners && this._delegatedListeners[t] && function (o) {\n              var a = _this90._delegatedListeners[t];\n\n              for (var _t385 = 0; _t385 < a.length; _t385++) {\n                var _o132 = a[_t385];\n\n                if (_o132.layer === e && _o132.listener === i) {\n                  for (var _t386 in _o132.delegates) {\n                    _this90.off(_t386, _o132.delegates[_t386]);\n                  }\n\n                  return a.splice(_t385, 1), _this90;\n                }\n              }\n            }(), this);\n          }\n        }, {\n          key: \"queryRenderedFeatures\",\n          value: function queryRenderedFeatures(e, i) {\n            if (!this.style) return [];\n            var o;\n            if (void 0 !== i || void 0 === e || e instanceof t.pointGeometry || Array.isArray(e) || (i = e, e = void 0), i = i || {}, (e = e || [[0, 0], [this.transform.width, this.transform.height]]) instanceof t.pointGeometry || \"number\" == typeof e[0]) o = [t.pointGeometry.convert(e)];else {\n              var _i254 = t.pointGeometry.convert(e[0]),\n                  _a132 = t.pointGeometry.convert(e[1]);\n\n              o = [_i254, new t.pointGeometry(_a132.x, _i254.y), _a132, new t.pointGeometry(_i254.x, _a132.y), _i254];\n            }\n            return this.style.queryRenderedFeatures(o, i, this.transform);\n          }\n        }, {\n          key: \"querySourceFeatures\",\n          value: function querySourceFeatures(t, e) {\n            return this.style.querySourceFeatures(t, e);\n          }\n        }, {\n          key: \"setStyle\",\n          value: function setStyle(e, i) {\n            return !1 !== (i = t.extend({}, {\n              localIdeographFontFamily: this._localIdeographFontFamily\n            }, i)).diff && i.localIdeographFontFamily === this._localIdeographFontFamily && this.style && e ? (this._diffStyle(e, i), this) : (this._localIdeographFontFamily = i.localIdeographFontFamily, this._updateStyle(e, i));\n          }\n        }, {\n          key: \"setTransformRequest\",\n          value: function setTransformRequest(t) {\n            return this._requestManager.setTransformRequest(t), this;\n          }\n        }, {\n          key: \"_getUIString\",\n          value: function _getUIString(t) {\n            var e = this._locale[t];\n            if (null == e) throw new Error(\"Missing UI string '\".concat(t, \"'\"));\n            return e;\n          }\n        }, {\n          key: \"_updateStyle\",\n          value: function _updateStyle(t, e) {\n            return this.style && (this.style.setEventedParent(null), this.style._remove()), t ? (this.style = new ie(this, e || {}), this.style.setEventedParent(this, {\n              style: this.style\n            }), \"string\" == typeof t ? this.style.loadURL(t) : this.style.loadJSON(t), this) : (delete this.style, this);\n          }\n        }, {\n          key: \"_lazyInitEmptyStyle\",\n          value: function _lazyInitEmptyStyle() {\n            this.style || (this.style = new ie(this, {}), this.style.setEventedParent(this, {\n              style: this.style\n            }), this.style.loadEmpty());\n          }\n        }, {\n          key: \"_diffStyle\",\n          value: function _diffStyle(e, i) {\n            var _this91 = this;\n\n            if (\"string\" == typeof e) {\n              var _o133 = this._requestManager.transformRequest(e, t.ResourceType.Style);\n\n              t.getJSON(_o133, function (e, o) {\n                e ? _this91.fire(new t.ErrorEvent(e)) : o && _this91._updateDiff(o, i);\n              });\n            } else \"object\" == typeof e && this._updateDiff(e, i);\n          }\n        }, {\n          key: \"_updateDiff\",\n          value: function _updateDiff(e, i) {\n            try {\n              this.style.setState(e) && this._update(!0);\n            } catch (o) {\n              t.warnOnce(\"Unable to perform style diff: \".concat(o.message || o.error || o, \".  Rebuilding the style from scratch.\")), this._updateStyle(e, i);\n            }\n          }\n        }, {\n          key: \"getStyle\",\n          value: function getStyle() {\n            if (this.style) return this.style.serialize();\n          }\n        }, {\n          key: \"isStyleLoaded\",\n          value: function isStyleLoaded() {\n            return this.style ? this.style.loaded() : t.warnOnce(\"There is no style added to the map.\");\n          }\n        }, {\n          key: \"addSource\",\n          value: function addSource(t, e) {\n            return this._lazyInitEmptyStyle(), this.style.addSource(t, e), this._update(!0);\n          }\n        }, {\n          key: \"isSourceLoaded\",\n          value: function isSourceLoaded(e) {\n            var i = this.style && this.style.sourceCaches[e];\n            if (void 0 !== i) return i.loaded();\n            this.fire(new t.ErrorEvent(new Error(\"There is no source with ID '\".concat(e, \"'\"))));\n          }\n        }, {\n          key: \"areTilesLoaded\",\n          value: function areTilesLoaded() {\n            var t = this.style && this.style.sourceCaches;\n\n            for (var _e315 in t) {\n              var _i255 = t[_e315]._tiles;\n\n              for (var _t387 in _i255) {\n                var _e316 = _i255[_t387];\n                if (\"loaded\" !== _e316.state && \"errored\" !== _e316.state) return !1;\n              }\n            }\n\n            return !0;\n          }\n        }, {\n          key: \"addSourceType\",\n          value: function addSourceType(t, e, i) {\n            return this._lazyInitEmptyStyle(), this.style.addSourceType(t, e, i);\n          }\n        }, {\n          key: \"removeSource\",\n          value: function removeSource(t) {\n            return this.style.removeSource(t), this._update(!0);\n          }\n        }, {\n          key: \"getSource\",\n          value: function getSource(t) {\n            return this.style.getSource(t);\n          }\n        }, {\n          key: \"addImage\",\n          value: function addImage(e, i) {\n            var _ref130 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n                _ref130$pixelRatio = _ref130.pixelRatio,\n                o = _ref130$pixelRatio === void 0 ? 1 : _ref130$pixelRatio,\n                _ref130$sdf = _ref130.sdf,\n                a = _ref130$sdf === void 0 ? !1 : _ref130$sdf,\n                s = _ref130.stretchX,\n                r = _ref130.stretchY,\n                n = _ref130.content;\n\n            if (this._lazyInitEmptyStyle(), i instanceof HTMLImageElement || t.isImageBitmap(i)) {\n              var _t$exported$getImageD = t.exported.getImageData(i),\n                  _l53 = _t$exported$getImageD.width,\n                  _c38 = _t$exported$getImageD.height,\n                  _h31 = _t$exported$getImageD.data;\n\n              this.style.addImage(e, {\n                data: new t.RGBAImage({\n                  width: _l53,\n                  height: _c38\n                }, _h31),\n                pixelRatio: o,\n                stretchX: s,\n                stretchY: r,\n                content: n,\n                sdf: a,\n                version: 0\n              });\n            } else {\n              if (void 0 === i.width || void 0 === i.height) return this.fire(new t.ErrorEvent(new Error(\"Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));\n              {\n                var _l54 = i.width,\n                    _c39 = i.height,\n                    _h32 = i.data,\n                    _u41 = i;\n                this.style.addImage(e, {\n                  data: new t.RGBAImage({\n                    width: _l54,\n                    height: _c39\n                  }, new Uint8Array(_h32)),\n                  pixelRatio: o,\n                  stretchX: s,\n                  stretchY: r,\n                  content: n,\n                  sdf: a,\n                  version: 0,\n                  userImage: _u41\n                }), _u41.onAdd && _u41.onAdd(this, e);\n              }\n            }\n          }\n        }, {\n          key: \"updateImage\",\n          value: function updateImage(e, i) {\n            var o = this.style.getImage(e);\n            if (!o) return this.fire(new t.ErrorEvent(new Error(\"The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.\")));\n            var a = i instanceof HTMLImageElement || t.isImageBitmap(i) ? t.exported.getImageData(i) : i,\n                s = a.width,\n                r = a.height,\n                n = a.data;\n            if (void 0 === s || void 0 === r) return this.fire(new t.ErrorEvent(new Error(\"Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`\")));\n            if (s !== o.data.width || r !== o.data.height) return this.fire(new t.ErrorEvent(new Error(\"The width and height of the updated image must be that same as the previous version of the image\")));\n            var l = !(i instanceof HTMLImageElement || t.isImageBitmap(i));\n            o.data.replace(n, l), this.style.updateImage(e, o);\n          }\n        }, {\n          key: \"hasImage\",\n          value: function hasImage(e) {\n            return e ? !!this.style.getImage(e) : (this.fire(new t.ErrorEvent(new Error(\"Missing required image id\"))), !1);\n          }\n        }, {\n          key: \"removeImage\",\n          value: function removeImage(t) {\n            this.style.removeImage(t);\n          }\n        }, {\n          key: \"loadImage\",\n          value: function loadImage(e, i) {\n            t.getImage(this._requestManager.transformRequest(e, t.ResourceType.Image), i);\n          }\n        }, {\n          key: \"listImages\",\n          value: function listImages() {\n            return this.style.listImages();\n          }\n        }, {\n          key: \"addLayer\",\n          value: function addLayer(t, e) {\n            return this._lazyInitEmptyStyle(), this.style.addLayer(t, e), this._update(!0);\n          }\n        }, {\n          key: \"moveLayer\",\n          value: function moveLayer(t, e) {\n            return this.style.moveLayer(t, e), this._update(!0);\n          }\n        }, {\n          key: \"removeLayer\",\n          value: function removeLayer(t) {\n            return this.style.removeLayer(t), this._update(!0);\n          }\n        }, {\n          key: \"getLayer\",\n          value: function getLayer(t) {\n            return this.style.getLayer(t);\n          }\n        }, {\n          key: \"setLayerZoomRange\",\n          value: function setLayerZoomRange(t, e, i) {\n            return this.style.setLayerZoomRange(t, e, i), this._update(!0);\n          }\n        }, {\n          key: \"setFilter\",\n          value: function setFilter(t, e) {\n            var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n            return this.style.setFilter(t, e, i), this._update(!0);\n          }\n        }, {\n          key: \"getFilter\",\n          value: function getFilter(t) {\n            return this.style.getFilter(t);\n          }\n        }, {\n          key: \"setPaintProperty\",\n          value: function setPaintProperty(t, e, i) {\n            var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n            return this.style.setPaintProperty(t, e, i, o), this._update(!0);\n          }\n        }, {\n          key: \"getPaintProperty\",\n          value: function getPaintProperty(t, e) {\n            return this.style.getPaintProperty(t, e);\n          }\n        }, {\n          key: \"setLayoutProperty\",\n          value: function setLayoutProperty(t, e, i) {\n            var o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n            return this.style.setLayoutProperty(t, e, i, o), this._update(!0);\n          }\n        }, {\n          key: \"getLayoutProperty\",\n          value: function getLayoutProperty(t, e) {\n            return this.style.getLayoutProperty(t, e);\n          }\n        }, {\n          key: \"setLight\",\n          value: function setLight(t) {\n            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return this._lazyInitEmptyStyle(), this.style.setLight(t, e), this._update(!0);\n          }\n        }, {\n          key: \"getLight\",\n          value: function getLight() {\n            return this.style.getLight();\n          }\n        }, {\n          key: \"setFeatureState\",\n          value: function setFeatureState(t, e) {\n            return this.style.setFeatureState(t, e), this._update();\n          }\n        }, {\n          key: \"removeFeatureState\",\n          value: function removeFeatureState(t, e) {\n            return this.style.removeFeatureState(t, e), this._update();\n          }\n        }, {\n          key: \"getFeatureState\",\n          value: function getFeatureState(t) {\n            return this.style.getFeatureState(t);\n          }\n        }, {\n          key: \"getContainer\",\n          value: function getContainer() {\n            return this._container;\n          }\n        }, {\n          key: \"getCanvasContainer\",\n          value: function getCanvasContainer() {\n            return this._canvasContainer;\n          }\n        }, {\n          key: \"getCanvas\",\n          value: function getCanvas() {\n            return this._canvas;\n          }\n        }, {\n          key: \"_containerDimensions\",\n          value: function _containerDimensions() {\n            var t = 0,\n                e = 0;\n            return this._container && (t = this._container.clientWidth || 400, e = this._container.clientHeight || 300), [t, e];\n          }\n        }, {\n          key: \"_setupContainer\",\n          value: function _setupContainer() {\n            var t = this._container;\n            t.classList.add(\"maplibregl-map\", \"mapboxgl-map\");\n            var e = this._canvasContainer = s.create(\"div\", \"maplibregl-canvas-container mapboxgl-canvas-container\", t);\n            this._interactive && e.classList.add(\"maplibregl-interactive\", \"mapboxgl-interactive\"), this._canvas = s.create(\"canvas\", \"maplibregl-canvas mapboxgl-canvas\", e), this._canvas.addEventListener(\"webglcontextlost\", this._contextLost, !1), this._canvas.addEventListener(\"webglcontextrestored\", this._contextRestored, !1), this._canvas.setAttribute(\"tabindex\", \"0\"), this._canvas.setAttribute(\"aria-label\", \"Map\"), this._canvas.setAttribute(\"role\", \"region\");\n\n            var i = this._containerDimensions();\n\n            this._resizeCanvas(i[0], i[1], this.getPixelRatio());\n\n            var o = this._controlContainer = s.create(\"div\", \"maplibregl-control-container mapboxgl-control-container\", t),\n                a = this._controlPositions = {};\n            [\"top-left\", \"top-right\", \"bottom-left\", \"bottom-right\"].forEach(function (t) {\n              a[t] = s.create(\"div\", \"maplibregl-ctrl-\".concat(t, \" mapboxgl-ctrl-\").concat(t), o);\n            }), this._container.addEventListener(\"scroll\", this._onMapScroll, !1);\n          }\n        }, {\n          key: \"_resizeCanvas\",\n          value: function _resizeCanvas(t, e, i) {\n            this._canvas.width = i * t, this._canvas.height = i * e, this._canvas.style.width = \"\".concat(t, \"px\"), this._canvas.style.height = \"\".concat(e, \"px\");\n          }\n        }, {\n          key: \"_setupPainter\",\n          value: function _setupPainter() {\n            var i = t.extend({}, e.webGLContextAttributes, {\n              failIfMajorPerformanceCaveat: this._failIfMajorPerformanceCaveat,\n              preserveDrawingBuffer: this._preserveDrawingBuffer,\n              antialias: this._antialias || !1\n            }),\n                o = this._canvas.getContext(\"webgl\", i) || this._canvas.getContext(\"experimental-webgl\", i);\n\n            o ? (this.painter = new Ki(o, this.transform), t.exported$1.testSupport(o)) : this.fire(new t.ErrorEvent(new Error(\"Failed to initialize WebGL\")));\n          }\n        }, {\n          key: \"_contextLost\",\n          value: function _contextLost(e) {\n            e.preventDefault(), this._frame && (this._frame.cancel(), this._frame = null), this.fire(new t.Event(\"webglcontextlost\", {\n              originalEvent: e\n            }));\n          }\n        }, {\n          key: \"_contextRestored\",\n          value: function _contextRestored(e) {\n            this._setupPainter(), this.resize(), this._update(), this.fire(new t.Event(\"webglcontextrestored\", {\n              originalEvent: e\n            }));\n          }\n        }, {\n          key: \"_onMapScroll\",\n          value: function _onMapScroll(t) {\n            if (t.target === this._container) return this._container.scrollTop = 0, this._container.scrollLeft = 0, !1;\n          }\n        }, {\n          key: \"loaded\",\n          value: function loaded() {\n            return !this._styleDirty && !this._sourcesDirty && !!this.style && this.style.loaded();\n          }\n        }, {\n          key: \"_update\",\n          value: function _update(t) {\n            return this.style ? (this._styleDirty = this._styleDirty || t, this._sourcesDirty = !0, this.triggerRepaint(), this) : this;\n          }\n        }, {\n          key: \"_requestRenderFrame\",\n          value: function _requestRenderFrame(t) {\n            return this._update(), this._renderTaskQueue.add(t);\n          }\n        }, {\n          key: \"_cancelRenderFrame\",\n          value: function _cancelRenderFrame(t) {\n            this._renderTaskQueue.remove(t);\n          }\n        }, {\n          key: \"_render\",\n          value: function _render(e) {\n            var _this92 = this;\n\n            var i,\n                o = 0;\n            var a = this.painter.context.extTimerQuery;\n            if (this.listens(\"gpu-timing-frame\") && (i = a.createQueryEXT(), a.beginQueryEXT(a.TIME_ELAPSED_EXT, i), o = t.exported.now()), this.painter.context.setDirty(), this.painter.setBaseState(), this._renderTaskQueue.run(e), this._removed) return;\n            var s = !1;\n\n            if (this.style && this._styleDirty) {\n              this._styleDirty = !1;\n\n              var _e317 = this.transform.zoom,\n                  _i256 = t.exported.now();\n\n              this.style.zoomHistory.update(_e317, _i256);\n\n              var _o134 = new t.EvaluationParameters(_e317, {\n                now: _i256,\n                fadeDuration: this._fadeDuration,\n                zoomHistory: this.style.zoomHistory,\n                transition: this.style.getTransition()\n              }),\n                  _a133 = _o134.crossFadingFactor();\n\n              1 === _a133 && _a133 === this._crossFadingFactor || (s = !0, this._crossFadingFactor = _a133), this.style.update(_o134);\n            }\n\n            if (this.style && this._sourcesDirty && (this._sourcesDirty = !1, this.style._updateSources(this.transform)), this._placementDirty = this.style && this.style._updatePlacement(this.painter.transform, this.showCollisionBoxes, this._fadeDuration, this._crossSourceCollisions), this.painter.render(this.style, {\n              showTileBoundaries: this.showTileBoundaries,\n              showOverdrawInspector: this._showOverdrawInspector,\n              rotating: this.isRotating(),\n              zooming: this.isZooming(),\n              moving: this.isMoving(),\n              fadeDuration: this._fadeDuration,\n              showPadding: this.showPadding,\n              gpuTiming: !!this.listens(\"gpu-timing-layer\")\n            }), this.fire(new t.Event(\"render\")), this.loaded() && !this._loaded && (this._loaded = !0, t.PerformanceUtils.mark(t.PerformanceMarkers.load), this.fire(new t.Event(\"load\"))), this.style && (this.style.hasTransitions() || s) && (this._styleDirty = !0), this.style && !this._placementDirty && this.style._releaseSymbolFadeTiles(), this.listens(\"gpu-timing-frame\")) {\n              var _e318 = t.exported.now() - o;\n\n              a.endQueryEXT(a.TIME_ELAPSED_EXT, i), setTimeout(function () {\n                var o = a.getQueryObjectEXT(i, a.QUERY_RESULT_EXT) / 1e6;\n                a.deleteQueryEXT(i), _this92.fire(new t.Event(\"gpu-timing-frame\", {\n                  cpuTime: _e318,\n                  gpuTime: o\n                }));\n              }, 50);\n            }\n\n            if (this.listens(\"gpu-timing-layer\")) {\n              var _e319 = this.painter.collectGpuTimers();\n\n              setTimeout(function () {\n                var i = _this92.painter.queryGpuTimers(_e319);\n\n                _this92.fire(new t.Event(\"gpu-timing-layer\", {\n                  layerTimes: i\n                }));\n              }, 50);\n            }\n\n            var r = this._sourcesDirty || this._styleDirty || this._placementDirty;\n            return r || this._repaint ? this.triggerRepaint() : !this.isMoving() && this.loaded() && this.fire(new t.Event(\"idle\")), !this._loaded || this._fullyLoaded || r || (this._fullyLoaded = !0, t.PerformanceUtils.mark(t.PerformanceMarkers.fullLoad)), this;\n          }\n        }, {\n          key: \"redraw\",\n          value: function redraw() {\n            return this.style && (this._frame && (this._frame.cancel(), this._frame = null), this._render(0)), this;\n          }\n        }, {\n          key: \"remove\",\n          value: function remove() {\n            this._hash && this._hash.remove();\n\n            var _iterator219 = _createForOfIteratorHelper(this._controls),\n                _step219;\n\n            try {\n              for (_iterator219.s(); !(_step219 = _iterator219.n()).done;) {\n                var _t388 = _step219.value;\n\n                _t388.onRemove(this);\n              }\n            } catch (err) {\n              _iterator219.e(err);\n            } finally {\n              _iterator219.f();\n            }\n\n            this._controls = [], this._frame && (this._frame.cancel(), this._frame = null), this._renderTaskQueue.clear(), this.painter.destroy(), this.handlers.destroy(), delete this.handlers, this.setStyle(null), \"undefined\" != typeof window && (removeEventListener(\"resize\", this._onWindowResize, !1), removeEventListener(\"orientationchange\", this._onWindowResize, !1), removeEventListener(\"online\", this._onWindowOnline, !1));\n            var e = this.painter.context.gl.getExtension(\"WEBGL_lose_context\");\n            e && e.loseContext(), this._canvas.removeEventListener(\"webglcontextrestored\", this._contextRestored, !1), this._canvas.removeEventListener(\"webglcontextlost\", this._contextLost, !1), s.remove(this._canvasContainer), s.remove(this._controlContainer), this._container.classList.remove(\"maplibregl-map\", \"mapboxgl-map\"), t.PerformanceUtils.clearMetrics(), this._removed = !0, this.fire(new t.Event(\"remove\"));\n          }\n        }, {\n          key: \"triggerRepaint\",\n          value: function triggerRepaint() {\n            var _this93 = this;\n\n            this.style && !this._frame && (this._frame = t.exported.frame(function (e) {\n              t.PerformanceUtils.frame(e), _this93._frame = null, _this93._render(e);\n            }));\n          }\n        }, {\n          key: \"_onWindowOnline\",\n          value: function _onWindowOnline() {\n            this._update();\n          }\n        }, {\n          key: \"_onWindowResize\",\n          value: function _onWindowResize(t) {\n            this._trackResize && this.resize({\n              originalEvent: t\n            })._update();\n          }\n        }, {\n          key: \"_setCacheLimits\",\n          value: function _setCacheLimits(e, i) {\n            t.setCacheLimits(e, i);\n          }\n        }, {\n          key: \"showTileBoundaries\",\n          get: function get() {\n            return !!this._showTileBoundaries;\n          },\n          set: function set(t) {\n            this._showTileBoundaries !== t && (this._showTileBoundaries = t, this._update());\n          }\n        }, {\n          key: \"showPadding\",\n          get: function get() {\n            return !!this._showPadding;\n          },\n          set: function set(t) {\n            this._showPadding !== t && (this._showPadding = t, this._update());\n          }\n        }, {\n          key: \"showCollisionBoxes\",\n          get: function get() {\n            return !!this._showCollisionBoxes;\n          },\n          set: function set(t) {\n            this._showCollisionBoxes !== t && (this._showCollisionBoxes = t, t ? this.style._generateCollisionBoxes() : this._update());\n          }\n        }, {\n          key: \"showOverdrawInspector\",\n          get: function get() {\n            return !!this._showOverdrawInspector;\n          },\n          set: function set(t) {\n            this._showOverdrawInspector !== t && (this._showOverdrawInspector = t, this._update());\n          }\n        }, {\n          key: \"repaint\",\n          get: function get() {\n            return !!this._repaint;\n          },\n          set: function set(t) {\n            this._repaint !== t && (this._repaint = t, this.triggerRepaint());\n          }\n        }, {\n          key: \"vertices\",\n          get: function get() {\n            return !!this._vertices;\n          },\n          set: function set(t) {\n            this._vertices = t, this._update();\n          }\n        }]);\n\n        return Map;\n      }(Yo),\n      NavigationControl: /*#__PURE__*/function () {\n        function NavigationControl(e) {\n          var _this94 = this;\n\n          _classCallCheck(this, NavigationControl);\n\n          this.options = t.extend({}, oa, e), this._container = s.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), this._container.addEventListener(\"contextmenu\", function (t) {\n            return t.preventDefault();\n          }), this.options.showZoom && (t.bindAll([\"_setButtonTitle\", \"_updateZoomButtons\"], this), this._zoomInButton = this._createButton(\"maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in\", function (t) {\n            return _this94._map.zoomIn({}, {\n              originalEvent: t\n            });\n          }), s.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._zoomInButton).setAttribute(\"aria-hidden\", \"true\"), this._zoomOutButton = this._createButton(\"maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out\", function (t) {\n            return _this94._map.zoomOut({}, {\n              originalEvent: t\n            });\n          }), s.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._zoomOutButton).setAttribute(\"aria-hidden\", \"true\")), this.options.showCompass && (t.bindAll([\"_rotateCompassArrow\"], this), this._compass = this._createButton(\"maplibregl-ctrl-compass mapboxgl-ctrl-compass\", function (t) {\n            _this94.options.visualizePitch ? _this94._map.resetNorthPitch({}, {\n              originalEvent: t\n            }) : _this94._map.resetNorth({}, {\n              originalEvent: t\n            });\n          }), this._compassIcon = s.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._compass), this._compassIcon.setAttribute(\"aria-hidden\", \"true\"));\n        }\n\n        _createClass(NavigationControl, [{\n          key: \"_updateZoomButtons\",\n          value: function _updateZoomButtons() {\n            var t = this._map.getZoom(),\n                e = t === this._map.getMaxZoom(),\n                i = t === this._map.getMinZoom();\n\n            this._zoomInButton.disabled = e, this._zoomOutButton.disabled = i, this._zoomInButton.setAttribute(\"aria-disabled\", e.toString()), this._zoomOutButton.setAttribute(\"aria-disabled\", i.toString());\n          }\n        }, {\n          key: \"_rotateCompassArrow\",\n          value: function _rotateCompassArrow() {\n            var t = this.options.visualizePitch ? \"scale(\".concat(1 / Math.pow(Math.cos(this._map.transform.pitch * (Math.PI / 180)), .5), \") rotateX(\").concat(this._map.transform.pitch, \"deg) rotateZ(\").concat(this._map.transform.angle * (180 / Math.PI), \"deg)\") : \"rotate(\".concat(this._map.transform.angle * (180 / Math.PI), \"deg)\");\n            this._compassIcon.style.transform = t;\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            return this._map = t, this.options.showZoom && (this._setButtonTitle(this._zoomInButton, \"ZoomIn\"), this._setButtonTitle(this._zoomOutButton, \"ZoomOut\"), this._map.on(\"zoom\", this._updateZoomButtons), this._updateZoomButtons()), this.options.showCompass && (this._setButtonTitle(this._compass, \"ResetBearing\"), this.options.visualizePitch && this._map.on(\"pitch\", this._rotateCompassArrow), this._map.on(\"rotate\", this._rotateCompassArrow), this._rotateCompassArrow(), this._handler = new aa(this._map, this._compass, this.options.visualizePitch)), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            s.remove(this._container), this.options.showZoom && this._map.off(\"zoom\", this._updateZoomButtons), this.options.showCompass && (this.options.visualizePitch && this._map.off(\"pitch\", this._rotateCompassArrow), this._map.off(\"rotate\", this._rotateCompassArrow), this._handler.off(), delete this._handler), delete this._map;\n          }\n        }, {\n          key: \"_createButton\",\n          value: function _createButton(t, e) {\n            var i = s.create(\"button\", t, this._container);\n            return i.type = \"button\", i.addEventListener(\"click\", e), i;\n          }\n        }, {\n          key: \"_setButtonTitle\",\n          value: function _setButtonTitle(t, e) {\n            var i = this._map._getUIString(\"NavigationControl.\".concat(e));\n\n            t.title = i, t.setAttribute(\"aria-label\", i);\n          }\n        }]);\n\n        return NavigationControl;\n      }(),\n      GeolocateControl: /*#__PURE__*/function (_t$Evented11) {\n        _inherits(GeolocateControl, _t$Evented11);\n\n        function GeolocateControl(e) {\n          var _this95;\n\n          _classCallCheck(this, GeolocateControl);\n\n          _this95 = _possibleConstructorReturn(this, _getPrototypeOf(GeolocateControl).call(this)), _this95.options = t.extend({}, ca, e), t.bindAll([\"_onSuccess\", \"_onError\", \"_onZoom\", \"_finish\", \"_setupUI\", \"_updateCamera\", \"_updateMarker\"], _assertThisInitialized(_assertThisInitialized(_this95)));\n          return _this95;\n        }\n\n        _createClass(GeolocateControl, [{\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            var e;\n            return this._map = t, this._container = s.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), e = this._setupUI, void 0 !== ha ? e(ha) : void 0 !== window.navigator.permissions ? window.navigator.permissions.query({\n              name: \"geolocation\"\n            }).then(function (t) {\n              ha = \"denied\" !== t.state, e(ha);\n            }) : (ha = !!window.navigator.geolocation, e(ha)), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            void 0 !== this._geolocationWatchID && (window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0), this.options.showUserLocation && this._userLocationDotMarker && this._userLocationDotMarker.remove(), this.options.showAccuracyCircle && this._accuracyCircleMarker && this._accuracyCircleMarker.remove(), s.remove(this._container), this._map.off(\"zoom\", this._onZoom), this._map = void 0, ua = 0, da = !1;\n          }\n        }, {\n          key: \"_isOutOfMapMaxBounds\",\n          value: function _isOutOfMapMaxBounds(t) {\n            var e = this._map.getMaxBounds(),\n                i = t.coords;\n\n            return e && (i.longitude < e.getWest() || i.longitude > e.getEast() || i.latitude < e.getSouth() || i.latitude > e.getNorth());\n          }\n        }, {\n          key: \"_setErrorState\",\n          value: function _setErrorState() {\n            switch (this._watchState) {\n              case \"WAITING_ACTIVE\":\n                this._watchState = \"ACTIVE_ERROR\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\");\n                break;\n\n              case \"ACTIVE_LOCK\":\n                this._watchState = \"ACTIVE_ERROR\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\");\n                break;\n\n              case \"BACKGROUND\":\n                this._watchState = \"BACKGROUND_ERROR\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\");\n            }\n          }\n        }, {\n          key: \"_onSuccess\",\n          value: function _onSuccess(e) {\n            if (this._map) {\n              if (this._isOutOfMapMaxBounds(e)) return this._setErrorState(), this.fire(new t.Event(\"outofmaxbounds\", e)), this._updateMarker(), void this._finish();\n              if (this.options.trackUserLocation) switch (this._lastKnownPosition = e, this._watchState) {\n                case \"WAITING_ACTIVE\":\n                case \"ACTIVE_LOCK\":\n                case \"ACTIVE_ERROR\":\n                  this._watchState = \"ACTIVE_LOCK\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\");\n                  break;\n\n                case \"BACKGROUND\":\n                case \"BACKGROUND_ERROR\":\n                  this._watchState = \"BACKGROUND\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\");\n              }\n              this.options.showUserLocation && \"OFF\" !== this._watchState && this._updateMarker(e), this.options.trackUserLocation && \"ACTIVE_LOCK\" !== this._watchState || this._updateCamera(e), this.options.showUserLocation && this._dotElement.classList.remove(\"maplibregl-user-location-dot-stale\", \"mapboxgl-user-location-dot-stale\"), this.fire(new t.Event(\"geolocate\", e)), this._finish();\n            }\n          }\n        }, {\n          key: \"_updateCamera\",\n          value: function _updateCamera(e) {\n            var i = new t.LngLat(e.coords.longitude, e.coords.latitude),\n                o = e.coords.accuracy,\n                a = this._map.getBearing(),\n                s = t.extend({\n              bearing: a\n            }, this.options.fitBoundsOptions);\n\n            this._map.fitBounds(i.toBounds(o), s, {\n              geolocateSource: !0\n            });\n          }\n        }, {\n          key: \"_updateMarker\",\n          value: function _updateMarker(e) {\n            if (e) {\n              var _i257 = new t.LngLat(e.coords.longitude, e.coords.latitude);\n\n              this._accuracyCircleMarker.setLngLat(_i257).addTo(this._map), this._userLocationDotMarker.setLngLat(_i257).addTo(this._map), this._accuracy = e.coords.accuracy, this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();\n            } else this._userLocationDotMarker.remove(), this._accuracyCircleMarker.remove();\n          }\n        }, {\n          key: \"_updateCircleRadius\",\n          value: function _updateCircleRadius() {\n            var t = this._map._container.clientHeight / 2,\n                e = this._map.unproject([0, t]),\n                i = this._map.unproject([1, t]),\n                o = e.distanceTo(i),\n                a = Math.ceil(2 * this._accuracy / o);\n\n            this._circleElement.style.width = \"\".concat(a, \"px\"), this._circleElement.style.height = \"\".concat(a, \"px\");\n          }\n        }, {\n          key: \"_onZoom\",\n          value: function _onZoom() {\n            this.options.showUserLocation && this.options.showAccuracyCircle && this._updateCircleRadius();\n          }\n        }, {\n          key: \"_onError\",\n          value: function _onError(e) {\n            if (this._map) {\n              if (this.options.trackUserLocation) if (1 === e.code) {\n                this._watchState = \"OFF\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this._geolocateButton.disabled = !0;\n\n                var _t389 = this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");\n\n                this._geolocateButton.title = _t389, this._geolocateButton.setAttribute(\"aria-label\", _t389), void 0 !== this._geolocationWatchID && this._clearWatch();\n              } else {\n                if (3 === e.code && da) return;\n\n                this._setErrorState();\n              }\n              \"OFF\" !== this._watchState && this.options.showUserLocation && this._dotElement.classList.add(\"maplibregl-user-location-dot-stale\", \"mapboxgl-user-location-dot-stale\"), this.fire(new t.Event(\"error\", e)), this._finish();\n            }\n          }\n        }, {\n          key: \"_finish\",\n          value: function _finish() {\n            this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = void 0;\n          }\n        }, {\n          key: \"_setupUI\",\n          value: function _setupUI(e) {\n            var _this96 = this;\n\n            if (this._container.addEventListener(\"contextmenu\", function (t) {\n              return t.preventDefault();\n            }), this._geolocateButton = s.create(\"button\", \"maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate\", this._container), s.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", this._geolocateButton).setAttribute(\"aria-hidden\", \"true\"), this._geolocateButton.type = \"button\", !1 === e) {\n              t.warnOnce(\"Geolocation support is not available so the GeolocateControl will be disabled.\");\n\n              var _e320 = this._map._getUIString(\"GeolocateControl.LocationNotAvailable\");\n\n              this._geolocateButton.disabled = !0, this._geolocateButton.title = _e320, this._geolocateButton.setAttribute(\"aria-label\", _e320);\n            } else {\n              var _t390 = this._map._getUIString(\"GeolocateControl.FindMyLocation\");\n\n              this._geolocateButton.title = _t390, this._geolocateButton.setAttribute(\"aria-label\", _t390);\n            }\n\n            this.options.trackUserLocation && (this._geolocateButton.setAttribute(\"aria-pressed\", \"false\"), this._watchState = \"OFF\"), this.options.showUserLocation && (this._dotElement = s.create(\"div\", \"maplibregl-user-location-dot mapboxgl-user-location-dot\"), this._userLocationDotMarker = new la(this._dotElement), this._circleElement = s.create(\"div\", \"maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle\"), this._accuracyCircleMarker = new la({\n              element: this._circleElement,\n              pitchAlignment: \"map\"\n            }), this.options.trackUserLocation && (this._watchState = \"OFF\"), this._map.on(\"zoom\", this._onZoom)), this._geolocateButton.addEventListener(\"click\", this.trigger.bind(this)), this._setup = !0, this.options.trackUserLocation && this._map.on(\"movestart\", function (e) {\n              e.geolocateSource || \"ACTIVE_LOCK\" !== _this96._watchState || e.originalEvent && \"resize\" === e.originalEvent.type || (_this96._watchState = \"BACKGROUND\", _this96._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), _this96._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), _this96.fire(new t.Event(\"trackuserlocationend\")));\n            });\n          }\n        }, {\n          key: \"trigger\",\n          value: function trigger() {\n            if (!this._setup) return t.warnOnce(\"Geolocate control triggered before added to a map\"), !1;\n\n            if (this.options.trackUserLocation) {\n              switch (this._watchState) {\n                case \"OFF\":\n                  this._watchState = \"WAITING_ACTIVE\", this.fire(new t.Event(\"trackuserlocationstart\"));\n                  break;\n\n                case \"WAITING_ACTIVE\":\n                case \"ACTIVE_LOCK\":\n                case \"ACTIVE_ERROR\":\n                case \"BACKGROUND_ERROR\":\n                  ua--, da = !1, this._watchState = \"OFF\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-active-error\", \"mapboxgl-ctrl-geolocate-active-error\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background-error\", \"mapboxgl-ctrl-geolocate-background-error\"), this.fire(new t.Event(\"trackuserlocationend\"));\n                  break;\n\n                case \"BACKGROUND\":\n                  this._watchState = \"ACTIVE_LOCK\", this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-background\", \"mapboxgl-ctrl-geolocate-background\"), this._lastKnownPosition && this._updateCamera(this._lastKnownPosition), this.fire(new t.Event(\"trackuserlocationstart\"));\n              }\n\n              switch (this._watchState) {\n                case \"WAITING_ACTIVE\":\n                  this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\");\n                  break;\n\n                case \"ACTIVE_LOCK\":\n                  this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-active\", \"mapboxgl-ctrl-geolocate-active\");\n\n              }\n\n              if (\"OFF\" === this._watchState && void 0 !== this._geolocationWatchID) this._clearWatch();else if (void 0 === this._geolocationWatchID) {\n                var _t391;\n\n                this._geolocateButton.classList.add(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.setAttribute(\"aria-pressed\", \"true\"), ua++, ua > 1 ? (_t391 = {\n                  maximumAge: 6e5,\n                  timeout: 0\n                }, da = !0) : (_t391 = this.options.positionOptions, da = !1), this._geolocationWatchID = window.navigator.geolocation.watchPosition(this._onSuccess, this._onError, _t391);\n              }\n            } else window.navigator.geolocation.getCurrentPosition(this._onSuccess, this._onError, this.options.positionOptions), this._timeoutId = setTimeout(this._finish, 1e4);\n\n            return !0;\n          }\n        }, {\n          key: \"_clearWatch\",\n          value: function _clearWatch() {\n            window.navigator.geolocation.clearWatch(this._geolocationWatchID), this._geolocationWatchID = void 0, this._geolocateButton.classList.remove(\"maplibregl-ctrl-geolocate-waiting\", \"mapboxgl-ctrl-geolocate-waiting\"), this._geolocateButton.setAttribute(\"aria-pressed\", \"false\"), this.options.showUserLocation && this._updateMarker(null);\n          }\n        }]);\n\n        return GeolocateControl;\n      }(t.Evented),\n      AttributionControl: Jo,\n      LogoControl: Qo,\n      ScaleControl: /*#__PURE__*/function () {\n        function ScaleControl(e) {\n          _classCallCheck(this, ScaleControl);\n\n          this.options = t.extend({}, ma, e), t.bindAll([\"_onMove\", \"setUnit\"], this);\n        }\n\n        _createClass(ScaleControl, [{\n          key: \"getDefaultPosition\",\n          value: function getDefaultPosition() {\n            return \"bottom-left\";\n          }\n        }, {\n          key: \"_onMove\",\n          value: function _onMove() {\n            _a(this._map, this._container, this.options);\n          }\n        }, {\n          key: \"onAdd\",\n          value: function onAdd(t) {\n            return this._map = t, this._container = s.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale\", t.getContainer()), this._map.on(\"move\", this._onMove), this._onMove(), this._container;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            s.remove(this._container), this._map.off(\"move\", this._onMove), this._map = void 0;\n          }\n        }, {\n          key: \"setUnit\",\n          value: function setUnit(t) {\n            this.options.unit = t, _a(this._map, this._container, this.options);\n          }\n        }]);\n\n        return ScaleControl;\n      }(),\n      FullscreenControl: /*#__PURE__*/function () {\n        function FullscreenControl(e) {\n          _classCallCheck(this, FullscreenControl);\n\n          this._fullscreen = !1, e && e.container && (e.container instanceof HTMLElement ? this._container = e.container : t.warnOnce(\"Full screen control 'container' must be a DOM element.\")), t.bindAll([\"_onClickFullscreen\", \"_changeIcon\"], this), \"onfullscreenchange\" in document ? this._fullscreenchange = \"fullscreenchange\" : \"onmozfullscreenchange\" in document ? this._fullscreenchange = \"mozfullscreenchange\" : \"onwebkitfullscreenchange\" in document ? this._fullscreenchange = \"webkitfullscreenchange\" : \"onmsfullscreenchange\" in document && (this._fullscreenchange = \"MSFullscreenChange\");\n        }\n\n        _createClass(FullscreenControl, [{\n          key: \"onAdd\",\n          value: function onAdd(e) {\n            return this._map = e, this._container || (this._container = this._map.getContainer()), this._controlContainer = s.create(\"div\", \"maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group\"), this._checkFullscreenSupport() ? this._setupUI() : (this._controlContainer.style.display = \"none\", t.warnOnce(\"This device does not support fullscreen mode.\")), this._controlContainer;\n          }\n        }, {\n          key: \"onRemove\",\n          value: function onRemove() {\n            s.remove(this._controlContainer), this._map = null, window.document.removeEventListener(this._fullscreenchange, this._changeIcon);\n          }\n        }, {\n          key: \"_checkFullscreenSupport\",\n          value: function _checkFullscreenSupport() {\n            return !!(document.fullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled || document.webkitFullscreenEnabled);\n          }\n        }, {\n          key: \"_setupUI\",\n          value: function _setupUI() {\n            var t = this._fullscreenButton = s.create(\"button\", \"maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen\", this._controlContainer);\n            s.create(\"span\", \"maplibregl-ctrl-icon mapboxgl-ctrl-icon\", t).setAttribute(\"aria-hidden\", \"true\"), t.type = \"button\", this._updateTitle(), this._fullscreenButton.addEventListener(\"click\", this._onClickFullscreen), window.document.addEventListener(this._fullscreenchange, this._changeIcon);\n          }\n        }, {\n          key: \"_updateTitle\",\n          value: function _updateTitle() {\n            var t = this._getTitle();\n\n            this._fullscreenButton.setAttribute(\"aria-label\", t), this._fullscreenButton.title = t;\n          }\n        }, {\n          key: \"_getTitle\",\n          value: function _getTitle() {\n            return this._map._getUIString(this._isFullscreen() ? \"FullscreenControl.Exit\" : \"FullscreenControl.Enter\");\n          }\n        }, {\n          key: \"_isFullscreen\",\n          value: function _isFullscreen() {\n            return this._fullscreen;\n          }\n        }, {\n          key: \"_changeIcon\",\n          value: function _changeIcon() {\n            (window.document.fullscreenElement || window.document.mozFullScreenElement || window.document.webkitFullscreenElement || window.document.msFullscreenElement) === this._container !== this._fullscreen && (this._fullscreen = !this._fullscreen, this._fullscreenButton.classList.toggle(\"maplibregl-ctrl-shrink\"), this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-shrink\"), this._fullscreenButton.classList.toggle(\"maplibregl-ctrl-fullscreen\"), this._fullscreenButton.classList.toggle(\"mapboxgl-ctrl-fullscreen\"), this._updateTitle());\n          }\n        }, {\n          key: \"_onClickFullscreen\",\n          value: function _onClickFullscreen() {\n            this._isFullscreen() ? window.document.exitFullscreen ? window.document.exitFullscreen() : window.document.mozCancelFullScreen ? window.document.mozCancelFullScreen() : window.document.msExitFullscreen ? window.document.msExitFullscreen() : window.document.webkitCancelFullScreen && window.document.webkitCancelFullScreen() : this._container.requestFullscreen ? this._container.requestFullscreen() : this._container.mozRequestFullScreen ? this._container.mozRequestFullScreen() : this._container.msRequestFullscreen ? this._container.msRequestFullscreen() : this._container.webkitRequestFullscreen && this._container.webkitRequestFullscreen();\n          }\n        }]);\n\n        return FullscreenControl;\n      }(),\n      Popup: /*#__PURE__*/function (_t$Evented12) {\n        _inherits(Popup, _t$Evented12);\n\n        function Popup(e) {\n          var _this97;\n\n          _classCallCheck(this, Popup);\n\n          _this97 = _possibleConstructorReturn(this, _getPrototypeOf(Popup).call(this)), _this97.options = t.extend(Object.create(fa), e), t.bindAll([\"_update\", \"_onClose\", \"remove\", \"_onMouseMove\", \"_onMouseUp\", \"_onDrag\"], _assertThisInitialized(_assertThisInitialized(_this97)));\n          return _this97;\n        }\n\n        _createClass(Popup, [{\n          key: \"addTo\",\n          value: function addTo(e) {\n            return this._map && this.remove(), this._map = e, this.options.closeOnClick && this._map.on(\"click\", this._onClose), this.options.closeOnMove && this._map.on(\"move\", this._onClose), this._map.on(\"remove\", this.remove), this._update(), this._focusFirstElement(), this._trackPointer ? (this._map.on(\"mousemove\", this._onMouseMove), this._map.on(\"mouseup\", this._onMouseUp), this._container && this._container.classList.add(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.add(\"maplibregl-track-pointer\", \"mapboxgl-track-pointer\")) : this._map.on(\"move\", this._update), this.fire(new t.Event(\"open\")), this;\n          }\n        }, {\n          key: \"isOpen\",\n          value: function isOpen() {\n            return !!this._map;\n          }\n        }, {\n          key: \"remove\",\n          value: function remove() {\n            return this._content && s.remove(this._content), this._container && (s.remove(this._container), delete this._container), this._map && (this._map.off(\"move\", this._update), this._map.off(\"move\", this._onClose), this._map.off(\"click\", this._onClose), this._map.off(\"remove\", this.remove), this._map.off(\"mousemove\", this._onMouseMove), this._map.off(\"mouseup\", this._onMouseUp), this._map.off(\"drag\", this._onDrag), delete this._map), this.fire(new t.Event(\"close\")), this;\n          }\n        }, {\n          key: \"getLngLat\",\n          value: function getLngLat() {\n            return this._lngLat;\n          }\n        }, {\n          key: \"setLngLat\",\n          value: function setLngLat(e) {\n            return this._lngLat = t.LngLat.convert(e), this._pos = null, this._trackPointer = !1, this._update(), this._map && (this._map.on(\"move\", this._update), this._map.off(\"mousemove\", this._onMouseMove), this._container && this._container.classList.remove(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.remove(\"maplibregl-track-pointer\", \"mapboxgl-track-pointer\")), this;\n          }\n        }, {\n          key: \"trackPointer\",\n          value: function trackPointer() {\n            return this._trackPointer = !0, this._pos = null, this._update(), this._map && (this._map.off(\"move\", this._update), this._map.on(\"mousemove\", this._onMouseMove), this._map.on(\"drag\", this._onDrag), this._container && this._container.classList.add(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\"), this._map._canvasContainer.classList.add(\"maplibregl-track-pointer\", \"mapboxgl-track-pointer\")), this;\n          }\n        }, {\n          key: \"getElement\",\n          value: function getElement() {\n            return this._container;\n          }\n        }, {\n          key: \"setText\",\n          value: function setText(t) {\n            return this.setDOMContent(document.createTextNode(t));\n          }\n        }, {\n          key: \"setHTML\",\n          value: function setHTML(t) {\n            var e = document.createDocumentFragment(),\n                i = document.createElement(\"body\");\n            var o;\n\n            for (i.innerHTML = t; o = i.firstChild, o;) {\n              e.appendChild(o);\n            }\n\n            return this.setDOMContent(e);\n          }\n        }, {\n          key: \"getMaxWidth\",\n          value: function getMaxWidth() {\n            return this._container && this._container.style.maxWidth;\n          }\n        }, {\n          key: \"setMaxWidth\",\n          value: function setMaxWidth(t) {\n            return this.options.maxWidth = t, this._update(), this;\n          }\n        }, {\n          key: \"setDOMContent\",\n          value: function setDOMContent(t) {\n            if (this._content) for (; this._content.hasChildNodes();) {\n              this._content.firstChild && this._content.removeChild(this._content.firstChild);\n            } else this._content = s.create(\"div\", \"maplibregl-popup-content mapboxgl-popup-content\", this._container);\n            return this._content.appendChild(t), this._createCloseButton(), this._update(), this._focusFirstElement(), this;\n          }\n        }, {\n          key: \"addClassName\",\n          value: function addClassName(t) {\n            this._container && this._container.classList.add(t);\n          }\n        }, {\n          key: \"removeClassName\",\n          value: function removeClassName(t) {\n            this._container && this._container.classList.remove(t);\n          }\n        }, {\n          key: \"setOffset\",\n          value: function setOffset(t) {\n            return this.options.offset = t, this._update(), this;\n          }\n        }, {\n          key: \"toggleClassName\",\n          value: function toggleClassName(t) {\n            if (this._container) return this._container.classList.toggle(t);\n          }\n        }, {\n          key: \"_createCloseButton\",\n          value: function _createCloseButton() {\n            this.options.closeButton && (this._closeButton = s.create(\"button\", \"maplibregl-popup-close-button mapboxgl-popup-close-button\", this._content), this._closeButton.type = \"button\", this._closeButton.setAttribute(\"aria-label\", \"Close popup\"), this._closeButton.innerHTML = \"&#215;\", this._closeButton.addEventListener(\"click\", this._onClose));\n          }\n        }, {\n          key: \"_onMouseUp\",\n          value: function _onMouseUp(t) {\n            this._update(t.point);\n          }\n        }, {\n          key: \"_onMouseMove\",\n          value: function _onMouseMove(t) {\n            this._update(t.point);\n          }\n        }, {\n          key: \"_onDrag\",\n          value: function _onDrag(t) {\n            this._update(t.point);\n          }\n        }, {\n          key: \"_update\",\n          value: function _update(t) {\n            var _this98 = this;\n\n            if (!this._map || !this._lngLat && !this._trackPointer || !this._content) return;\n            if (this._container || (this._container = s.create(\"div\", \"maplibregl-popup mapboxgl-popup\", this._map.getContainer()), this._tip = s.create(\"div\", \"maplibregl-popup-tip mapboxgl-popup-tip\", this._container), this._container.appendChild(this._content), this.options.className && this.options.className.split(\" \").forEach(function (t) {\n              return _this98._container.classList.add(t);\n            }), this._trackPointer && this._container.classList.add(\"maplibregl-popup-track-pointer\", \"mapboxgl-popup-track-pointer\")), this.options.maxWidth && this._container.style.maxWidth !== this.options.maxWidth && (this._container.style.maxWidth = this.options.maxWidth), this._map.transform.renderWorldCopies && !this._trackPointer && (this._lngLat = sa(this._lngLat, this._pos, this._map.transform)), this._trackPointer && !t) return;\n            var e = this._pos = this._trackPointer && t ? t : this._map.project(this._lngLat);\n            var i = this.options.anchor;\n            var o = xa(this.options.offset);\n\n            if (!i) {\n              var _t392 = this._container.offsetWidth,\n                  _a134 = this._container.offsetHeight;\n\n              var _s130;\n\n              _s130 = e.y + o.bottom.y < _a134 ? [\"top\"] : e.y > this._map.transform.height - _a134 ? [\"bottom\"] : [], e.x < _t392 / 2 ? _s130.push(\"left\") : e.x > this._map.transform.width - _t392 / 2 && _s130.push(\"right\"), i = 0 === _s130.length ? \"bottom\" : _s130.join(\"-\");\n            }\n\n            var a = e.add(o[i]).round();\n            s.setTransform(this._container, \"\".concat(ra[i], \" translate(\").concat(a.x, \"px,\").concat(a.y, \"px)\")), na(this._container, i, \"popup\");\n          }\n        }, {\n          key: \"_focusFirstElement\",\n          value: function _focusFirstElement() {\n            if (!this.options.focusAfterOpen || !this._container) return;\n\n            var t = this._container.querySelector(ga);\n\n            t && t.focus();\n          }\n        }, {\n          key: \"_onClose\",\n          value: function _onClose() {\n            this.remove();\n          }\n        }]);\n\n        return Popup;\n      }(t.Evented),\n      Marker: la,\n      Style: ie,\n      LngLat: t.LngLat,\n      LngLatBounds: t.LngLatBounds,\n      Point: t.pointGeometry,\n      MercatorCoordinate: t.MercatorCoordinate,\n      Evented: t.Evented,\n      AJAXError: t.AJAXError,\n      config: t.config,\n      CanvasSource: R,\n      GeoJSONSource: D,\n      ImageSource: M,\n      RasterDEMTileSource: z,\n      RasterTileSource: C,\n      VectorTileSource: S,\n      VideoSource: L,\n      prewarm: function prewarm() {\n        H().acquire(j);\n      },\n      clearPrewarmedResources: function clearPrewarmedResources() {\n        var t = X;\n        t && (t.isPreloaded() && 1 === t.numActive() ? (t.release(j), X = null) : console.warn(\"Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()\"));\n      },\n\n      get workerCount() {\n        return $.workerCount;\n      },\n\n      set workerCount(t) {\n        $.workerCount = t;\n      },\n\n      get maxParallelImageRequests() {\n        return t.config.MAX_PARALLEL_IMAGE_REQUESTS;\n      },\n\n      set maxParallelImageRequests(e) {\n        t.config.MAX_PARALLEL_IMAGE_REQUESTS = e;\n      },\n\n      clearStorage: function clearStorage(e) {\n        t.clearTileCache(e);\n      },\n      workerUrl: \"\",\n      addProtocol: function addProtocol(e, i) {\n        t.config.REGISTERED_PROTOCOLS[e] = i;\n      },\n      removeProtocol: function removeProtocol(e) {\n        delete t.config.REGISTERED_PROTOCOLS[e];\n      }\n    };\n    return Ko.extend(va, {\n      isSafari: t.isSafari,\n      getPerformanceMetrics: t.PerformanceUtils.getPerformanceMetrics\n    }), va;\n  }); //\n\n  var maplibregl$1 = maplibregl;\n  return maplibregl$1;\n});","map":null,"metadata":{},"sourceType":"script"}