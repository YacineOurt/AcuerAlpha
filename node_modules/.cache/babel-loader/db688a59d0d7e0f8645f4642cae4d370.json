{"ast":null,"code":"import _defineProperty from \"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/yacine/Pro/alpha/AcuerApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useState, useCallback, useMemo, useContext } from 'react';\nimport { MapContext } from './map';\nexport var MountedMapsContext = React.createContext(null);\nexport var MapProvider = function MapProvider(props) {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      maps = _useState2[0],\n      setMaps = _useState2[1];\n\n  var onMapMount = useCallback(function (map) {\n    var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n    setMaps(function (currMaps) {\n      if (id === 'current') {\n        throw new Error(\"'current' cannot be used as map id\");\n      }\n\n      if (currMaps[id]) {\n        throw new Error(\"Multiple maps with the same id: \".concat(id));\n      }\n\n      return _objectSpread({}, currMaps, _defineProperty({}, id, map));\n    });\n  }, []);\n  var onMapUnmount = useCallback(function () {\n    var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    setMaps(function (currMaps) {\n      if (currMaps[id]) {\n        var nextMaps = _objectSpread({}, currMaps);\n\n        delete nextMaps[id];\n        return nextMaps;\n      }\n\n      return currMaps;\n    });\n  }, []);\n  return React.createElement(MountedMapsContext.Provider, {\n    value: {\n      maps: maps,\n      onMapMount: onMapMount,\n      onMapUnmount: onMapUnmount\n    }\n  }, props.children);\n};\nexport function useMap() {\n  var _a;\n\n  var maps = (_a = useContext(MountedMapsContext)) === null || _a === void 0 ? void 0 : _a.maps;\n  var currentMap = useContext(MapContext);\n  var mapsWithCurrent = useMemo(function () {\n    return _objectSpread({}, maps, {\n      current: currentMap === null || currentMap === void 0 ? void 0 : currentMap.map\n    });\n  }, [maps, currentMap]);\n  return mapsWithCurrent;\n}","map":null,"metadata":{},"sourceType":"module"}